<!doctype html>
<html ⚡ lang="en">

<head>
  <meta charset="utf-8">
  <title>⚡️ AMP tests ⚡️</title>
  <link rel="canonical" href="localhost">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">

  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-consent" src="https://cdn.ampproject.org/v0/amp-consent-0.1.js"></script>
  <script async custom-element="amp-fit-text" src="https://cdn.ampproject.org/v0/amp-fit-text-0.1.js"></script>
  <script type="text/javascript">
    (self.AMP = self.AMP || []).push(function(AMP) {
      AMP.toggleExperiment('amp-consent-granular-consent', true);
    });
  </script>
  <style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>

  <style amp-custom>
    #main {
      max-width: 600px;
      padding: 10px;
      font-family: Roboto, Arial, Helvetica, sans-serif;
      color: #333;
      font-size: 16px;
    }

    amp-consent {
      font-size: 14px;
      bottom: 25%;
      left: 5%;
      width: 90%;
      max-width: 550px;
    }

    label {
      display: block;
    }

    label input {
      margin-left: 12px;
    }

    button {
      margin-top: 15px;
      margin-right: 5px;
    }

    #consent-dialog {
      border: 1px dashed;
      padding: 10px;
      background-color: #e0f0ffc0;
    }
    
    #reprompt {
      position: fixed;
      bottom: 0;
      left: 0;
      padding: 5px;
      background-color: blue;
      color: #ddd;
      width: 100%;
      max-width: 600px;
      text-align: center;
    }

    #marketing-content {
      color: blue;
    }

    #conversion-content {
      color: green;
    }

    #analytics-content {
      color: orange;
    }
    
  </style>
</head>

<body>
  <div id="main">
    <amp-consent layout="nodisplay" id="siteConsent">
      <script type="application/json">
        {
          "consentInstanceId": "consent1",
          "consentRequired": true,
          "promptUI": "consent-dialog",
          "postPromptUI": "reprompt",        
          "purposeConsentRequired": ["purpose-marketing", "purpose-conversion", "purpose-analytics"]
        }
      </script>
      <div id="consent-dialog">
        <h3>Your privacy</h3>
        <p>
          When you visit our website, we'd like to use a few features that enhance your browsing experience.
          But it's up to you! You can allow us to improve and personalize your experience to the degree you desire.
          Please choose whether you wish to allow the following:
        </p>
        <div class="choices">
          <label for="consent-purpose-marketing">
            <input 
              id="consent-purpose-marketing"
              type="checkbox"
              on="change:siteConsent.setPurpose(purpose-marketing=event.checked)"
            >
            Marketing cookies
          </label>
          <label for="consent-purpose-conversion">
            <input 
              id="consent-purpose-conversion"
              type="checkbox"
              on="change:siteConsent.setPurpose(purpose-conversion=event.checked)"
            >
            Conversion tracking cookies
          </label>
          <label for="consent-purpose-analytics">
            <input 
              id="consent-purpose-analytics"
              type="checkbox"
              on="change:siteConsent.setPurpose(purpose-analytics=event.checked)"
            >
            Analytics
          </label>
          <button on="tap:siteConsent.accept(purposeConsentDefault=false)">
            Save
          </button>
          <button on="tap:siteConsent.dismiss">
            Dismiss
          </button>
        </div>
        <p>
          Click "Save" to save your choices, approving certain consent types.
        </p>
        <p>
          Click "Dismiss" to get rid of this dialog box without approving anything.
        </p>
        <p>
          Note that we're requiring you to make a choice for each of these three consent types.
          If you don't approve them all, this dialog will pop up each time you reload the page.
        </p>
        <p>
          Speaking of which, we won't act on your consent choices until you reload this page.
        </p>
      </div>
      <div id="reprompt">
        Do you want to make your consent choices again?
        <button on="tap:siteConsent.prompt">I do!</button>
      </div>

    </amp-consent>

    <h2>This is my webpage</h2>
    <p>It contains all sorts of content.</p>
    <p>Some of it is amazing. But most of it is extremely amazing.</p>
    <p>They say "content is king". But who are they? Monarchists?
       And why would content be gendered in the first place?
    </p>
    <p>
       The true goal of this astonishing content is to use up a bunch of space
       so that the consent dialog has a chance of popping up over it.
    </p>
    <p>
       Really, it will look better if you view this in mobile emulation mode.
    </p>
    <amp-fit-text id="marketing-content" width="300" height="100" layout="fixed"
                  data-block-on-consent-purposes="purpose-marketing">
      I'm shown if you allow marketing cookies.
    </amp-fit-text>
    <amp-fit-text id="conversion-content" width="300" height="100" layout="fixed"
                  data-block-on-consent-purposes="purpose-conversion">
      I'm shown if you allow conversion cookies.
    </amp-fit-text>
    <amp-fit-text id="analytics-content" width="300" height="100" layout="fixed"
                  data-block-on-consent-purposes="purpose-analytics">
      I'm shown if you allow analytics cookies.
    </amp-fit-text>
  </div>
</body>
</html>
