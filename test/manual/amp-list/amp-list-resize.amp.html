<!doctype html>
<html âš¡>
<head>
  <meta charset="utf-8">
  <title>AMP #0</title>
  <link rel="canonical" href="amps.html" >
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
  <link href='https://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
  <style amp-custom>
    body {
      font-family: 'Questrial', Arial;
    }
    article {
      display: block;
      margin: 8px;
    }

    amp-list {
      border: 1px solid green;
    }

    [overflow] {
      background: gray;
      color: #fff;
      cursor: pointer;
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      z-index: 2;
      padding: 16px;
    }

    .story-entry {
      padding: 40px;
      border-bottom: 1px solid green;
    }

    .split {
      height: 360px;
    }

    .list {
      height: 120px;
    }

    .grid {
      height: 40px;
    }

    .tall {
      height: 50vh;
    }

  </style>
  <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></script>
  <script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script>
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
  <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
</head>
<body>

    <amp-state id="listStyle">
      <script type="application/json">
        "list"
      </script>
    </amp-state>
<article>
  <h1>AMP List Resize Manual Test</h1>

  <h2>AMP List Resize with Accordion</h2>
  <amp-list id="accordion-list" width="396" height="180" layout=responsive reset-on-refresh
      src="/test/manual/amp-list/amp-list-data.json">
    <template type="amp-mustache">
      <div class="story-entry">
        <amp-accordion on="expand:accordion-list.changeToLayoutContainer;collapse:accordion-list.changeToLayoutContainer">
          <section>
            <h1>{{title}}</h1>
            <amp-img src="{{imageUrl}}" width=80 height=60></amp-img>
          </section>
          <section>
            <h1>{{title}} 2</h1>
            <amp-img src="{{imageUrl}}" width=80 height=60></amp-img>
          </section>
        </amp-accordion>
      </div>
    </template>
    <div overflow>
      SEE MORE
    </div>
    <div placeholder>
      <div class="tall">PACEHOLDER</div>
    </div>
  </amp-list>

  <h2>AMP List Basic</h2>
  <amp-state id="containerState">
    <script type="application/json">
      false
    </script>
  </amp-state>
  <p>This contains an incorrectly sized container where the contents exceed the list height. It should show an overflow button. </p>
  <button on="tap:AMP.setState({containerState: true})">Change to Container</button>
  <amp-list width="396" height="80" layout="fixed" reset-on-refresh [is-layout-container]="containerState"
      src="/test/manual/amp-list/amp-list-data.json?RANDOM">
    <template type="amp-mustache">
      <div class="story-entry">
        <amp-img src="{{imageUrl}}" width=80 height=60></amp-img>
        {{title}}
      </div>
    </template>
    <div overflow>
      SEE MORE
    </div>
    <div placeholder>
      <div class="tall">PLACEHOLDER</div>
    </div>
  </amp-list>

  <h2>AMP List Resize After Toggling Class</h2>
  <button on="tap:AMP.setState({listStyle: 'grid'}),toggleList.changeToLayoutContainer()">Show Grid</button>
  <button on="tap:AMP.setState({listStyle: 'list'})">Show List</button>
  <amp-list id="toggleList" width="396" height="80" layout="responsive"
      src="/test/manual/amp-list/amp-list-data.json?RANDOM">
    <template type="amp-mustache">
      <div class="story-entry" [class]="'story-entry ' + listStyle">
        <amp-img src="{{imageUrl}}" width=80 height=60></amp-img>
        {{title}}
      </div>
    </template>
    <div overflow>
      SEE MORE
    </div>
  </amp-list>



  <h2>AMP List Resize After Changing Src</h2>
  <amp-state id="query">
    <script type="application/json">
      ""
    </script>
  </amp-state>

  <input on="
      change:AMP.setState({
        query: event.value,
      });
      input-debounced:AMP.setState({
        query: event.value
      }),typeahead.changeToLayoutContainer();
    " value="" [value]="query"
    list="locations">

  <amp-list
    id="typeahead"
    width="396"
    height="80"
    layout=responsive
    src="/list/search/countries"
    reset-on-refresh
    [src]="'/list/search/countries?q=' + query">
    <template type="amp-mustache">
      {{#results}}
      <div class="story-entry" >
        {{name}}
        is a country
      </div>
      {{/results}}
    </template>
    <div overflow>
      SEE MORE
    </div>
    <div placeholder>
      <div class="tall">PLACEHOLDER</div>
    </div>
  </amp-list>


</article>
</body>
</html>
