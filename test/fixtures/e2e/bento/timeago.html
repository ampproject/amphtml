<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Bento Timeago</title>
    <meta
      name="viewport"
      content="width=device-width,minimum-scale=1,initial-scale=1"
    />
    <script src="https://cdn.ampproject.org/bento.js"></script>
    <script
      async
      src="https://cdn.ampproject.org/v0/bento-timeago-1.0.js"
    ></script>
    <link rel="stylesheet" href="https://cdn.ampproject.org/v0/bento-timeago-1.0.css">
  </head>
  <body>
    <h1>Time Ago</h1>
    <p>
      <bento-timeago id="timeago" style="height: 1.2em">
        fallback display time goes here
      </bento-timeago>
    </p>
    <!-- form to change time -->
    <h2>Time ago input form</h2>
    <form id="bentoChangeTimeForm" style="margin-top: 2em">
      <p>
        <time id="displayTime"></time>
      </p>
      <label>
        display time
        <input id="displayTimeInput" type="text" />
      </label>
      <button type="submit" id="bentoChangeTimeFormSubmit">change time</button>
    </form>

    <script>
      const timeInput = document.querySelector('#displayTimeInput');
      const displayTime = document.querySelector('#displayTime');
      const threeYearsAgo = new Date();
      threeYearsAgo.setFullYear(threeYearsAgo.getFullYear() - 3);

      displayTime.innerHTML = threeYearsAgo.toISOString();
      const bentoTimeAgo = document.querySelector('bento-timeago');

      bentoTimeAgo.setAttribute('datetime', threeYearsAgo.toISOString());

      // form controls to change the timeago time
      document.getElementById('bentoChangeTimeForm').onsubmit = (e) => {
        e.preventDefault();

        bentoTimeAgo.setAttribute('datetime', timeInput.value);
        displayTime.innerHTML = timeInput.value;
        timeInput.value = '';
      };
    </script>
  </body>
</html>
