/**
 * Copyright 2019 The AMP HTML Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { userAssert } from "../../../../src/log";

/**
 * @param {!Array<!../web-animation-types.InternalWebAnimationRequestDef>} requests
 * @return {number} total duration in milliseconds.
 * @throws {Error} If timeline is infinite.
 */
export function getTotalDuration(requests) {
  var maxTotalDuration = 0;

  for (var i = 0; i < requests.length; i++) {
    var timing = requests[i].timing;
    userAssert(isFinite(timing.iterations), 'Animation has infinite ' + 'timeline, we can not seek to a relative position within an infinite ' + 'timeline. Use "time" for seekTo or remove infinite iterations');
    var iteration = timing.iterations - timing.iterationStart;
    var totalDuration = timing.duration * iteration + timing.delay + timing.endDelay;

    if (totalDuration > maxTotalDuration) {
      maxTotalDuration = totalDuration;
    }
  }

  return maxTotalDuration;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbInVzZXJBc3NlcnQiLCJnZXRUb3RhbER1cmF0aW9uIiwicmVxdWVzdHMiLCJtYXhUb3RhbER1cmF0aW9uIiwiaSIsImxlbmd0aCIsInRpbWluZyIsImlzRmluaXRlIiwiaXRlcmF0aW9ucyIsIml0ZXJhdGlvbiIsIml0ZXJhdGlvblN0YXJ0IiwidG90YWxEdXJhdGlvbiIsImR1cmF0aW9uIiwiZGVsYXkiLCJlbmREZWxheSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUEsU0FBUUEsVUFBUjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTQyxnQkFBVCxDQUEwQkMsUUFBMUIsRUFBb0M7QUFDekMsTUFBSUMsZ0JBQWdCLEdBQUcsQ0FBdkI7O0FBQ0EsT0FBSyxJQUFJQyxDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRixRQUFRLENBQUNHLE1BQTdCLEVBQXFDRCxDQUFDLEVBQXRDLEVBQTBDO0FBQ3hDLFFBQU9FLE1BQVAsR0FBaUJKLFFBQVEsQ0FBQ0UsQ0FBRCxDQUF6QixDQUFPRSxNQUFQO0FBRUFOLElBQUFBLFVBQVUsQ0FDUk8sUUFBUSxDQUFDRCxNQUFNLENBQUNFLFVBQVIsQ0FEQSxFQUVSLDRCQUNFLHNFQURGLEdBRUUsK0RBSk0sQ0FBVjtBQU9BLFFBQU1DLFNBQVMsR0FBR0gsTUFBTSxDQUFDRSxVQUFQLEdBQW9CRixNQUFNLENBQUNJLGNBQTdDO0FBQ0EsUUFBTUMsYUFBYSxHQUNqQkwsTUFBTSxDQUFDTSxRQUFQLEdBQWtCSCxTQUFsQixHQUE4QkgsTUFBTSxDQUFDTyxLQUFyQyxHQUE2Q1AsTUFBTSxDQUFDUSxRQUR0RDs7QUFHQSxRQUFJSCxhQUFhLEdBQUdSLGdCQUFwQixFQUFzQztBQUNwQ0EsTUFBQUEsZ0JBQWdCLEdBQUdRLGFBQW5CO0FBQ0Q7QUFDRjs7QUFFRCxTQUFPUixnQkFBUDtBQUNEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7dXNlckFzc2VydH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2xvZyc7XG5cbi8qKlxuICogQHBhcmFtIHshQXJyYXk8IS4uL3dlYi1hbmltYXRpb24tdHlwZXMuSW50ZXJuYWxXZWJBbmltYXRpb25SZXF1ZXN0RGVmPn0gcmVxdWVzdHNcbiAqIEByZXR1cm4ge251bWJlcn0gdG90YWwgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRpbWVsaW5lIGlzIGluZmluaXRlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG90YWxEdXJhdGlvbihyZXF1ZXN0cykge1xuICBsZXQgbWF4VG90YWxEdXJhdGlvbiA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmVxdWVzdHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB7dGltaW5nfSA9IHJlcXVlc3RzW2ldO1xuXG4gICAgdXNlckFzc2VydChcbiAgICAgIGlzRmluaXRlKHRpbWluZy5pdGVyYXRpb25zKSxcbiAgICAgICdBbmltYXRpb24gaGFzIGluZmluaXRlICcgK1xuICAgICAgICAndGltZWxpbmUsIHdlIGNhbiBub3Qgc2VlayB0byBhIHJlbGF0aXZlIHBvc2l0aW9uIHdpdGhpbiBhbiBpbmZpbml0ZSAnICtcbiAgICAgICAgJ3RpbWVsaW5lLiBVc2UgXCJ0aW1lXCIgZm9yIHNlZWtUbyBvciByZW1vdmUgaW5maW5pdGUgaXRlcmF0aW9ucydcbiAgICApO1xuXG4gICAgY29uc3QgaXRlcmF0aW9uID0gdGltaW5nLml0ZXJhdGlvbnMgLSB0aW1pbmcuaXRlcmF0aW9uU3RhcnQ7XG4gICAgY29uc3QgdG90YWxEdXJhdGlvbiA9XG4gICAgICB0aW1pbmcuZHVyYXRpb24gKiBpdGVyYXRpb24gKyB0aW1pbmcuZGVsYXkgKyB0aW1pbmcuZW5kRGVsYXk7XG5cbiAgICBpZiAodG90YWxEdXJhdGlvbiA+IG1heFRvdGFsRHVyYXRpb24pIHtcbiAgICAgIG1heFRvdGFsRHVyYXRpb24gPSB0b3RhbER1cmF0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtYXhUb3RhbER1cmF0aW9uO1xufVxuIl19
// /Users/mszylkowski/src/amphtml/extensions/amp-animation/0.1/runners/utils.js