/**
 * Copyright 2018 The AMP HTML Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/**
 * @fileoverview Common animations utility functions used in the animation
 * presets.
 */
import { StoryAnimationDimsDef, WebKeyframesDef } from "./animation-types";
import { rotate, scale, translate } from "../../../src/core/dom/style";

/**
 * Translates the element on the 2d plane according to the given points.
 * @param {number} startX Starting point in the abscissa.
 * @param {number} startY Starting point in the ordinate.
 * @param {number} endX Ending point in the abscissa.
 * @param {number} endY Ending point in the ordinate.
 * @return {WebKeyframesDef} Keyframes that make up the animation.
 */
export function translate2d(startX, startY, endX, endY) {
  return [{
    transform: translate(startX, startY)
  }, {
    transform: translate(endX, endY)
  }];
}

/**
 * Translates and rotates the element on the 2d plane.
 * @param {number} startX Starting point in the abscissa.
 * @param {number} startY Starting point in the ordinate.
 * @param {number} endX Ending point in the abscissa.
 * @param {number} endY Ending point in the ordinate.
 * @param {number} direction -1 for left, 1 for right
 * @return {WebKeyframesDef} Keyframes that make up the animation.
 */
export function rotateAndTranslate(startX, startY, endX, endY, direction) {
  return [{
    transform: translate(startX, startY) + ' ' + rotate(direction * 120)
  }, {
    transform: translate(endX, endY) + ' ' + rotate(0)
  }];
}

/**
 * Gradually shows and grows the element while translating it on the 2d plane.
 * @param {number} startX Starting point in the abscissa.
 * @param {number} startY Starting point in the ordinate.
 * @param {number} endX Ending point in the abscissa.
 * @param {number} endY Ending point in the ordinate.
 * @return {WebKeyframesDef} Keyframes that make up the animation.
 */
export function whooshIn(startX, startY, endX, endY) {
  return [{
    opacity: 0,
    transform: translate(startX, startY) + ' ' + scale(0.15)
  }, {
    opacity: 1,
    transform: translate(endX, endY) + ' ' + scale(1)
  }];
}

/**
 * Checks if either of the target's dimensions are smaller than or equal to
 * those of the page.
 * @param {StoryAnimationDimsDef} dimensions Dimensions of page and target.
 * @return {boolean}
 * @visibleForTesting
 */
export function targetFitsWithinPage(dimensions) {
  return dimensions.targetWidth <= dimensions.pageWidth || dimensions.targetHeight <= dimensions.pageHeight;
}

/**
 * Calculate target scaling factor so that it is at least 25% larger than the
 * page.
 * @param {StoryAnimationDimsDef} dimensions Dimensions of page and target.
 * @return {number}
 */
export function calculateTargetScalingFactor(dimensions) {
  if (targetFitsWithinPage(dimensions)) {
    var scalingFactor = 1.25;
    var widthFactor = dimensions.pageWidth > dimensions.targetWidth ? dimensions.pageWidth / dimensions.targetWidth : 1;
    var heightFactor = dimensions.pageHeight > dimensions.targetHeight ? dimensions.pageHeight / dimensions.targetHeight : 1;
    return Math.max(widthFactor, heightFactor) * scalingFactor;
  }

  return 1;
}

/**
 * Scale the image in every frame by a certain factor.
 * @param {WebKeyframesDef} keyframes Keyframes that will be used for the animation.
 * @param {number} scalingFactor Scaling factor at which target will be scaled.
 * @return {WebKeyframesDef}
 */
function enlargeKeyFrames(keyframes, scalingFactor) {
  /** @type {!Array} */
  keyframes.forEach(function (frame) {
    frame['transform'] += ' ' + scale(scalingFactor);
    frame['transform-origin'] = 'left top';
  });
  return keyframes;
}

/**
 * Translates the element and scales it if necessary.
 * @param {number} startX Starting point in the abscissa.
 * @param {number} startY Starting point in the ordinate.
 * @param {number} endX Ending point in the abscissa.
 * @param {number} endY Ending point in the ordinate.
 * @param {number} scalingFactor Factor by which target will be scaled.
 * @return {WebKeyframesDef} Keyframes that make up the animation.
 */
export function scaleAndTranslate(startX, startY, endX, endY, scalingFactor) {
  if (scalingFactor === 1) {
    return translate2d(startX, startY, endX, endY);
  }

  return enlargeKeyFrames(translate2d(startX, startY, endX, endY), scalingFactor);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFuaW1hdGlvbi1wcmVzZXRzLXV0aWxzLmpzIl0sIm5hbWVzIjpbIlN0b3J5QW5pbWF0aW9uRGltc0RlZiIsIldlYktleWZyYW1lc0RlZiIsInJvdGF0ZSIsInNjYWxlIiwidHJhbnNsYXRlIiwidHJhbnNsYXRlMmQiLCJzdGFydFgiLCJzdGFydFkiLCJlbmRYIiwiZW5kWSIsInRyYW5zZm9ybSIsInJvdGF0ZUFuZFRyYW5zbGF0ZSIsImRpcmVjdGlvbiIsIndob29zaEluIiwib3BhY2l0eSIsInRhcmdldEZpdHNXaXRoaW5QYWdlIiwiZGltZW5zaW9ucyIsInRhcmdldFdpZHRoIiwicGFnZVdpZHRoIiwidGFyZ2V0SGVpZ2h0IiwicGFnZUhlaWdodCIsImNhbGN1bGF0ZVRhcmdldFNjYWxpbmdGYWN0b3IiLCJzY2FsaW5nRmFjdG9yIiwid2lkdGhGYWN0b3IiLCJoZWlnaHRGYWN0b3IiLCJNYXRoIiwibWF4IiwiZW5sYXJnZUtleUZyYW1lcyIsImtleWZyYW1lcyIsImZvckVhY2giLCJmcmFtZSIsInNjYWxlQW5kVHJhbnNsYXRlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFRQSxxQkFBUixFQUErQkMsZUFBL0I7QUFDQSxTQUFRQyxNQUFSLEVBQWdCQyxLQUFoQixFQUF1QkMsU0FBdkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sU0FBU0MsV0FBVCxDQUFxQkMsTUFBckIsRUFBNkJDLE1BQTdCLEVBQXFDQyxJQUFyQyxFQUEyQ0MsSUFBM0MsRUFBaUQ7QUFDdEQsU0FBTyxDQUNMO0FBQUNDLElBQUFBLFNBQVMsRUFBRU4sU0FBUyxDQUFDRSxNQUFELEVBQVNDLE1BQVQ7QUFBckIsR0FESyxFQUVMO0FBQUNHLElBQUFBLFNBQVMsRUFBRU4s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Q0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTRyxpQkFBVCxDQUEyQnpCLE1BQTNCLEVBQW1DQyxNQUFuQyxFQUEyQ0MsSUFBM0MsRUFBaURDLElBQWpELEVBQXVEYSxhQUF2RCxFQUFzRTtBQUMzRSxNQUFJQSxhQUFhLEtBQUssQ0FBdEIsRUFBeUI7QUFDdkIsV0FBT2pCLFdBQVcsQ0FBQ0MsTUFBRCxFQUFTQyxNQUFULEVBQWlCQyxJQUFqQixFQUF1QkMsSUFBdkIsQ0FBbEI7QUFDRDs7QUFDRCxTQUFPa0IsZ0JBQWdCLENBQ3JCdEIsV0FBVyxDQUFDQyxNQUFELEVBQVNDLE1BQVQsRUFBaUJDLElBQWpCLEVBQXVCQyxJQUF2QixDQURVLEVBRXJCYSxhQUZxQixDQUF2QjtBQUlEIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBDb21tb24gYW5pbWF0aW9ucyB1dGlsaXR5IGZ1bmN0aW9ucyB1c2VkIGluIHRoZSBhbmltYXRpb25cbiAqIHByZXNldHMuXG4gKi9cblxuaW1wb3J0IHtTdG9yeUFuaW1hdGlvbkRpbXNEZWYsIFdlYktleWZyYW1lc0RlZn0gZnJvbSAnLi9hbmltYXRpb24tdHlwZXMnO1xuaW1wb3J0IHtyb3RhdGUsIHNjYWxlLCB0cmFuc2xhdGV9IGZyb20gJyNjb3JlL2RvbS9zdHlsZSc7XG5cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgZWxlbWVudCBvbiB0aGUgMmQgcGxhbmUgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwb2ludHMuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRYIFN0YXJ0aW5nIHBvaW50IGluIHRoZSBhYnNjaXNzYS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFkgU3RhcnRpbmcgcG9pbnQgaW4gdGhlIG9yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZFggRW5kaW5nIHBvaW50IGluIHRoZSBhYnNjaXNzYS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRZIEVuZGluZyBwb2ludCBpbiB0aGUgb3JkaW5hdGUuXG4gKiBAcmV0dXJuIHtXZWJLZXlmcmFtZXNEZWZ9IEtleWZyYW1lcyB0aGF0IG1ha2UgdXAgdGhlIGFuaW1hdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZTJkKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKSB7XG4gIHJldHVybiBbXG4gICAge3RyYW5zZm9ybTogdHJhbnNsYXRlKHN0YXJ0WCwgc3RhcnRZKX0sXG4gICAge3RyYW5zZm9ybTogdHJhbnNsYXRlKGVuZFgsIGVuZFkpfSxcbiAgXTtcbn1cblxuLyoqXG4gKiBUcmFuc2xhdGVzIGFuZCByb3RhdGVzIHRoZSBlbGVtZW50IG9uIHRoZSAyZCBwbGFuZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFggU3RhcnRpbmcgcG9pbnQgaW4gdGhlIGFic2Npc3NhLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSBTdGFydGluZyBwb2ludCBpbiB0aGUgb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kWCBFbmRpbmcgcG9pbnQgaW4gdGhlIGFic2Npc3NhLlxuICogQHBhcmFtIHtudW1iZXJ9IGVuZFkgRW5kaW5nIHBvaW50IGluIHRoZSBvcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gLTEgZm9yIGxlZnQsIDEgZm9yIHJpZ2h0XG4gKiBAcmV0dXJuIHtXZWJLZXlmcmFtZXNEZWZ9IEtleWZyYW1lcyB0aGF0IG1ha2UgdXAgdGhlIGFuaW1hdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvdGF0ZUFuZFRyYW5zbGF0ZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSwgZGlyZWN0aW9uKSB7XG4gIHJldHVybiBbXG4gICAge3RyYW5zZm9ybTogdHJhbnNsYXRlKHN0YXJ0WCwgc3RhcnRZKSArICcgJyArIHJvdGF0ZShkaXJlY3Rpb24gKiAxMjApfSxcbiAgICB7dHJhbnNmb3JtOiB0cmFuc2xhdGUoZW5kWCwgZW5kWSkgKyAnICcgKyByb3RhdGUoMCl9LFxuICBdO1xufVxuXG4vKipcbiAqIEdyYWR1YWxseSBzaG93cyBhbmQgZ3Jvd3MgdGhlIGVsZW1lbnQgd2hpbGUgdHJhbnNsYXRpbmcgaXQgb24gdGhlIDJkIHBsYW5lLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WCBTdGFydGluZyBwb2ludCBpbiB0aGUgYWJzY2lzc2EuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRZIFN0YXJ0aW5nIHBvaW50IGluIHRoZSBvcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRYIEVuZGluZyBwb2ludCBpbiB0aGUgYWJzY2lzc2EuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kWSBFbmRpbmcgcG9pbnQgaW4gdGhlIG9yZGluYXRlLlxuICogQHJldHVybiB7V2ViS2V5ZnJhbWVzRGVmfSBLZXlmcmFtZXMgdGhhdCBtYWtlIHVwIHRoZSBhbmltYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aG9vc2hJbihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSkge1xuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZShzdGFydFgsIHN0YXJ0WSkgKyAnICcgKyBzY2FsZSgwLjE1KSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG9wYWNpdHk6IDEsXG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZShlbmRYLCBlbmRZKSArICcgJyArIHNjYWxlKDEpLFxuICAgIH0sXG4gIF07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGVpdGhlciBvZiB0aGUgdGFyZ2V0J3MgZGltZW5zaW9ucyBhcmUgc21hbGxlciB0aGFuIG9yIGVxdWFsIHRvXG4gKiB0aG9zZSBvZiB0aGUgcGFnZS5cbiAqIEBwYXJhbSB7U3RvcnlBbmltYXRpb25EaW1zRGVmfSBkaW1lbnNpb25zIERpbWVuc2lvbnMgb2YgcGFnZSBhbmQgdGFyZ2V0LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gdGFyZ2V0Rml0c1dpdGhpblBhZ2UoZGltZW5zaW9ucykge1xuICByZXR1cm4gKFxuICAgIGRpbWVuc2lvbnMudGFyZ2V0V2lkdGggPD0gZGltZW5zaW9ucy5wYWdlV2lkdGggfHxcbiAgICBkaW1lbnNpb25zLnRhcmdldEhlaWdodCA8PSBkaW1lbnNpb25zLnBhZ2VIZWlnaHRcbiAgKTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgdGFyZ2V0IHNjYWxpbmcgZmFjdG9yIHNvIHRoYXQgaXQgaXMgYXQgbGVhc3QgMjUlIGxhcmdlciB0aGFuIHRoZVxuICogcGFnZS5cbiAqIEBwYXJhbSB7U3RvcnlBbmltYXRpb25EaW1zRGVmfSBkaW1lbnNpb25zIERpbWVuc2lvbnMgb2YgcGFnZSBhbmQgdGFyZ2V0LlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlVGFyZ2V0U2NhbGluZ0ZhY3RvcihkaW1lbnNpb25zKSB7XG4gIGlmICh0YXJnZXRGaXRzV2l0aGluUGFnZShkaW1lbnNpb25zKSkge1xuICAgIGNvbnN0IHNjYWxpbmdGYWN0b3IgPSAxLjI1O1xuICAgIGNvbnN0IHdpZHRoRmFjdG9yID1cbiAgICAgIGRpbWVuc2lvbnMucGFnZVdpZHRoID4gZGltZW5zaW9ucy50YXJnZXRXaWR0aFxuICAgICAgICA/IGRpbWVuc2lvbnMucGFnZVdpZHRoIC8gZGltZW5zaW9ucy50YXJnZXRXaWR0aFxuICAgICAgICA6IDE7XG4gICAgY29uc3QgaGVpZ2h0RmFjdG9yID1cbiAgICAgIGRpbWVuc2lvbnMucGFnZUhlaWdodCA+IGRpbWVuc2lvbnMudGFyZ2V0SGVpZ2h0XG4gICAgICAgID8gZGltZW5zaW9ucy5wYWdlSGVpZ2h0IC8gZGltZW5zaW9ucy50YXJnZXRIZWlnaHRcbiAgICAgICAgOiAxO1xuICAgIHJldHVybiBNYXRoLm1heCh3aWR0aEZhY3RvciwgaGVpZ2h0RmFjdG9yKSAqIHNjYWxpbmdGYWN0b3I7XG4gIH1cbiAgcmV0dXJuIDE7XG59XG5cbi8qKlxuICogU2NhbGUgdGhlIGltYWdlIGluIGV2ZXJ5IGZyYW1lIGJ5IGEgY2VydGFpbiBmYWN0b3IuXG4gKiBAcGFyYW0ge1dlYktleWZyYW1lc0RlZn0ga2V5ZnJhbWVzIEtleWZyYW1lcyB0aGF0IHdpbGwgYmUgdXNlZCBmb3IgdGhlIGFuaW1hdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBzY2FsaW5nRmFjdG9yIFNjYWxpbmcgZmFjdG9yIGF0IHdoaWNoIHRhcmdldCB3aWxsIGJlIHNjYWxlZC5cbiAqIEByZXR1cm4ge1dlYktleWZyYW1lc0RlZn1cbiAqL1xuZnVuY3Rpb24gZW5sYXJnZUtleUZyYW1lcyhrZXlmcmFtZXMsIHNjYWxpbmdGYWN0b3IpIHtcbiAgLyoqIEB0eXBlIHshQXJyYXl9ICovIChrZXlmcmFtZXMpLmZvckVhY2goKGZyYW1lKSA9PiB7XG4gICAgZnJhbWVbJ3RyYW5zZm9ybSddICs9ICcgJyArIHNjYWxlKHNjYWxpbmdGYWN0b3IpO1xuICAgIGZyYW1lWyd0cmFuc2Zvcm0tb3JpZ2luJ10gPSAnbGVmdCB0b3AnO1xuICB9KTtcbiAgcmV0dXJuIGtleWZyYW1lcztcbn1cblxuLyoqXG4gKiBUcmFuc2xhdGVzIHRoZSBlbGVtZW50IGFuZCBzY2FsZXMgaXQgaWYgbmVjZXNzYXJ5LlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WCBTdGFydGluZyBwb2ludCBpbiB0aGUgYWJzY2lzc2EuXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRZIFN0YXJ0aW5nIHBvaW50IGluIHRoZSBvcmRpbmF0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRYIEVuZGluZyBwb2ludCBpbiB0aGUgYWJzY2lzc2EuXG4gKiBAcGFyYW0ge251bWJlcn0gZW5kWSBFbmRpbmcgcG9pbnQgaW4gdGhlIG9yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHNjYWxpbmdGYWN0b3IgRmFjdG9yIGJ5IHdoaWNoIHRhcmdldCB3aWxsIGJlIHNjYWxlZC5cbiAqIEByZXR1cm4ge1dlYktleWZyYW1lc0RlZn0gS2V5ZnJhbWVzIHRoYXQgbWFrZSB1cCB0aGUgYW5pbWF0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2NhbGVBbmRUcmFuc2xhdGUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIHNjYWxpbmdGYWN0b3IpIHtcbiAgaWYgKHNjYWxpbmdGYWN0b3IgPT09IDEpIHtcbiAgICByZXR1cm4gdHJhbnNsYXRlMmQoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICB9XG4gIHJldHVybiBlbmxhcmdlS2V5RnJhbWVzKFxuICAgIHRyYW5zbGF0ZTJkKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKSxcbiAgICBzY2FsaW5nRmFjdG9yXG4gICk7XG59XG4iXX0=
// /Users/mszylkowski/src/amphtml/extensions/amp-story/1.0/animation-presets-utils.js