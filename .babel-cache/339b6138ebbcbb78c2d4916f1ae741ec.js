/**
 * Copyright 2019 The AMP HTML Authors. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS-IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
import { installImg } from "../builtins/amp-img/amp-img";
import { installLayout } from "../builtins/amp-layout/amp-layout";
import { installPixel } from "../builtins/amp-pixel/amp-pixel";
import { installInaboxResourcesServiceForDoc } from "../inabox/inabox-resources";
import { installActionServiceForDoc } from "./action-impl";
import { installBatchedXhrService } from "./batched-xhr-impl";
import { installCidService } from "./cid-impl";
import { installCryptoService } from "./crypto-impl";
import { installDocumentInfoServiceForDoc } from "./document-info-impl";
import { installHiddenObserverForDoc } from "./hidden-observer-impl";
import { installHistoryServiceForDoc } from "./history-impl";
import { installLoadingIndicatorForDoc } from "./loading-indicator";
import { installMutatorServiceForDoc } from "./mutator-impl";
import { installGlobalNavigationHandlerForDoc } from "./navigation";
import { installOwnersServiceForDoc } from "./owners-impl";
import { installPlatformService } from "./platform-impl";
import { installResourcesServiceForDoc } from "./resources-impl";
import { installStandardActionsForDoc } from "./standard-actions-impl";
import { installStorageServiceForDoc } from "./storage-impl";
import { installTemplatesServiceForDoc } from "./template-impl";
import { installTimerService } from "./timer-impl";
import { installUrlForDoc } from "./url-impl";
import { installUrlReplacementsServiceForDoc } from "./url-replacements-impl";
import { installViewerServiceForDoc } from "./viewer-impl";
import { installViewportServiceForDoc } from "./viewport/viewport-impl";
import { installVsyncService } from "./vsync-impl";
import { installXhrService } from "./xhr-impl";
import { installGlobalSubmitListenerForDoc } from "../document-submit";
import { installInputService } from "../input";
import { devAssert } from "../log";
import { installPreconnectService } from "../preconnect";
import { adoptServiceFactoryForEmbedDoc, adoptServiceForEmbedDoc } from "../service-helpers";

/**
 * Install builtins.
 * @param {!Window} win
 * @restricted
 */
export function installBuiltinElements(win) {
  installImg(win);
  installPixel(win);
  installLayout(win);
}

/**
 * Install runtime-level services.
 * @param {!Window} global Global scope to adopt.
 * @restricted
 */
export function installRuntimeServices(global) {
  installCryptoService(global);
  installBatchedXhrService(global);
  installPlatformService(global);
  installTimerService(global);
  installVsyncService(global);
  installXhrService(global);
  installInputService(global);
  installPreconnectService(global);
}

/**
 * Install ampdoc-level services.
 * @param {!./ampdoc-impl.AmpDoc} ampdoc
 * @restricted
 */
export function installAmpdocServices(ampdoc) {
  devAssert(!ampdoc.getParent());
  installAmpdocServicesInternal(ampdoc,
  /* isEmbedded */
  false);
}

/**
 * Install ampdoc-level services for an embedded doc.
 * @param {!./ampdoc-impl.AmpDoc} ampdoc
 * @restricted
 */
export function installAmpdocServicesForEmbed(ampdoc) {
  devAssert(!!ampdoc.getParent());
  installAmpdocServicesInternal(ampdoc,
  /* isEmbedded */
  true);
}

/**
 * @param {!./ampdoc-impl.AmpDoc} ampdoc
 * @param {boolean} isEmbedded
 */
function installAmpdocServicesInternal(ampdoc, isEmbedded) {
  // This function is constructed to DCE embedded-vs-non-embedded path when
  // a constant value passed in the `isEmbedded` arg.
  // When making changes to this method:
  // 1. Order is important!
  // 2. Consider to install same services to amp-inabox.js
  installUrlForDoc(ampdoc);
  isEmbedded ? adoptServiceFactoryForEmbedDoc(ampdoc, 'templates') : installTemplatesServiceForDoc(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'documentInfo') : installDocumentInfoServiceForDoc(ampdoc);
  // those services are installed in amp-inabox.js
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'cid') : installCidService(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'viewer') : installViewerServiceForDoc(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'viewport') : installViewportServiceForDoc(ampdoc);
  installHiddenObserverForDoc(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'history') : installHistoryServiceForDoc(ampdoc);
  isEmbedded ? installInaboxResourcesServiceForDoc(ampdoc) : installResourcesServiceForDoc(ampdoc);
  installOwnersServiceForDoc(ampdoc);
  installMutatorServiceForDoc(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'url-replace') : installUrlReplacementsServiceForDoc(ampdoc);
  installActionServiceForDoc(ampdoc);
  installStandardActionsForDoc(ampdoc);
  isEmbedded ? adoptServiceForEmbedDoc(ampdoc, 'storage') : installStorageServiceForDoc(ampdoc);
  installGlobalNavigationHandlerForDoc(ampdoc);
  installGlobalSubmitListenerForDoc(ampdoc);

  if (!isEmbedded) {
    // Embeds do not show loading indicators, since the whole embed is
    // usually behind a parent loading indicator.
    installLoadingIndicatorForDoc(ampdoc);
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUtc2VydmljZXMuanMiXSwibmFtZXMiOlsiaW5zdGFsbEltZyIsImluc3RhbGxMYXlvdXQiLCJpbnN0YWxsUGl4ZWwiLCJpbnN0YWxsSW5hYm94UmVzb3VyY2VzU2VydmljZUZvckRvYyIsImluc3RhbGxBY3Rpb25TZXJ2aWNlRm9yRG9jIiwiaW5zdGFsbEJhdGNoZWRYaHJTZXJ2aWNlIiwiaW5zdGFsbENpZFNlcnZpY2UiLCJpbnN0YWxsQ3J5cHRvU2VydmljZSIsImluc3RhbGxEb2N1bWVudEluZm9TZXJ2aWNlRm9yRG9jIiwiaW5zdGFsbEhpZGRlbk9ic2VydmVyRm9yRG9jIiwiaW5zdGFsbEhpc3RvcnlTZXJ2aWNlRm9yRG9jIiwiaW5zdGFsbExvYWRpbmdJbmRpY2F0b3JGb3JEb2MiLCJpbnN0YWxsTXV0YXRvclNlcnZpY2VGb3JEb2MiLCJpbnN0YWxsR2xvYmFsTmF2aWdhdGlvbkhhbmRsZXJGb3JEb2MiLCJpbnN0YWxsT3duZXJzU2VydmljZUZvckRvYyIsImluc3RhbGxQbGF0Zm9ybVNlcnZpY2UiLCJpbnN0YWxsUmVzb3VyY2VzU2VydmljZUZvckRvYyIsImluc3RhbGxTdGFuZGFyZEFjdGlvbnNGb3JEb2MiLCJpbnN0YWxsU3RvcmFnZVNlcnZpY2VGb3JEb2MiLCJpbnN0YWxsVGVtcGxhdGVzU2VydmljZUZvckRvYyIsImluc3RhbGxUaW1lclNlcnZpY2UiLCJpbnN0YWxsVXJsRm9yRG9jIiwiaW5zdGFsbFVybFJlcGxhY2VtZW50c1NlcnZpY2VGb3JEb2MiLCJpbnN0YWxsVmlld2VyU2VydmljZUZvckRvYyIsImluc3RhbGxWaWV3cG9ydFNlcnZpY2VGb3JEb2MiLCJpbnN0YWxsVnN5bmNTZXJ2aWNlIiwiaW5zdGFsbFhoclNlcnZpY2UiLCJpbnN0YWxsR2xvYmFsU3VibWl0TGlzdGVuZXJGb3JEb2MiLCJpbnN0YWxsSW5wdXRTZXJ2aWNlIiwiZGV2QXNzZXJ0IiwiaW5zdGFsbFByZWNvbm5lY3RTZXJ2aWNlIiwiYWRvcHRTZXJ2aWNlRmFjdG9yeUZvckVtYmVkRG9jIiwiYWRvcHRTZXJ2aWNlRm9yRW1iZWREb2MiLCJpbnN0YWxsQnVpbHRpbkVsZW1lbnRzIiwid2luIiwiaW5zdGFsbFJ1bnRpbWVTZXJ2aWNlcyIsImdsb2JhbCIsImluc3RhbGxBbXBkb2NTZXJ2aWNlcyIsImFtcGRvYyIsImdldFBhcmVudCIsImluc3RhbGxBbXBkb2NTZXJ2aWNlc0ludGVybmFsIiwiaW5zdGFsbEFtcGRvY1NlcnZpY2VzRm9yRW1iZWQiLCJpc0VtYmVkZGVkIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxTQUFRQSxVQUFSO0FBQ0EsU0FBUUMsYUFBUjtBQUNBLFNBQVFDLFlBQVI7QUFFQSxTQUFRQyxtQ0FBUjtBQUVBLFNBQVFDLDBCQUFSO0FBQ0EsU0FBUUMsd0JBQVI7QUFDQSxTQUFRQyxpQkFBUjtBQUNBLFNBQVFDLG9CQUFSO0FBQ0EsU0FBUUMsZ0NBQVI7QUFDQSxTQUFRQywyQkFBUjtBQUNBLFNBQVFDLDJCQUFSO0FBQ0EsU0FBUUMsNkJBQVI7QUFDQSxTQUFRQywyQkFBUjtBQUNBLFNBQVFDLG9DQUFSO0FBQ0EsU0FBUUMsMEJBQVI7QUFDQSxTQUFRQyxzQkFBUjtBQUNBLFNBQVFDLDZCQUFSO0FBQ0EsU0FBUUMsNEJBQVI7QUFDQSxTQUFRQywyQkFBUjtBQUNBLFNBQVFDLDZCQUFSO0FBQ0EsU0FBUUMsbUJBQVI7QUFDQSxTQUFRQyxnQkFBUjtBQUNBLFNBQVFDLG1DQUFSO0FBQ0EsU0FBUUMsMEJBQVI7QUFDQSxTQUFRQyw0QkFBUjtBQUNBLFNBQVFDLG1CQUFSO0FBQ0EsU0FBUUMsaUJBQVI7QUFFQSxTQUFRQyxpQ0FBUjtBQUNBLFNBQVFDLG1CQUFSO0FBQ0EsU0FBUUMsU0FBUjtBQUNBLFNBQVFDLHdCQUFSO0FBQ0EsU0FDRUMsOEJBREYsRUFFRUMsdUJBRkY7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0FEakIsR0FFTmhCLG1DQUFtQyxDQUFDZ0IsTUFBRCxDQUZ2QztBQUdBbEMsRUFBQUEsMEJBQTBCLENBQUNrQyxNQUFELENBQTFCO0FBQ0FyQixFQUFBQSw0QkFBNEIsQ0FBQ3FCLE1BQUQsQ0FBNUI7QUFDQUksRUFBQUEsVUFBVSxHQUNOVix1QkFBdUIsQ0FBQ00sTUFBRCxFQUFTLFNBQVQsQ0FEakIsR0FFTnBCLDJCQUEyQixDQUFDb0IsTUFBRCxDQUYvQjtBQUdBekIsRUFBQUEsb0NBQW9DLENBQUN5QixNQUFELENBQXBDO0FBQ0FYLEVBQUFBLGlDQUFpQyxDQUFDVyxNQUFELENBQWpDOztBQUNBLE1BQUksQ0FBQ0ksVUFBTCxFQUFpQjtBQUNmO0FBQ0E7QUFDQS9CLElBQUFBLDZCQUE2QixDQUFDMkIsTUFBRCxDQUE3QjtBQUNEO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAyMDE5IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpbnN0YWxsSW1nfSBmcm9tICcjYnVpbHRpbnMvYW1wLWltZy9hbXAtaW1nJztcbmltcG9ydCB7aW5zdGFsbExheW91dH0gZnJvbSAnI2J1aWx0aW5zL2FtcC1sYXlvdXQvYW1wLWxheW91dCc7XG5pbXBvcnQge2luc3RhbGxQaXhlbH0gZnJvbSAnI2J1aWx0aW5zL2FtcC1waXhlbC9hbXAtcGl4ZWwnO1xuXG5pbXBvcnQge2luc3RhbGxJbmFib3hSZXNvdXJjZXNTZXJ2aWNlRm9yRG9jfSBmcm9tICcjaW5hYm94L2luYWJveC1yZXNvdXJjZXMnO1xuXG5pbXBvcnQge2luc3RhbGxBY3Rpb25TZXJ2aWNlRm9yRG9jfSBmcm9tICcuL2FjdGlvbi1pbXBsJztcbmltcG9ydCB7aW5zdGFsbEJhdGNoZWRYaHJTZXJ2aWNlfSBmcm9tICcuL2JhdGNoZWQteGhyLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsQ2lkU2VydmljZX0gZnJvbSAnLi9jaWQtaW1wbCc7XG5pbXBvcnQge2luc3RhbGxDcnlwdG9TZXJ2aWNlfSBmcm9tICcuL2NyeXB0by1pbXBsJztcbmltcG9ydCB7aW5zdGFsbERvY3VtZW50SW5mb1NlcnZpY2VGb3JEb2N9IGZyb20gJy4vZG9jdW1lbnQtaW5mby1pbXBsJztcbmltcG9ydCB7aW5zdGFsbEhpZGRlbk9ic2VydmVyRm9yRG9jfSBmcm9tICcuL2hpZGRlbi1vYnNlcnZlci1pbXBsJztcbmltcG9ydCB7aW5zdGFsbEhpc3RvcnlTZXJ2aWNlRm9yRG9jfSBmcm9tICcuL2hpc3RvcnktaW1wbCc7XG5pbXBvcnQge2luc3RhbGxMb2FkaW5nSW5kaWNhdG9yRm9yRG9jfSBmcm9tICcuL2xvYWRpbmctaW5kaWNhdG9yJztcbmltcG9ydCB7aW5zdGFsbE11dGF0b3JTZXJ2aWNlRm9yRG9jfSBmcm9tICcuL211dGF0b3ItaW1wbCc7XG5pbXBvcnQge2luc3RhbGxHbG9iYWxOYXZpZ2F0aW9uSGFuZGxlckZvckRvY30gZnJvbSAnLi9uYXZpZ2F0aW9uJztcbmltcG9ydCB7aW5zdGFsbE93bmVyc1NlcnZpY2VGb3JEb2N9IGZyb20gJy4vb3duZXJzLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsUGxhdGZvcm1TZXJ2aWNlfSBmcm9tICcuL3BsYXRmb3JtLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsUmVzb3VyY2VzU2VydmljZUZvckRvY30gZnJvbSAnLi9yZXNvdXJjZXMtaW1wbCc7XG5pbXBvcnQge2luc3RhbGxTdGFuZGFyZEFjdGlvbnNGb3JEb2N9IGZyb20gJy4vc3RhbmRhcmQtYWN0aW9ucy1pbXBsJztcbmltcG9ydCB7aW5zdGFsbFN0b3JhZ2VTZXJ2aWNlRm9yRG9jfSBmcm9tICcuL3N0b3JhZ2UtaW1wbCc7XG5pbXBvcnQge2luc3RhbGxUZW1wbGF0ZXNTZXJ2aWNlRm9yRG9jfSBmcm9tICcuL3RlbXBsYXRlLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsVGltZXJTZXJ2aWNlfSBmcm9tICcuL3RpbWVyLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsVXJsRm9yRG9jfSBmcm9tICcuL3VybC1pbXBsJztcbmltcG9ydCB7aW5zdGFsbFVybFJlcGxhY2VtZW50c1NlcnZpY2VGb3JEb2N9IGZyb20gJy4vdXJsLXJlcGxhY2VtZW50cy1pbXBsJztcbmltcG9ydCB7aW5zdGFsbFZpZXdlclNlcnZpY2VGb3JEb2N9IGZyb20gJy4vdmlld2VyLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsVmlld3BvcnRTZXJ2aWNlRm9yRG9jfSBmcm9tICcuL3ZpZXdwb3J0L3ZpZXdwb3J0LWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsVnN5bmNTZXJ2aWNlfSBmcm9tICcuL3ZzeW5jLWltcGwnO1xuaW1wb3J0IHtpbnN0YWxsWGhyU2VydmljZX0gZnJvbSAnLi94aHItaW1wbCc7XG5cbmltcG9ydCB7aW5zdGFsbEdsb2JhbFN1Ym1pdExpc3RlbmVyRm9yRG9jfSBmcm9tICcuLi9kb2N1bWVudC1zdWJtaXQnO1xuaW1wb3J0IHtpbnN0YWxsSW5wdXRTZXJ2aWNlfSBmcm9tICcuLi9pbnB1dCc7XG5pbXBvcnQge2RldkFzc2VydH0gZnJvbSAnLi4vbG9nJztcbmltcG9ydCB7aW5zdGFsbFByZWNvbm5lY3RTZXJ2aWNlfSBmcm9tICcuLi9wcmVjb25uZWN0JztcbmltcG9ydCB7XG4gIGFkb3B0U2VydmljZUZhY3RvcnlGb3JFbWJlZERvYyxcbiAgYWRvcHRTZXJ2aWNlRm9yRW1iZWREb2MsXG59IGZyb20gJy4uL3NlcnZpY2UtaGVscGVycyc7XG5cbi8qKlxuICogSW5zdGFsbCBidWlsdGlucy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmVzdHJpY3RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbEJ1aWx0aW5FbGVtZW50cyh3aW4pIHtcbiAgaW5zdGFsbEltZyh3aW4pO1xuICBpbnN0YWxsUGl4ZWwod2luKTtcbiAgaW5zdGFsbExheW91dCh3aW4pO1xufVxuXG4vKipcbiAqIEluc3RhbGwgcnVudGltZS1sZXZlbCBzZXJ2aWNlcy5cbiAqIEBwYXJhbSB7IVdpbmRvd30gZ2xvYmFsIEdsb2JhbCBzY29wZSB0byBhZG9wdC5cbiAqIEByZXN0cmljdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsUnVudGltZVNlcnZpY2VzKGdsb2JhbCkge1xuICBpbnN0YWxsQ3J5cHRvU2VydmljZShnbG9iYWwpO1xuICBpbnN0YWxsQmF0Y2hlZFhoclNlcnZpY2UoZ2xvYmFsKTtcbiAgaW5zdGFsbFBsYXRmb3JtU2VydmljZShnbG9iYWwpO1xuICBpbnN0YWxsVGltZXJTZXJ2aWNlKGdsb2JhbCk7XG4gIGluc3RhbGxWc3luY1NlcnZpY2UoZ2xvYmFsKTtcbiAgaW5zdGFsbFhoclNlcnZpY2UoZ2xvYmFsKTtcbiAgaW5zdGFsbElucHV0U2VydmljZShnbG9iYWwpO1xuICBpbnN0YWxsUHJlY29ubmVjdFNlcnZpY2UoZ2xvYmFsKTtcbn1cblxuLyoqXG4gKiBJbnN0YWxsIGFtcGRvYy1sZXZlbCBzZXJ2aWNlcy5cbiAqIEBwYXJhbSB7IS4vYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAqIEByZXN0cmljdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsQW1wZG9jU2VydmljZXMoYW1wZG9jKSB7XG4gIGRldkFzc2VydCghYW1wZG9jLmdldFBhcmVudCgpKTtcbiAgaW5zdGFsbEFtcGRvY1NlcnZpY2VzSW50ZXJuYWwoYW1wZG9jLCAvKiBpc0VtYmVkZGVkICovIGZhbHNlKTtcbn1cblxuLyoqXG4gKiBJbnN0YWxsIGFtcGRvYy1sZXZlbCBzZXJ2aWNlcyBmb3IgYW4gZW1iZWRkZWQgZG9jLlxuICogQHBhcmFtIHshLi9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICogQHJlc3RyaWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3RhbGxBbXBkb2NTZXJ2aWNlc0ZvckVtYmVkKGFtcGRvYykge1xuICBkZXZBc3NlcnQoISFhbXBkb2MuZ2V0UGFyZW50KCkpO1xuICBpbnN0YWxsQW1wZG9jU2VydmljZXNJbnRlcm5hbChhbXBkb2MsIC8qIGlzRW1iZWRkZWQgKi8gdHJ1ZSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshLi9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICogQHBhcmFtIHtib29sZWFufSBpc0VtYmVkZGVkXG4gKi9cbmZ1bmN0aW9uIGluc3RhbGxBbXBkb2NTZXJ2aWNlc0ludGVybmFsKGFtcGRvYywgaXNFbWJlZGRlZCkge1xuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGNvbnN0cnVjdGVkIHRvIERDRSBlbWJlZGRlZC12cy1ub24tZW1iZWRkZWQgcGF0aCB3aGVuXG4gIC8vIGEgY29uc3RhbnQgdmFsdWUgcGFzc2VkIGluIHRoZSBgaXNFbWJlZGRlZGAgYXJnLlxuXG4gIC8vIFdoZW4gbWFraW5nIGNoYW5nZXMgdG8gdGhpcyBtZXRob2Q6XG4gIC8vIDEuIE9yZGVyIGlzIGltcG9ydGFudCFcbiAgLy8gMi4gQ29uc2lkZXIgdG8gaW5zdGFsbCBzYW1lIHNlcnZpY2VzIHRvIGFtcC1pbmFib3guanNcbiAgaW5zdGFsbFVybEZvckRvYyhhbXBkb2MpO1xuICBpc0VtYmVkZGVkXG4gICAgPyBhZG9wdFNlcnZpY2VGYWN0b3J5Rm9yRW1iZWREb2MoYW1wZG9jLCAndGVtcGxhdGVzJylcbiAgICA6IGluc3RhbGxUZW1wbGF0ZXNTZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGlzRW1iZWRkZWRcbiAgICA/IGFkb3B0U2VydmljZUZvckVtYmVkRG9jKGFtcGRvYywgJ2RvY3VtZW50SW5mbycpXG4gICAgOiBpbnN0YWxsRG9jdW1lbnRJbmZvU2VydmljZUZvckRvYyhhbXBkb2MpO1xuICAvLyB0aG9zZSBzZXJ2aWNlcyBhcmUgaW5zdGFsbGVkIGluIGFtcC1pbmFib3guanNcbiAgaXNFbWJlZGRlZFxuICAgID8gYWRvcHRTZXJ2aWNlRm9yRW1iZWREb2MoYW1wZG9jLCAnY2lkJylcbiAgICA6IGluc3RhbGxDaWRTZXJ2aWNlKGFtcGRvYyk7XG4gIGlzRW1iZWRkZWRcbiAgICA/IGFkb3B0U2VydmljZUZvckVtYmVkRG9jKGFtcGRvYywgJ3ZpZXdlcicpXG4gICAgOiBpbnN0YWxsVmlld2VyU2VydmljZUZvckRvYyhhbXBkb2MpO1xuICBpc0VtYmVkZGVkXG4gICAgPyBhZG9wdFNlcnZpY2VGb3JFbWJlZERvYyhhbXBkb2MsICd2aWV3cG9ydCcpXG4gICAgOiBpbnN0YWxsVmlld3BvcnRTZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxIaWRkZW5PYnNlcnZlckZvckRvYyhhbXBkb2MpO1xuICBpc0VtYmVkZGVkXG4gICAgPyBhZG9wdFNlcnZpY2VGb3JFbWJlZERvYyhhbXBkb2MsICdoaXN0b3J5JylcbiAgICA6IGluc3RhbGxIaXN0b3J5U2VydmljZUZvckRvYyhhbXBkb2MpO1xuXG4gIGlzRW1iZWRkZWRcbiAgICA/IGluc3RhbGxJbmFib3hSZXNvdXJjZXNTZXJ2aWNlRm9yRG9jKGFtcGRvYylcbiAgICA6IGluc3RhbGxSZXNvdXJjZXNTZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxPd25lcnNTZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxNdXRhdG9yU2VydmljZUZvckRvYyhhbXBkb2MpO1xuXG4gIGlzRW1iZWRkZWRcbiAgICA/IGFkb3B0U2VydmljZUZvckVtYmVkRG9jKGFtcGRvYywgJ3VybC1yZXBsYWNlJylcbiAgICA6IGluc3RhbGxVcmxSZXBsYWNlbWVudHNTZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxBY3Rpb25TZXJ2aWNlRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxTdGFuZGFyZEFjdGlvbnNGb3JEb2MoYW1wZG9jKTtcbiAgaXNFbWJlZGRlZFxuICAgID8gYWRvcHRTZXJ2aWNlRm9yRW1iZWREb2MoYW1wZG9jLCAnc3RvcmFnZScpXG4gICAgOiBpbnN0YWxsU3RvcmFnZVNlcnZpY2VGb3JEb2MoYW1wZG9jKTtcbiAgaW5zdGFsbEdsb2JhbE5hdmlnYXRpb25IYW5kbGVyRm9yRG9jKGFtcGRvYyk7XG4gIGluc3RhbGxHbG9iYWxTdWJtaXRMaXN0ZW5lckZvckRvYyhhbXBkb2MpO1xuICBpZiAoIWlzRW1iZWRkZWQpIHtcbiAgICAvLyBFbWJlZHMgZG8gbm90IHNob3cgbG9hZGluZyBpbmRpY2F0b3JzLCBzaW5jZSB0aGUgd2hvbGUgZW1iZWQgaXNcbiAgICAvLyB1c3VhbGx5IGJlaGluZCBhIHBhcmVudCBsb2FkaW5nIGluZGljYXRvci5cbiAgICBpbnN0YWxsTG9hZGluZ0luZGljYXRvckZvckRvYyhhbXBkb2MpO1xuICB9XG59XG4iXX0=
// /Users/mszylkowski/src/amphtml/src/service/core-services.js