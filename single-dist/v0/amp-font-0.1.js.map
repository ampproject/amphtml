{"version":3,"sources":["/src/service/vsync-impl.js","/extensions/amp-font/0.1/fontloader.js","/extensions/amp-font/0.1/amp-font.js","/src/service/timer-impl.js"],"names":["createTask","task","opt_state","run","constructor","ampdoc","ampdoc_","document_","win","document","fontConfig_","container_","fontLoadRejected_","fontLoadResolved_","load_","Promise","resolve","reject","fontString","fontStyle","variant","weight","size","family","canUseNativeApis_","fonts","check","load","then","Error","catch","loadWithPolyfill_","vsync","Services$$module$src$services.vsyncFor","comparators","createFontComparators_","vsyncTask","measure","some","comparator","hasHeightChanged","TOLERANCE_","Math","abs","defaultFontElement_","offsetHeight","testFontElement_","offsetWidth","containerElement","createElement","setStyles","fontSize","fontVariant","fontWeight","left","lineHeight","margin","padding","position","top","visibility","DEFAULT_FONTS_","map","defaultFont","FontComparator","getBody","appendChild","container","customFont","doc","ownerDocument","testFontFamily","getFontElement_","fontFamily","element","textContent","TEST_STRING_","float","whiteSpace","fontFamily_","fontWeight_","fontStyle_","fontVariant_","fontLoader_","startLoad_","fontConfig","DEFAULT_SIZE_","getTimeout_","addClassName","onFontLoadSuccess_","getAttribute","removeClassName","onFontLoadFinish_","onFontLoadError_","user","warn","TAG","getAmpDoc","root","getRootNode","documentElement","classList","add","remove","dispose_","timeoutInMs","parseInt","isFiniteNumber","DEFAULT_TIMEOUT_","max","Date","now","Services$$module$src$services.timerFor","timeSinceStart","startTime_","CACHED_FONT_LOAD_TIME_","timeout","timeoutPromise","removeElement","reason","$jscomp.inherits","BaseElement","AmpFont","AMP","prerenderAllowed","buildCallback","DEFAULT_WEIGHT_","DEFAULT_STYLE_","DEFAULT_VARIANT_","FontLoader","registerElement"],"mappings":"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","file":"amp-font-0.1.js","sourcesContent":[]}