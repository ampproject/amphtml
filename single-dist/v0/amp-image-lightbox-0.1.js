(self.AMP=self.AMP||[]).push({n:"amp-image-lightbox",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $concat$$module$src$transition$$=function($transitions$jscomp$1$$){var $opt_delimiter$$=void 0===$opt_delimiter$$?" ":$opt_delimiter$$;return function($time$jscomp$5$$,$complete$jscomp$1$$){for(var $results$jscomp$3$$=[],$i$jscomp$109$$=0;$i$jscomp$109$$<$transitions$jscomp$1$$.length;$i$jscomp$109$$++){var $result$jscomp$12$$=(0,$transitions$jscomp$1$$[$i$jscomp$109$$])($time$jscomp$5$$,$complete$jscomp$1$$);"string"==typeof $result$jscomp$12$$&&$results$jscomp$3$$.push($result$jscomp$12$$)}return $results$jscomp$3$$.join($opt_delimiter$$)}},
$translate$$module$src$transition$$=function($transitionX$$,$opt_transitionY$$){return function($time$jscomp$14_y$jscomp$69$$){var $x$jscomp$87$$=$transitionX$$($time$jscomp$14_y$jscomp$69$$);"number"==typeof $x$jscomp$87$$&&($x$jscomp$87$$=_.$px$$module$src$style$$($x$jscomp$87$$));if(!$opt_transitionY$$)return"translate("+$x$jscomp$87$$+")";$time$jscomp$14_y$jscomp$69$$=$opt_transitionY$$($time$jscomp$14_y$jscomp$69$$);"number"==typeof $time$jscomp$14_y$jscomp$69$$&&($time$jscomp$14_y$jscomp$69$$=
_.$px$$module$src$style$$($time$jscomp$14_y$jscomp$69$$));return"translate("+$x$jscomp$87$$+","+$time$jscomp$14_y$jscomp$69$$+")"}},$scale$$module$src$transition$$=function($transition$jscomp$8$$){return function($time$jscomp$15$$){return"scale("+$transition$jscomp$8$$($time$jscomp$15$$)+")"}},$ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=function($lightbox$$,$win$jscomp$364$$,$loadPromise$$){this.$Y$=$lightbox$$;this.$win$=$win$jscomp$364$$;this.$fa$=$loadPromise$$;
this.$X$=$lightbox$$.element.ownerDocument.createElement("div");this.$X$.classList.add("i-amphtml-image-lightbox-viewer");this.$F$=$lightbox$$.element.ownerDocument.createElement("img");this.$F$.classList.add("i-amphtml-image-lightbox-viewer-image");this.$X$.appendChild(this.$F$);this.$W$=null;this.$M$=this.$O$=0;this.$G$=_.$layoutRectLtwh$$module$src$layout_rect$$(0,0,0,0);this.$J$=_.$layoutRectLtwh$$module$src$layout_rect$$(0,0,0,0);this.$V$=this.$S$=this.$D$=1;this.$R$=2;this.$aa$=this.$Z$=this.$ea$=
this.$ba$=this.$H$=this.$I$=this.$P$=this.$U$=0;this.$K$=null;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$$(this)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$self$$,$ampImg$$,$img$jscomp$9$$){$img$jscomp$9$$?
($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$self$$.$O$=$img$jscomp$9$$.naturalWidth||$ampImg$$.offsetWidth,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$self$$.$M$=$img$jscomp$9$$.naturalHeight||$ampImg$$.offsetHeight):($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$self$$.$O$=
$ampImg$$.offsetWidth,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$self$$.$M$=$ampImg$$.offsetHeight)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$){if(!$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$W$)return Promise.resolve();
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$V$=Math.max($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$V$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$D$);var $src$jscomp$47$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$W$.select($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$J$.width*
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$V$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$Y$.$getDpr$());return $src$jscomp$47$$==$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$F$.getAttribute("src")?Promise.resolve():_.$Services$$module$src$services$timerFor$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$win$).$promise$(1).then(function(){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$F$.setAttribute("src",
$src$jscomp$47$$);return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$fa$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$self$$.$F$)})},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$){var $gestures$$=
_.$Gestures$$module$src$gesture$get$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$F$);_.$JSCompiler_StaticMethods_onGesture$$($gestures$$,_.$TapRecognizer$$module$src$gesture_recognizers$$,function(){$JSCompiler_StaticMethods_toggleViewMode$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$Y$)});_.$JSCompiler_StaticMethods_onGesture$$($gestures$$,
_.$SwipeXYRecognizer$$module$src$gesture_recognizers$$,function($gestures$$){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$D$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$U$+$gestures$$.data.deltaX,!0),$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$P$+
$gestures$$.data.deltaY,!0),!1);$gestures$$.data.$last$&&$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,$gestures$$.data.velocityX,$gestures$$.data.velocityY)});_.$JSCompiler_StaticMethods_onPointerDown$$($gestures$$,function(){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$K$&&
_.$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$halt$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$K$)});_.$JSCompiler_StaticMethods_onGesture$$($gestures$$,_.$DoubletapRecognizer$$module$src$gesture_recognizers$$,function($gestures$$){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,
1==$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$D$?$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$R$:1,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$G$.width/2-$gestures$$.data.clientX,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$.$G$.height/
2-$gestures$$.data.clientY,!0).then(function(){return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,0,0,0,0,0,0)})});_.$JSCompiler_StaticMethods_onGesture$$($gestures$$,_.$TapzoomRecognizer$$module$src$gesture_recognizers$$,function($gestures$$){$JSCompiler_StaticMethods_onZoomInc_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,
$gestures$$.data.$centerClientX$,$gestures$$.data.$centerClientY$,$gestures$$.data.deltaX,$gestures$$.data.deltaY);$gestures$$.data.$last$&&$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setupGestures_$self$$,$gestures$$.data.$centerClientX$,$gestures$$.data.$centerClientY$,$gestures$$.data.deltaX,$gestures$$.data.deltaY,
$gestures$$.data.velocityY,$gestures$$.data.velocityY)})},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundValue_$$=function($v$jscomp$18$$,$min$jscomp$9$$,$max$jscomp$11$$,$extent$$){return Math.max($min$jscomp$9$$-$extent$$,Math.min($max$jscomp$11$$+$extent$$,$v$jscomp$18$$))},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$self$$,
$x$jscomp$105$$,$allowExtent$jscomp$1$$){return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundValue_$$($x$jscomp$105$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$self$$.$ba$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$self$$.$Z$,$allowExtent$jscomp$1$$&&1<$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$self$$.$D$?
.25*$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$self$$.$G$.width:0)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$self$$,$y$jscomp$78$$,$allowExtent$jscomp$2$$){return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundValue_$$($y$jscomp$78$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$self$$.$ea$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$self$$.$aa$,$allowExtent$jscomp$2$$?.25*$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$self$$.$G$.height:0)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$$=
function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$,$dw$jscomp$1_maxX_scale$jscomp$2$$){var $dh$jscomp$1_maxY$jscomp$1$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$G$.height-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$J$.height*
$dw$jscomp$1_maxX_scale$jscomp$2$$;if(0<=$dh$jscomp$1_maxY$jscomp$1$$)var $minY$$=$dh$jscomp$1_maxY$jscomp$1$$=0;else $minY$$=$dh$jscomp$1_maxY$jscomp$1$$/2,$dh$jscomp$1_maxY$jscomp$1$$=-$minY$$;$dw$jscomp$1_maxX_scale$jscomp$2$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$G$.width-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$J$.width*
$dw$jscomp$1_maxX_scale$jscomp$2$$;if(0<=$dw$jscomp$1_maxX_scale$jscomp$2$$)var $minX$$=$dw$jscomp$1_maxX_scale$jscomp$2$$=0;else $minX$$=$dw$jscomp$1_maxX_scale$jscomp$2$$/2,$dw$jscomp$1_maxX_scale$jscomp$2$$=-$minX$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$ba$=$minX$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$ea$=
$minY$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$Z$=$dw$jscomp$1_maxX_scale$jscomp$2$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$self$$.$aa$=$dh$jscomp$1_maxY$jscomp$1$$},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$){_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$F$,
{transform:_.$translate$$module$src$style$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$I$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$H$)+" "+_.$scale$$module$src$style$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$D$)});1!=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$D$&&
$JSCompiler_StaticMethods_toggleViewMode$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$self$$.$Y$,!0)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$,$veloX$jscomp$2$$,$veloY$jscomp$2$$){var $deltaY$jscomp$4$$=
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$H$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$P$;1==$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$D$&&10<Math.abs($deltaY$jscomp$4$$)?$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$Y$.close():
($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$K$=_.$continueMotion$$module$src$motion$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$F$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$I$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$H$,
$veloX$jscomp$2$$,$veloY$jscomp$2$$,function($veloX$jscomp$2$$,$veloY$jscomp$2$$){$veloX$jscomp$2$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$,$veloX$jscomp$2$$,!0);$veloY$jscomp$2$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$,
$veloY$jscomp$2$$,!0);if(1>Math.abs($veloX$jscomp$2$$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$I$)&&1>Math.abs($veloY$jscomp$2$$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$H$))return!1;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$D$,$veloX$jscomp$2$$,$veloY$jscomp$2$$,!1);return!0}),_.$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$thenAlways$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$K$,function(){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$.$K$=
null;return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onMoveRelease_$self$$)}))},$JSCompiler_StaticMethods_onZoomInc_$$=function($JSCompiler_StaticMethods_onZoomInc_$self$$,$centerClientX_deltaCenterX$$,$centerClientY_deltaCenterY$$,$deltaX$jscomp$4$$,$deltaY$jscomp$5$$){var $dist$$=Math.sqrt($deltaX$jscomp$4$$*$deltaX$jscomp$4$$+
$deltaY$jscomp$5$$*$deltaY$jscomp$5$$),$newScale$jscomp$1_zoomSign$$=Math.abs($deltaY$jscomp$5$$)>Math.abs($deltaX$jscomp$4$$)?Math.sign($deltaY$jscomp$5$$):Math.sign(-$deltaX$jscomp$4$$);0!=$newScale$jscomp$1_zoomSign$$&&($newScale$jscomp$1_zoomSign$$=$JSCompiler_StaticMethods_onZoomInc_$self$$.$S$*(1+$newScale$jscomp$1_zoomSign$$*$dist$$/100),$centerClientX_deltaCenterX$$=$JSCompiler_StaticMethods_onZoomInc_$self$$.$G$.width/2-$centerClientX_deltaCenterX$$,$centerClientY_deltaCenterY$$=$JSCompiler_StaticMethods_onZoomInc_$self$$.$G$.height/
2-$centerClientY_deltaCenterY$$,$deltaX$jscomp$4$$=Math.min($centerClientX_deltaCenterX$$,$dist$$/100*$centerClientX_deltaCenterX$$),$deltaY$jscomp$5$$=Math.min($centerClientY_deltaCenterY$$,$dist$$/100*$centerClientY_deltaCenterY$$),$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$$($JSCompiler_StaticMethods_onZoomInc_$self$$,$newScale$jscomp$1_zoomSign$$,$deltaX$jscomp$4$$,$deltaY$jscomp$5$$,!1))},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$$=
function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$,$newScale$jscomp$2_scale$jscomp$3$$,$deltaX$jscomp$5$$,$deltaY$jscomp$6$$,$animate$jscomp$5$$){$newScale$jscomp$2_scale$jscomp$3$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundValue_$$($newScale$jscomp$2_scale$jscomp$3$$,1,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$.$R$,
.25);if($newScale$jscomp$2_scale$jscomp$3$$!=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$.$D$)return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$,$newScale$jscomp$2_scale$jscomp$3$$),$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$,
$newScale$jscomp$2_scale$jscomp$3$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$.$U$+$deltaX$jscomp$5$$*$newScale$jscomp$2_scale$jscomp$3$$,!1),$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoom_$self$$.$P$+$deltaY$jscomp$6$$*$newScale$jscomp$2_scale$jscomp$3$$,!1),$animate$jscomp$5$$)},$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$,$centerClientX$jscomp$1$$,
$centerClientY$jscomp$1$$,$deltaX$jscomp$6_promise$jscomp$46$$,$deltaY$jscomp$7$$,$veloX$jscomp$3$$,$veloY$jscomp$3$$){$deltaX$jscomp$6_promise$jscomp$46$$=0==$veloX$jscomp$3$$&&0==$veloY$jscomp$3$$?Promise.resolve():_.$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$thenAlways$$(_.$continueMotion$$module$src$motion$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$.$F$,$deltaX$jscomp$6_promise$jscomp$46$$,
$deltaY$jscomp$7$$,$veloX$jscomp$3$$,$veloY$jscomp$3$$,function($deltaX$jscomp$6_promise$jscomp$46$$,$deltaY$jscomp$7$$){$JSCompiler_StaticMethods_onZoomInc_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$,$centerClientX$jscomp$1$$,$centerClientY$jscomp$1$$,$deltaX$jscomp$6_promise$jscomp$46$$,$deltaY$jscomp$7$$);return!0}));var $relayout$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$.$D$>
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$.$S$;return $deltaX$jscomp$6_promise$jscomp$46$$.then(function(){return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$)}).then(function(){$relayout$$&&$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$onZoomRelease_$self$$)})},
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$,$newScale$jscomp$3$$,$newPosX$jscomp$3$$,$newPosY$jscomp$3$$,$animate$jscomp$6$$){var $ds$$=$newScale$jscomp$3$$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$D$,$dist$jscomp$1_dx$jscomp$9$$=
$newPosX$jscomp$3$$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$I$,$dur_dy$jscomp$12$$=$newPosY$jscomp$3$$-$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$H$;$dist$jscomp$1_dx$jscomp$9$$=Math.sqrt($dist$jscomp$1_dx$jscomp$9$$*$dist$jscomp$1_dx$jscomp$9$$+$dur_dy$jscomp$12$$*$dur_dy$jscomp$12$$);$dur_dy$jscomp$12$$=0;$animate$jscomp$6$$&&($dur_dy$jscomp$12$$=
Math.min(250,Math.max(2.5*$dist$jscomp$1_dx$jscomp$9$$,250*Math.abs($ds$$))));if(16<$dur_dy$jscomp$12$$&&$animate$jscomp$6$$){var $scaleFunc$$=_.$numeric$$module$src$transition$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$D$,$newScale$jscomp$3$$),$xFunc$$=_.$numeric$$module$src$transition$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$I$,$newPosX$jscomp$3$$),
$yFunc$$=_.$numeric$$module$src$transition$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$H$,$newPosY$jscomp$3$$);var $promise$jscomp$47$$=_.$JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$(_.$Animation$$module$src$animation$animate$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$F$,function($newScale$jscomp$3$$){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$D$=
$scaleFunc$$($newScale$jscomp$3$$);$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$I$=$xFunc$$($newScale$jscomp$3$$);$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$H$=$yFunc$$($newScale$jscomp$3$$);$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$)},
$dur_dy$jscomp$12$$,$PAN_ZOOM_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$),function(){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$D$=$newScale$jscomp$3$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$I$=$newPosX$jscomp$3$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$H$=
$newPosY$jscomp$3$$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$)})}else $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$D$=$newScale$jscomp$3$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$I$=
$newPosX$jscomp$3$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$.$H$=$newPosY$jscomp$3$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$self$$),$animate$jscomp$6$$?$promise$jscomp$47$$=Promise.resolve():$promise$jscomp$47$$=void 0;return $promise$jscomp$47$$},
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$$=function($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$){var $newScale$jscomp$4$$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundValue_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$D$,
1,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$R$,0);$newScale$jscomp$4$$!=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$D$&&$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$,
$newScale$jscomp$4$$);return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$set_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$,$newScale$jscomp$4$$,$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundX_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$I$/$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$D$*$newScale$jscomp$4$$,!1),$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$boundY_$$($JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$,
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$H$/$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$D$*$newScale$jscomp$4$$,!1),!0).then(function(){$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$S$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$D$;
$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$U$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$I$;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$P$=$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$release_$self$$.$H$})},
$AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=function($element$jscomp$501$$){var $$jscomp$super$this$jscomp$62$$=AMP.BaseElement.call(this,$element$jscomp$501$$)||this;$$jscomp$super$this$jscomp$62$$.$O$=-1;$$jscomp$super$this$jscomp$62$$.$I$=!1;$$jscomp$super$this$jscomp$62$$.$K$=!1;$$jscomp$super$this$jscomp$62$$.$J$=null;$$jscomp$super$this$jscomp$62$$.$D$=null;$$jscomp$super$this$jscomp$62$$.$M$=null;$$jscomp$super$this$jscomp$62$$.$F$=null;$$jscomp$super$this$jscomp$62$$.$G$=
null;$$jscomp$super$this$jscomp$62$$.$H$=null;$$jscomp$super$this$jscomp$62$$.$P$=$$jscomp$super$this$jscomp$62$$.$R$.bind($$jscomp$super$this$jscomp$62$$);_.$JSCompiler_StaticMethods_registerDefaultAction$$($$jscomp$super$this$jscomp$62$$,function($element$jscomp$501$$){return $JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$$($$jscomp$super$this$jscomp$62$$,$element$jscomp$501$$)},"open");return $$jscomp$super$this$jscomp$62$$},
$JSCompiler_StaticMethods_buildLightbox_$$=function($JSCompiler_StaticMethods_buildLightbox_$self$$){if(!$JSCompiler_StaticMethods_buildLightbox_$self$$.$F$){$JSCompiler_StaticMethods_buildLightbox_$self$$.$F$=$JSCompiler_StaticMethods_buildLightbox_$self$$.element.ownerDocument.createElement("div");$JSCompiler_StaticMethods_buildLightbox_$self$$.$F$.classList.add("i-amphtml-image-lightbox-container");$JSCompiler_StaticMethods_buildLightbox_$self$$.element.appendChild($JSCompiler_StaticMethods_buildLightbox_$self$$.$F$);
$JSCompiler_StaticMethods_buildLightbox_$self$$.$G$=new $ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$($JSCompiler_StaticMethods_buildLightbox_$self$$,$JSCompiler_StaticMethods_buildLightbox_$self$$.$win$,$JSCompiler_StaticMethods_buildLightbox_$self$$.$loadPromise$.bind($JSCompiler_StaticMethods_buildLightbox_$self$$));$JSCompiler_StaticMethods_buildLightbox_$self$$.$F$.appendChild($JSCompiler_StaticMethods_buildLightbox_$self$$.$G$.$getElement$());$JSCompiler_StaticMethods_buildLightbox_$self$$.$H$=
$JSCompiler_StaticMethods_buildLightbox_$self$$.element.ownerDocument.createElement("div");$JSCompiler_StaticMethods_buildLightbox_$self$$.$H$.setAttribute("id",$JSCompiler_StaticMethods_buildLightbox_$self$$.element.getAttribute("id")+"-caption");$JSCompiler_StaticMethods_buildLightbox_$self$$.$H$.classList.add("amp-image-lightbox-caption");$JSCompiler_StaticMethods_buildLightbox_$self$$.$H$.classList.add("i-amphtml-image-lightbox-caption");$JSCompiler_StaticMethods_buildLightbox_$self$$.$F$.appendChild($JSCompiler_StaticMethods_buildLightbox_$self$$.$H$);
var $gestures$jscomp$1_screenReaderCloseButton$$=$JSCompiler_StaticMethods_buildLightbox_$self$$.element.ownerDocument.createElement("button"),$ariaLabel$$=$JSCompiler_StaticMethods_buildLightbox_$self$$.element.getAttribute("data-close-button-aria-label")||"Close the lightbox";$gestures$jscomp$1_screenReaderCloseButton$$.textContent=$ariaLabel$$;$gestures$jscomp$1_screenReaderCloseButton$$.classList.add("i-amphtml-screen-reader");$gestures$jscomp$1_screenReaderCloseButton$$.tabIndex=-1;$gestures$jscomp$1_screenReaderCloseButton$$.addEventListener("click",
function(){$JSCompiler_StaticMethods_buildLightbox_$self$$.close()});$JSCompiler_StaticMethods_buildLightbox_$self$$.element.appendChild($gestures$jscomp$1_screenReaderCloseButton$$);$gestures$jscomp$1_screenReaderCloseButton$$=_.$Gestures$$module$src$gesture$get$$($JSCompiler_StaticMethods_buildLightbox_$self$$.element);$JSCompiler_StaticMethods_buildLightbox_$self$$.element.addEventListener("click",function($gestures$jscomp$1_screenReaderCloseButton$$){$JSCompiler_StaticMethods_buildLightbox_$self$$.$K$||
$JSCompiler_StaticMethods_buildLightbox_$self$$.$G$.$getImage$().contains($gestures$jscomp$1_screenReaderCloseButton$$.target)||$JSCompiler_StaticMethods_buildLightbox_$self$$.close()});_.$JSCompiler_StaticMethods_onGesture$$($gestures$jscomp$1_screenReaderCloseButton$$,_.$TapRecognizer$$module$src$gesture_recognizers$$,function(){$JSCompiler_StaticMethods_buildLightbox_$self$$.$K$||$JSCompiler_StaticMethods_buildLightbox_$self$$.close()});_.$JSCompiler_StaticMethods_onGesture$$($gestures$jscomp$1_screenReaderCloseButton$$,
_.$SwipeXYRecognizer$$module$src$gesture_recognizers$$,function(){})}},$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$$=function($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$,$invocation$jscomp$40_source$jscomp$42$$){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$I$||
($JSCompiler_StaticMethods_buildLightbox_$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$),$invocation$jscomp$40_source$jscomp$42$$=$invocation$jscomp$40_source$jscomp$42$$.caller,$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$I$=!0,$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$reset_$(),
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$,$invocation$jscomp$40_source$jscomp$42$$),$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$win$.document.documentElement.addEventListener("keydown",$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$P$),
_.$JSCompiler_StaticMethods_enterLightboxMode$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$getViewport$()),$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$),$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$M$=
_.$JSCompiler_StaticMethods_onChanged$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$getViewport$(),function(){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$I$&&(_.$startsWith$$module$src$string$$(_.$JSCompiler_StaticMethods_getIosVersionString$$(_.$Services$$module$src$services$platformFor$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$win$)),
"10.3")?_.$Services$$module$src$services$timerFor$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$win$).delay(function(){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$G$.measure()},500):$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$G$.measure())}),_.$Services$$module$src$services$historyForDoc$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$getAmpDoc$()).push($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.close.bind($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$)).then(function($invocation$jscomp$40_source$jscomp$42$$){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$open_$self$$.$O$=
$invocation$jscomp$40_source$jscomp$42$$}))},$JSCompiler_StaticMethods_toggleViewMode$$=function($JSCompiler_StaticMethods_toggleViewMode$self$$,$opt_on$jscomp$1$$){void 0!==$opt_on$jscomp$1$$?$JSCompiler_StaticMethods_toggleViewMode$self$$.$F$.classList.toggle("i-amphtml-image-lightbox-view-mode",$opt_on$jscomp$1$$):$JSCompiler_StaticMethods_toggleViewMode$self$$.$F$.classList.toggle("i-amphtml-image-lightbox-view-mode")},$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$$=
function($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$,$describedBy_sourceElement$jscomp$1$$){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$J$=$describedBy_sourceElement$jscomp$1$$;$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$D$=_.$childElementByTag$$module$src$dom$$($describedBy_sourceElement$jscomp$1$$,
"img");$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$G$.init($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$J$,$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$D$);var $caption$$=null,$figure$$=_.$closestAncestorElementBySelector$$module$src$dom$$($describedBy_sourceElement$jscomp$1$$,
"figure");$figure$$&&($caption$$=$figure$$.querySelector("figcaption"));$caption$$||($describedBy_sourceElement$jscomp$1$$=$describedBy_sourceElement$jscomp$1$$.getAttribute("aria-describedby"),$caption$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.element.ownerDocument.getElementById($describedBy_sourceElement$jscomp$1$$));$caption$$&&(_.$copyChildren$$module$src$dom$$($caption$$,$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$H$),
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$G$.$getImage$().setAttribute("aria-describedby",$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$H$.getAttribute("id")));$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$init_$self$$.$H$.classList.toggle("i-amphtml-empty",!$caption$$)},
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$$=function($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$K$=!0;_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element,
!0);_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element,{opacity:0});$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$G$.measure();var $anim$$=new _.$Animation$$module$src$animation$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element);
$anim$$.add(0,_.$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element,{opacity:_.$numeric$$module$src$transition$$(0,1)}),.6,$ENTER_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);var $transLayer$$=null;if($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$&&_.$isLoaded$$module$src$event_helper$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$)&&
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$.src){$transLayer$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element.ownerDocument.createElement("div");$transLayer$$.classList.add("i-amphtml-image-lightbox-trans");$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$getAmpDoc$().$getBody$().appendChild($transLayer$$);
var $rect$jscomp$17$$=_.$layoutRectFromDomRect$$module$src$layout_rect$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$.getBoundingClientRect()),$imageBox$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$G$.$J$,$clone$jscomp$2$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$.cloneNode(!0);
$clone$jscomp$2$$.className="";_.$setStyles$$module$src$style$$($clone$jscomp$2$$,{position:"absolute",top:_.$px$$module$src$style$$($rect$jscomp$17$$.top),left:_.$px$$module$src$style$$($rect$jscomp$17$$.left),width:_.$px$$module$src$style$$($rect$jscomp$17$$.width),height:_.$px$$module$src$style$$($rect$jscomp$17$$.height),transformOrigin:"top left",willChange:"transform"});$transLayer$$.appendChild($clone$jscomp$2$$);$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$D$.classList.add("i-amphtml-ghost");
var $dy$jscomp$13$$=$imageBox$$.top-$rect$jscomp$17$$.top;$anim$$.add(0,_.$setStyles$$module$src$transition$$($clone$jscomp$2$$,{transform:$concat$$module$src$transition$$([$translate$$module$src$transition$$(_.$numeric$$module$src$transition$$(0,$imageBox$$.left-$rect$jscomp$17$$.left),_.$numeric$$module$src$transition$$(0,$dy$jscomp$13$$)),$scale$$module$src$transition$$(_.$numeric$$module$src$transition$$(1,0!=$rect$jscomp$17$$.width?$imageBox$$.width/$rect$jscomp$17$$.width:1))])}),Math.max(.2,
Math.min(.8,Math.abs($dy$jscomp$13$$)/250*.8)),$ENTER_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$F$,{opacity:0});$anim$$.add(.8,_.$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$F$,{opacity:_.$numeric$$module$src$transition$$(0,
1)}),.1,$ENTER_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);$anim$$.add(.9,_.$setStyles$$module$src$transition$$($transLayer$$,{opacity:_.$numeric$$module$src$transition$$(1,.01)}),.1,$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$)}_.$JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($anim$$.start(500),function(){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$K$=
!1;_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.element,{opacity:""});_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$F$,{opacity:""});$transLayer$$&&$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$enter_$self$$.$getAmpDoc$().$getBody$().removeChild($transLayer$$)})},
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$$=function($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$){var $dy$jscomp$14_image$jscomp$9$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$G$.$getImage$(),$imageBox$jscomp$1_motionTime$jscomp$1$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$G$.$getImageBoxWithOffset$(),
$anim$jscomp$1$$=new _.$Animation$$module$src$animation$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.element),$dur$jscomp$2$$=500;$anim$jscomp$1$$.add(0,_.$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.element,{opacity:_.$numeric$$module$src$transition$$(1,0)}),.9,$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);
var $transLayer$jscomp$1$$=null;if(_.$isLoaded$$module$src$event_helper$$($dy$jscomp$14_image$jscomp$9$$)&&$dy$jscomp$14_image$jscomp$9$$.src&&$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$D$){$transLayer$jscomp$1$$=$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.element.ownerDocument.createElement("div");$transLayer$jscomp$1$$.classList.add("i-amphtml-image-lightbox-trans");
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$getAmpDoc$().$getBody$().appendChild($transLayer$jscomp$1$$);var $rect$jscomp$18$$=_.$layoutRectFromDomRect$$module$src$layout_rect$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$D$.getBoundingClientRect()),$clone$jscomp$3$$=$dy$jscomp$14_image$jscomp$9$$.cloneNode(!0);_.$setStyles$$module$src$style$$($clone$jscomp$3$$,
{position:"absolute",top:_.$px$$module$src$style$$($imageBox$jscomp$1_motionTime$jscomp$1$$.top),left:_.$px$$module$src$style$$($imageBox$jscomp$1_motionTime$jscomp$1$$.left),width:_.$px$$module$src$style$$($imageBox$jscomp$1_motionTime$jscomp$1$$.width),height:_.$px$$module$src$style$$($imageBox$jscomp$1_motionTime$jscomp$1$$.height),transform:"",transformOrigin:"top left",willChange:"transform"});$transLayer$jscomp$1$$.appendChild($clone$jscomp$3$$);$anim$jscomp$1$$.add(0,_.$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$F$,
{opacity:_.$numeric$$module$src$transition$$(1,0)}),.1,$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);$dy$jscomp$14_image$jscomp$9$$=$rect$jscomp$18$$.top-$imageBox$jscomp$1_motionTime$jscomp$1$$.top;var $moveAndScale$$=_.$setStyles$$module$src$transition$$($clone$jscomp$3$$,{transform:$concat$$module$src$transition$$([$translate$$module$src$transition$$(_.$numeric$$module$src$transition$$(0,$rect$jscomp$18$$.left-$imageBox$jscomp$1_motionTime$jscomp$1$$.left),_.$numeric$$module$src$transition$$(0,
$dy$jscomp$14_image$jscomp$9$$)),$scale$$module$src$transition$$(_.$numeric$$module$src$transition$$(1,0!=$imageBox$jscomp$1_motionTime$jscomp$1$$.width?$rect$jscomp$18$$.width/$imageBox$jscomp$1_motionTime$jscomp$1$$.width:1))])});$imageBox$jscomp$1_motionTime$jscomp$1$$=Math.max(.2,Math.min(.8,Math.abs($dy$jscomp$14_image$jscomp$9$$)/250*.8));$anim$jscomp$1$$.add(Math.min(.8-$imageBox$jscomp$1_motionTime$jscomp$1$$,.2),function($dy$jscomp$14_image$jscomp$9$$,$imageBox$jscomp$1_motionTime$jscomp$1$$){$moveAndScale$$($dy$jscomp$14_image$jscomp$9$$);
$imageBox$jscomp$1_motionTime$jscomp$1$$&&$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$D$.classList.remove("i-amphtml-ghost")},$imageBox$jscomp$1_motionTime$jscomp$1$$,$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);$anim$jscomp$1$$.add(.8,_.$setStyles$$module$src$transition$$($transLayer$jscomp$1$$,{opacity:_.$numeric$$module$src$transition$$(1,.01)}),.2,$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$);
$dur$jscomp$2$$=Math.max(Math.min(Math.abs($dy$jscomp$14_image$jscomp$9$$)/250*$dur$jscomp$2$$,$dur$jscomp$2$$),300)}_.$JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($anim$jscomp$1$$.start($dur$jscomp$2$$),function(){$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$D$&&$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$D$.classList.remove("i-amphtml-ghost");
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.collapse();_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.element,{opacity:""});_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$F$,{opacity:""});$transLayer$jscomp$1$$&&
$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$getAmpDoc$().$getBody$().removeChild($transLayer$jscomp$1$$);$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$self$$.$reset_$()})};var $ARIA_ATTRIBUTES$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=["aria-label","aria-describedby","aria-labelledby"],$ENTER_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=_.$bezierCurve$$module$src$curve$$(.4,0,.2,1),$EXIT_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=_.$bezierCurve$$module$src$curve$$(.4,0,.2,1),$PAN_ZOOM_CURVE_$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$=_.$bezierCurve$$module$src$curve$$(.4,0,
.2,1.4);_.$JSCompiler_prototypeAlias$$=$ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$.prototype;_.$JSCompiler_prototypeAlias$$.$getElement$=function(){return this.$X$};_.$JSCompiler_prototypeAlias$$.$getImage$=function(){return this.$F$};_.$JSCompiler_prototypeAlias$$.$getImageBoxWithOffset$=function(){return 0==this.$I$&&0==this.$H$?this.$J$:_.$moveLayoutRect$$module$src$layout_rect$$(this.$J$,this.$I$,this.$H$)};
_.$JSCompiler_prototypeAlias$$.reset=function(){var $$jscomp$this$jscomp$690$$=this;this.$F$.setAttribute("src","");$ARIA_ATTRIBUTES$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$.forEach(function($key$jscomp$129$$){$$jscomp$this$jscomp$690$$.$F$.removeAttribute($key$jscomp$129$$)});this.$F$.removeAttribute("aria-describedby");this.$W$=null;this.$J$=_.$layoutRectLtwh$$module$src$layout_rect$$(0,0,0,0);this.$M$=this.$O$=0;this.$S$=this.$D$=this.$V$=1;this.$R$=2;this.$aa$=this.$Z$=this.$ea$=
this.$ba$=this.$H$=this.$I$=this.$P$=this.$U$=0;this.$K$&&_.$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$halt$$(this.$K$);this.$K$=null};
_.$JSCompiler_prototypeAlias$$.init=function($sourceElement$$,$sourceImage$$){var $$jscomp$this$jscomp$691$$=this;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$setSourceDimensions_$$(this,$sourceElement$$,$sourceImage$$);this.$W$=_.$srcsetFromElement$$module$src$srcset$$($sourceElement$$);$sourceElement$$.$getImpl$().then(function($sourceElement$$){_.$JSCompiler_StaticMethods_propagateAttributes$$($sourceElement$$,$ARIA_ATTRIBUTES$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$,
$$jscomp$this$jscomp$691$$.$F$)});$sourceImage$$&&_.$isLoaded$$module$src$event_helper$$($sourceImage$$)&&$sourceImage$$.src&&this.$F$.setAttribute("src",$sourceImage$$.src)};
_.$JSCompiler_prototypeAlias$$.measure=function(){this.$G$=_.$layoutRectFromDomRect$$module$src$layout_rect$$(this.$X$.getBoundingClientRect());var $sourceAspectRatio$$=this.$O$/this.$M$,$height$jscomp$60_viewerBoxRatio$$=Math.min(this.$G$.width/$sourceAspectRatio$$,this.$G$.height),$width$jscomp$65$$=Math.min(this.$G$.height*$sourceAspectRatio$$,this.$G$.width);16>=Math.abs($width$jscomp$65$$-this.$O$)&&16>=Math.abs($height$jscomp$60_viewerBoxRatio$$-this.$M$)&&($width$jscomp$65$$=this.$O$,$height$jscomp$60_viewerBoxRatio$$=
this.$M$);this.$J$=_.$layoutRectLtwh$$module$src$layout_rect$$(Math.round((this.$G$.width-$width$jscomp$65$$)/2),Math.round((this.$G$.height-$height$jscomp$60_viewerBoxRatio$$)/2),Math.round($width$jscomp$65$$),Math.round($height$jscomp$60_viewerBoxRatio$$));_.$setStyles$$module$src$style$$(this.$F$,{top:_.$px$$module$src$style$$(this.$J$.top),left:_.$px$$module$src$style$$(this.$J$.left),width:_.$px$$module$src$style$$(this.$J$.width),height:_.$px$$module$src$style$$(this.$J$.height)});$height$jscomp$60_viewerBoxRatio$$=
this.$G$.width/this.$G$.height;this.$R$=Math.max(2,Math.max($height$jscomp$60_viewerBoxRatio$$/$sourceAspectRatio$$,$sourceAspectRatio$$/$height$jscomp$60_viewerBoxRatio$$));this.$S$=this.$D$=1;this.$P$=this.$H$=this.$U$=this.$I$=0;$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoomBounds_$$(this,this.$D$);$JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updatePanZoom_$$(this);
return $JSCompiler_StaticMethods_ImageViewer$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$updateSrc_$$(this)};_.$$jscomp$inherits$$($AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$,AMP.BaseElement);$AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$.prototype.$R$=function($event$jscomp$145$$){"Escape"==$event$jscomp$145$$.key&&($event$jscomp$145$$.preventDefault(),this.close())};
$AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$.prototype.close=function(){this.$I$&&(this.$K$=this.$I$=!1,$JSCompiler_StaticMethods_AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox_prototype$exit_$$(this),this.$M$&&(this.$M$(),this.$M$=null),_.$JSCompiler_StaticMethods_leaveLightboxMode$$(this.$getViewport$()),-1!=this.$O$&&_.$Services$$module$src$services$historyForDoc$$(this.$getAmpDoc$()).pop(this.$O$),this.$win$.document.documentElement.removeEventListener("keydown",
this.$P$),this.$J$&&_.$tryFocus$$module$src$dom$$(this.$J$))};$AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$.prototype.$reset_$=function(){this.$G$.reset();_.$removeChildren$$module$src$dom$$(this.$H$);this.$D$=this.$J$=null;$JSCompiler_StaticMethods_toggleViewMode$$(this,!1)};self.AMP.registerElement("amp-image-lightbox",$AmpImageLightbox$$module$extensions$amp_image_lightbox$0_1$amp_image_lightbox$$,"amp-image-lightbox{position:fixed!important;top:0!important;left:0!important;bottom:0!important;right:0!important;margin:0!important;padding:0!important;overflow:hidden!important;-webkit-transform:translateZ(0)!important;transform:translateZ(0)!important;-ms-touch-action:none!important;touch-action:none!important;z-index:1000;background:rgba(0,0,0,0.95);color:#f2f2f2}.i-amphtml-image-lightbox-container{position:absolute;z-index:0;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}.i-amphtml-image-lightbox-trans{pointer-events:none!important;position:fixed;z-index:1001;top:0;left:0;bottom:0;right:0}.i-amphtml-image-lightbox-caption{position:absolute!important;z-index:2;bottom:0!important;left:0!important;right:0!important}.i-amphtml-image-lightbox-caption.i-amphtml-empty,.i-amphtml-image-lightbox-view-mode .i-amphtml-image-lightbox-caption{visibility:hidden}.amp-image-lightbox-caption{background:rgba(0,0,0,0.5);max-height:25%;padding:8px}.i-amphtml-image-lightbox-viewer{position:absolute;z-index:1;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}.i-amphtml-image-lightbox-viewer-image{position:absolute;z-index:1;display:block;-webkit-transform-origin:50% 50%;transform-origin:50% 50%}\n/*# sourceURL=/extensions/amp-image-lightbox/0.1/amp-image-lightbox.css*/");
})});

//# sourceMappingURL=amp-image-lightbox-0.1.js.map
