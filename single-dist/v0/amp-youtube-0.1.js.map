{"version":3,"sources":["/extensions/amp-youtube/0.1/amp-youtube.js","/src/event-helper.js"],"names":["constructor","element","videoid_","liveChannelid_","muted_","iframe_","info_","videoIframeSrc_","playerReadyPromise_","playerReadyResolver_","unlistenMessage_","getVideoIframeSrc_","urlSuffix","getEmbedUrl_","getAttribute","baseUrl","descriptor","encodeURIComponent","params","getDataParamsFromAttributes","user","error","hasAttribute","hasAutoplay","src","addParamsToUrl","sendCommand_","command","opt_args","then","contentWindow","message","JSON","stringify","dict","postMessage","buildImagePlaceholder_","el","imgPlaceholder","htmlFor","_template","videoid","setStyles","propagateAttributes","setAttribute","applyFillContent","appendChild","loadPromise","naturalWidth","naturalHeight","Error","catch","getVsync","mutate","$jscomp.inherits","BaseElement","AmpYoutube","AMP","preconnectCallback","?.prototype","opt_onLayout","preconnect","url","isLayoutSupported","layout","isLayoutSizeDefined","renderOutsideViewport","viewportCallback","visible","dispatchCustomEvent","VideoEvents","VISIBILITY","buildCallback","getVideoId_","getLiveChannelId_","deferred","Deferred","promise","resolve","getPlaceholder","installVideoManagerForDoc","layoutCallback","iframe","createFrameFor","addUnsafeAllowAutoplay","Services$$module$src$services.videoManagerForDoc","register","listen","win","handleYoutubeMessage_","bind","loaded","Services$$module$src$services.timerFor","listenToFrame_","LOAD","unlayoutCallback","removeElement","pauseCallback","pause","mutatedAttributesCallback","mutations","event","originMatches","eventData","data","isJsonOrObj","objOrParseJson","eventType","info","playerState","redispatch","toString","PLAYING","PAUSED","PAUSE","ENDED","muted","mutedOrUnmutedEvent","LOADEDMETADATA","undefined","currentTime","supportsPlatform","isInteractive","play","mute","unmute","showControls","hideControls","fullscreenEnter","fullscreenExit","getMetadata","preimplementsMediaSessionAPI","preimplementsAutoFullscreen","getCurrentTime","NaN","getDuration","duration","getPlayedRanges","seekTo","TAG","registerElement"],"mappings":"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","file":"amp-youtube-0.1.js","sourcesContent":[]}