{"version":3,"sources":["/extensions/amp-link-rewriter/0.1/scope.js","/extensions/amp-link-rewriter/0.1/config-options.js","/extensions/amp-link-rewriter/0.1/link-rewriter.js","/extensions/amp-link-rewriter/0.1/amp-link-rewriter.js","/src/service/navigation.js","/src/service/viewer-impl.js","/src/layout.js"],"names":["getScopeElements","ampDoc","configOpts","doc","getRootNode","cssSelector","section","join","selection","querySelectorAll","filteredSelection","length","forEach","element","hasAttributeValues","push","htmlElement","anchorAttr","attribute","Object","keys","attrKeys","every","key","test","reg","RegExp","getAttribute","parseAttribute","newAttr","constructor","referrer","ampElement","ampDoc_","getChildJsonConfig","e","user","createError","TAG","config","configOpts_","output","toString","hasOwn","vars","listElements_","referrer_","rewrittenUrl_","urlReplacementService_","Services$$module$src$services.urlReplacementsForDoc","isListed_","anchor","filter","filtered","isInternalLink_","trimmedDomains","href","some","domain","domainHrefMatch","match","REG_DOMAIN_URL","replaceVars_","WL_ANCHOR_ATTR","val","dataset","getDataParamsFromAttributes","undefined","PREFIX_DATA_ATTR","assign","Math","random","substr","replace","encodeURIComponent","getAmpDoc","rewriter_","navigation_","Services$$module$src$services.navigationForDoc","attachClickEvent_","registerAnchorMutator","isRewritten_","sourceTrimmedDomain","Services$$module$src$services.documentInfoForDoc","sourceUrl","canonicalTrimmedDomain","canonicalUrl","setRedirectUrl_","expandUrlSync","DOCUMENT_REFERRER","PAGE_PROP_WHITELIST","LINK_REWRITER_MANAGER","$jscomp.inherits","BaseElement","AmpLinkRewriter","AMP","buildCallback","viewer","Services$$module$src$services.viewerForDoc","whenBodyAvailable","then","referrerUrl_","letsRockIt_","bind","LinkRewriter","isLayoutSupported","layout","NODISPLAY","registerElement"],"mappings":"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","file":"amp-link-rewriter-0.1.js","sourcesContent":[]}