{"version":3,"sources":["/extensions/amp-access-scroll/0.1/read-depth-tracker.js","/extensions/amp-access-scroll/0.1/scroll-impl.js","/build/amp-access-scroll-0.1.css.js","/src/url.js","/extensions/amp-access-scroll/0.1/amp-access-scroll.js","/extensions/amp-access/0.1/amp-access-source.js"],"names":["constructor","ampdoc","accessSource","connectHostname","ampdoc_","lastReadIndex_","accessSource_","connectHostname_","debouncedFindTopParagraph_","debounce","win","findTopParagraph_","bind","viewport_","Services$$module$src$services.viewportForDoc","paragraphs_","whenReady","then","onChanged","getBody","getElementsByTagName","updateLastRead_","snippet","buildUrl","encodeURIComponent","url","Services$$module$src$services.xhrFor","fetch","accessConfig","ACCESS_CONFIG","devEtld","config","getMode","development","scrollHostname","devScrollEtld","getAdapterConfig","scrollConfig","collectUrlVars","check","fetchJson","e","message","indexOf","blockedByScrollApp","addActivateButton","ScrollElement","installStylesForDoc","CSS","TAG","scrollBar_","document","createElement","classList","add","iframe_","setAttribute","appendChild","addToFixedLayer","handleScrollUser","vendorConfig","placeholder","img","scrollbarUrl","onload","this.iframe_.onload","removeChild","Promise","all","slice","call","map","p","getClientRectAsync","rects","lastIdxAboveViewport","lastPosition","i","length","bottomPosition","bottom","recordLatestRead_","paragraphIdx","innerText","substring","$jscomp.inherits","AccessClientAdapter","ScrollAccessVendor","authorize","super","response","isStory","getRootNode","querySelector","doc","attributes","dict","analyticsElem","createElementWithAttributes","scriptElem","ANALYTICS_CONFIG","textContent","JSON","stringify","CONFIG","installExtensionForDoc","Services$$module$src$services.extensionsFor","extensions","ReadDepthTracker","parseQueryString_","queryParams","location","search","ScrollContentBlocker","AMP","registerServiceForDoc","Services$$module$src$services.accessServiceForDoc","getHeadNode","element","accessService","source","getVendorSource","vendor","adapter_","registerVendor"],"mappings":"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","file":"amp-access-scroll-0.1.js","sourcesContent":[]}