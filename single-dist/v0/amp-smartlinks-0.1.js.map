{"version":3,"sources":["/extensions/amp-smartlinks/0.1/linkmate-options.js","/extensions/amp-smartlinks/0.1/linkmate.js","/src/event-helper.js","/extensions/amp-smartlinks/0.1/constants.js","/extensions/amp-smartlinks/0.1/amp-smartlinks.js","/src/common-signals.js","/src/extension-analytics.js","/extensions/amp-skimlinks/0.1/link-rewriter/link-rewriter.js","/src/service/viewer-impl.js"],"names":["getConfigOptions","element","getAttribute","nrtvSlug","toLowerCase","hasAttribute","linkAttribute","linkSelector","linkmateEnabled","exclusiveLinks","constructor","ampDoc","xhr","linkmateOptions","ampDoc_","xhr_","requestExclusiveLinks_","publisherID_","publisherID","linkAttribute_","rootNode_","getRootNode","linkmateResponse_","anchorList_","runLinkmate","anchorList","syncMappedLinks","anchorListChanged","deepEquals","mapLinks_","asyncMappedLinks","postToLinkmate_","then","res","data","TwoStepsResponse","linksPayload","buildLinksPayload_","payload","dict","editPayload","getEditInfo_","title","getUrl","fetchUrl","LINKMATE_ENDPOINT","replace","toString","fetchJson","postOptions","method","ampCors","headers","body","json","postLinks","forEach","anchor","link","test","exclusive","push","linkObj","mappings","smartLink","replacementUrl","linkRewriterService_","smartLinkRewriter_","linkmateOptions_","linkmate_","referrer_","runSmartlinks_","getLinkmateOptions_","config","linkmateExpected","postPageImpression_","signals","signal","LOAD_START","generateUUID_","win","navigator","userAgent","builder","CustomEventReporterBuilder","track","PAGE_IMPRESSION_ENDPOINT","config_","transportConfig","build","reporter","trigger","Linkmate","initLinkRewriter_","getAnchorReplacementList","anchorReplacementCache_","NRTV_CONFIG_ENDPOINT","err","registerLinkRewriter","TAG","options","c","crypto","getRandomValues","Uint8Array","$jscomp.inherits","BaseElement","AmpSmartlinks","AMP","buildCallback","getAmpDoc","Services$$module$src$services.xhrFor","viewer","Services$$module$src$services.viewerForDoc","LinkRewriterManager","whenBodyAvailable","referrerUrl_","referrer","whenFirstVisiblePromise_","registerElement"],"mappings":"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","file":"amp-smartlinks-0.1.js","sourcesContent":[]}