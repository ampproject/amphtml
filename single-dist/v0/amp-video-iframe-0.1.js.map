{"version":3,"sources":["/src/iframe-helper.js","/extensions/amp-video-iframe/0.1/amp-video-iframe.js","/src/event-helper.js","/src/video-interface.js","/src/service/url-impl.js","/src/iframe-video.js"],"names":["disableScrollingOnIframe","iframe","addAttributesToElement","dict","setStyle","constructor","element","iframe_","unlistenFrame_","readyDeferred_","canPlay_","boundOnMessage_","this.boundOnMessage_","e","onMessage_","originMatches","eventData","data","isJsonOrObj","objOrParseJson","messageId","methodReceived","getIntersectionChangeEntry","intersectionRatio","postMessage_","MIN_VISIBILITY_RATIO_FOR_AUTOPLAY","postedRatio","time","eventReceived","isCanPlayEvent","reject","resolve","spec","vars","assertString","user","eventType","dispatchCustomEvent","CUSTOM","ALLOWED_EVENTS","indexOf","getMetadata_","Services$$module$src$services.documentInfoForDoc","sourceUrl","canonicalUrl","getSrc_","urlService","Services$$module$src$services.urlForDoc","getAttribute","urlString","getSourceOrigin","src","win","origin","parse","location","href","warn","TAG","method_","method","message","contentWindow","promise","then","postMessage","JSON","stringify","_template","SANDBOX","ALLOW_SCRIPTS","ALLOW_SAME_ORIGIN","ALLOW_POPUPS","ALLOW_POPUPS_TO_ESCAPE_SANDBOX","ALLOW_TOP_NAVIGATION_BY_USER_ACTIVATION","VideoEvents","PLAYING","PAUSE","ENDED","MUTED","UNMUTED","AD_START","AD_END","$jscomp.inherits","BaseElement","AmpVideoIframe","AMP","isLayoutSupported","?.prototype","layout","isLayoutSizeDefined","buildCallback","isIntegrationTest","hasAttribute","assert","looksLikeTrackingIframe","installVideoManagerForDoc","layoutCallback","name","createFrameFor","internalListenImplementation","opt_evtListenerOpts","createReadyPromise_","Deferred","onReady_","Services$$module$src$services.videoManagerForDoc","register","LOAD","mutatedAttributesCallback","mutations","updateSrc_","createPlaceholderCallback","poster","htmlFor","html","setAttribute","unlayoutCallback","removeIframe_","removeElement","pauseCallback","pause","play","mute","unmute","isInteractive","supportsPlatform","preimplementsMediaSessionAPI","preimplementsAutoFullscreen","fullscreenEnter","fullscreenExit","showControls","hideControls","getMetadata","getDuration","getCurrentTime","getPlayedRanges","seekTo","error","registerElement"],"mappings":"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","file":"amp-video-iframe-0.1.js","sourcesContent":[]}