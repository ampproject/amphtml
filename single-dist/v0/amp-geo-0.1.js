(self.AMP=self.AMP||[]).push({n:"amp-geo",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$=function($$jscomp$super$this$jscomp$53_element$jscomp$483$$){$$jscomp$super$this$jscomp$53_element$jscomp$483$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$53_element$jscomp$483$$)||this;$$jscomp$super$this$jscomp$53_element$jscomp$483$$.$G$=0;$$jscomp$super$this$jscomp$53_element$jscomp$483$$.$I$=!1;$$jscomp$super$this$jscomp$53_element$jscomp$483$$.$D$="unknown";$$jscomp$super$this$jscomp$53_element$jscomp$483$$.$F$=[];$$jscomp$super$this$jscomp$53_element$jscomp$483$$.$H$=
[];return $$jscomp$super$this$jscomp$53_element$jscomp$483$$},$JSCompiler_StaticMethods_assertWithErrorReturn_$$=function($shouldBeTrueish$jscomp$4$$){$shouldBeTrueish$jscomp$4$$||$geoDeferred$$module$extensions$amp_geo$0_1$amp_geo$$.resolve(null);return $shouldBeTrueish$jscomp$4$$},$JSCompiler_StaticMethods_findCountry_$$=function($JSCompiler_StaticMethods_findCountry_$self$$,$ampdoc$jscomp$203_preRenderMatch$$){$ampdoc$jscomp$203_preRenderMatch$$=$ampdoc$jscomp$203_preRenderMatch$$.$getBody$().className.match($PRE_RENDER_REGEX$$module$extensions$amp_geo$0_1$amp_geo$$);
var $trimmedCountryMatch$$=/^(\w{2})?\s*/.exec("{{AMP_ISO_COUNTRY_HOTPATCH}}");_.$getMode$$module$src$mode$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$).$geoOverride$&&(_.$isCanary$$module$src$experiments$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$)||_.$getMode$$module$src$mode$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$).localDev)&&/^\w+$/.test(_.$getMode$$module$src$mode$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$).$geoOverride$)?($JSCompiler_StaticMethods_findCountry_$self$$.$G$=
2,$JSCompiler_StaticMethods_findCountry_$self$$.$D$=_.$getMode$$module$src$mode$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$).$geoOverride$.toLowerCase()):$ampdoc$jscomp$203_preRenderMatch$$&&!_.$JSCompiler_StaticMethods_Url$$module$src$service$url_impl_prototype$isProxyOrigin$$(_.$Services$$module$src$services$urlForDoc$$($JSCompiler_StaticMethods_findCountry_$self$$.element),$JSCompiler_StaticMethods_findCountry_$self$$.$win$.location)?($JSCompiler_StaticMethods_findCountry_$self$$.$G$=
1,$JSCompiler_StaticMethods_findCountry_$self$$.$D$=$ampdoc$jscomp$203_preRenderMatch$$[1]):$trimmedCountryMatch$$[1]?($JSCompiler_StaticMethods_findCountry_$self$$.$G$=0,$JSCompiler_StaticMethods_findCountry_$self$$.$D$=$trimmedCountryMatch$$[1]):""!==$trimmedCountryMatch$$[0]||_.$getMode$$module$src$mode$$($JSCompiler_StaticMethods_findCountry_$self$$.$win$).localDev||($JSCompiler_StaticMethods_findCountry_$self$$.$I$=!0,_.$dev$$module$src$log$$().error("amp-geo","GEONOTPATCHED: amp-geo served unpatched, ISO country not set"))},
$JSCompiler_StaticMethods_matchCountryGroups_$$=function($JSCompiler_StaticMethods_matchCountryGroups_$self$$,$config$jscomp$74$$){var $ISOCountryGroups$$=$config$jscomp$74$$.ISOCountryGroups;$ISOCountryGroups$$&&($JSCompiler_StaticMethods_assertWithErrorReturn_$$(_.$isObject$$module$src$types$$($ISOCountryGroups$$)),$JSCompiler_StaticMethods_matchCountryGroups_$self$$.$H$=Object.keys($ISOCountryGroups$$),$JSCompiler_StaticMethods_matchCountryGroups_$self$$.$H$.forEach(function($config$jscomp$74$$){$JSCompiler_StaticMethods_assertWithErrorReturn_$$(/^[a-z]+[a-z0-9]*$/i.test($config$jscomp$74$$)&&
!/^amp/.test($config$jscomp$74$$));$JSCompiler_StaticMethods_assertWithErrorReturn_$$(_.$isArray$$module$src$types$$($ISOCountryGroups$$[$config$jscomp$74$$]));$JSCompiler_StaticMethods_checkGroup_$$($JSCompiler_StaticMethods_matchCountryGroups_$self$$,$ISOCountryGroups$$[$config$jscomp$74$$])&&$JSCompiler_StaticMethods_matchCountryGroups_$self$$.$F$.push($config$jscomp$74$$)}))},$JSCompiler_StaticMethods_checkGroup_$$=function($JSCompiler_StaticMethods_checkGroup_$self$$,$countryGroup$$){return $countryGroup$$.reduce(function($JSCompiler_StaticMethods_checkGroup_$self$$,
$countryGroup$$){if(/^preset-/.test($countryGroup$$))return $JSCompiler_StaticMethods_assertWithErrorReturn_$$(_.$isArray$$module$src$types$$($ampGeoPresets$$module$extensions$amp_geo$0_1$amp_geo_presets$$[$countryGroup$$])),$JSCompiler_StaticMethods_checkGroup_$self$$.concat($ampGeoPresets$$module$extensions$amp_geo$0_1$amp_geo_presets$$[$countryGroup$$]);$JSCompiler_StaticMethods_checkGroup_$self$$.push($countryGroup$$);return $JSCompiler_StaticMethods_checkGroup_$self$$},[]).map(function($JSCompiler_StaticMethods_checkGroup_$self$$){return $JSCompiler_StaticMethods_checkGroup_$self$$.toLowerCase()}).includes($JSCompiler_StaticMethods_checkGroup_$self$$.$D$)},
$JSCompiler_StaticMethods_clearPreRender_$$=function($body$jscomp$27_classList$jscomp$10$$){$body$jscomp$27_classList$jscomp$10$$=$body$jscomp$27_classList$jscomp$10$$.classList;for(var $classesToRemove$$=[],$stripRe$$=/^amp-iso-country-|^amp-geo-group-/i,$i$jscomp$332$$=$body$jscomp$27_classList$jscomp$10$$.length-1;0<$i$jscomp$332$$;$i$jscomp$332$$--)$stripRe$$.test($body$jscomp$27_classList$jscomp$10$$[$i$jscomp$332$$])&&$classesToRemove$$.push($body$jscomp$27_classList$jscomp$10$$[$i$jscomp$332$$]);
return $classesToRemove$$},$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$$=function($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$,$config$jscomp$75$$){var $ampdoc$jscomp$204$$=$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$getAmpDoc$(),$states$jscomp$1$$={};return $ampdoc$jscomp$204$$.$whenBodyAvailable$().then(function($body$jscomp$28$$){$JSCompiler_StaticMethods_findCountry_$$($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$,
$ampdoc$jscomp$204$$);$JSCompiler_StaticMethods_matchCountryGroups_$$($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$,$config$jscomp$75$$);var $classesToRemove$jscomp$1$$=[];switch($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$G$){case 2:$classesToRemove$jscomp$1$$=$JSCompiler_StaticMethods_clearPreRender_$$($body$jscomp$28$$);case 0:$states$jscomp$1$$.$ISOCountry$=$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$D$;
var $classesToAdd$$=$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$F$.map(function($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$){$states$jscomp$1$$[$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$]=!0;return"amp-geo-group-"+$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$});$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$F$.length||
$classesToAdd$$.push("amp-geo-no-group");$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$I$&&$classesToAdd$$.push("amp-geo-error");$states$jscomp$1$$.$ISOCountryGroups$=$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$F$;$classesToAdd$$.push("amp-iso-country-"+$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$D$);$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$mutateElement$(function(){var $JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$=
$body$jscomp$28$$.classList;$classesToRemove$jscomp$1$$.push("amp-geo-pending");$classesToRemove$jscomp$1$$.forEach(function($config$jscomp$75$$){return $JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.remove($config$jscomp$75$$)});$classesToAdd$$.forEach(function($config$jscomp$75$$){return $JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.add($config$jscomp$75$$)});if($config$jscomp$75$$.AmpBind){var $geoState_state$jscomp$69$$=
$ampdoc$jscomp$204$$.getElementById("ampGeo");$geoState_state$jscomp$69$$&&$geoState_state$jscomp$69$$.parentNode.removeChild($geoState_state$jscomp$69$$);$geoState_state$jscomp$69$$=$ampdoc$jscomp$204$$.$win$.document.createElement("amp-state");var $confScript$$=$ampdoc$jscomp$204$$.$win$.document.createElement("script");$confScript$$.setAttribute("type","application/json");$confScript$$.textContent=JSON.stringify($states$jscomp$1$$);$geoState_state$jscomp$69$$.appendChild($confScript$$);$geoState_state$jscomp$69$$.id=
"ampGeo";$body$jscomp$28$$.appendChild($geoState_state$jscomp$69$$)}},$body$jscomp$28$$)}return{$ISOCountry$:$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$D$,$matchedISOCountryGroups$:$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$F$,$allISOCountryGroups$:$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$H$,$isInCountryGroup$:$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$.$isInCountryGroup$.bind($JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$self$$)}})},
$ampGeoPresets$$module$extensions$amp_geo$0_1$amp_geo_presets$$={"preset-eea":"AT BE BG HR CY CZ DK EE FI FR DE GR HU IS IE IT LV LI LT LU MT NL NO PL PT RO SK SI ES SE GB AX IC EA GF PF TF GI GP GG JE MQ YT NC RE BL MF PM SJ VA WF EZ CH".split(" ")};var $PRE_RENDER_REGEX$$module$extensions$amp_geo$0_1$amp_geo$$=/amp-iso-country-(\w+)/;_.$$jscomp$inherits$$($AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$,AMP.BaseElement);$AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$.prototype.$prerenderAllowed$=function(){return!0};
$AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$.prototype.$buildCallback$=function(){var $children$jscomp$139_config$jscomp$73_geo$jscomp$2$$=this.element.children;$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$.length&&$JSCompiler_StaticMethods_assertWithErrorReturn_$$(1===$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$.length&&_.$isJsonScriptTag$$module$src$dom$$($children$jscomp$139_config$jscomp$73_geo$jscomp$2$$[0]));$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$=$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$.length?
_.$tryParseJson$$module$src$json$$($children$jscomp$139_config$jscomp$73_geo$jscomp$2$$[0].textContent,function(){return $JSCompiler_StaticMethods_assertWithErrorReturn_$$(!1)}):{};$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$=$JSCompiler_StaticMethods_AmpGeo$$module$extensions$amp_geo$0_1$amp_geo_prototype$addToBody_$$(this,$children$jscomp$139_config$jscomp$73_geo$jscomp$2$$||{});$geoDeferred$$module$extensions$amp_geo$0_1$amp_geo$$.resolve($children$jscomp$139_config$jscomp$73_geo$jscomp$2$$)};
$AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$.prototype.$isInCountryGroup$=function($targetGroup_targets$jscomp$5$$){var $$jscomp$this$jscomp$677$$=this;$targetGroup_targets$jscomp$5$$=$targetGroup_targets$jscomp$5$$.trim().split(/,\s*/);return $targetGroup_targets$jscomp$5$$.filter(function($targetGroup_targets$jscomp$5$$){return 0<=$$jscomp$this$jscomp$677$$.$H$.indexOf($targetGroup_targets$jscomp$5$$)}).length!==$targetGroup_targets$jscomp$5$$.length?1:0<$targetGroup_targets$jscomp$5$$.filter(function($targetGroup_targets$jscomp$5$$){return 0<=
$$jscomp$this$jscomp$677$$.$F$.indexOf($targetGroup_targets$jscomp$5$$)}).length?2:3};var $geoDeferred$$module$extensions$amp_geo$0_1$amp_geo$$=null;(function($AMP$jscomp$57$$){$geoDeferred$$module$extensions$amp_geo$0_1$amp_geo$$=new _.$Deferred$$module$src$utils$promise$$;$AMP$jscomp$57$$.registerElement("amp-geo",$AmpGeo$$module$extensions$amp_geo$0_1$amp_geo$$);$AMP$jscomp$57$$.registerServiceForDoc("geo",function(){return $geoDeferred$$module$extensions$amp_geo$0_1$amp_geo$$.$promise$})})(self.AMP);
})});

//# sourceMappingURL=amp-geo-0.1.js.map
