(self.AMP=self.AMP||[]).push({n:"amp-3d-gltf",i:["_base_i","_base_media"],v:"1904281823091",f:(function(AMP,_){
var $Amp3dGltf$$module$extensions$amp_3d_gltf$0_1$amp_3d_gltf$$=function($$jscomp$super$this$jscomp$3_element$jscomp$287$$){$$jscomp$super$this$jscomp$3_element$jscomp$287$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$3_element$jscomp$287$$)||this;$$jscomp$super$this$jscomp$3_element$jscomp$287$$.$D$=null;$$jscomp$super$this$jscomp$3_element$jscomp$287$$.$H$=new _.$Deferred$$module$src$utils$promise$$;$$jscomp$super$this$jscomp$3_element$jscomp$287$$.$G$=new _.$Deferred$$module$src$utils$promise$$;
$$jscomp$super$this$jscomp$3_element$jscomp$287$$.$I$={};$$jscomp$super$this$jscomp$3_element$jscomp$287$$.$F$=null;return $$jscomp$super$this$jscomp$3_element$jscomp$287$$},$JSCompiler_StaticMethods_listenGltfViewerMessages_$$=function($JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$){if($JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$.$D$){var $listenIframe$$=function($listenIframe$$,$disposers$$){return _.$listenFor$$module$src$iframe_helper$$($JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$.$D$,
$listenIframe$$,$disposers$$,!0)},$disposers$$=[$listenIframe$$("ready",$JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$.$H$.resolve),$listenIframe$$("loaded",$JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$.$G$.resolve),$listenIframe$$("error",function(){$JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$.$toggleFallback$(!0)})];return function(){return $disposers$$.forEach(function($JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$){return $JSCompiler_StaticMethods_listenGltfViewerMessages_$self$$()})}}},
$JSCompiler_StaticMethods_sendCommandWhenReady_$$=function($JSCompiler_StaticMethods_sendCommandWhenReady_$self$$,$action$jscomp$19$$,$args$jscomp$21$$){return $JSCompiler_StaticMethods_sendCommandWhenReady_$self$$.$H$.$promise$.then(function(){var $iframe$jscomp$inline_6250$$=$JSCompiler_StaticMethods_sendCommandWhenReady_$self$$.$D$;_.$postMessageToWindows$$module$src$iframe_helper$$($iframe$jscomp$inline_6250$$,[{$win$:$iframe$jscomp$inline_6250$$.contentWindow,origin:"*"}],"action",_.$dict$$module$src$utils$object$$({action:$action$jscomp$19$$,
args:$args$jscomp$21$$}),!0)})};_.$$jscomp$inherits$$($Amp3dGltf$$module$extensions$amp_3d_gltf$0_1$amp_3d_gltf$$,AMP.BaseElement);_.$JSCompiler_prototypeAlias$$=$Amp3dGltf$$module$extensions$amp_3d_gltf$0_1$amp_3d_gltf$$.prototype;
_.$JSCompiler_prototypeAlias$$.$preconnectCallback$=function($opt_onLayout$jscomp$1$$){_.$preloadBootstrap$$module$src$3p_frame$$(this.$win$,this.$preconnect$);this.$preconnect$.url("https://cdnjs.cloudflare.com/ajax/libs/three.js/91/three.js",$opt_onLayout$jscomp$1$$);this.$preconnect$.url("https://cdn.jsdelivr.net/npm/three@0.91/examples/js/loaders/GLTFLoader.js",$opt_onLayout$jscomp$1$$);this.$preconnect$.url("https://cdn.jsdelivr.net/npm/three@0.91/examples/js/controls/OrbitControls.js",$opt_onLayout$jscomp$1$$)};
_.$JSCompiler_prototypeAlias$$.$unlayoutCallback$=function(){this.$D$&&(_.$removeElement$$module$src$dom$$(this.$D$),this.$D$=null);this.$F$&&this.$F$();this.$H$=new _.$Deferred$$module$src$utils$promise$$;this.$G$=new _.$Deferred$$module$src$utils$promise$$;return!0};
_.$JSCompiler_prototypeAlias$$.$buildCallback$=function(){function $string$jscomp$15$$($string$jscomp$15$$){return $string$jscomp$15$$}function $bool$$($string$jscomp$15$$){return"false"!==$string$jscomp$15$$}function $getOption$$($string$jscomp$15$$,$bool$$,$getOption$$){return $$jscomp$this$jscomp$246$$.element.hasAttribute($string$jscomp$15$$)?$bool$$($$jscomp$this$jscomp$246$$.element.getAttribute($string$jscomp$15$$)):$getOption$$}var $$jscomp$this$jscomp$246$$=this,$src$jscomp$19$$=$getOption$$("src",
$string$jscomp$15$$,""),$useAlpha$$=$getOption$$("alpha",$bool$$,!1);this.$I$=_.$dict$$module$src$utils$object$$({src:_.$resolveRelativeUrl$$module$src$url$$($src$jscomp$19$$,this.$getAmpDoc$().$AmpDoc$$module$src$service$ampdoc_impl_prototype$getUrl$()),renderer:{alpha:$useAlpha$$,antialias:$getOption$$("antialiasing",$bool$$,!0)},rendererSettings:{clearAlpha:$useAlpha$$?0:1,clearColor:$getOption$$("clearColor",$string$jscomp$15$$,"#fff"),maxPixelRatio:$getOption$$("maxPixelRatio",function($string$jscomp$15$$){return parseFloat($string$jscomp$15$$)},
devicePixelRatio||1)},controls:{enableZoom:$getOption$$("enableZoom",$bool$$,!0),autoRotate:$getOption$$("autoRotate",$bool$$,!1)}});_.$JSCompiler_StaticMethods_registerAction$$(this,"setModelRotation",function($string$jscomp$15$$){$JSCompiler_StaticMethods_sendCommandWhenReady_$$($$jscomp$this$jscomp$246$$,"setModelRotation",$string$jscomp$15$$.args).catch(function($string$jscomp$15$$){return _.$dev$$module$src$log$$().error("AMP-3D-GLTF","setModelRotation failed: %s",$string$jscomp$15$$)})},1)};
_.$JSCompiler_prototypeAlias$$.$layoutCallback$=function(){var $canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$=document.createElement("canvas");$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$=$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$.getContext("webgl")||$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$.getContext("experimental-webgl");if(!($canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$&&$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$ instanceof
WebGLRenderingContext))return this.$toggleFallback$(!0),Promise.resolve();$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$=_.$getIframe$$module$src$3p_frame$$(this.$win$,this.element,"3d-gltf",this.$I$);_.$JSCompiler_StaticMethods_applyFillContent$$($canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$,!0);this.$D$=$canvas$jscomp$inline_2219_gl$jscomp$inline_2220_iframe$jscomp$19$$;this.$F$=$JSCompiler_StaticMethods_listenGltfViewerMessages_$$(this);this.element.appendChild(this.$D$);
return this.$G$.$promise$};_.$JSCompiler_prototypeAlias$$.$viewportCallback$=function($inViewport$jscomp$6$$){return $JSCompiler_StaticMethods_sendCommandWhenReady_$$(this,"toggleAmpViewport",$inViewport$jscomp$6$$)};_.$JSCompiler_prototypeAlias$$.$pauseCallback$=function(){$JSCompiler_StaticMethods_sendCommandWhenReady_$$(this,"toggleAmpPlay",!1)};_.$JSCompiler_prototypeAlias$$.$resumeCallback$=function(){$JSCompiler_StaticMethods_sendCommandWhenReady_$$(this,"toggleAmpPlay",!0)};
_.$JSCompiler_prototypeAlias$$.$onLayoutMeasure$=function(){var $box$jscomp$12$$=this.$getLayoutBox$();$JSCompiler_StaticMethods_sendCommandWhenReady_$$(this,"setSize",_.$dict$$module$src$utils$object$$({width:$box$jscomp$12$$.width,height:$box$jscomp$12$$.height}))};_.$JSCompiler_prototypeAlias$$.$isLayoutSupported$=function($layout$jscomp$31$$){return _.$isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$31$$)};self.AMP.registerElement("amp-3d-gltf",$Amp3dGltf$$module$extensions$amp_3d_gltf$0_1$amp_3d_gltf$$);
})});

//# sourceMappingURL=amp-3d-gltf-0.1.js.map
