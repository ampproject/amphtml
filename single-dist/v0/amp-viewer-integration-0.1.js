(self.AMP=self.AMP||[]).push({n:"amp-viewer-integration",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $FocusHandler$$module$extensions$amp_viewer_integration$0_1$focus_handler$$=function($win$jscomp$496$$,$messaging$$){this.$win$=$win$jscomp$496$$;this.$D$=$messaging$$;_.$listen$$module$src$event_helper$$(this.$win$.document,"focusin",this.$F$.bind(this),{capture:!1})},$CircularBuffer$$module$extensions$amp_viewer_integration$0_1$findtext$$=function($max$jscomp$15$$){this.$G$=$max$jscomp$15$$;this.$F$=[];this.$D$=0},$canonicalizeChar$$module$extensions$amp_viewer_integration$0_1$findtext$$=function($c$jscomp$177$$){return"\u2019"==
$c$jscomp$177$$||"\u2018"==$c$jscomp$177$$?"'":"\u201c"==$c$jscomp$177$$||"\u201d"==$c$jscomp$177$$?'"':$c$jscomp$177$$.toLowerCase()},$markSingleTextNode$$module$extensions$amp_viewer_integration$0_1$findtext$$=function($doc$jscomp$160_win$jscomp$500$$,$node$jscomp$104$$,$endText_start$jscomp$28$$,$end$jscomp$20$$,$marked$jscomp$2$$){if($endText_start$jscomp$28$$>=$end$jscomp$20$$)return null;$doc$jscomp$160_win$jscomp$500$$=$doc$jscomp$160_win$jscomp$500$$.document;var $parent$jscomp$59$$=$node$jscomp$104$$.parentNode,
$text$jscomp$25$$=$node$jscomp$104$$.wholeText;0<$endText_start$jscomp$28$$&&$parent$jscomp$59$$.insertBefore($doc$jscomp$160_win$jscomp$500$$.createTextNode($text$jscomp$25$$.substring(0,$endText_start$jscomp$28$$)),$node$jscomp$104$$);var $span$jscomp$2$$=$doc$jscomp$160_win$jscomp$500$$.createElement("span");$span$jscomp$2$$.appendChild($doc$jscomp$160_win$jscomp$500$$.createTextNode($text$jscomp$25$$.substring($endText_start$jscomp$28$$,$end$jscomp$20$$)));$parent$jscomp$59$$.insertBefore($span$jscomp$2$$,
$node$jscomp$104$$);$marked$jscomp$2$$.push($span$jscomp$2$$);$endText_start$jscomp$28$$=null;$end$jscomp$20$$<$text$jscomp$25$$.length&&($endText_start$jscomp$28$$=$doc$jscomp$160_win$jscomp$500$$.createTextNode($text$jscomp$25$$.substring($end$jscomp$20$$)),$parent$jscomp$59$$.insertBefore($endText_start$jscomp$28$$,$node$jscomp$104$$));$parent$jscomp$59$$.removeChild($node$jscomp$104$$);return $endText_start$jscomp$28$$},$TextScanner$$module$extensions$amp_viewer_integration$0_1$findtext$$=function($win$jscomp$502$$,
$child$jscomp$43_node$jscomp$106$$){this.$H$=$win$jscomp$502$$;this.$G$=$child$jscomp$43_node$jscomp$106$$;this.$F$=-1;this.$D$=null;$child$jscomp$43_node$jscomp$106$$ instanceof $win$jscomp$502$$.Text?this.$F$=0:$child$jscomp$43_node$jscomp$106$$ instanceof $win$jscomp$502$$.Element&&"none"!=_.$computedStyle$$module$src$style$$($win$jscomp$502$$,$child$jscomp$43_node$jscomp$106$$).display&&($child$jscomp$43_node$jscomp$106$$=$child$jscomp$43_node$jscomp$106$$.firstChild,null!=$child$jscomp$43_node$jscomp$106$$&&
(this.$D$=new $TextScanner$$module$extensions$amp_viewer_integration$0_1$findtext$$($win$jscomp$502$$,$child$jscomp$43_node$jscomp$106$$)))},$getHighlightParam$$module$extensions$amp_viewer_integration$0_1$highlight_handler$$=function($ampdoc$jscomp$262_highlight_param$jscomp$28$$){$ampdoc$jscomp$262_highlight_param$jscomp$28$$=_.$parseQueryString_$$module$src$url_parse_query_string$$($ampdoc$jscomp$262_highlight_param$jscomp$28$$.$win$.location.hash).highlight;if(!$ampdoc$jscomp$262_highlight_param$jscomp$28$$||
102400<$ampdoc$jscomp$262_highlight_param$jscomp$28$$.length)return null;$ampdoc$jscomp$262_highlight_param$jscomp$28$$=_.$parseJson$$module$src$json$$($ampdoc$jscomp$262_highlight_param$jscomp$28$$);var $sens$$=$ampdoc$jscomp$262_highlight_param$jscomp$28$$.s;if(!($sens$$ instanceof Array)||15<$sens$$.length)return null;for(var $skipRendering_sum$$=0,$i$410$$=0;$i$410$$<$sens$$.length;$i$410$$++){var $sen$jscomp$1$$=$sens$$[$i$410$$];if("string"!=typeof $sen$jscomp$1$$||!$sen$jscomp$1$$)return null;
$skipRendering_sum$$+=$sen$jscomp$1$$.length;if(1500<$skipRendering_sum$$)return null}$skipRendering_sum$$=!1;$ampdoc$jscomp$262_highlight_param$jscomp$28$$.n&&($skipRendering_sum$$=!0);return{$sentences$:$sens$$,$skipRendering$:$skipRendering_sum$$}},$HighlightHandler$$module$extensions$amp_viewer_integration$0_1$highlight_handler$$=function($ampdoc$jscomp$263$$,$highlightInfo$$){var $$jscomp$this$jscomp$1401$$=this;this.$ampdoc_$=$ampdoc$jscomp$263$$;this.$G$=_.$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$263$$);
this.$F$=_.$Services$$module$src$services$viewportForDoc$$(this.$ampdoc_$);this.$D$=null;_.$whenDocumentReady$$module$src$document_ready$$($ampdoc$jscomp$263$$.$win$.document).then(function(){$JSCompiler_StaticMethods_initHighlight_$$($$jscomp$this$jscomp$1401$$,$highlightInfo$$)})},$JSCompiler_StaticMethods_sendHighlightState_$$=function($JSCompiler_StaticMethods_sendHighlightState_$self$$,$params$jscomp$42_state$jscomp$112$$,$opt_params$jscomp$4$$){$params$jscomp$42_state$jscomp$112$$=_.$dict$$module$src$utils$object$$({state:$params$jscomp$42_state$jscomp$112$$});
for(var $key$jscomp$165$$ in $opt_params$jscomp$4$$)$params$jscomp$42_state$jscomp$112$$[$key$jscomp$165$$]=$opt_params$jscomp$4$$[$key$jscomp$165$$];_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$sendMessage$$($JSCompiler_StaticMethods_sendHighlightState_$self$$.$G$,"highlightState",$params$jscomp$42_state$jscomp$112$$)},$JSCompiler_StaticMethods_findHighlightedNodes_$$=function($JSCompiler_StaticMethods_findHighlightedNodes_$self$$,$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$){var $win$jscomp$503$$=
$JSCompiler_StaticMethods_findHighlightedNodes_$self$$.$ampdoc_$.$win$;a:{var $marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$=$JSCompiler_StaticMethods_findHighlightedNodes_$self$$.$ampdoc_$.$getBody$();$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$=$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$.$sentences$;
$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$=new $TextScanner$$module$extensions$amp_viewer_integration$0_1$findtext$$($win$jscomp$503$$,$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$);for(var $i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$=[],$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$=
0;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$<$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$.length;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$++){for(var $endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$=
$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$[$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$],$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$=[],$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$=
0;$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$<$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length;$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$++){var $JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=
$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$[$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$];$skipCharRe$$module$extensions$amp_viewer_integration$0_1$findtext$$.test($JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$)||
$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.push($canonicalizeChar$$module$extensions$amp_viewer_integration$0_1$findtext$$($JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$))}if($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$=
$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.join("")){$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$={};for($buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$=0;$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$<$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length;$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$++)$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$[$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$[$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$]]=
$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length-1-$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$;$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$=new $CircularBuffer$$module$extensions$amp_viewer_integration$0_1$findtext$$($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length);
$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=-1;for(var $nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$=$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length-1;;){var $next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$=$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$.next();
if(null==$next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$){$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$=null;break a}if(!($skipCharRe$$module$extensions$amp_viewer_integration$0_1$findtext$$.test($next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$.node.wholeText[$next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$.offset])||
($buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.add($next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$),$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$++,$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$<
$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$))){$next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$=!0;for(var $j$jscomp$inline_5631$$=0;$j$jscomp$inline_5631$$<$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length;$j$jscomp$inline_5631$$++){var $c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$=$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.get($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length-
$j$jscomp$inline_5631$$-1);$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$=$canonicalizeChar$$module$extensions$amp_viewer_integration$0_1$findtext$$($c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$.node.wholeText[$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$.offset]);if($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$[$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length-
1-$j$jscomp$inline_5631$$]!=$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$){$next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$=!1;$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$=$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$[$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$];null==$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$&&
($c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$=$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length);$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$-=$j$jscomp$inline_5631$$;1>$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$&&($c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$=1);$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$+=
$c$406$jscomp$inline_5632_pos$jscomp$inline_7015_skip$jscomp$inline_5633$$;break}}if($next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$){$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$=$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.get($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length-
1);$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$.push({start:$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.get(0),end:{node:$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.node,offset:$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.offset+
1}});break}}}}}$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$=0<$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$.length?$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$:null}if($JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$){$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$=
[];$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$=null;for($i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$=0;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$<$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$.length;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$++)$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$=
$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$[$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$],$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$&&$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$.end.node==$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.start.node&&
$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$.end.offset==$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.start.offset?$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$.end=$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.end:($i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$=
$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$,$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$.push($endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$));$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$=
$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$;$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$=[];for($i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$=0;$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$<$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$.length;$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$++)for($i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$=
$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$[$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$],$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$=$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$.start,$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$=
$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$.end,$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$=$JSCompiler_inline_result$jscomp$1121_highlightInfo$jscomp$1_ranges$jscomp$inline_5637_ranges$jscomp$inline_7017_sens$jscomp$1_sentences$jscomp$inline_5619$$,$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$=
$i$407$jscomp$inline_5639_matches$jscomp$inline_5621_prev$jscomp$inline_7019$$;;){if($buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.node==$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.node){if($buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$=$markSingleTextNode$$module$extensions$amp_viewer_integration$0_1$findtext$$($win$jscomp$503$$,
$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.node,$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.offset,$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.offset,$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$))for($i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$+=
1;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$<$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$.length;$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$++){$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=
$endPos$jscomp$inline_5634_r$jscomp$inline_7021_ranges$jscomp$inline_7026_ranges$jscomp$inline_7031_s$jscomp$inline_7010_sen$jscomp$inline_5623$$[$i$408$jscomp$inline_7020_i$409$jscomp$inline_7032_idx$jscomp$inline_7027_r$jscomp$inline_5640_senIdx$jscomp$inline_5622$$];if($buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.node!=$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.start.node)break;
$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.start.node=$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$;$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.start.offset-=$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.offset;
if($buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.node!=$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.end.node)break;$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.end.node=$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$;
$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$.end.offset-=$buf$jscomp$inline_5626_end$jscomp$inline_7025_i$404$jscomp$inline_7012_i$405$jscomp$inline_5625_pos$jscomp$inline_7030$$.offset}break}a:for($JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=!0,$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$=
$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.node;;){if(null==$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$){$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=null;break a}if($JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$)($next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$=
$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$.nextSibling)?($nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$=$next$jscomp$inline_7037_ok$jscomp$inline_5630_pos$jscomp$inline_5629$$,$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=!1):$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$=$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$.parentNode;else{if($nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$ instanceof
$win$jscomp$503$$.Text){$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$;break a}$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$.firstChild?$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$=$nextIndex$jscomp$inline_5628_node$jscomp$inline_7036$$.firstChild:$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$=
!0}}$markSingleTextNode$$module$extensions$amp_viewer_integration$0_1$findtext$$($win$jscomp$503$$,$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.node,$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.offset,$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$.node.wholeText.length,$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$);
if(!$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$)break;$buf$jscomp$inline_7011_newText$jscomp$inline_7029_skipTable$jscomp$inline_5624_start$jscomp$inline_7024$$={node:$JSCompiler_inline_result$jscomp$inline_7034_c$jscomp$inline_7013_index$jscomp$inline_5627_leaving$jscomp$inline_7035_next$jscomp$inline_7038_r$jscomp$inline_7033$$,offset:0}}$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$&&
0!=$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$.length&&($JSCompiler_StaticMethods_findHighlightedNodes_$self$$.$D$=$marked$jscomp$inline_5638_node$jscomp$inline_5618_ret$jscomp$inline_7018_scanner$jscomp$inline_5620$$)}},$JSCompiler_StaticMethods_initHighlight_$$=function($JSCompiler_StaticMethods_initHighlight_$self$$,$highlightInfo$jscomp$2_i$411$$){if($JSCompiler_StaticMethods_initHighlight_$self$$.$ampdoc_$.$win$.document.querySelector('script[id="amp-access"]'))$JSCompiler_StaticMethods_sendHighlightState_$$($JSCompiler_StaticMethods_initHighlight_$self$$,
"has_amp_access");else if($JSCompiler_StaticMethods_findHighlightedNodes_$$($JSCompiler_StaticMethods_initHighlight_$self$$,$highlightInfo$jscomp$2_i$411$$),$JSCompiler_StaticMethods_initHighlight_$self$$.$D$){var $scrollTop$jscomp$17$$=$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$$($JSCompiler_StaticMethods_initHighlight_$self$$);$JSCompiler_StaticMethods_sendHighlightState_$$($JSCompiler_StaticMethods_initHighlight_$self$$,"found",_.$dict$$module$src$utils$object$$({scroll:$scrollTop$jscomp$17$$}));
if(!$highlightInfo$jscomp$2_i$411$$.$skipRendering$){for($highlightInfo$jscomp$2_i$411$$=0;$highlightInfo$jscomp$2_i$411$$<$JSCompiler_StaticMethods_initHighlight_$self$$.$D$.length;$highlightInfo$jscomp$2_i$411$$++)_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_initHighlight_$self$$.$D$[$highlightInfo$jscomp$2_i$411$$],{backgroundColor:"#ff9632",color:"#000"});if("visible"==$JSCompiler_StaticMethods_initHighlight_$self$$.$G$.$H$)$JSCompiler_StaticMethods_animateScrollToTop_$$($JSCompiler_StaticMethods_initHighlight_$self$$,
$scrollTop$jscomp$17$$);else{_.$JSCompiler_StaticMethods_Viewport$$module$src$service$viewport$viewport_impl_prototype$setScrollTop$$($JSCompiler_StaticMethods_initHighlight_$self$$.$F$,Math.max(0,$scrollTop$jscomp$17$$-500));var $called$$=!1;_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($JSCompiler_StaticMethods_initHighlight_$self$$.$G$,function(){$called$$||"visible"!=$JSCompiler_StaticMethods_initHighlight_$self$$.$G$.$H$||($JSCompiler_StaticMethods_animateScrollToTop_$$($JSCompiler_StaticMethods_initHighlight_$self$$,
$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$$($JSCompiler_StaticMethods_initHighlight_$self$$)),$called$$=!0)})}_.$listenOnce$$module$src$event_helper$$($JSCompiler_StaticMethods_initHighlight_$self$$.$ampdoc_$.$getBody$(),"click",$JSCompiler_StaticMethods_initHighlight_$self$$.$H$.bind($JSCompiler_StaticMethods_initHighlight_$self$$))}}else $JSCompiler_StaticMethods_sendHighlightState_$$($JSCompiler_StaticMethods_initHighlight_$self$$,"not_found")},$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$$=
function($JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$){var $height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$=$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$.$D$;if(!$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$)return 0;var $viewport$jscomp$25$$=$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$.$F$;$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$=Number.MAX_VALUE;
for(var $maxBottom$$=0,$paddingTop$jscomp$9$$=$viewport$jscomp$25$$.$G$,$i$412$$=0;$i$412$$<$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$.length;$i$412$$++){var $$jscomp$destructuring$var728$$=_.$moveLayoutRect$$module$src$layout_rect$$($viewport$jscomp$25$$.$getLayoutRect$($height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$[$i$412$$]),0,-$paddingTop$jscomp$9$$),$bottom$jscomp$8$$=$$jscomp$destructuring$var728$$.bottom;$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$=
Math.min($JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$,$$jscomp$destructuring$var728$$.top);$maxBottom$$=Math.max($maxBottom$$,$bottom$jscomp$8$$)}if($JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$>=$maxBottom$$)return 0;$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$=_.$JSCompiler_StaticMethods_getHeight$$($viewport$jscomp$25$$)-$paddingTop$jscomp$9$$;$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$=($maxBottom$$+$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$-
$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$)/2;$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$>$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$-80&&($height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$=$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$self_minTop$jscomp$4$$-80);return 0<$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$?$height$jscomp$93_nodes$jscomp$21_pos$jscomp$33$$:0},$JSCompiler_StaticMethods_animateScrollToTop_$$=function($JSCompiler_StaticMethods_animateScrollToTop_$self$$,
$top$jscomp$25$$){_.$JSCompiler_StaticMethods_Viewport$$module$src$service$viewport$viewport_impl_prototype$setScrollTop$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$.$F$,Math.max(0,$top$jscomp$25$$-500));var $sentinel$jscomp$9$$=$JSCompiler_StaticMethods_animateScrollToTop_$self$$.$ampdoc_$.$win$.document.createElement("div");_.$setInitialDisplay$$module$src$style$$($sentinel$jscomp$9$$);_.$setStyles$$module$src$style$$($sentinel$jscomp$9$$,{position:"absolute",top:Math.floor($top$jscomp$25$$)+
"px",height:"1px",left:"0",width:"1px","pointer-events":"none"});var $body$jscomp$40$$=$JSCompiler_StaticMethods_animateScrollToTop_$self$$.$ampdoc_$.$getBody$();$body$jscomp$40$$.appendChild($sentinel$jscomp$9$$);$JSCompiler_StaticMethods_sendHighlightState_$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$,"auto_scroll");_.$JSCompiler_StaticMethods_animateScrollIntoView$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$.$F$,$sentinel$jscomp$9$$).then(function(){$body$jscomp$40$$.removeChild($sentinel$jscomp$9$$);
var $JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$=$JSCompiler_StaticMethods_calcTopToCenterHighlightedNodes_$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$);var $current$jscomp$inline_5651$$=_.$JSCompiler_StaticMethods_Viewport$$module$src$service$viewport$viewport_impl_prototype$getScrollTop$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$.$F$);if($current$jscomp$inline_5651$$==$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$&&$current$jscomp$inline_5651$$==
$top$jscomp$25$$)$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$=null;else{var $shownParam$jscomp$inline_5652$$={};$current$jscomp$inline_5651$$!=$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$&&(_.$JSCompiler_StaticMethods_Viewport$$module$src$service$viewport$viewport_impl_prototype$setScrollTop$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$.$F$,$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$),$shownParam$jscomp$inline_5652$$.nd=$current$jscomp$inline_5651$$-
$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$);$current$jscomp$inline_5651$$!=$top$jscomp$25$$&&($shownParam$jscomp$inline_5652$$.od=$current$jscomp$inline_5651$$-$top$jscomp$25$$);$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$=$shownParam$jscomp$inline_5652$$}$JSCompiler_StaticMethods_sendHighlightState_$$($JSCompiler_StaticMethods_animateScrollToTop_$self$$,"shown",$JSCompiler_inline_result$jscomp$1126_newTop$jscomp$inline_5650$$)})},$JSCompiler_StaticMethods_setupMessaging$$=
function($JSCompiler_StaticMethods_setupMessaging$self_requestHandler$jscomp$inline_5656$$,$messaging$jscomp$1$$){$JSCompiler_StaticMethods_setupMessaging$self_requestHandler$jscomp$inline_5656$$=$JSCompiler_StaticMethods_setupMessaging$self_requestHandler$jscomp$inline_5656$$.$H$.bind($JSCompiler_StaticMethods_setupMessaging$self_requestHandler$jscomp$inline_5656$$);$messaging$jscomp$1$$.$G$.highlightDismiss=$JSCompiler_StaticMethods_setupMessaging$self_requestHandler$jscomp$inline_5656$$},$KeyboardHandler$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$=
function($handleEvent$jscomp$inline_5659_win$jscomp$504$$,$messaging$jscomp$2$$){this.$win$=$handleEvent$jscomp$inline_5659_win$jscomp$504$$;this.$D$=$messaging$jscomp$2$$;$handleEvent$jscomp$inline_5659_win$jscomp$504$$=this.$F$.bind(this);_.$internalListenImplementation$$module$src$event_helper_listen$$(this.$win$,"keydown",$handleEvent$jscomp$inline_5659_win$jscomp$504$$,void 0);_.$internalListenImplementation$$module$src$event_helper_listen$$(this.$win$,"keypress",$handleEvent$jscomp$inline_5659_win$jscomp$504$$,
void 0);_.$internalListenImplementation$$module$src$event_helper_listen$$(this.$win$,"keyup",$handleEvent$jscomp$inline_5659_win$jscomp$504$$,void 0)},$isHandledByEventTarget$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$=function($e$jscomp$334$$){if($e$jscomp$334$$.defaultPrevented)return!0;if("Escape"==$e$jscomp$334$$.key)return!1;switch($e$jscomp$334$$.target.nodeName){case "INPUT":return"checkbox"!=$e$jscomp$334$$.target.type||" "==$e$jscomp$334$$.key;case "TEXTAREA":case "BUTTON":case "SELECT":case "OPTION":return!0}return $e$jscomp$334$$.target.hasAttribute&&
$e$jscomp$334$$.target.hasAttribute("contenteditable")},$getKeyboardEventInit$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$=function($e$jscomp$335$$){var $copiedEvent$$={};$eventProperties$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$.forEach(function($eventProperty$$){void 0!==$e$jscomp$335$$[$eventProperty$$]&&($copiedEvent$$[$eventProperty$$]=$e$jscomp$335$$[$eventProperty$$])});return $copiedEvent$$},$parseMessage$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$=
function($message$jscomp$78$$){if("string"!=typeof $message$jscomp$78$$)return $message$jscomp$78$$;if("{"!=$message$jscomp$78$$.charAt(0))return null;try{return _.$parseJson$$module$src$json$$($message$jscomp$78$$)}catch($e$414$$){return null}},$WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$=function($win$jscomp$505$$,$origin$jscomp$43$$,$target$jscomp$235$$){this.$win$=$win$jscomp$505$$;this.$D$=$origin$jscomp$43$$;this.$F$=$target$jscomp$235$$},$Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$=
function($win$jscomp$506$$,$port$jscomp$31$$,$opt_isWebview$$,$opt_token$jscomp$1$$){this.$win$=$win$jscomp$506$$;this.$F$=$port$jscomp$31$$;this.$M$=!!$opt_isWebview$$;this.$J$=$opt_token$jscomp$1$$;this.$O$=0;this.$H$={};this.$G$={};this.$I$=null;this.$F$.addEventListener("message",this.$K$.bind(this));this.$F$.start()},$JSCompiler_StaticMethods_setDefaultHandler$$=function($JSCompiler_StaticMethods_setDefaultHandler$self$$,$requestHandler$jscomp$1$$){$JSCompiler_StaticMethods_setDefaultHandler$self$$.$I$=
$requestHandler$jscomp$1$$},$JSCompiler_StaticMethods_sendResponseError_$$=function($JSCompiler_StaticMethods_sendResponseError_$self$$,$requestId$jscomp$10$$,$messageName$jscomp$6$$,$errString_reason$jscomp$66$$){$errString_reason$jscomp$66$$=$errString_reason$jscomp$66$$?$errString_reason$jscomp$66$$.message?$errString_reason$jscomp$66$$.message:String($errString_reason$jscomp$66$$):"unknown error";$JSCompiler_StaticMethods_logError_$$($JSCompiler_StaticMethods_sendResponseError_$self$$,"amp-viewer-messaging: sendResponseError_, Message name: "+
$messageName$jscomp$6$$,$errString_reason$jscomp$66$$);$JSCompiler_StaticMethods_sendResponseError_$self$$.$sendMessage_$({app:"__AMPHTML__",requestid:$requestId$jscomp$10$$,type:"s",name:$messageName$jscomp$6$$,data:null,error:$errString_reason$jscomp$66$$})},$JSCompiler_StaticMethods_handleRequest_$$=function($JSCompiler_StaticMethods_handleRequest_$self$$,$message$jscomp$81$$){var $error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$=$JSCompiler_StaticMethods_handleRequest_$self$$.$G$[$message$jscomp$81$$.name];
$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$||($error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$=$JSCompiler_StaticMethods_handleRequest_$self$$.$I$);if(!$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$)throw $error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$=Error("Cannot handle request because handshake is not yet confirmed!"),$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$.args=$message$jscomp$81$$.name,$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$;
$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$=$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$($message$jscomp$81$$.name,$message$jscomp$81$$.data,!!$message$jscomp$81$$.rsvp);if($message$jscomp$81$$.rsvp){var $requestId$jscomp$11$$=$message$jscomp$81$$.requestid;if(!$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$)throw $JSCompiler_StaticMethods_sendResponseError_$$($JSCompiler_StaticMethods_handleRequest_$self$$,$requestId$jscomp$11$$,$message$jscomp$81$$.name,Error("no response")),
Error("expected response but none given: "+$message$jscomp$81$$.name);$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$.then(function($error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$){$JSCompiler_StaticMethods_handleRequest_$self$$.$sendMessage_$({app:"__AMPHTML__",requestid:$requestId$jscomp$11$$,type:"s",name:$message$jscomp$81$$.name,data:$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$})},function($error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$){$JSCompiler_StaticMethods_sendResponseError_$$($JSCompiler_StaticMethods_handleRequest_$self$$,
$requestId$jscomp$11$$,$message$jscomp$81$$.name,$error$jscomp$118_handler$jscomp$66_promise$jscomp$74$$)})}},$JSCompiler_StaticMethods_logError_$$=function($JSCompiler_StaticMethods_logError_$self$$,$state$jscomp$113$$,$opt_data$jscomp$11$$){$JSCompiler_StaticMethods_logError_$self$$.$win$.viewerState="amp-messaging-error-logger: "+$state$jscomp$113$$+(" data: "+($opt_data$jscomp$11$$?$opt_data$jscomp$11$$.message?$opt_data$jscomp$11$$.message:String($opt_data$jscomp$11$$):"unknown error"))},$TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler$$=
function($requestHandler$jscomp$inline_5676_win$jscomp$507$$,$messaging$jscomp$3$$){this.$win$=$requestHandler$jscomp$inline_5676_win$jscomp$507$$;this.$G$=$messaging$jscomp$3$$;this.$D$=!1;this.$F$=[];$requestHandler$jscomp$inline_5676_win$jscomp$507$$=this.$I$.bind(this);$messaging$jscomp$3$$.$G$.scrollLock=$requestHandler$jscomp$inline_5676_win$jscomp$507$$;$JSCompiler_StaticMethods_listenForTouchEvents_$$(this)},$JSCompiler_StaticMethods_listenForTouchEvents_$$=function($JSCompiler_StaticMethods_listenForTouchEvents_$self$$){var $handleEvent$jscomp$1$$=
$JSCompiler_StaticMethods_listenForTouchEvents_$self$$.$H$.bind($JSCompiler_StaticMethods_listenForTouchEvents_$self$$),$doc$jscomp$161$$=$JSCompiler_StaticMethods_listenForTouchEvents_$self$$.$win$.document,$options$jscomp$72$$={capture:!1,passive:!$JSCompiler_StaticMethods_listenForTouchEvents_$self$$.$D$};$JSCompiler_StaticMethods_listenForTouchEvents_$self$$.$F$.push(_.$internalListenImplementation$$module$src$event_helper_listen$$($doc$jscomp$161$$,"touchstart",$handleEvent$jscomp$1$$,$options$jscomp$72$$),
_.$internalListenImplementation$$module$src$event_helper_listen$$($doc$jscomp$161$$,"touchend",$handleEvent$jscomp$1$$,$options$jscomp$72$$),_.$internalListenImplementation$$module$src$event_helper_listen$$($doc$jscomp$161$$,"touchmove",$handleEvent$jscomp$1$$,$options$jscomp$72$$))},$JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$$=function($JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$self$$){$JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$self$$.$F$.forEach(function($JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$self$$){return $JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$self$$()});
$JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$self$$.$F$.length=0},$JSCompiler_StaticMethods_copyTouches_$$=function($touchList$jscomp$1$$){for(var $copiedTouches$$=[],$i$415$$=0;$i$415$$<$touchList$jscomp$1$$.length;$i$415$$++)$copiedTouches$$.push($JSCompiler_StaticMethods_copyProperties_$$($touchList$jscomp$1$$[$i$415$$],$TOUCH_PROPERTIES$$module$extensions$amp_viewer_integration$0_1$touch_handler$$));return $copiedTouches$$},
$JSCompiler_StaticMethods_copyProperties_$$=function($o$jscomp$21$$,$properties$jscomp$3$$){for(var $copy$jscomp$1$$={},$i$416$$=0;$i$416$$<$properties$jscomp$3$$.length;$i$416$$++){var $p$jscomp$42$$=$properties$jscomp$3$$[$i$416$$];void 0!==$o$jscomp$21$$[$p$jscomp$42$$]&&($copy$jscomp$1$$[$p$jscomp$42$$]=$o$jscomp$21$$[$p$jscomp$42$$])}return $copy$jscomp$1$$},$AmpViewerIntegrationVariableService$$module$extensions$amp_viewer_integration$0_1$variable_service$$=function($ampdoc$jscomp$264$$){var $$jscomp$this$jscomp$1407$$=
this;this.$ampdoc_$=$ampdoc$jscomp$264$$;this.$D$={$ancestorOrigin$:function(){var $ampdoc$jscomp$264$$=$$jscomp$this$jscomp$1407$$.$ampdoc_$.$win$.location.ancestorOrigins;return $ampdoc$jscomp$264$$?$ampdoc$jscomp$264$$[0]:""},$fragmentParam$:function($ampdoc$jscomp$264$$,$defaultValue$jscomp$9$$){var $param$jscomp$29$$=_.$parseQueryString_$$module$src$url_parse_query_string$$($$jscomp$this$jscomp$1407$$.$ampdoc_$.$win$.location.$D$);return void 0===$param$jscomp$29$$[$ampdoc$jscomp$264$$]?$defaultValue$jscomp$9$$:
$param$jscomp$29$$[$ampdoc$jscomp$264$$]}}},$AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration$$=function(){var $$jscomp$this$jscomp$1408$$=this;this.$win$=self.AMP.$win$;this.$G$=this.$D$=!1;this.$F$=null;this.$H$=new $AmpViewerIntegrationVariableService$$module$extensions$amp_viewer_integration$0_1$variable_service$$(_.$getAmpdoc$$module$src$service$$(this.$win$.document));_.$registerServiceBuilder$$module$src$service$$(this.$win$,"viewer-integration-variable",
function(){return $$jscomp$this$jscomp$1408$$.$H$.get()})},$JSCompiler_StaticMethods_webviewPreHandshakePromise_$$=function($JSCompiler_StaticMethods_webviewPreHandshakePromise_$self$$,$source$jscomp$57$$,$origin$jscomp$45$$){return new Promise(function($resolve$jscomp$116$$){var $unlisten$jscomp$29$$=_.$listen$$module$src$event_helper$$($JSCompiler_StaticMethods_webviewPreHandshakePromise_$self$$.$win$,"message",function($e$jscomp$340$$){"amp-viewer-integration";var $data$jscomp$257$$=$parseMessage$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$($e$jscomp$340$$.data);
if($data$jscomp$257$$&&$e$jscomp$340$$.origin===$origin$jscomp$45$$&&$e$jscomp$340$$.source===$source$jscomp$57$$&&"__AMPHTML__"==$data$jscomp$257$$.app&&"handshake-poll"==$data$jscomp$257$$.name){if($JSCompiler_StaticMethods_webviewPreHandshakePromise_$self$$.$D$&&(!$e$jscomp$340$$.ports||!$e$jscomp$340$$.ports.length))throw Error("Did not receive communication port from the Viewer!");$resolve$jscomp$116$$($e$jscomp$340$$.ports&&0<$e$jscomp$340$$.ports.length?$e$jscomp$340$$.ports[0]:new $WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$($JSCompiler_StaticMethods_webviewPreHandshakePromise_$self$$.$win$,
$origin$jscomp$45$$,$JSCompiler_StaticMethods_webviewPreHandshakePromise_$self$$.$win$.parent));$unlisten$jscomp$29$$()}})})},$JSCompiler_StaticMethods_openChannelAndStart_$$=function($JSCompiler_StaticMethods_openChannelAndStart_$self$$,$viewer$jscomp$56$$,$ampdoc$jscomp$266_ampdocUrl$$,$origin$jscomp$46$$,$messaging$jscomp$4$$){"amp-viewer-integration";$ampdoc$jscomp$266_ampdocUrl$$=$ampdoc$jscomp$266_ampdocUrl$$.$AmpDoc$$module$src$service$ampdoc_impl_prototype$getUrl$();var $srcUrl$jscomp$1$$=
_.$getSourceUrl$$module$src$url$$($ampdoc$jscomp$266_ampdocUrl$$);return $messaging$jscomp$4$$.$D$("channelOpen",_.$dict$$module$src$utils$object$$({url:$ampdoc$jscomp$266_ampdocUrl$$,sourceUrl:$srcUrl$jscomp$1$$}),!0).then(function(){"amp-viewer-integration";$JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$$($JSCompiler_StaticMethods_openChannelAndStart_$self$$,$messaging$jscomp$4$$,$viewer$jscomp$56$$,$origin$jscomp$46$$)})},
$JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$$=function($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$,$messaging$jscomp$5$$,$viewer$jscomp$57$$,$origin$jscomp$47$$){$JSCompiler_StaticMethods_setDefaultHandler$$($messaging$jscomp$5$$,function($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$,
$messaging$jscomp$5$$,$origin$jscomp$47$$){return $viewer$jscomp$57$$.$fa$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$,$messaging$jscomp$5$$,$origin$jscomp$47$$)});_.$JSCompiler_StaticMethods_setMessageDeliverer$$($viewer$jscomp$57$$,$messaging$jscomp$5$$.$D$.bind($messaging$jscomp$5$$),$origin$jscomp$47$$);_.$listenOnce$$module$src$event_helper$$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$win$,
"unload",$JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$I$.bind($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$,$messaging$jscomp$5$$));_.$JSCompiler_StaticMethods_hasCapability$$($viewer$jscomp$57$$,"swipe")&&new $TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler$$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$win$,
$messaging$jscomp$5$$);_.$JSCompiler_StaticMethods_hasCapability$$($viewer$jscomp$57$$,"keyboard")&&new $KeyboardHandler$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$win$,$messaging$jscomp$5$$);_.$JSCompiler_StaticMethods_hasCapability$$($viewer$jscomp$57$$,"focus-rect")&&new $FocusHandler$$module$extensions$amp_viewer_integration$0_1$focus_handler$$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$win$,
$messaging$jscomp$5$$);null!=$JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$F$&&$JSCompiler_StaticMethods_setupMessaging$$($JSCompiler_StaticMethods_AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration_prototype$setup_$self$$.$F$,$messaging$jscomp$5$$)};
$FocusHandler$$module$extensions$amp_viewer_integration$0_1$focus_handler$$.prototype.$F$=function($e$jscomp$331$$){$e$jscomp$331$$.defaultPrevented||this.$D$.$D$($e$jscomp$331$$.type,_.$dict$$module$src$utils$object$$({focusTargetRect:$e$jscomp$331$$.target.getBoundingClientRect()}),!1)};$CircularBuffer$$module$extensions$amp_viewer_integration$0_1$findtext$$.prototype.add=function($item$jscomp$31$$){this.$F$[this.$D$]=$item$jscomp$31$$;this.$D$=(this.$D$+1)%this.$G$};$CircularBuffer$$module$extensions$amp_viewer_integration$0_1$findtext$$.prototype.get=function($index$jscomp$211$$){this.$F$.length>=this.$G$&&($index$jscomp$211$$=(this.$D$+$index$jscomp$211$$)%this.$G$);return this.$F$[$index$jscomp$211$$]};
var $skipCharRe$$module$extensions$amp_viewer_integration$0_1$findtext$$=/[,.\s\u2022()]/;
$TextScanner$$module$extensions$amp_viewer_integration$0_1$findtext$$.prototype.next=function(){if(0<=this.$F$){var $JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$;a:{for($JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$=this.$G$.wholeText;this.$F$<$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$.length;){$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$=this.$F$;
this.$F$++;$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$={node:this.$G$,offset:$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$};break a}$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$=null}return $JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$}for(;null!=
this.$D$;){$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$=this.$D$.next();if(null!=$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$)return $JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$;$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$=
this.$D$.$G$.nextSibling;this.$D$=null!=$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$?new $TextScanner$$module$extensions$amp_viewer_integration$0_1$findtext$$(this.$H$,$JSCompiler_inline_result$jscomp$1125_idx$jscomp$inline_5615_pos$jscomp$32_sibling$jscomp$1_text$jscomp$inline_5614$$):null}return null};$HighlightHandler$$module$extensions$amp_viewer_integration$0_1$highlight_handler$$.prototype.$H$=function(){if(this.$D$)for(var $i$413$$=0;$i$413$$<this.$D$.length;$i$413$$++)_.$resetStyles$$module$src$style$$(this.$D$[$i$413$$],["backgroundColor","color"])};var $eventProperties$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$="key code location ctrlKey shiftKey altKey metaKey repeat isComposing charCode keyCode which".split(" ");
$KeyboardHandler$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$.prototype.$F$=function($e$jscomp$332$$){$isHandledByEventTarget$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$($e$jscomp$332$$)||this.$D$.$D$($e$jscomp$332$$.type,$getKeyboardEventInit$$module$extensions$amp_viewer_integration$0_1$keyboard_handler$$($e$jscomp$332$$),!1)};$WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.addEventListener=function($eventType$jscomp$69$$,$handler$jscomp$65$$){var $$jscomp$this$jscomp$1404$$=this;this.$win$.addEventListener("message",function($eventType$jscomp$69$$){$eventType$jscomp$69$$.origin==$$jscomp$this$jscomp$1404$$.$D$&&$eventType$jscomp$69$$.source==$$jscomp$this$jscomp$1404$$.$F$&&"__AMPHTML__"==$eventType$jscomp$69$$.data.app&&$handler$jscomp$65$$($eventType$jscomp$69$$)})};
$WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.postMessage=function($data$jscomp$255$$){this.$F$.postMessage($data$jscomp$255$$,this.$D$)};$WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.start=function(){};
$Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.$K$=function($event$jscomp$262_message$jscomp$79$$){if($event$jscomp$262_message$jscomp$79$$=$parseMessage$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$($event$jscomp$262_message$jscomp$79$$.data))if("q"==$event$jscomp$262_message$jscomp$79$$.type)$JSCompiler_StaticMethods_handleRequest_$$(this,$event$jscomp$262_message$jscomp$79$$);else if("s"==$event$jscomp$262_message$jscomp$79$$.type){var $requestId$jscomp$inline_5666$$=
$event$jscomp$262_message$jscomp$79$$.requestid,$pending$jscomp$inline_5667$$=this.$H$[$requestId$jscomp$inline_5666$$];$pending$jscomp$inline_5667$$&&(delete this.$H$[$requestId$jscomp$inline_5666$$],$event$jscomp$262_message$jscomp$79$$.error?($JSCompiler_StaticMethods_logError_$$(this,"amp-viewer-messaging: handleResponse_ error: ",$event$jscomp$262_message$jscomp$79$$.error),$pending$jscomp$inline_5667$$.reject(Error("Request "+$event$jscomp$262_message$jscomp$79$$.name+" failed: "+$event$jscomp$262_message$jscomp$79$$.error))):
$pending$jscomp$inline_5667$$.resolve($event$jscomp$262_message$jscomp$79$$.data))}};
$Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.$D$=function($messageName$jscomp$4$$,$messageData$$,$awaitResponse$jscomp$2$$){var $$jscomp$this$jscomp$1405$$=this,$requestId$jscomp$8$$=++this.$O$,$promise$jscomp$73$$=void 0;$awaitResponse$jscomp$2$$&&($promise$jscomp$73$$=new Promise(function($messageName$jscomp$4$$,$messageData$$){$$jscomp$this$jscomp$1405$$.$H$[$requestId$jscomp$8$$]={resolve:$messageName$jscomp$4$$,reject:$messageData$$}}));this.$sendMessage_$({app:"__AMPHTML__",
requestid:$requestId$jscomp$8$$,type:"q",name:$messageName$jscomp$4$$,data:$messageData$$,rsvp:$awaitResponse$jscomp$2$$});return $promise$jscomp$73$$};
$Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$.prototype.$sendMessage_$=function($finalMessage_message$jscomp$80$$){$finalMessage_message$jscomp$80$$=Object.assign($finalMessage_message$jscomp$80$$,{});this.$J$&&($finalMessage_message$jscomp$80$$.messagingToken=this.$J$);this.$F$.postMessage(this.$M$?JSON.stringify($finalMessage_message$jscomp$80$$):$finalMessage_message$jscomp$80$$)};var $EVENT_PROPERTIES$$module$extensions$amp_viewer_integration$0_1$touch_handler$$="altKey charCode ctrlKey detail eventPhase key layerX layerY metaKey pageX pageY returnValue shiftKey timeStamp type which".split(" "),$TOUCH_PROPERTIES$$module$extensions$amp_viewer_integration$0_1$touch_handler$$="clientX clientY force identifier pageX pageY radiusX radiusY screenX screenY".split(" ");
$TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler$$.prototype.$H$=function($e$jscomp$337$$){switch($e$jscomp$337$$.type){case "touchstart":case "touchend":case "touchmove":if($e$jscomp$337$$&&$e$jscomp$337$$.type){var $copiedEvent$jscomp$inline_7043$$=$JSCompiler_StaticMethods_copyProperties_$$($e$jscomp$337$$,$EVENT_PROPERTIES$$module$extensions$amp_viewer_integration$0_1$touch_handler$$);$e$jscomp$337$$.touches&&($copiedEvent$jscomp$inline_7043$$.touches=$JSCompiler_StaticMethods_copyTouches_$$($e$jscomp$337$$.touches));
$e$jscomp$337$$.changedTouches&&($copiedEvent$jscomp$inline_7043$$.changedTouches=$JSCompiler_StaticMethods_copyTouches_$$($e$jscomp$337$$.changedTouches));this.$G$.$D$($e$jscomp$337$$.type,$copiedEvent$jscomp$inline_7043$$,!1)}this.$D$&&$e$jscomp$337$$.preventDefault()}};
$TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler$$.prototype.$I$=function($type$jscomp$238$$,$payload$jscomp$39$$,$awaitResponse$jscomp$3$$){this.$D$=!!$payload$jscomp$39$$;$JSCompiler_StaticMethods_TouchHandler$$module$extensions$amp_viewer_integration$0_1$touch_handler_prototype$unlisten_$$(this);$JSCompiler_StaticMethods_listenForTouchEvents_$$(this);return $awaitResponse$jscomp$3$$?Promise.resolve({}):void 0};$AmpViewerIntegrationVariableService$$module$extensions$amp_viewer_integration$0_1$variable_service$$.prototype.get=function(){return this.$D$};$AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration$$.prototype.init=function(){var $$jscomp$this$jscomp$1409$$=this;"amp-viewer-integration";var $ampdoc$jscomp$265$$=_.$getAmpdoc$$module$src$service$$(this.$win$.document),$viewer$jscomp$55$$=_.$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$265$$);this.$D$="1"==$viewer$jscomp$55$$.$F$.webview;this.$G$=_.$JSCompiler_StaticMethods_hasCapability$$($viewer$jscomp$55$$,"handshakepoll");var $messagingToken$$=
$viewer$jscomp$55$$.$F$.messagingToken,$origin$jscomp$44$$=$viewer$jscomp$55$$.$F$.origin||"";if(!this.$D$&&!$origin$jscomp$44$$)return Promise.resolve();if(this.$D$||this.$G$)return $JSCompiler_StaticMethods_webviewPreHandshakePromise_$$(this,_.$isIframed$$module$src$dom$$(this.$win$)?this.$win$.parent:null,$origin$jscomp$44$$).then(function($highlightInfo$jscomp$3$$){return $JSCompiler_StaticMethods_openChannelAndStart_$$($$jscomp$this$jscomp$1409$$,$viewer$jscomp$55$$,$ampdoc$jscomp$265$$,$origin$jscomp$44$$,
new $Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$($$jscomp$this$jscomp$1409$$.$win$,$highlightInfo$jscomp$3$$,$$jscomp$this$jscomp$1409$$.$D$,$messagingToken$$))});var $highlightInfo$jscomp$3$$=$getHighlightParam$$module$extensions$amp_viewer_integration$0_1$highlight_handler$$($ampdoc$jscomp$265$$);$highlightInfo$jscomp$3$$&&(this.$F$=new $HighlightHandler$$module$extensions$amp_viewer_integration$0_1$highlight_handler$$($ampdoc$jscomp$265$$,$highlightInfo$jscomp$3$$));
return $JSCompiler_StaticMethods_openChannelAndStart_$$(this,$viewer$jscomp$55$$,$ampdoc$jscomp$265$$,$origin$jscomp$44$$,new $Messaging$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$(this.$win$,new $WindowPortEmulator$$module$extensions$amp_viewer_integration$0_1$messaging$messaging$$(this.$win$,$origin$jscomp$44$$,this.$win$.parent),this.$D$,$messagingToken$$))};
$AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration$$.prototype.$I$=function($messaging$jscomp$6$$){return $messaging$jscomp$6$$.$D$("unloaded",{},!0)};(new $AmpViewerIntegration$$module$extensions$amp_viewer_integration$0_1$amp_viewer_integration$$).init();
})});

//# sourceMappingURL=amp-viewer-integration-0.1.js.map
