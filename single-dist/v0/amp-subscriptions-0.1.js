(self.AMP=self.AMP||[]).push({n:"amp-subscriptions",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $isStoryDocument$$module$src$utils$story$$=function($ampdoc$jscomp$96$$){return new Promise(function($resolve$jscomp$45$$){$ampdoc$jscomp$96$$.$whenBodyAvailable$().then(function(){var $body$jscomp$13$$=$ampdoc$jscomp$96$$.$getBody$();_.$waitForChild$$module$src$dom$$($body$jscomp$13$$,function(){return!!$body$jscomp$13$$.firstElementChild},function(){$resolve$jscomp$45$$("AMP-STORY"===$body$jscomp$13$$.firstElementChild.tagName)})})})},$isDocumentReady$$module$third_party$subscriptions_project$config$$=
function($doc$jscomp$68_readyState$$){$doc$jscomp$68_readyState$$=$doc$jscomp$68_readyState$$.readyState;return"loading"!=$doc$jscomp$68_readyState$$&&"uninitialized"!=$doc$jscomp$68_readyState$$},$onDocumentState$$module$third_party$subscriptions_project$config$$=function($doc$jscomp$70$$,$callback$jscomp$108$$){var $ready$jscomp$1$$=$isDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$70$$);if($ready$jscomp$1$$)$callback$jscomp$108$$($doc$jscomp$70$$);else{var $readyListener$jscomp$1$$=
function(){$isDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$70$$)&&($ready$jscomp$1$$||($ready$jscomp$1$$=!0,$callback$jscomp$108$$($doc$jscomp$70$$)),$doc$jscomp$70$$.removeEventListener("readystatechange",$readyListener$jscomp$1$$))};$doc$jscomp$70$$.addEventListener("readystatechange",$readyListener$jscomp$1$$)}},$whenDocumentReady$$module$third_party$subscriptions_project$config$$=function($doc$jscomp$71$$){return new Promise(function($resolve$jscomp$46$$){$onDocumentState$$module$third_party$subscriptions_project$config$$($doc$jscomp$71$$,
$resolve$jscomp$46$$)})},$GlobalDoc$$module$third_party$subscriptions_project$config$$=function($winOrDoc$$){var $isWin$$=!!$winOrDoc$$.document;this.$D$=$isWin$$?$winOrDoc$$:$winOrDoc$$.defaultView;this.$doc_$=$isWin$$?$winOrDoc$$.document:$winOrDoc$$},$PageConfig$$module$third_party$subscriptions_project$config$$=function($productOrPublicationId_publicationId$$,$locked$$){var $div$jscomp$3_label$jscomp$8$$=$productOrPublicationId_publicationId$$.indexOf(":");if(-1!=$div$jscomp$3_label$jscomp$8$$){var $productId$$=
$productOrPublicationId_publicationId$$;$productOrPublicationId_publicationId$$=$productId$$.substring(0,$div$jscomp$3_label$jscomp$8$$);$div$jscomp$3_label$jscomp$8$$=$productId$$.substring($div$jscomp$3_label$jscomp$8$$+1);if("*"==$div$jscomp$3_label$jscomp$8$$)throw Error("wildcard disallowed");}else $productId$$=null;this.$PageConfig$$module$third_party$subscriptions_project$config$publicationId_$=$productOrPublicationId_publicationId$$;this.$PageConfig$$module$third_party$subscriptions_project$config$productId_$=
$productId$$;this.$locked_$=$locked$$},$log$$module$third_party$subscriptions_project$config$$=function($var_args$jscomp$60$$){console.log.apply(console,arguments)},$debugLog$$module$third_party$subscriptions_project$config$$=function($var_args$jscomp$59$$){if(/swg.debug=1/.test(self.location.hash)){var $logArgs$$=Array.prototype.slice.call(arguments,0);$logArgs$$.unshift("[Subscriptions]");$log$$module$third_party$subscriptions_project$config$$.apply($log$$module$third_party$subscriptions_project$config$$,
$logArgs$$)}},$JSCompiler_StaticMethods_checkArray$$=function($typeArray$$,$expectedTypes$jscomp$2$$){var $found$jscomp$2$$=!1;$typeArray$$.forEach(function($typeArray$$){$found$jscomp$2$$=$found$jscomp$2$$||$expectedTypes$jscomp$2$$.includes($typeArray$$.replace(/^http:\/\/schema.org\//i,""))});return $found$jscomp$2$$},$MicrodataParser$$module$third_party$subscriptions_project$config$$=function($doc$jscomp$74$$){this.$doc_$=$doc$jscomp$74$$;this.$F$=this.$D$=null},$JSCompiler_StaticMethods_discoverAccess_$$=
function($content$jscomp$6_root$jscomp$27$$){for(var $accessForFree_nodeList$$=$content$jscomp$6_root$jscomp$27$$.querySelectorAll("[itemprop='isAccessibleForFree']"),$i$jscomp$171$$=0;$accessForFree_nodeList$$[$i$jscomp$171$$];$i$jscomp$171$$++){var $element$jscomp$283$$=$accessForFree_nodeList$$[$i$jscomp$171$$];if(($content$jscomp$6_root$jscomp$27$$=$element$jscomp$283$$.getAttribute("content")||$element$jscomp$283$$.textContent)&&$JSCompiler_StaticMethods_isValidElement_$$($element$jscomp$283$$,
"alreadySeenForAccessInfo"))return $accessForFree_nodeList$$=null,"true"==$content$jscomp$6_root$jscomp$27$$.toLowerCase()?$accessForFree_nodeList$$=!0:"false"==$content$jscomp$6_root$jscomp$27$$.toLowerCase()&&($accessForFree_nodeList$$=!1),$accessForFree_nodeList$$}return null},$JSCompiler_StaticMethods_isValidElement_$$=function($current$jscomp$4_node$jscomp$59$$,$alreadySeen_type$jscomp$168$$){for(;$current$jscomp$4_node$jscomp$59$$&&!$current$jscomp$4_node$jscomp$59$$[$alreadySeen_type$jscomp$168$$];$current$jscomp$4_node$jscomp$59$$=
$current$jscomp$4_node$jscomp$59$$.parentNode)if($current$jscomp$4_node$jscomp$59$$[$alreadySeen_type$jscomp$168$$]=!0,$current$jscomp$4_node$jscomp$59$$.hasAttribute&&$current$jscomp$4_node$jscomp$59$$.hasAttribute("itemscope"))return($alreadySeen_type$jscomp$168$$=$current$jscomp$4_node$jscomp$59$$.getAttribute("itemtype"))?$JSCompiler_StaticMethods_checkArray$$($alreadySeen_type$jscomp$168$$.split(/\s+/),_.$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$):!1;return!1},$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$discoverProductId_$$=
function($nodeList$jscomp$1_root$jscomp$29$$){$nodeList$jscomp$1_root$jscomp$29$$=$nodeList$jscomp$1_root$jscomp$29$$.querySelectorAll('[itemprop="productID"]');for(var $i$jscomp$172$$=0;$nodeList$jscomp$1_root$jscomp$29$$[$i$jscomp$172$$];$i$jscomp$172$$++){var $element$jscomp$284_item$jscomp$9$$=$nodeList$jscomp$1_root$jscomp$29$$[$i$jscomp$172$$],$content$jscomp$7$$=$element$jscomp$284_item$jscomp$9$$.getAttribute("content")||$element$jscomp$284_item$jscomp$9$$.textContent;$element$jscomp$284_item$jscomp$9$$=
$element$jscomp$284_item$jscomp$9$$.closest("[itemtype][itemscope]");if(!(-1>=$element$jscomp$284_item$jscomp$9$$.getAttribute("itemtype").indexOf("http://schema.org/Product"))&&$JSCompiler_StaticMethods_isValidElement_$$($element$jscomp$284_item$jscomp$9$$.parentElement,"alreadySeenForProductInfo"))return $content$jscomp$7$$}return null},$JSCompiler_StaticMethods_getPageConfig_$$=function($JSCompiler_StaticMethods_getPageConfig_$self$$){var $locked$jscomp$2$$=null;null!=$JSCompiler_StaticMethods_getPageConfig_$self$$.$D$?
$locked$jscomp$2$$=!$JSCompiler_StaticMethods_getPageConfig_$self$$.$D$:$JSCompiler_StaticMethods_getPageConfig_$self$$.$doc_$.$Doc$$module$third_party$subscriptions_project$config_prototype$isReady$()&&($locked$jscomp$2$$=!1);return null!=$JSCompiler_StaticMethods_getPageConfig_$self$$.$F$&&null!=$locked$jscomp$2$$?new $PageConfig$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_getPageConfig_$self$$.$F$,$locked$jscomp$2$$):null},$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$$=
function($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$){var $config$jscomp$15_element$jscomp$285$$=$JSCompiler_StaticMethods_getPageConfig_$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$);if($config$jscomp$15_element$jscomp$285$$)return $config$jscomp$15_element$jscomp$285$$;for(var $nodeList$jscomp$2$$=Array.prototype.slice.call($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.$doc_$.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter(function($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$){return($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$=
$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.getAttribute("itemtype"))?$JSCompiler_StaticMethods_checkArray$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.split(/\s+/),_.$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$):!1}),$i$jscomp$173$$=0;$nodeList$jscomp$2$$[$i$jscomp$173$$]&&null==$config$jscomp$15_element$jscomp$285$$;$i$jscomp$173$$++)$config$jscomp$15_element$jscomp$285$$=
$nodeList$jscomp$2$$[$i$jscomp$173$$],null==$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.$D$&&($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.$D$=$JSCompiler_StaticMethods_discoverAccess_$$($config$jscomp$15_element$jscomp$285$$)),$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.$F$||
($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$.$F$=$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$discoverProductId_$$($config$jscomp$15_element$jscomp$285$$)),$config$jscomp$15_element$jscomp$285$$=$JSCompiler_StaticMethods_getPageConfig_$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$self$$);
return $config$jscomp$15_element$jscomp$285$$},$JsonLdParser$$module$third_party$subscriptions_project$config$$=function($doc$jscomp$73$$){this.$doc_$=$doc$jscomp$73$$},$JSCompiler_StaticMethods_valueArray_$$=function($json$jscomp$7_value$jscomp$165$$,$name$jscomp$173$$){$json$jscomp$7_value$jscomp$165$$=$json$jscomp$7_value$jscomp$165$$[$name$jscomp$173$$];return null==$json$jscomp$7_value$jscomp$165$$||""===$json$jscomp$7_value$jscomp$165$$?null:Array.isArray($json$jscomp$7_value$jscomp$165$$)?
$json$jscomp$7_value$jscomp$165$$:[$json$jscomp$7_value$jscomp$165$$]},$JSCompiler_StaticMethods_singleValue_$$=function($json$jscomp$8_value$jscomp$166_valueArray$$,$name$jscomp$174$$){$json$jscomp$8_value$jscomp$166_valueArray$$=($json$jscomp$8_value$jscomp$166_valueArray$$=$JSCompiler_StaticMethods_valueArray_$$($json$jscomp$8_value$jscomp$166_valueArray$$,$name$jscomp$174$$))&&$json$jscomp$8_value$jscomp$166_valueArray$$[0];return null==$json$jscomp$8_value$jscomp$166_valueArray$$||""===$json$jscomp$8_value$jscomp$166_valueArray$$?
null:$json$jscomp$8_value$jscomp$166_valueArray$$},$getMetaTag$$module$third_party$subscriptions_project$config$$=function($el$jscomp$34_rootNode$jscomp$5$$,$name$jscomp$175$$){return($el$jscomp$34_rootNode$jscomp$5$$=$el$jscomp$34_rootNode$jscomp$5$$.querySelector('meta[name="'+$name$jscomp$175$$+'"]'))?$el$jscomp$34_rootNode$jscomp$5$$.getAttribute("content"):null},$MetaParser$$module$third_party$subscriptions_project$config$$=function($doc$jscomp$72$$){this.$doc_$=$doc$jscomp$72$$},$PageConfigResolver$$module$third_party$subscriptions_project$config$$=
function($winOrDoc$jscomp$1$$){var $$jscomp$this$jscomp$228$$=this;this.$doc_$=9===$winOrDoc$jscomp$1$$.nodeType?new $GlobalDoc$$module$third_party$subscriptions_project$config$$($winOrDoc$jscomp$1$$):$winOrDoc$jscomp$1$$.document?new $GlobalDoc$$module$third_party$subscriptions_project$config$$($winOrDoc$jscomp$1$$):$winOrDoc$jscomp$1$$;this.$D$=null;this.$G$=new Promise(function($winOrDoc$jscomp$1$$){$$jscomp$this$jscomp$228$$.$D$=$winOrDoc$jscomp$1$$});this.$I$=new $MetaParser$$module$third_party$subscriptions_project$config$$(this.$doc_$);
this.$H$=new $JsonLdParser$$module$third_party$subscriptions_project$config$$(this.$doc_$);this.$J$=new $MicrodataParser$$module$third_party$subscriptions_project$config$$(this.$doc_$)},$JSCompiler_StaticMethods_resolveConfig$$=function($JSCompiler_StaticMethods_resolveConfig$self$$){Promise.resolve().then($JSCompiler_StaticMethods_resolveConfig$self$$.$F$.bind($JSCompiler_StaticMethods_resolveConfig$self$$));$JSCompiler_StaticMethods_resolveConfig$self$$.$doc_$.$whenReady$().then($JSCompiler_StaticMethods_resolveConfig$self$$.$F$.bind($JSCompiler_StaticMethods_resolveConfig$self$$));
return $JSCompiler_StaticMethods_resolveConfig$self$$.$G$},$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$=function($element$jscomp$286$$){this.$element_$=$element$jscomp$286$$},$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$=function($service$jscomp$22$$){return new _.$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"",raw:"",$service$:$service$jscomp$22$$,$granted$:!1})},$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$=
function($json$jscomp$9$$){$json$jscomp$9$$||($json$jscomp$9$$={});var $raw$jscomp$1$$=JSON.stringify($json$jscomp$9$$);return new _.$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:$json$jscomp$9$$.source||"",raw:$raw$jscomp$1$$,$service$:"",$granted$:$json$jscomp$9$$.granted||!1,$grantReason$:$json$jscomp$9$$.grantReason,$dataObject$:$json$jscomp$9$$.data||null,$decryptedDocumentKey$:$json$jscomp$9$$.decryptedDocumentKey||null})},$CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$=
function($ampdoc$jscomp$242_parsedEncryptedKeys$$){this.$ampdoc_$=$ampdoc$jscomp$242_parsedEncryptedKeys$$;this.$D$=null;this.$F$=($ampdoc$jscomp$242_parsedEncryptedKeys$$=this.$ampdoc_$.getRootNode().querySelector("script[keys]"))&&_.$tryParseJson$$module$src$json$$($ampdoc$jscomp$242_parsedEncryptedKeys$$.textContent)||null},$JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$$=function($JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$self_encryptedKeys$$){return($JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$self_encryptedKeys$$=
$JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$self_encryptedKeys$$.$F$)?$JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$self_encryptedKeys$$.local||null:null},$JSCompiler_StaticMethods_tryToDecryptDocument$$=function($JSCompiler_StaticMethods_tryToDecryptDocument$self$$){$JSCompiler_StaticMethods_tryToDecryptDocument$self$$.$D$||($JSCompiler_StaticMethods_tryToDecryptDocument$self$$.$D$=
$JSCompiler_StaticMethods_tryToDecryptDocument$self$$.$ampdoc_$.$whenReady$().then(function(){var $encryptedSections$$=$JSCompiler_StaticMethods_tryToDecryptDocument$self$$.$ampdoc_$.getRootNode().querySelectorAll("script[encrypted]"),$promises$jscomp$27$$=[];_.$iterateCursor$$module$src$dom$$($encryptedSections$$,function($JSCompiler_StaticMethods_tryToDecryptDocument$self$$){$promises$jscomp$27$$.push(Promise.resolve("<h2><i> abc </i></h2>").then(function($encryptedSections$$){$JSCompiler_StaticMethods_tryToDecryptDocument$self$$.outerHTML=
$encryptedSections$$}))});return Promise.all($promises$jscomp$27$$)}))},$Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$=function($ampdoc$jscomp$243_doc$jscomp$157$$){var $$jscomp$this$jscomp$1303$$=this;this.$ampdoc_$=$ampdoc$jscomp$243_doc$jscomp$157$$;this.$F$=_.$Services$$module$src$services$vsyncFor$$($ampdoc$jscomp$243_doc$jscomp$157$$.$win$);this.$K$=_.$Services$$module$src$services$timerFor$$($ampdoc$jscomp$243_doc$jscomp$157$$.$win$);this.$M$=_.$Services$$module$src$services$viewportForDoc$$($ampdoc$jscomp$243_doc$jscomp$157$$);
this.$G$=!1;this.$I$=null;this.$J$=Promise.resolve();$ampdoc$jscomp$243_doc$jscomp$157$$=this.$ampdoc_$.$win$.document;this.$D$=_.$createElementWithAttributes$$module$src$dom$$($ampdoc$jscomp$243_doc$jscomp$157$$,"amp-subscriptions-dialog",{role:"dialog"});_.$toggle$$module$src$style$$(this.$D$,!1);this.$H$=_.$createElementWithAttributes$$module$src$dom$$($ampdoc$jscomp$243_doc$jscomp$157$$,"button",{"class":"i-amphtml-subs-dialog-close-button"});_.$toggle$$module$src$style$$(this.$H$,!1);this.$D$.appendChild(this.$H$);
this.$H$.addEventListener("click",function(){$$jscomp$this$jscomp$1303$$.close()});this.$ampdoc_$.$getBody$().appendChild(this.$D$);_.$setImportantStyles$$module$src$style$$(this.$D$,{transform:"translateY(100%)"})},$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$$=function($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$self$$,$action$jscomp$34$$){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$self$$.$J$=
$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$self$$.$J$.then($action$jscomp$34$$)},$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$$=function($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$,$content$jscomp$26$$,$showCloseAction$jscomp$1$$){$showCloseAction$jscomp$1$$=void 0===$showCloseAction$jscomp$1$$?!0:$showCloseAction$jscomp$1$$;$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$I$?
$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$D$.replaceChild($content$jscomp$26$$,$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$I$):$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$D$.appendChild($content$jscomp$26$$);$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$I$=
$content$jscomp$26$$;if($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$G$)return Promise.resolve();$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$G$=!0;return _.$JSCompiler_StaticMethods_mutatePromise$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$F$,function(){_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$D$,
!0);_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$H$,$showCloseAction$jscomp$1$$)}).then(function(){return _.$JSCompiler_StaticMethods_mutatePromise$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$F$,function(){_.$setImportantStyles$$module$src$style$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$D$,
{transform:"translateY(0)"})}).then(function(){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$K$.$promise$(300)})}).then(function(){var $content$jscomp$26$$;return _.$JSCompiler_StaticMethods_runPromise$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$F$,{measure:function(){$content$jscomp$26$$=$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$D$.offsetHeight},
$mutate$:function(){_.$JSCompiler_StaticMethods_updatePaddingBottom$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$self$$.$M$,$content$jscomp$26$$)}})})},$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$$=function($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$G$?
_.$JSCompiler_StaticMethods_mutatePromise$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$F$,function(){_.$setImportantStyles$$module$src$style$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$D$,{transform:"translateY(100%)"})}).then(function(){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$K$.$promise$(300)}).then(function(){return _.$JSCompiler_StaticMethods_mutatePromise$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$F$,
function(){_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$D$,!1);_.$JSCompiler_StaticMethods_updatePaddingBottom$$($JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$M$,0);$JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$self$$.$G$=!1})}):Promise.resolve()},$Actions$$module$extensions$amp_subscriptions$0_1$actions$$=
function($ampdoc$jscomp$244$$,$urlBuilder$$,$analytics$jscomp$4$$,$actionMap$jscomp$3$$){for(var $k$jscomp$77$$ in $actionMap$jscomp$3$$);this.$G$=$actionMap$jscomp$3$$;this.$H$={};this.$J$=$urlBuilder$$;this.$F$=$analytics$jscomp$4$$;this.$D$=null;this.$I$=0;this.$K$=_.$openLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.bind(null,$ampdoc$jscomp$244$$);this.$build$()},$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$$=function($JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$,
$url$jscomp$251$$,$action$jscomp$36$$){var $now$jscomp$28$$=Date.now();if($JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$&&1E3>$now$jscomp$28$$-$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$I$)return $JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$;"amp-subscriptions";$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$F$.$F$("local",
$action$jscomp$36$$,"started");var $actionPromise$$=$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$K$($url$jscomp$251$$).then(function($url$jscomp$251$$){"amp-subscriptions";$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$=null;$url$jscomp$251$$=_.$parseQueryString_$$module$src$url_parse_query_string$$($url$jscomp$251$$).success;var $now$jscomp$28$$="true"==$url$jscomp$251$$||
"yes"==$url$jscomp$251$$||"1"==$url$jscomp$251$$;$now$jscomp$28$$?$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$F$.$F$("local",$action$jscomp$36$$,"success"):$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$F$.$F$("local",$action$jscomp$36$$,"rejected");return $now$jscomp$28$$||!$url$jscomp$251$$}).catch(function($url$jscomp$251$$){"amp-subscriptions";$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$F$.$F$("local",
$action$jscomp$36$$,"failed");$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$==$actionPromise$$&&($JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$=null);throw $url$jscomp$251$$;});$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$=$actionPromise$$;$JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$I$=
$now$jscomp$28$$;return $JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$self$$.$D$},$evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$=function($expr$jscomp$17$$,$data$jscomp$250$$){return _.$evaluateAccessExpr$$module$extensions$amp_access$0_1$access_expr$$($expr$jscomp$17$$,$data$jscomp$250$$)},$LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$=function($ampdoc$jscomp$245$$,
$dialog$jscomp$3$$,$serviceAdapter$jscomp$3$$){this.$ampdoc_$=$ampdoc$jscomp$245$$;this.$F$=$ampdoc$jscomp$245$$.getRootNode();this.$D$=$dialog$jscomp$3$$;this.$H$=_.$Services$$module$src$services$templatesFor$$($ampdoc$jscomp$245$$.$win$);this.$G$=$serviceAdapter$jscomp$3$$},$JSCompiler_StaticMethods_renderActions_$$=function($JSCompiler_StaticMethods_renderActions_$self$$,$renderState$jscomp$1$$){$JSCompiler_StaticMethods_renderActionsInNode_$$($JSCompiler_StaticMethods_renderActions_$self$$,$renderState$jscomp$1$$,
$JSCompiler_StaticMethods_renderActions_$self$$.$F$,$evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$)},$JSCompiler_StaticMethods_renderDialog_$$=function($JSCompiler_StaticMethods_renderDialog_$self$$,$authResponse$jscomp$1$$){return $JSCompiler_StaticMethods_renderDialog_$self$$.$ampdoc_$.$whenReady$().then(function(){for(var $candidates$jscomp$2$$=$JSCompiler_StaticMethods_renderDialog_$self$$.$ampdoc_$.getRootNode().querySelectorAll("[subscriptions-dialog][subscriptions-display]"),
$i$392$$=0;$i$392$$<$candidates$jscomp$2$$.length;$i$392$$++){var $candidate$jscomp$8$$=$candidates$jscomp$2$$[$i$392$$],$expr$jscomp$18$$=$candidate$jscomp$8$$.getAttribute("subscriptions-display");if($expr$jscomp$18$$&&_.$evaluateAccessExpr$$module$extensions$amp_access$0_1$access_expr$$($expr$jscomp$18$$,$authResponse$jscomp$1$$))return $candidate$jscomp$8$$}}).then(function($candidate$jscomp$9_clone$jscomp$5$$){if($candidate$jscomp$9_clone$jscomp$5$$){if("TEMPLATE"==$candidate$jscomp$9_clone$jscomp$5$$.tagName)return _.$JSCompiler_StaticMethods_Templates$$module$src$service$template_impl_prototype$renderTemplate$$($JSCompiler_StaticMethods_renderDialog_$self$$.$H$,
$candidate$jscomp$9_clone$jscomp$5$$,$authResponse$jscomp$1$$).then(function($candidate$jscomp$9_clone$jscomp$5$$){return $JSCompiler_StaticMethods_renderActionsInNode_$$($JSCompiler_StaticMethods_renderDialog_$self$$,$authResponse$jscomp$1$$,$candidate$jscomp$9_clone$jscomp$5$$,$evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$)});$candidate$jscomp$9_clone$jscomp$5$$=$candidate$jscomp$9_clone$jscomp$5$$.cloneNode(!0);$candidate$jscomp$9_clone$jscomp$5$$.removeAttribute("subscriptions-dialog");
$candidate$jscomp$9_clone$jscomp$5$$.removeAttribute("subscriptions-display");return $candidate$jscomp$9_clone$jscomp$5$$}}).then(function($authResponse$jscomp$1$$){if($authResponse$jscomp$1$$)return $JSCompiler_StaticMethods_renderDialog_$self$$.$D$.open($authResponse$jscomp$1$$,!0)})},$JSCompiler_StaticMethods_renderActionsInNode_$$=function($JSCompiler_StaticMethods_renderActionsInNode_$self$$,$renderState$jscomp$3$$,$rootNode$jscomp$11$$,$evaluateExpr$$){return $JSCompiler_StaticMethods_renderActionsInNode_$self$$.$ampdoc_$.$whenReady$().then(function(){for(var $actionCandidates$$=
$rootNode$jscomp$11$$.querySelectorAll('[subscriptions-action], [subscriptions-section="actions"], [subscriptions-actions]'),$i$393$$=0;$i$393$$<$actionCandidates$$.length;$i$393$$++){var $candidate$jscomp$10$$=$actionCandidates$$[$i$393$$],$expr$jscomp$19_serviceId$jscomp$inline_5239$$=$candidate$jscomp$10$$.getAttribute("subscriptions-display");if($expr$jscomp$19_serviceId$jscomp$inline_5239$$&&$evaluateExpr$$($expr$jscomp$19_serviceId$jscomp$inline_5239$$,$renderState$jscomp$3$$)){if($candidate$jscomp$10$$.classList.add("i-amphtml-subs-display"),
$candidate$jscomp$10$$.getAttribute("subscriptions-service")&&$candidate$jscomp$10$$.getAttribute("subscriptions-action")&&"false"!==$candidate$jscomp$10$$.getAttribute("subscriptions-decorate")&&!$candidate$jscomp$10$$.hasAttribute("i-amphtml-subs-decorated")){$expr$jscomp$19_serviceId$jscomp$inline_5239$$=$candidate$jscomp$10$$.getAttribute("subscriptions-service");var $action$jscomp$inline_5240$$=$candidate$jscomp$10$$.getAttribute("subscriptions-action");$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$$($JSCompiler_StaticMethods_renderActionsInNode_$self$$.$G$.$D$,
$candidate$jscomp$10$$,$expr$jscomp$19_serviceId$jscomp$inline_5239$$,$action$jscomp$inline_5240$$);$candidate$jscomp$10$$.setAttribute("i-amphtml-subs-decorated",!0)}}else $candidate$jscomp$10$$.classList.remove("i-amphtml-subs-display")}return $rootNode$jscomp$11$$})},$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$=function($ampdoc$jscomp$246$$,$readerIdPromise$$){this.$F$=_.$Services$$module$src$services$urlReplacementsForDoc$$($ampdoc$jscomp$246$$.$getHeadNode$());this.$G$=
$readerIdPromise$$;this.$D$=null},$JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$$=function($JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$self$$,$useAuthData$jscomp$5$$){return $JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$self$$.$G$.then(function($readerId$jscomp$1_vars$jscomp$32$$){$readerId$jscomp$1_vars$jscomp$32$$=
{READER_ID:$readerId$jscomp$1_vars$jscomp$32$$,ACCESS_READER_ID:$readerId$jscomp$1_vars$jscomp$32$$};$useAuthData$jscomp$5$$&&($readerId$jscomp$1_vars$jscomp$32$$.AUTHDATA=function($useAuthData$jscomp$5$$){if($JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$self$$.$D$)return _.$getValueForExpr$$module$src$json$$($JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$self$$.$D$,
$useAuthData$jscomp$5$$)});return $readerId$jscomp$1_vars$jscomp$32$$})},$LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$=function($JSCompiler_temp_const$jscomp$1089_ampdoc$jscomp$247$$,$JSCompiler_inline_result$jscomp$1090_platformConfig$jscomp$3$$,$serviceAdapter$jscomp$4$$){this.$ampdoc_$=$JSCompiler_temp_const$jscomp$1089_ampdoc$jscomp$247$$;this.$O$=$JSCompiler_temp_const$jscomp$1089_ampdoc$jscomp$247$$.getRootNode();this.$F$=$JSCompiler_inline_result$jscomp$1090_platformConfig$jscomp$3$$;
this.$D$=$serviceAdapter$jscomp$4$$;this.$K$=_.$Services$$module$src$services$xhrFor$$(this.$ampdoc_$.$win$);this.$M$=this.$F$.authorizationUrl;$JSCompiler_temp_const$jscomp$1089_ampdoc$jscomp$247$$=this.$ampdoc_$;$JSCompiler_inline_result$jscomp$1090_platformConfig$jscomp$3$$=$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$$(this.$D$.$D$);this.$G$=new $UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$($JSCompiler_temp_const$jscomp$1089_ampdoc$jscomp$247$$,
$JSCompiler_inline_result$jscomp$1090_platformConfig$jscomp$3$$);this.$P$=$serviceAdapter$jscomp$4$$.$D$.$F$;this.$H$=new $Actions$$module$extensions$amp_subscriptions$0_1$actions$$(this.$ampdoc_$,this.$G$,this.$P$,this.$F$.actions);this.$J$=new $LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$(this.$ampdoc_$,$serviceAdapter$jscomp$4$$.$D$.$W$,this.$D$);this.$I$=this.$F$.pingbackUrl||null;$JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$$(this)},
$JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$$=function($JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$){$JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$O$.addEventListener("click",
function($action$jscomp$inline_5248_e$jscomp$317$$){var $element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$=_.$closestAncestorElementBySelector$$module$src$dom$$($action$jscomp$inline_5248_e$jscomp$317$$.target,"[subscriptions-action]");$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$&&($action$jscomp$inline_5248_e$jscomp$317$$=$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$.getAttribute("subscriptions-action"),
$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$=$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$.getAttribute("subscriptions-service"),"local"==$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$?$JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$executeAction$($action$jscomp$inline_5248_e$jscomp$317$$):
"auto"==($element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$||"auto")?"login"==$action$jscomp$inline_5248_e$jscomp$317$$?($element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$=$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$$($JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$D$.$D$.$D$),$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$$($JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$D$.$D$,
$action$jscomp$inline_5248_e$jscomp$317$$,$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$.$getServiceId$())):$JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$executeAction$($action$jscomp$inline_5248_e$jscomp$317$$):$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$&&$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$$($JSCompiler_StaticMethods_LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_prototype$initializeListeners_$self$$.$D$.$D$,
$action$jscomp$inline_5248_e$jscomp$317$$,$element$jscomp$718_platform$jscomp$inline_5250_serviceAttr$jscomp$inline_5249$$))})},$PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$=function($expectedServiceIds$$,$scoreConfig$$,$fallbackEntitlement$$,$opt_Platforms$$){var $$jscomp$this$jscomp$1320$$=this;this.$D$=$opt_Platforms$$||{};this.$U$=$expectedServiceIds$$;this.$G$={};this.$O$={};$expectedServiceIds$$.forEach(function($expectedServiceIds$$){$$jscomp$this$jscomp$1320$$.$O$[$expectedServiceIds$$]=
new _.$Deferred$$module$src$utils$promise$$});this.$R$=new _.$Observable$$module$src$observable$$;this.$S$=new _.$Observable$$module$src$observable$$;this.$I$=this.$J$=this.$F$=this.$H$=null;this.$K$=[];this.$P$=$fallbackEntitlement$$;this.$M$=Object.assign($DEFAULT_SCORE_CONFIG$$module$extensions$amp_subscriptions$0_1$score_factors$$,$scoreConfig$$)},$JSCompiler_StaticMethods_resolvePlatform$$=function($JSCompiler_StaticMethods_resolvePlatform$self$$,$serviceId$jscomp$5$$,$platform$jscomp$18$$){$JSCompiler_StaticMethods_resolvePlatform$self$$.$D$[$serviceId$jscomp$5$$]=
$platform$jscomp$18$$;$JSCompiler_StaticMethods_resolvePlatform$self$$.$S$.$fire$({$serviceId$:$serviceId$jscomp$5$$})},$JSCompiler_StaticMethods_resetPlatformStore$$=function($JSCompiler_StaticMethods_resetPlatformStore$self$$){for(var $platformKey$$ in $JSCompiler_StaticMethods_resetPlatformStore$self$$.$D$)$JSCompiler_StaticMethods_resetPlatformStore$self$$.$D$[$platformKey$$].reset();return new $PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$($JSCompiler_StaticMethods_resetPlatformStore$self$$.$U$,
$JSCompiler_StaticMethods_resetPlatformStore$self$$.$M$,$JSCompiler_StaticMethods_resetPlatformStore$self$$.$P$,$JSCompiler_StaticMethods_resetPlatformStore$self$$.$D$)},$JSCompiler_StaticMethods_onPlatformResolves$$=function($JSCompiler_StaticMethods_onPlatformResolves$self$$,$serviceId$jscomp$6$$,$callback$jscomp$175$$){var $platform$jscomp$19$$=$JSCompiler_StaticMethods_onPlatformResolves$self$$.$D$[$serviceId$jscomp$6$$];$platform$jscomp$19$$?$callback$jscomp$175$$($platform$jscomp$19$$):$JSCompiler_StaticMethods_onPlatformResolves$self$$.$S$.add(function($platform$jscomp$19$$){$platform$jscomp$19$$.$serviceId$===
$serviceId$jscomp$6$$&&$callback$jscomp$175$$($JSCompiler_StaticMethods_onPlatformResolves$self$$.$D$[$serviceId$jscomp$6$$])})},$JSCompiler_StaticMethods_getAvailablePlatforms$$=function($JSCompiler_StaticMethods_getAvailablePlatforms$self$$){var $platforms$$=[],$platformKey$jscomp$1$$;for($platformKey$jscomp$1$$ in $JSCompiler_StaticMethods_getAvailablePlatforms$self$$.$D$)$platforms$$.push($JSCompiler_StaticMethods_getAvailablePlatforms$self$$.$D$[$platformKey$jscomp$1$$]);return $platforms$$},
$JSCompiler_StaticMethods_PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store_prototype$onChange$$=function($JSCompiler_StaticMethods_PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store_prototype$onChange$self$$,$callback$jscomp$176$$){$JSCompiler_StaticMethods_PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store_prototype$onChange$self$$.$R$.add($callback$jscomp$176$$)},$JSCompiler_StaticMethods_resolveEntitlement$$=function($JSCompiler_StaticMethods_resolveEntitlement$self$$,
$serviceId$jscomp$8$$,$entitlement$jscomp$4$$){$entitlement$jscomp$4$$&&($entitlement$jscomp$4$$.$service$=$serviceId$jscomp$8$$);$JSCompiler_StaticMethods_resolveEntitlement$self$$.$G$[$serviceId$jscomp$8$$]=$entitlement$jscomp$4$$;var $deferred$jscomp$62$$=$JSCompiler_StaticMethods_resolveEntitlement$self$$.$O$[$serviceId$jscomp$8$$];$deferred$jscomp$62$$&&$deferred$jscomp$62$$.resolve($entitlement$jscomp$4$$);-1!=$JSCompiler_StaticMethods_resolveEntitlement$self$$.$K$.indexOf($serviceId$jscomp$8$$)&&
$JSCompiler_StaticMethods_resolveEntitlement$self$$.$K$.splice($JSCompiler_StaticMethods_resolveEntitlement$self$$.$K$.indexOf($serviceId$jscomp$8$$));$entitlement$jscomp$4$$.$granted$&&$JSCompiler_StaticMethods_saveGrantEntitlement_$$($JSCompiler_StaticMethods_resolveEntitlement$self$$,$entitlement$jscomp$4$$);$JSCompiler_StaticMethods_resolveEntitlement$self$$.$R$.$fire$({$serviceId$:$serviceId$jscomp$8$$,$entitlement$:$entitlement$jscomp$4$$})},$JSCompiler_StaticMethods_getGrantStatus$$=function($JSCompiler_StaticMethods_getGrantStatus$self$$){if(null!==
$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$)return $JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.$promise$;$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$=new _.$Deferred$$module$src$utils$promise$$;for(var $key$jscomp$164$$ in $JSCompiler_StaticMethods_getGrantStatus$self$$.$G$){var $entitlement$jscomp$5$$=$JSCompiler_StaticMethods_getGrantStatus$self$$.$G$[$key$jscomp$164$$];$entitlement$jscomp$5$$.$granted$&&($JSCompiler_StaticMethods_saveGrantEntitlement_$$($JSCompiler_StaticMethods_getGrantStatus$self$$,
$entitlement$jscomp$5$$),$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.resolve(!0))}$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getGrantStatus$self$$)?$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.resolve(!1):$JSCompiler_StaticMethods_PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store_prototype$onChange$$($JSCompiler_StaticMethods_getGrantStatus$self$$,function($key$jscomp$164$$){$key$jscomp$164$$.$entitlement$.$granted$?$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.resolve(!0):
$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getGrantStatus$self$$)&&$JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.resolve(!1)});return $JSCompiler_StaticMethods_getGrantStatus$self$$.$H$.$promise$},$JSCompiler_StaticMethods_saveGrantEntitlement_$$=function($JSCompiler_StaticMethods_saveGrantEntitlement_$self$$,$entitlement$jscomp$7$$){if(!$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$F$&&$entitlement$jscomp$7$$.$granted$||$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$F$&&
!_.$JSCompiler_StaticMethods_isSubscriber$$($JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$F$)&&_.$JSCompiler_StaticMethods_isSubscriber$$($entitlement$jscomp$7$$))$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$F$=$entitlement$jscomp$7$$},$JSCompiler_StaticMethods_getGrantEntitlement$$=function($JSCompiler_StaticMethods_getGrantEntitlement$self$$){if($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$)return $JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$.$promise$;
$JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$=new _.$Deferred$$module$src$utils$promise$$;$JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$&&_.$JSCompiler_StaticMethods_isSubscriber$$($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$)||$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getGrantEntitlement$self$$)?$JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$.resolve($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$):$JSCompiler_StaticMethods_getGrantEntitlement$self$$.$R$.add(function(){($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$&&
_.$JSCompiler_StaticMethods_isSubscriber$$($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$)||$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getGrantEntitlement$self$$))&&$JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$.resolve($JSCompiler_StaticMethods_getGrantEntitlement$self$$.$F$)});return $JSCompiler_StaticMethods_getGrantEntitlement$self$$.$J$.$promise$},$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$$=function($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$){if($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$)return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$.$promise$;
$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$=new _.$Deferred$$module$src$utils$promise$$;$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$)?$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$.resolve($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$)):$JSCompiler_StaticMethods_PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store_prototype$onChange$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$,
function(){$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$)&&$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$.resolve($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$))});return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$I$.$promise$},$JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$=function($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$){var $entitlements$jscomp$15$$=
[],$platform$jscomp$21$$;for($platform$jscomp$21$$ in $JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$G$)_.$hasOwn$$module$src$utils$object$$($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$G$,$platform$jscomp$21$$)&&$entitlements$jscomp$15$$.push($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$G$[$platform$jscomp$21$$]);return $entitlements$jscomp$15$$},$JSCompiler_StaticMethods_selectPlatform$$=function($JSCompiler_StaticMethods_selectPlatform$self$$){return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$$($JSCompiler_StaticMethods_selectPlatform$self$$).then(function(){var $JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$;
a:{$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_selectPlatform$self$$);for($JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$=$JSCompiler_StaticMethods_getAvailablePlatforms$$($JSCompiler_StaticMethods_selectPlatform$self$$);$JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$.length;){var $platform$jscomp$inline_5257$$=$JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$.pop();if(_.$JSCompiler_StaticMethods_isSubscriber$$($JSCompiler_StaticMethods_selectPlatform$self$$.$G$[$platform$jscomp$inline_5257$$.$getServiceId$()])){$JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$=
$platform$jscomp$inline_5257$$;break a}}$JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$=$JSCompiler_StaticMethods_rankPlatformsByWeight_$$($JSCompiler_StaticMethods_selectPlatform$self$$,$JSCompiler_StaticMethods_getAllPlatformWeights_$$($JSCompiler_StaticMethods_selectPlatform$self$$))}return $JSCompiler_inline_result$jscomp$1088_availablePlatforms$jscomp$inline_5256$$})},$JSCompiler_StaticMethods_areAllPlatformsResolved_$$=function($JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$){return Object.keys($JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$.$G$).length===
$JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$.$U$.length},$JSCompiler_StaticMethods_getSupportedFactorWeight_$$=function($JSCompiler_StaticMethods_getSupportedFactorWeight_$self$$,$factorName$jscomp$1$$,$factorValue$jscomp$1_platform$jscomp$22$$){$factorValue$jscomp$1_platform$jscomp$22$$=$factorValue$jscomp$1_platform$jscomp$22$$.$getSupportedScoreFactor$($factorName$jscomp$1$$);return"number"!==typeof $factorValue$jscomp$1_platform$jscomp$22$$?0:$JSCompiler_StaticMethods_getSupportedFactorWeight_$self$$.$M$[$factorName$jscomp$1$$]*
Math.min(1,Math.max(-1,$factorValue$jscomp$1_platform$jscomp$22$$))},$JSCompiler_StaticMethods_getAllPlatformWeights_$$=function($JSCompiler_StaticMethods_getAllPlatformWeights_$self$$){return $JSCompiler_StaticMethods_getAvailablePlatforms$$($JSCompiler_StaticMethods_getAllPlatformWeights_$self$$).map(function($platform$jscomp$24$$){return{platform:$platform$jscomp$24$$,weight:$JSCompiler_StaticMethods_calculatePlatformWeight_$$($JSCompiler_StaticMethods_getAllPlatformWeights_$self$$,$platform$jscomp$24$$)}})},
$JSCompiler_StaticMethods_calculatePlatformWeight_$$=function($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,$platform$jscomp$25$$){var $factorWeights$$=[0],$weight$jscomp$2$$=$platform$jscomp$25$$.$getBaseScore$(),$factor$jscomp$1$$;for($factor$jscomp$1$$ in $JSCompiler_StaticMethods_calculatePlatformWeight_$self$$.$M$)_.$hasOwn$$module$src$utils$object$$($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$.$M$,$factor$jscomp$1$$)&&$factorWeights$$.push($JSCompiler_StaticMethods_getSupportedFactorWeight_$$($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,
$factor$jscomp$1$$,$platform$jscomp$25$$));return $weight$jscomp$2$$+$factorWeights$$.reduce(function($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,$platform$jscomp$25$$){return $JSCompiler_StaticMethods_calculatePlatformWeight_$self$$+$platform$jscomp$25$$})},$JSCompiler_StaticMethods_rankPlatformsByWeight_$$=function($JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$,$platformWeights$$){var $localPlatform$jscomp$1$$=$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.$D$.local;
$platformWeights$$.sort(function($JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$,$platformWeights$$){return $platformWeights$$.weight==$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.weight&&$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.platform==$localPlatform$jscomp$1$$?-1:$platformWeights$$.weight-$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.weight});return $platformWeights$$[0].platform},$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$$=function($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$){var $platformWeights$jscomp$1$$=
$JSCompiler_StaticMethods_getAvailablePlatforms$$($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$).map(function($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$){var $platformWeights$jscomp$1$$=$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$.$getSupportedScoreFactor$("supportsViewer");return{platform:$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$,weight:"number"==typeof $platformWeights$jscomp$1$$?$platformWeights$jscomp$1$$:
0}});return $JSCompiler_StaticMethods_rankPlatformsByWeight_$$($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$,$platformWeights$jscomp$1$$)},$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$$=function($JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$,$serviceId$jscomp$11$$){$serviceId$jscomp$11$$===$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$D$.local.$getServiceId$()&&$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$P$?
($JSCompiler_StaticMethods_resolveEntitlement$$($JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$,$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$D$.local.$getServiceId$(),$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$P$),_.$user$$module$src$log$$().$Log$$module$src$log_prototype$warn$("amp-subscriptions","Local platform has failed to resolve,  using fallback entitlement.")):-1==$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$K$.indexOf($serviceId$jscomp$11$$)&&
($JSCompiler_StaticMethods_resolveEntitlement$$($JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$,$serviceId$jscomp$11$$,$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$($serviceId$jscomp$11$$)),$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$self$$.$K$.push($serviceId$jscomp$11$$))},$Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$=function($ampdoc$jscomp$248$$){this.$ampdoc_$=$ampdoc$jscomp$248$$;this.$resources_$=_.$Services$$module$src$services$resourcesForDoc$$($ampdoc$jscomp$248$$);
$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$$(this,null);this.$ampdoc_$.$getBody$().classList.add("i-amphtml-subs-ready");$JSCompiler_StaticMethods_addLoadingBar$$(this)},$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$$=function($JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$,$state$jscomp$109$$){$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$.$resources_$.$mutateElement$($JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$.$ampdoc_$.$getBody$(),
function(){$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$.$ampdoc_$.$getBody$().classList.toggle("i-amphtml-subs-grant-unk",null===$state$jscomp$109$$);$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$.$ampdoc_$.$getBody$().classList.toggle("i-amphtml-subs-grant-yes",!0===$state$jscomp$109$$);$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$self$$.$ampdoc_$.$getBody$().classList.toggle("i-amphtml-subs-grant-no",
!1===$state$jscomp$109$$)})},$JSCompiler_StaticMethods_addLoadingBar$$=function($JSCompiler_StaticMethods_addLoadingBar$self$$){$JSCompiler_StaticMethods_addLoadingBar$self$$.$ampdoc_$.$whenReady$().then(function(){var $body$jscomp$38$$=$JSCompiler_StaticMethods_addLoadingBar$self$$.$ampdoc_$.$getBody$();if(!$body$jscomp$38$$.querySelector("[subscriptions-section=loading]")){var $element$jscomp$720$$=_.$createElementWithAttributes$$module$src$dom$$($JSCompiler_StaticMethods_addLoadingBar$self$$.$ampdoc_$.$win$.document,
"div",_.$dict$$module$src$utils$object$$({"class":"i-amphtml-subs-progress","subscriptions-section":"loading"}));$body$jscomp$38$$.insertBefore($element$jscomp$720$$,_.$childElementByTag$$module$src$dom$$($body$jscomp$38$$,"footer"))}})},$JSCompiler_StaticMethods_toggleState_$$=function($JSCompiler_StaticMethods_toggleState_$self$$,$state$jscomp$110$$){$JSCompiler_StaticMethods_toggleState_$self$$.$resources_$.$mutateElement$($JSCompiler_StaticMethods_toggleState_$self$$.$ampdoc_$.$getBody$(),function(){$JSCompiler_StaticMethods_toggleState_$self$$.$ampdoc_$.$getBody$().classList.toggle("i-amphtml-subs-loading",
$state$jscomp$110$$)})},$ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$=function($subscriptionService$$){this.$D$=$subscriptionService$$},$ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$=function($ampdoc$jscomp$249$$,$platformConfig$jscomp$4$$,$serviceAdapter$jscomp$5$$,$origin$jscomp$40$$){this.$ampdoc_$=$ampdoc$jscomp$249$$;this.$J$=$serviceAdapter$jscomp$5$$;this.$F$=$serviceAdapter$jscomp$5$$.$D$.$J$;this.$D$=new $LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$($ampdoc$jscomp$249$$,
$platformConfig$jscomp$4$$,$serviceAdapter$jscomp$5$$);this.$G$=_.$Services$$module$src$services$viewerForDoc$$(this.$ampdoc_$);this.$G$.$onMessage$("subscriptionchange",this.$subscriptionChange_$.bind(this));this.$I$=this.$F$.$PageConfig$$module$third_party$subscriptions_project$config$publicationId_$;this.$K$=this.$F$.$PageConfig$$module$third_party$subscriptions_project$config$productId_$;this.$H$=$origin$jscomp$40$$},$JSCompiler_StaticMethods_verifyAuthToken_$$=function($JSCompiler_StaticMethods_verifyAuthToken_$self$$,
$token$jscomp$40$$){return new Promise(function($resolve$jscomp$107$$){var $entitlements$jscomp$16_origin$jscomp$41$$=_.$getWinOrigin$$module$src$url$$($JSCompiler_StaticMethods_verifyAuthToken_$self$$.$ampdoc_$.$win$),$entitlement$jscomp$10_sourceOrigin$jscomp$6$$=_.$getSourceOrigin$$module$src$url$$($JSCompiler_StaticMethods_verifyAuthToken_$self$$.$ampdoc_$.$win$.location),$decodedData_index$jscomp$173$$=_.$JSCompiler_StaticMethods_JwtHelper$$module$extensions$amp_access$0_1$jwt_prototype$decodeInternal_$$($token$jscomp$40$$).$payload$,
$currentProductId_entitlementObject$$=$JSCompiler_StaticMethods_verifyAuthToken_$self$$.$F$.$PageConfig$$module$third_party$subscriptions_project$config$productId_$;if($decodedData_index$jscomp$173$$.aud!=$entitlements$jscomp$16_origin$jscomp$41$$&&$decodedData_index$jscomp$173$$.aud!=$entitlement$jscomp$10_sourceOrigin$jscomp$6$$)throw _.$user$$module$src$log$$().$createError$('The mismatching "aud" field: '+$decodedData_index$jscomp$173$$.aud);if($decodedData_index$jscomp$173$$.exp<Math.floor(Date.now()/
1E3))throw _.$user$$module$src$log$$().$createError$("Payload is expired");$entitlements$jscomp$16_origin$jscomp$41$$=$decodedData_index$jscomp$173$$.entitlements;$entitlement$jscomp$10_sourceOrigin$jscomp$6$$=$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local");if(Array.isArray($entitlements$jscomp$16_origin$jscomp$41$$))for($decodedData_index$jscomp$173$$=0;$decodedData_index$jscomp$173$$<$entitlements$jscomp$16_origin$jscomp$41$$.length;$decodedData_index$jscomp$173$$++){if(-1!==
$entitlements$jscomp$16_origin$jscomp$41$$[$decodedData_index$jscomp$173$$].products.indexOf($currentProductId_entitlementObject$$)){$currentProductId_entitlementObject$$=$entitlements$jscomp$16_origin$jscomp$41$$[$decodedData_index$jscomp$173$$];$entitlement$jscomp$10_sourceOrigin$jscomp$6$$=new _.$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"viewer",raw:$token$jscomp$40$$,$granted$:!0,$grantReason$:$currentProductId_entitlementObject$$.$subscriptionToken$?"SUBSCRIBER":
"",$dataObject$:$currentProductId_entitlementObject$$});break}}else $decodedData_index$jscomp$173$$.metering&&!$decodedData_index$jscomp$173$$.entitlements?$entitlement$jscomp$10_sourceOrigin$jscomp$6$$=new _.$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:$decodedData_index$jscomp$173$$.iss||"",raw:$token$jscomp$40$$,$granted$:!0,$grantReason$:"METERING",$dataObject$:$decodedData_index$jscomp$173$$.metering}):$entitlements$jscomp$16_origin$jscomp$41$$&&($entitlement$jscomp$10_sourceOrigin$jscomp$6$$=
new _.$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"viewer",raw:$token$jscomp$40$$,$granted$:$entitlements$jscomp$16_origin$jscomp$41$$.$granted$,$grantReason$:$entitlements$jscomp$16_origin$jscomp$41$$.$subscriptionToken$?"SUBSCRIBER":"",$dataObject$:$entitlements$jscomp$16_origin$jscomp$41$$}));$entitlement$jscomp$10_sourceOrigin$jscomp$6$$.$service$="local";$resolve$jscomp$107$$($entitlement$jscomp$10_sourceOrigin$jscomp$6$$)})},$ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker$$=
function($ampdoc$jscomp$250$$){this.$ampdoc_$=$ampdoc$jscomp$250$$;this.$F$=_.$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$250$$);this.$D$=null;this.$G$=_.$Services$$module$src$services$timerFor$$($ampdoc$jscomp$250$$.$win$);this.$H$=_.$Services$$module$src$services$viewportForDoc$$($ampdoc$jscomp$250$$)},$JSCompiler_StaticMethods_scheduleView$$=function($JSCompiler_StaticMethods_scheduleView$self$$){$JSCompiler_StaticMethods_scheduleView$self$$.$D$=null;return $JSCompiler_StaticMethods_scheduleView$self$$.$ampdoc_$.$whenReady$().then(function(){return(new Promise(function($resolve$jscomp$108$$){_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($JSCompiler_StaticMethods_scheduleView$self$$.$F$)&&
$resolve$jscomp$108$$();_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($JSCompiler_StaticMethods_scheduleView$self$$.$F$,function(){_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($JSCompiler_StaticMethods_scheduleView$self$$.$F$)&&$resolve$jscomp$108$$()})})).then(function(){return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$$($JSCompiler_StaticMethods_scheduleView$self$$)})})},
$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$$=function($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$){if($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$.$D$)return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$.$D$;
"local-viewer";$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$.$D$=$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$$($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$).catch(function($reason$jscomp$60$$){"local-viewer";$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$.$D$=
null;throw $reason$jscomp$60$$;});return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$reportWhenViewed_$self$$.$D$},$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$$=function($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$){var $unlistenSet$jscomp$1$$=[];return(new Promise(function($resolve$jscomp$109$$,
$reject$jscomp$37$$){$unlistenSet$jscomp$1$$.push(_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$F$,function(){_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$F$)||
$reject$jscomp$37$$(_.$cancellation$$module$src$error$$())}));var $timeoutId$jscomp$2$$=$JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$G$.delay($resolve$jscomp$109$$,2E3);$unlistenSet$jscomp$1$$.push(function(){return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$G$.cancel($timeoutId$jscomp$2$$)});$unlistenSet$jscomp$1$$.push(_.$JSCompiler_StaticMethods_Viewport$$module$src$service$viewport$viewport_impl_prototype$onScroll$$($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$H$,
$resolve$jscomp$109$$));$unlistenSet$jscomp$1$$.push(_.$listenOnce$$module$src$event_helper$$($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$.$ampdoc_$.getRootNode(),"click",$resolve$jscomp$109$$))})).then(function(){$unlistenSet$jscomp$1$$.forEach(function($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$){return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$()})},
function($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$){$unlistenSet$jscomp$1$$.forEach(function($JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$){return $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$()});throw $JSCompiler_StaticMethods_ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker_prototype$whenViewed_$self$$;
})},$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$=function($ampdoc$jscomp$251$$){var $configElement$$=$ampdoc$jscomp$251$$.getElementById("amp-subscriptions");this.$ampdoc_$=$ampdoc$jscomp$251$$;_.$installStylesForDoc$$module$src$style_installer$$($ampdoc$jscomp$251$$,"[subscriptions-action]:not(.i-amphtml-subs-display),[subscriptions-actions]:not(.i-amphtml-subs-display),[subscriptions-section=actions]:not(.i-amphtml-subs-display),body.i-amphtml-subs-delegated [subscriptions-section=actions],body.i-amphtml-subs-grant-unk [subscriptions-action],body.i-amphtml-subs-grant-unk [subscriptions-section=actions],body:not(.i-amphtml-subs-grant-no) [subscriptions-section=content-not-granted],body:not(.i-amphtml-subs-grant-yes) [subscriptions-section=content],body:not(.i-amphtml-subs-loading) [subscriptions-section=loading]{display:none!important}amp-subscriptions-dialog{display:block!important;position:fixed!important;bottom:0!important;left:0!important;margin-left:0!important;width:100%!important;z-index:2147483641!important;max-height:90vh;box-sizing:border-box;opacity:1;background-image:none;background-color:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,0.2);margin-bottom:0;-webkit-transition:-webkit-transform 0.3s ease-in;transition:-webkit-transform 0.3s ease-in;transition:transform 0.3s ease-in;transition:transform 0.3s ease-in,-webkit-transform 0.3s ease-in}.i-amphtml-subs-dialog-close-button{position:absolute;width:28px;height:28px;top:-28px;right:0;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");background-size:13px 13px;background-position:9px;background-color:#fff;background-repeat:no-repeat;box-shadow:0 -1px 1px 0 rgba(0,0,0,0.2);border:none;border-radius:12px 0 0 0;cursor:pointer}body:not(.i-amphtml-subs-grant-yes) .i-amphtml-subs-dialog-close-button{display:none}.i-amphtml-subs-progress{height:2px;background-color:#ccc;position:relative;margin:8px;overflow:hidden}.i-amphtml-subs-progress:after{content:\"\";background-color:#2196f3;height:2px;position:absolute;left:0;top:0;width:20%;-webkit-animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite;animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite}@-webkit-keyframes i-amphtml-subs-loading-progress{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(500%);transform:translateX(500%)}}@keyframes i-amphtml-subs-loading-progress{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(500%);transform:translateX(500%)}}@media (min-width:480px){amp-subscriptions-dialog{width:480px!important;left:-240px!important;margin-left:50vw!important}}\n/*# sourceURL=/extensions/amp-subscriptions/0.1/amp-subscriptions.css*/",
function(){},!1,"amp-subscriptions");this.$I$=null;this.$H$=new $Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$($ampdoc$jscomp$251$$);this.$D$=this.$G$=this.$J$=null;this.$P$=_.$JSCompiler_StaticMethods_assertElement$$(_.$user$$module$src$log$$(),$configElement$$);this.$F$=new $SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$(this.$P$);this.$K$=new $ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$(this);this.$W$=new $Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$($ampdoc$jscomp$251$$);
this.$Z$=new $ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker$$($ampdoc$jscomp$251$$);this.$O$=_.$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$251$$);this.$M$=null;this.$X$=_.$Services$$module$src$services$timerFor$$($ampdoc$jscomp$251$$.$win$);this.$S$=_.$JSCompiler_StaticMethods_hasCapability$$(this.$O$,"auth");this.$V$=_.$Services$$module$src$services$cidForDoc$$($ampdoc$jscomp$251$$);this.$U$={};this.$R$=new $CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$($ampdoc$jscomp$251$$)},
$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$$=function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$){if(!$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$I$){var $pageConfigResolver$$=new $PageConfigResolver$$module$third_party$subscriptions_project$config$$(new _.$DocImpl$$module$extensions$amp_subscriptions$0_1$doc_impl$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$ampdoc_$));
$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$I$=Promise.all([$JSCompiler_StaticMethods_getPlatformConfig_$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$),$JSCompiler_StaticMethods_resolveConfig$$($pageConfigResolver$$)]).then(function($pageConfigResolver$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$G$=
$pageConfigResolver$$[0];$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$J$=$pageConfigResolver$$[1]})}return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$self$$.$I$},$JSCompiler_StaticMethods_getPlatformConfig_$$=function($JSCompiler_StaticMethods_getPlatformConfig_$self$$){return new Promise(function($resolve$jscomp$110$$,$reject$jscomp$38$$){var $rawContent$jscomp$1$$=
_.$tryParseJson$$module$src$json$$($JSCompiler_StaticMethods_getPlatformConfig_$self$$.$P$.textContent,function($JSCompiler_StaticMethods_getPlatformConfig_$self$$){$reject$jscomp$38$$('Failed to parse "amp-subscriptions" JSON: '+$JSCompiler_StaticMethods_getPlatformConfig_$self$$)});$resolve$jscomp$110$$($rawContent$jscomp$1$$)})},$JSCompiler_StaticMethods_processGrantState_$$=function($JSCompiler_StaticMethods_processGrantState_$self$$,$grantState$$){$JSCompiler_StaticMethods_processGrantState_$self$$.$H$.$toggleLoading$(!1);
$JSCompiler_StaticMethods_Renderer$$module$extensions$amp_subscriptions$0_1$renderer_prototype$setState_$$($JSCompiler_StaticMethods_processGrantState_$self$$.$H$,$grantState$$);$JSCompiler_StaticMethods_processGrantState_$self$$.$M$=$JSCompiler_StaticMethods_scheduleView$$($JSCompiler_StaticMethods_processGrantState_$self$$.$Z$)},$JSCompiler_StaticMethods_resolveEntitlementsToStore_$$=function($JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$,$serviceId$jscomp$17$$,$entitlement$jscomp$11$$){$JSCompiler_StaticMethods_resolveEntitlement$$($JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$D$,
$serviceId$jscomp$17$$,$entitlement$jscomp$11$$);$entitlement$jscomp$11$$.$decryptedDocumentKey$&&$JSCompiler_StaticMethods_tryToDecryptDocument$$($JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$R$);$JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$F$.$D$("subscriptions-entitlement-resolved",$serviceId$jscomp$17$$)},$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$$=function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$self$$,
$subscriptionPlatform$jscomp$2$$){var $timeout$jscomp$22$$=3E3;if(_.$getMode$$module$src$mode$$().$development$||_.$getMode$$module$src$mode$$().localDev)$timeout$jscomp$22$$=6E3;($subscriptionPlatform$jscomp$2$$.$isPrerenderSafe$()?Promise.resolve():$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$self$$.$O$.$D$).then(function(){return _.$JSCompiler_StaticMethods_timeoutPromise$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$self$$.$X$,
$timeout$jscomp$22$$,$subscriptionPlatform$jscomp$2$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$getEntitlements$()).then(function($timeout$jscomp$22$$){$timeout$jscomp$22$$=$timeout$jscomp$22$$||$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$($subscriptionPlatform$jscomp$2$$.$getServiceId$());$JSCompiler_StaticMethods_resolveEntitlementsToStore_$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$self$$,
$subscriptionPlatform$jscomp$2$$.$getServiceId$(),$timeout$jscomp$22$$);return $timeout$jscomp$22$$}).catch(function($timeout$jscomp$22$$){var $reason$jscomp$62$$=$subscriptionPlatform$jscomp$2$$.$getServiceId$();$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$self$$.$D$,$reason$jscomp$62$$);throw _.$user$$module$src$log$$().$createError$("fetch entitlements failed for "+
$reason$jscomp$62$$,$timeout$jscomp$22$$);})})},$JSCompiler_StaticMethods_initializePlatformStore_$$=function($JSCompiler_StaticMethods_initializePlatformStore_$self$$,$serviceIds$jscomp$1$$){var $fallbackEntitlement$jscomp$1$$=$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$G$.fallbackEntitlement?$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$($JSCompiler_StaticMethods_initializePlatformStore_$self$$.$G$.fallbackEntitlement):$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local");
$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$D$=new $PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$($serviceIds$jscomp$1$$,$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$G$.score,$fallbackEntitlement$jscomp$1$$)},$JSCompiler_StaticMethods_delegateAuthToViewer_$$=function($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$){var $origin$jscomp$42$$=_.$getWinOrigin$$module$src$url$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$ampdoc_$.$win$);
$JSCompiler_StaticMethods_initializePlatformStore_$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$,["local"]);$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$G$.services.forEach(function($service$jscomp$41_viewerPlatform$$){"local"==($service$jscomp$41_viewerPlatform$$.serviceId||"local")&&($service$jscomp$41_viewerPlatform$$=new $ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$ampdoc_$,
$service$jscomp$41_viewerPlatform$$,$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$K$,$origin$jscomp$42$$),$JSCompiler_StaticMethods_resolvePlatform$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$D$,"local",$service$jscomp$41_viewerPlatform$$),$service$jscomp$41_viewerPlatform$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$getEntitlements$().then(function($origin$jscomp$42$$){$JSCompiler_StaticMethods_resolveEntitlementsToStore_$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$,
"local",$origin$jscomp$42$$)}).catch(function($origin$jscomp$42$$){$JSCompiler_StaticMethods_reportPlatformFailureAndFallback$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$D$,"local");_.$dev$$module$src$log$$().error("amp-subscriptions","Viewer auth failed:",$origin$jscomp$42$$)}))})},$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$$=function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$){var $readerId$jscomp$2$$=
$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$.$U$.local;if(!$readerId$jscomp$2$$){var $consent$jscomp$7$$=Promise.resolve();$readerId$jscomp$2$$=$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$.$V$.then(function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$){return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$.get({scope:"amp-access",
createCookieIfNotPresent:!0},$consent$jscomp$7$$)});$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$self$$.$U$.local=$readerId$jscomp$2$$}return $readerId$jscomp$2$$},$JSCompiler_StaticMethods_startAuthorizationFlow_$$=function($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$,$doPlatformSelection$$){$doPlatformSelection$$=void 0===$doPlatformSelection$$?!0:$doPlatformSelection$$;$JSCompiler_StaticMethods_getGrantStatus$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$.$D$).then(function($doPlatformSelection$$){$JSCompiler_StaticMethods_processGrantState_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$,
$doPlatformSelection$$);$JSCompiler_StaticMethods_performPingback_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$)});$doPlatformSelection$$&&$JSCompiler_StaticMethods_selectAndActivatePlatform_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$)},$JSCompiler_StaticMethods_selectAndActivatePlatform_$$=function($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$){Promise.all([$JSCompiler_StaticMethods_getGrantStatus$$($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$D$),
$JSCompiler_StaticMethods_selectPlatform$$($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$D$),$JSCompiler_StaticMethods_getGrantEntitlement$$($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$D$)]).then(function($grantEntitlement$jscomp$1_resolvedValues$$){var $selectedPlatform$jscomp$1$$=$grantEntitlement$jscomp$1_resolvedValues$$[1];$grantEntitlement$jscomp$1_resolvedValues$$=$grantEntitlement$jscomp$1_resolvedValues$$[2];var $selectedEntitlement$jscomp$1$$=$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$D$.$G$[$selectedPlatform$jscomp$1$$.$getServiceId$()],
$bestEntitlement$$=$grantEntitlement$jscomp$1_resolvedValues$$||$selectedEntitlement$jscomp$1$$;$selectedPlatform$jscomp$1$$.$activate$($selectedEntitlement$jscomp$1$$,$grantEntitlement$jscomp$1_resolvedValues$$);$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$F$.$D$("subscriptions-service-activated",$selectedPlatform$jscomp$1$$.$getServiceId$());$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$F$.$D$("subscriptions-platform-activated",$selectedPlatform$jscomp$1$$.$getServiceId$());
$bestEntitlement$$.$granted$?$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$F$.$D$("subscriptions-access-granted",$bestEntitlement$$.$service$):($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$F$.$D$("subscriptions-paywall-activated",$selectedPlatform$jscomp$1$$.$getServiceId$()),$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$F$.$D$("subscriptions-access-denied",$selectedPlatform$jscomp$1$$.$getServiceId$()))})},$JSCompiler_StaticMethods_performPingback_$$=
function($JSCompiler_StaticMethods_performPingback_$self$$){$JSCompiler_StaticMethods_performPingback_$self$$.$M$&&$JSCompiler_StaticMethods_performPingback_$self$$.$M$.then(function(){return $JSCompiler_StaticMethods_getGrantEntitlement$$($JSCompiler_StaticMethods_performPingback_$self$$.$D$)}).then(function($grantStateEntitlement$$){var $localPlatform$jscomp$2$$=$JSCompiler_StaticMethods_performPingback_$self$$.$D$.$D$.local;$localPlatform$jscomp$2$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$isPingbackEnabled$()&&
$localPlatform$jscomp$2$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$pingback$($grantStateEntitlement$$||$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local"))})},$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$$=function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$D$=
$JSCompiler_StaticMethods_resetPlatformStore$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$D$);$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$H$.$toggleLoading$(!0);$JSCompiler_StaticMethods_getAvailablePlatforms$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$D$).forEach(function($subscriptionPlatform$jscomp$4$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$,
$subscriptionPlatform$jscomp$4$$)});$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$F$.$D$("subscriptions-service-re-authorized","");$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$.$F$.$D$("subscriptions-platform-re-authorized","");$JSCompiler_StaticMethods_startAuthorizationFlow_$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$self$$)},
$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$$=function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$self$$,$action$jscomp$45$$,$serviceId$jscomp$21$$){return new Promise(function($resolve$jscomp$111$$){$JSCompiler_StaticMethods_onPlatformResolves$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$self$$.$D$,
$serviceId$jscomp$21$$,function($platform$jscomp$27$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$self$$.$F$.event("subscriptions-action-delegated",_.$dict$$module$src$utils$object$$({action:$action$jscomp$45$$,serviceId:$serviceId$jscomp$21$$}));$resolve$jscomp$111$$($platform$jscomp$27$$.$executeAction$($action$jscomp$45$$))})})},$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$$=
function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$self$$,$element$jscomp$723$$,$serviceId$jscomp$22$$,$action$jscomp$46$$){$JSCompiler_StaticMethods_onPlatformResolves$$($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$self$$.$D$,$serviceId$jscomp$22$$,function($JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$self$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$decorateServiceAction$self$$.$decorateUI$($element$jscomp$723$$,
$action$jscomp$46$$,null)})};_.$DocImpl$$module$extensions$amp_subscriptions$0_1$doc_impl$$.prototype.$Doc$$module$third_party$subscriptions_project$config_prototype$isReady$=_.$JSCompiler_unstubMethod$$(53,function(){return this.$ampdoc_$.$AmpDoc$$module$src$service$ampdoc_impl_prototype$isReady$()});_.$AmpDoc$$module$src$service$ampdoc_impl$$.prototype.$AmpDoc$$module$src$service$ampdoc_impl_prototype$isReady$=_.$JSCompiler_unstubMethod$$(48,function(){return null});
_.$AmpDocSingle$$module$src$service$ampdoc_impl$$.prototype.$AmpDoc$$module$src$service$ampdoc_impl_prototype$isReady$=_.$JSCompiler_unstubMethod$$(47,function(){return _.$isDocumentReady$$module$src$document_ready$$(this.$win$.document)});_.$AmpDocShadow$$module$src$service$ampdoc_impl$$.prototype.$AmpDoc$$module$src$service$ampdoc_impl_prototype$isReady$=_.$JSCompiler_unstubMethod$$(46,function(){return this.$G$});
_.$BaseElement$$module$src$base_element$$.prototype.$activate$=_.$JSCompiler_unstubMethod$$(6,function(){});_.$JSCompiler_prototypeAlias$$=$GlobalDoc$$module$third_party$subscriptions_project$config$$.prototype;_.$JSCompiler_prototypeAlias$$.$getWin$=function(){return this.$D$};_.$JSCompiler_prototypeAlias$$.getRootNode=function(){return this.$doc_$};_.$JSCompiler_prototypeAlias$$.$getRootElement$=function(){return this.$doc_$.documentElement};_.$JSCompiler_prototypeAlias$$.$getHead$=function(){return this.$doc_$.head};
_.$JSCompiler_prototypeAlias$$.$getBody$=function(){return this.$doc_$.body};_.$JSCompiler_prototypeAlias$$.$Doc$$module$third_party$subscriptions_project$config_prototype$isReady$=function(){return $isDocumentReady$$module$third_party$subscriptions_project$config$$(this.$doc_$)};_.$JSCompiler_prototypeAlias$$.$whenReady$=function(){return $whenDocumentReady$$module$third_party$subscriptions_project$config$$(this.$doc_$)};
$PageConfigResolver$$module$third_party$subscriptions_project$config$$.prototype.$F$=function(){if(!this.$D$)return null;var $JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$;var $JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$=
this.$I$;$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.$getBody$()?($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=
$getMetaTag$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.getRootNode(),"subscriptions-product-id"))?($JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$=
$getMetaTag$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.getRootNode(),"subscriptions-accessible-for-free"),$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=
new $PageConfig$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$,$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$&&
"false"==$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.toLowerCase()||!1)):$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=
null:$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=null;if(!$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$)a:{$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$=
this.$H$;if($JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.$getBody$()){$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=
$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.$Doc$$module$third_party$subscriptions_project$config_prototype$isReady$();$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$=
$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.$doc_$.getRootNode().querySelectorAll('script[type="application/ld+json"]');for(var $i$jscomp$inline_5225$$=0;$i$jscomp$inline_5225$$<$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$.length;$i$jscomp$inline_5225$$++){var $JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=
$JSCompiler_StaticMethods_JsonLdParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5222_JSCompiler_StaticMethods_MetaParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5218_accessibleForFree$jscomp$inline_5220_elements$jscomp$inline_5224$$[$i$jscomp$inline_5225$$],$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$;
if(($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=!$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$["__SWG-SEEN__"]&&$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$.textContent)&&
!($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$))b:{$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$;do if($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$.nextSibling){$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
!0;break b}while(($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$.parentNode)&&void 0!=$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$);
$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=!1}if($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$&&($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$["__SWG-SEEN__"]=
!0,_.$RE_ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$.test($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$.textContent))){$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=void 0;c:{try{$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
JSON.parse($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$.textContent);break c}catch($e$231$jscomp$inline_6971$$){}$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=void 0}if($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$)$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$["@type"])?$JSCompiler_StaticMethods_checkArray$$(Array.isArray($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$)?
$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$:[$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$],_.$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$):
!1;if($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$){var $json$jscomp$inline_6970_productId$jscomp$inline_6966$$=null;if($JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$=
$JSCompiler_StaticMethods_valueArray_$$($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$,"isPartOf"))for(var $i$jscomp$inline_6968$$=0;$i$jscomp$inline_6968$$<$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$.length;$i$jscomp$inline_6968$$++){$json$jscomp$inline_6970_productId$jscomp$inline_6966$$=
$JSCompiler_inline_result$jscomp$inline_6964_JSCompiler_temp$jscomp$6006_JSCompiler_temp$jscomp$6007_JSCompiler_temp$jscomp$7122_currentElement$jscomp$inline_6960_partOfArray$jscomp$inline_6967_value$jscomp$inline_7238$$[$i$jscomp$inline_6968$$];var $value$jscomp$inline_7241$$=$json$jscomp$inline_6970_productId$jscomp$inline_6966$$["@type"],$expectedTypes$jscomp$inline_7242$$=["Product"];if($json$jscomp$inline_6970_productId$jscomp$inline_6966$$=$value$jscomp$inline_7241$$&&$JSCompiler_StaticMethods_checkArray$$(Array.isArray($value$jscomp$inline_7241$$)?
$value$jscomp$inline_7241$$:[$value$jscomp$inline_7241$$],$expectedTypes$jscomp$inline_7242$$)?$JSCompiler_StaticMethods_singleValue_$$($json$jscomp$inline_6970_productId$jscomp$inline_6966$$,"productID"):null)break}$json$jscomp$inline_6970_productId$jscomp$inline_6966$$?($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=$JSCompiler_StaticMethods_singleValue_$$($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$,
"isAccessibleForFree"),$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=new $PageConfig$$module$third_party$subscriptions_project$config$$($json$jscomp$inline_6970_productId$jscomp$inline_6966$$,!(null==$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$||
""===$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$||("boolean"==typeof $JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$?$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$:
"string"!=typeof $JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$||"false"!=$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$.toLowerCase())))):$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=
null}else $JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$=null;if($JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$){$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=
$JSCompiler_inline_result$jscomp$6009_JSCompiler_temp$jscomp$7124_element$jscomp$inline_5226_json$jscomp$inline_6965_possibleConfig$jscomp$inline_5227_value$jscomp$inline_7244$$;break a}}}}$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=null}$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$||
($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=this.$J$,$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$=$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$.$doc_$.$getBody$()?
$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$tryExtractConfig_$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$):null);$JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$?
(this.$D$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$),this.$D$=null):this.$doc_$.$Doc$$module$third_party$subscriptions_project$config_prototype$isReady$()&&(this.$D$(Promise.reject(Error("No config could be discovered in the page"))),this.$D$=null);$debugLog$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$);
return $JSCompiler_StaticMethods_MicrodataParser$$module$third_party$subscriptions_project$config_prototype$check$self$jscomp$inline_5229_config$jscomp$14_domReady$jscomp$inline_5223_productId$jscomp$inline_5219$$};$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.$D$=function($eventType$jscomp$25$$,$serviceId$jscomp$1$$,$opt_vars$jscomp$3$$){this.event($eventType$jscomp$25$$,Object.assign(_.$dict$$module$src$utils$object$$({serviceId:$serviceId$jscomp$1$$}),$opt_vars$jscomp$3$$))};
$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.event=function($eventType$jscomp$26$$,$opt_vars$jscomp$4$$){_.$user$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-subscriptions",$eventType$jscomp$26$$,$opt_vars$jscomp$4$$||"");_.$triggerAnalyticsEvent$$module$src$analytics$$(this.$element_$,$eventType$jscomp$26$$,$opt_vars$jscomp$4$$||_.$dict$$module$src$utils$object$$({}))};
$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.$F$=function($serviceId$jscomp$2$$,$action$jscomp$17$$,$status$jscomp$3$$){this.$D$("subscriptions-action-"+$action$jscomp$17$$+"-"+$status$jscomp$3$$,$serviceId$jscomp$2$$,void 0)};var $DEFAULT_SCORE_CONFIG$$module$extensions$amp_subscriptions$0_1$score_factors$$={};$Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$.prototype.open=function($content$jscomp$25$$,$showCloseAction$$){var $$jscomp$this$jscomp$1304$$=this;$showCloseAction$$=void 0===$showCloseAction$$?!0:$showCloseAction$$;return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$$(this,function(){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$open_$$($$jscomp$this$jscomp$1304$$,$content$jscomp$25$$,
$showCloseAction$$)})};$Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$.prototype.close=function(){var $$jscomp$this$jscomp$1305$$=this;return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$action_$$(this,function(){return $JSCompiler_StaticMethods_Dialog$$module$extensions$amp_subscriptions$0_1$dialog_prototype$close_$$($$jscomp$this$jscomp$1305$$)})};$Actions$$module$extensions$amp_subscriptions$0_1$actions$$.prototype.$build$=function(){var $$jscomp$this$jscomp$1308$$=this;if(0==Object.keys(this.$G$).length)return null;var $promises$jscomp$28$$=[],$$jscomp$loop$475$$={},$k$jscomp$78$$;for($k$jscomp$78$$ in this.$G$)$$jscomp$loop$475$$.$$jscomp$loop$prop$k$476$=$k$jscomp$78$$,$promises$jscomp$28$$.push(this.$J$.$buildUrl$(this.$G$[$$jscomp$loop$475$$.$$jscomp$loop$prop$k$476$],!0).then(function($promises$jscomp$28$$){return function($$jscomp$loop$475$$){$$jscomp$this$jscomp$1308$$.$H$[$promises$jscomp$28$$.$$jscomp$loop$prop$k$476$]=
$$jscomp$loop$475$$}}($$jscomp$loop$475$$))),$$jscomp$loop$475$$={$$jscomp$loop$prop$k$476$:$$jscomp$loop$475$$.$$jscomp$loop$prop$k$476$};return Promise.all($promises$jscomp$28$$).then(function(){return $$jscomp$this$jscomp$1308$$.$H$})};$Actions$$module$extensions$amp_subscriptions$0_1$actions$$.prototype.execute=function($action$jscomp$35$$){return $JSCompiler_StaticMethods_Actions$$module$extensions$amp_subscriptions$0_1$actions_prototype$execute_$$(this,this.$H$[$action$jscomp$35$$],$action$jscomp$35$$)};$LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$.prototype.render=function($renderState$$){return Promise.all([$JSCompiler_StaticMethods_renderActions_$$(this,$renderState$$),$JSCompiler_StaticMethods_renderDialog_$$(this,$renderState$$)])};
$LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$.prototype.reset=function(){this.$D$.close();return $JSCompiler_StaticMethods_renderActionsInNode_$$(this,{},this.$F$,function(){return!1})};$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$.prototype.$buildUrl$=function($url$jscomp$252$$,$useAuthData$jscomp$3$$){var $$jscomp$this$jscomp$1312$$=this;return $JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$$(this,$useAuthData$jscomp$3$$).then(function($useAuthData$jscomp$3$$){return _.$JSCompiler_StaticMethods_expandUrlAsync$$($$jscomp$this$jscomp$1312$$.$F$,$url$jscomp$252$$,$useAuthData$jscomp$3$$)})};
$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$.prototype.$collectUrlVars$=function($url$jscomp$253$$,$useAuthData$jscomp$4$$){var $$jscomp$this$jscomp$1313$$=this;return $JSCompiler_StaticMethods_UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder_prototype$prepareUrlVars_$$(this,$useAuthData$jscomp$4$$).then(function($useAuthData$jscomp$4$$){return _.$JSCompiler_StaticMethods_collectVars$$($$jscomp$this$jscomp$1313$$.$F$,$url$jscomp$253$$,$useAuthData$jscomp$4$$)})};_.$JSCompiler_prototypeAlias$$=$LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$.prototype;_.$JSCompiler_prototypeAlias$$.$getServiceId$=function(){return"local"};_.$JSCompiler_prototypeAlias$$.$activate$=function($entitlement$jscomp$3$$){var $$jscomp$this$jscomp$1316$$=this,$renderState$jscomp$4$$=$entitlement$jscomp$3$$.json();this.$G$.$D$=$renderState$jscomp$4$$;this.$H$.$build$().then(function(){$$jscomp$this$jscomp$1316$$.$J$.render($renderState$jscomp$4$$)})};
_.$JSCompiler_prototypeAlias$$.reset=function(){this.$J$.reset()};_.$JSCompiler_prototypeAlias$$.$executeAction$=function($action$jscomp$38$$){var $$jscomp$this$jscomp$1317$$=this;return this.$H$.execute($action$jscomp$38$$).then(function($action$jscomp$38$$){$action$jscomp$38$$&&$$jscomp$this$jscomp$1317$$.$D$.$F$();return!!$action$jscomp$38$$})};_.$JSCompiler_prototypeAlias$$.$isPrerenderSafe$=function(){return!1};
_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$getEntitlements$=function(){var $$jscomp$this$jscomp$1318$$=this;return this.$G$.$buildUrl$(this.$M$,!1).then(function($fetchUrl$jscomp$2$$){var $encryptedDocumentKey$$=$JSCompiler_StaticMethods_CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler_prototype$getEncryptedDocumentKey$$($$jscomp$this$jscomp$1318$$.$D$.$D$.$R$);$encryptedDocumentKey$$&&
($fetchUrl$jscomp$2$$=_.$addParamToUrl$$module$src$url$$($fetchUrl$jscomp$2$$,"crypt",$encryptedDocumentKey$$));return _.$JSCompiler_StaticMethods_fetchJson$$($$jscomp$this$jscomp$1318$$.$K$,$fetchUrl$jscomp$2$$,{credentials:"include"}).then(function($$jscomp$this$jscomp$1318$$){return $$jscomp$this$jscomp$1318$$.json()}).then(function($$jscomp$this$jscomp$1318$$){return $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$($$jscomp$this$jscomp$1318$$)})})};
_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$isPingbackEnabled$=function(){return!!this.$I$};
_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$pingback$=function($selectedEntitlement$$){var $$jscomp$this$jscomp$1319$$=this;this.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$isPingbackEnabled$&&this.$G$.$buildUrl$(this.$I$,!0).then(function($url$jscomp$254$$){return _.$JSCompiler_StaticMethods_sendSignal$$($$jscomp$this$jscomp$1319$$.$K$,
$url$jscomp$254$$,{method:"POST",credentials:"include",headers:_.$dict$$module$src$utils$object$$({"Content-Type":"text/plain"}),body:JSON.stringify(Object.assign({},{raw:$selectedEntitlement$$.raw},$selectedEntitlement$$.json()))})})};_.$JSCompiler_prototypeAlias$$.$getSupportedScoreFactor$=function(){return 0};_.$JSCompiler_prototypeAlias$$.$getBaseScore$=function(){return this.$F$.baseScore||0};_.$JSCompiler_prototypeAlias$$.$decorateUI$=function(){};$PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$.prototype.reset=function(){this.$H$=null};$Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$.prototype.$toggleLoading$=function($loading$$){$JSCompiler_StaticMethods_toggleState_$$(this,$loading$$)};$ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$.prototype.$G$=function($action$jscomp$39$$){return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$delegateActionToService$$(this.$D$,$action$jscomp$39$$,"local")};$ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$.prototype.$F$=function(){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$resetPlatforms$$(this.$D$)};_.$JSCompiler_prototypeAlias$$=$ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$.prototype;_.$JSCompiler_prototypeAlias$$.$isPrerenderSafe$=function(){return!0};
_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$getEntitlements$=function(){var $$jscomp$this$jscomp$1330$$=this;return _.$JSCompiler_StaticMethods_sendMessageAwaitResponse$$(this.$G$,"auth",_.$dict$$module$src$utils$object$$({publicationId:this.$I$,productId:this.$K$,origin:this.$H$})).then(function($authData_entitlementData$$){return($authData_entitlementData$$=($authData_entitlementData$$||{}).authorization)?
$JSCompiler_StaticMethods_verifyAuthToken_$$($$jscomp$this$jscomp$1330$$,$authData_entitlementData$$):$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local")}).catch(function($reason$jscomp$59$$){_.$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$sendMessage$$($$jscomp$this$jscomp$1330$$.$G$,"auth-rejected",_.$dict$$module$src$utils$object$$({reason:$reason$jscomp$59$$.message}));throw $reason$jscomp$59$$;})};
_.$JSCompiler_prototypeAlias$$.$getServiceId$=function(){return this.$D$.$getServiceId$()};_.$JSCompiler_prototypeAlias$$.$activate$=function(){};_.$JSCompiler_prototypeAlias$$.reset=function(){};_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$isPingbackEnabled$=function(){return this.$D$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$isPingbackEnabled$()};
_.$JSCompiler_prototypeAlias$$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$pingback$=function($selectedPlatform$$){this.$D$.$GoogleSubscriptionsPlatform$$module$extensions$amp_subscriptions_google$0_1$amp_subscriptions_google_prototype$pingback$($selectedPlatform$$)};_.$JSCompiler_prototypeAlias$$.$getSupportedScoreFactor$=function($factorName$jscomp$2$$){return this.$D$.$getSupportedScoreFactor$($factorName$jscomp$2$$)};
_.$JSCompiler_prototypeAlias$$.$getBaseScore$=function(){return 0};_.$JSCompiler_prototypeAlias$$.$executeAction$=function($action$jscomp$42$$){return this.$D$.$executeAction$($action$jscomp$42$$)};_.$JSCompiler_prototypeAlias$$.$decorateUI$=function($element$jscomp$722$$,$action$jscomp$43$$,$options$jscomp$70$$){return this.$D$.$decorateUI$($element$jscomp$722$$,$action$jscomp$43$$,$options$jscomp$70$$)};_.$JSCompiler_prototypeAlias$$.$subscriptionChange_$=function(){this.$J$.$F$()};$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$.prototype.$Y$=function($subscriptionPlatformFactory$$){var $$jscomp$this$jscomp$1337$$=this;$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$$(this).then(function(){if(!$$jscomp$this$jscomp$1337$$.$S$){var $matchedServiceConfig_subscriptionPlatform$jscomp$1$$=$$jscomp$this$jscomp$1337$$.$G$.services.filter(function($subscriptionPlatformFactory$$){return"subscribe.google.com"===
($subscriptionPlatformFactory$$.$serviceId$||"local")})[0];$matchedServiceConfig_subscriptionPlatform$jscomp$1$$=$subscriptionPlatformFactory$$($matchedServiceConfig_subscriptionPlatform$jscomp$1$$,$$jscomp$this$jscomp$1337$$.$K$);$JSCompiler_StaticMethods_resolvePlatform$$($$jscomp$this$jscomp$1337$$.$D$,$matchedServiceConfig_subscriptionPlatform$jscomp$1$$.$getServiceId$(),$matchedServiceConfig_subscriptionPlatform$jscomp$1$$);$$jscomp$this$jscomp$1337$$.$F$.$D$("subscriptions-service-registered",
$matchedServiceConfig_subscriptionPlatform$jscomp$1$$.$getServiceId$());$$jscomp$this$jscomp$1337$$.$F$.$D$("subscriptions-platform-registered",$matchedServiceConfig_subscriptionPlatform$jscomp$1$$.$getServiceId$());$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$$($$jscomp$this$jscomp$1337$$,$matchedServiceConfig_subscriptionPlatform$jscomp$1$$)}})};
$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$.prototype.start=function(){var $$jscomp$this$jscomp$1339$$=this;$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$$(this).then(function(){$$jscomp$this$jscomp$1339$$.$F$.event("subscriptions-started");$$jscomp$this$jscomp$1339$$.$H$.$toggleLoading$(!0);if($$jscomp$this$jscomp$1339$$.$S$)$JSCompiler_StaticMethods_delegateAuthToViewer_$$($$jscomp$this$jscomp$1339$$),
$JSCompiler_StaticMethods_startAuthorizationFlow_$$($$jscomp$this$jscomp$1339$$,!1);else if($$jscomp$this$jscomp$1339$$.$G$.alwaysGrant)$JSCompiler_StaticMethods_processGrantState_$$($$jscomp$this$jscomp$1339$$,!0);else{var $serviceIds$$=$$jscomp$this$jscomp$1339$$.$G$.services.map(function($$jscomp$this$jscomp$1339$$){return $$jscomp$this$jscomp$1339$$.serviceId||"local"});$JSCompiler_StaticMethods_initializePlatformStore_$$($$jscomp$this$jscomp$1339$$,$serviceIds$$);$$jscomp$this$jscomp$1339$$.$G$.services.forEach(function($serviceIds$$){"local"==
($serviceIds$$.serviceId||"local")&&$JSCompiler_StaticMethods_resolvePlatform$$($$jscomp$this$jscomp$1339$$.$D$,"local",new $LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$($$jscomp$this$jscomp$1339$$.$ampdoc_$,$serviceIds$$,$$jscomp$this$jscomp$1339$$.$K$))});$JSCompiler_StaticMethods_getAvailablePlatforms$$($$jscomp$this$jscomp$1339$$.$D$).forEach(function($serviceIds$$){$JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$fetchEntitlements_$$($$jscomp$this$jscomp$1339$$,
$serviceIds$$)});$isStoryDocument$$module$src$utils$story$$($$jscomp$this$jscomp$1339$$.$ampdoc_$).then(function($serviceIds$$){$JSCompiler_StaticMethods_startAuthorizationFlow_$$($$jscomp$this$jscomp$1339$$,!$serviceIds$$)})}});return this};$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$.prototype.$AccessService$$module$extensions$amp_access$0_1$amp_access_prototype$getAccessReaderId$=function(){var $$jscomp$this$jscomp$1347$$=this;return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$$(this).then(function(){return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$getReaderId$$($$jscomp$this$jscomp$1347$$)})};
$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$.prototype.$AccessService$$module$extensions$amp_access$0_1$amp_access_prototype$getAuthdataField$=function($field$jscomp$21$$){var $$jscomp$this$jscomp$1348$$=this;return $JSCompiler_StaticMethods_SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions_prototype$initialize_$$(this).then(function(){return $$jscomp$this$jscomp$1348$$.$D$.$O$.local.$promise$}).then(function($$jscomp$this$jscomp$1348$$){return _.$getValueForExpr$$module$src$json$$($$jscomp$this$jscomp$1348$$.json(),
$field$jscomp$21$$)})};(function($AMP$jscomp$115$$){$AMP$jscomp$115$$.registerServiceForDoc("subscriptions",function($AMP$jscomp$115$$){return(new $SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$($AMP$jscomp$115$$)).start()})})(self.AMP);
})});

//# sourceMappingURL=amp-subscriptions-0.1.js.map
