{"version":3,"sources":["/extensions/amp-app-banner/0.1/amp-app-banner.js","/src/service/viewer-impl.js","/src/service/url-impl.js","/build/amp-app-banner-0.1.css.js"],"names":["constructor","element","openButton_","canShowBuiltinBanner_","setupOpenButton_","button","openInAppUrl","installAppUrl","addEventListener","openButtonClicked","checkIfDismissed_","isDismissed","then","hide_","paddingBar","addDismissButton_","win","document","createElement","appendChild","dismissButton","classList","add","setAttribute","getAttribute","boundOnDismissButtonClick","onDismissButtonClick_","bind","run","getVsync","updateViewportPadding_","measure","measureBanner","mutate","updateViewportPadding","viewport","getViewport","expand","runPromise","undefined","hideBanner","viewer_","metaTag_","parseIosMetaContent_","metaContent","config","replace","split","parts","forEach","part","keyValuePair","appId","openUrl","user","error","TAG","manifestLink_","manifestHref_","missingDataSources_","handleDismiss","state","storagePromise","storage","set","storageKey","removeFromFixedLayer","removeElement","updatePaddingBottom","bannerHeight","getLayoutRect","height","addToFixedLayer","$jscomp.inherits","BaseElement","AbstractAppBanner","AMP","Services$$module$src$services.storageForDoc","getAmpDoc","getStorageKey_","id","get","persistedValue","reason","dev","AmpAppBanner","upgradeCallback","platform","Services$$module$src$services.platformFor","isIos","AmpIosAppBanner","isAndroid","AmpAndroidAppBanner","layoutCallback","info","preconnectCallback","opt_onLayout","parentNode","preconnect","url","buildCallback","Services$$module$src$services.viewerForDoc","messagingReadyPromise_","isSafari","hasCapability","head","querySelector","Promise","resolve","Services$$module$src$services.timerFor","delay","sendMessage","dict","OPEN_LINK_TIMEOUT","openWindowDialog","preload","viewer","Services$$module$src$services.urlForDoc","isChromeAndroid","isChrome","isProxyOrigin","location","fetchJson","Services$$module$src$services.xhrFor","requireAmpResponseSourceOrigin","res","json","apps","i","length","app","parseManifest_","canonicalUrl","Services$$module$src$services.documentInfoForDoc","parsedUrl","parse","cleanProtocol","protocol","host","pathname","warn","catch","rethrowAsync","redirectTopLocation_","top","assign","registerElement","CSS"],"mappings":"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","file":"amp-app-banner-0.1.js","sourcesContent":[]}