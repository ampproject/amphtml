(self.AMP=self.AMP||[]).push({n:"amp-gwd-animation",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$=function($ampdoc$jscomp$205$$,$opt_win$jscomp$4$$){var $$jscomp$this$jscomp$680$$=this;this.$ampdoc_$=$ampdoc$jscomp$205$$;this.$D$=$opt_win$jscomp$4$$||$ampdoc$jscomp$205$$.$win$;this.$doc_$=this.$D$.document;this.$F$=this.$onAnimationEndEvent_$.bind(this);($opt_win$jscomp$4$$?_.$waitForBodyPromise$$module$src$dom$$(this.$doc_$):$ampdoc$jscomp$205$$.$whenBodyAvailable$()).then(function(){var $ampdoc$jscomp$205$$=
$$jscomp$this$jscomp$680$$.$doc_$.body;_.$waitForChild$$module$src$dom$$($ampdoc$jscomp$205$$,function(){return!!$ampdoc$jscomp$205$$.querySelector("."+_.$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-page-wrapper"))},$$jscomp$this$jscomp$680$$.$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl_prototype$initialize_$.bind($$jscomp$this$jscomp$680$$))})},$JSCompiler_StaticMethods_deactivatePage_$$=function($pageEl$jscomp$1$$){$pageEl$jscomp$1$$.classList.remove("gwd-play-animation");
[$pageEl$jscomp$1$$].concat(_.$toArray$$module$src$types$$($pageEl$jscomp$1$$.querySelectorAll("*"))).forEach(function($pageEl$jscomp$1$$){$pageEl$jscomp$1$$.classList.remove("gwd-pause-animation");if($pageEl$jscomp$1$$.hasAttribute("data-gwd-label-animation")){var $el$jscomp$75$$=$pageEl$jscomp$1$$.getAttribute("data-gwd-label-animation");$pageEl$jscomp$1$$.classList.remove($el$jscomp$75$$);$pageEl$jscomp$1$$.removeAttribute("data-gwd-label-animation")}delete $pageEl$jscomp$1$$.__AMP_GWD_GOTO_COUNTERS__})},
$JSCompiler_StaticMethods_getReceiver$$=function($JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$,$id$jscomp$82$$){if("document.body"==$id$jscomp$82$$)return $JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$.$doc_$.body;if(($JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$=$JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$.$doc_$.getElementById($id$jscomp$82$$))&&$JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$.classList)return $JSCompiler_StaticMethods_getReceiver$self_receiver$jscomp$8$$;
_.$user$$module$src$log$$().error("GWD","Could not get receiver with id "+$id$jscomp$82$$+".");return null},$JSCompiler_StaticMethods_playLabelAnimation_$$=function($receiver$jscomp$9$$,$label$jscomp$12$$){$receiver$jscomp$9$$.classList.remove("gwd-pause-animation");var $currentLabel$$=$receiver$jscomp$9$$.getAttribute("data-gwd-label-animation");$currentLabel$$&&($receiver$jscomp$9$$.classList.remove($currentLabel$$),$receiver$jscomp$9$$.removeAttribute("data-gwd-label-animation"));$currentLabel$$==
$label$jscomp$12$$&&(self.__AMP_GWD_TEMP=$receiver$jscomp$9$$.offsetWidth,delete self.__AMP_GWD_TEMP);$receiver$jscomp$9$$.classList.add($label$jscomp$12$$);$receiver$jscomp$9$$.setAttribute("data-gwd-label-animation",$label$jscomp$12$$)},$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$=function($$jscomp$super$this$jscomp$58_element$jscomp$490$$){$$jscomp$super$this$jscomp$58_element$jscomp$490$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$58_element$jscomp$490$$)||
this;$$jscomp$super$this$jscomp$58_element$jscomp$490$$.$G$="";$$jscomp$super$this$jscomp$58_element$jscomp$490$$.$D$=null;$$jscomp$super$this$jscomp$58_element$jscomp$490$$.$F$=$$jscomp$super$this$jscomp$58_element$jscomp$490$$.$I$.bind($$jscomp$super$this$jscomp$58_element$jscomp$490$$);return $$jscomp$super$this$jscomp$58_element$jscomp$490$$},$JSCompiler_StaticMethods_getRoot_$$=function($JSCompiler_StaticMethods_getRoot_$self$$){return $JSCompiler_StaticMethods_getRoot_$self$$.$D$?$JSCompiler_StaticMethods_getRoot_$self$$.$D$.$win$.document:
$JSCompiler_StaticMethods_getRoot_$self$$.$getAmpDoc$().getRootNode()},$JSCompiler_StaticMethods_executeInvocation_$$=function($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$,$invocation$jscomp$37$$){$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$=_.$getExistingServiceForDocInEmbedScope$$module$src$service$$($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$.element,"gwd");var $actionArgs$$=$ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$[$invocation$jscomp$37$$.method].map(function($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$){$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$=
$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$.split(".");for(var $actionArgs$$=$invocation$jscomp$37$$,$argPath_parts$jscomp$inline_3596$$=0;$argPath_parts$jscomp$inline_3596$$<$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$.length;$argPath_parts$jscomp$inline_3596$$++){var $part$jscomp$inline_3599$$=$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$[$argPath_parts$jscomp$inline_3596$$];if($part$jscomp$inline_3599$$&&$actionArgs$$&&
void 0!==$actionArgs$$[$part$jscomp$inline_3599$$])$actionArgs$$=$actionArgs$$[$part$jscomp$inline_3599$$];else{$actionArgs$$=void 0;break}}return $actionArgs$$});$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$[$invocation$jscomp$37$$.method].apply($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$28$$,$actionArgs$$)};var $VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$=["animationend","webkitAnimationEnd"];$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.$installInEmbedWindow$=function($embedWin$jscomp$14$$,$ampdoc$jscomp$206$$){_.$installServiceInEmbedScope$$module$src$service$$($embedWin$jscomp$14$$,"gwd",new $AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$($ampdoc$jscomp$206$$,$embedWin$jscomp$14$$))};
_.$JSCompiler_prototypeAlias$$=$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.prototype;
_.$JSCompiler_prototypeAlias$$.$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl_prototype$initialize_$=function(){for(var $gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$=0;$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$<$VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.length;$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$++)this.$doc_$.body.addEventListener($VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$[$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$],this.$F$,
!0);$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$=this.$doc_$.body.querySelectorAll("."+_.$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-page-wrapper"));if(0==$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$.length)_.$user$$module$src$log$$().$Log$$module$src$log_prototype$warn$("GWD","Could not set current page. No pages were found in the document.");else{var $activePageSelector$jscomp$inline_3563_currentPageEl$jscomp$inline_3564$$=
"."+_.$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-page-wrapper")+"."+_.$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-play-animation");($activePageSelector$jscomp$inline_3563_currentPageEl$jscomp$inline_3564$$=_.$scopedQuerySelector$$module$src$dom$$(this.$doc_$.body,$activePageSelector$jscomp$inline_3563_currentPageEl$jscomp$inline_3564$$))&&$JSCompiler_StaticMethods_deactivatePage_$$($activePageSelector$jscomp$inline_3563_currentPageEl$jscomp$inline_3564$$);($gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$=
$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$[0])?$gwdPages$jscomp$inline_3562_i$jscomp$inline_3558_newPageEl$jscomp$inline_3565$$.classList.add("gwd-play-animation"):_.$user$$module$src$log$$().error("GWD","Could not find page with index 0.")}};_.$JSCompiler_prototypeAlias$$.play=function($id$jscomp$76_receiver$jscomp$2$$){($id$jscomp$76_receiver$jscomp$2$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$76_receiver$jscomp$2$$))&&$id$jscomp$76_receiver$jscomp$2$$.classList.remove("gwd-pause-animation")};
_.$JSCompiler_prototypeAlias$$.pause=function($id$jscomp$77_receiver$jscomp$3$$){($id$jscomp$77_receiver$jscomp$3$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$77_receiver$jscomp$3$$))&&$id$jscomp$77_receiver$jscomp$3$$.classList.add("gwd-pause-animation")};_.$JSCompiler_prototypeAlias$$.$togglePlay$=function($id$jscomp$78_receiver$jscomp$4$$){($id$jscomp$78_receiver$jscomp$4$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$78_receiver$jscomp$4$$))&&$id$jscomp$78_receiver$jscomp$4$$.classList.toggle("gwd-pause-animation")};
_.$JSCompiler_prototypeAlias$$.$gotoAndPlay$=function($id$jscomp$79_receiver$jscomp$5$$,$label$jscomp$9$$){($id$jscomp$79_receiver$jscomp$5$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$79_receiver$jscomp$5$$))&&$JSCompiler_StaticMethods_playLabelAnimation_$$($id$jscomp$79_receiver$jscomp$5$$,$label$jscomp$9$$)};
_.$JSCompiler_prototypeAlias$$.$gotoAndPause$=function($id$jscomp$80$$,$label$jscomp$10$$){var $$jscomp$this$jscomp$682$$=this,$receiver$jscomp$6$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$80$$);$receiver$jscomp$6$$&&($JSCompiler_StaticMethods_playLabelAnimation_$$($receiver$jscomp$6$$,$label$jscomp$10$$),this.$D$.setTimeout(function(){$$jscomp$this$jscomp$682$$.pause($id$jscomp$80$$)},40))};
_.$JSCompiler_prototypeAlias$$.$gotoAndPlayNTimes$=function($id$jscomp$81_receiver$jscomp$7$$,$label$jscomp$11$$,$maxCount$$,$counterName$jscomp$2_eventName$jscomp$2$$){if(0>=$maxCount$$)_.$user$$module$src$log$$().error("GWD","Invalid maxCount parameter: "+$maxCount$$);else if($counterName$jscomp$2_eventName$jscomp$2$$){if($id$jscomp$81_receiver$jscomp$7$$=$JSCompiler_StaticMethods_getReceiver$$(this,$id$jscomp$81_receiver$jscomp$7$$)){$counterName$jscomp$2_eventName$jscomp$2$$=$counterName$jscomp$2_eventName$jscomp$2$$+
"_"+$label$jscomp$11$$;var $currentCount$$=$id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__&&_.$hasOwn$$module$src$utils$object$$($id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__,$counterName$jscomp$2_eventName$jscomp$2$$)?$id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$2$$]:0;$currentCount$$<$maxCount$$&&($JSCompiler_StaticMethods_playLabelAnimation_$$($id$jscomp$81_receiver$jscomp$7$$,$label$jscomp$11$$),$id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__||
($id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__={}),_.$hasOwn$$module$src$utils$object$$($id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__,$counterName$jscomp$2_eventName$jscomp$2$$)||($id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$2$$]=0),$id$jscomp$81_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$2$$]=$currentCount$$+1)}}else _.$user$$module$src$log$$().error("GWD","Event name required but not specified.")};
_.$JSCompiler_prototypeAlias$$.$onAnimationEndEvent_$=function($event$jscomp$140_timelineEvent$$){var $userEventName$$=$event$jscomp$140_timelineEvent$$.target.getAttribute("data-event-name");$userEventName$$&&($event$jscomp$140_timelineEvent$$=_.$createCustomEvent$$module$src$event_helper$$(this.$D$,"gwd.timelineEvent",_.$dict$$module$src$utils$object$$({eventName:$userEventName$$,sourceEvent:$event$jscomp$140_timelineEvent$$})),this.$doc_$.dispatchEvent($event$jscomp$140_timelineEvent$$))};
_.$JSCompiler_prototypeAlias$$.$dispose$=function(){for(var $i$jscomp$inline_3578$$=0;$i$jscomp$inline_3578$$<$VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.length;$i$jscomp$inline_3578$$++)this.$doc_$.body.removeEventListener($VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$[$i$jscomp$inline_3578$$],this.$F$,!0)};var $ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.detail.eventName"],setCurrentPage:["args.index"]};_.$$jscomp$inherits$$($GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$,AMP.BaseElement);
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.$buildCallback$=function(){this.$G$=this.element.getAttribute("timeline-event-prefix")||"";var $frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$=_.$getParentWindowFrameElement$$module$src$service$$(this.element,this.$getAmpDoc$().$win$);$frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$&&(this.$D$=_.$getFriendlyIframeEmbedOptional$$module$src$friendly_iframe_embed$$($frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$));
$JSCompiler_StaticMethods_getRoot_$$(this).addEventListener("gwd.timelineEvent",this.$F$,!0);if($frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$=$JSCompiler_StaticMethods_getRoot_$$(this).getElementById("pagedeck")){var $context$jscomp$inline_3580$$=this.element,$actionStr$jscomp$inline_3582$$=this.element.id+".setCurrentPage(index=event.index)";var $currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$=$frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$.getAttribute("on")||
"";var $actionsStartIndex$jscomp$inline_3588_eventActionsIndex$jscomp$inline_3587$$=$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$.indexOf("slideChange:");-1!=$actionsStartIndex$jscomp$inline_3588_eventActionsIndex$jscomp$inline_3587$$?($actionsStartIndex$jscomp$inline_3588_eventActionsIndex$jscomp$inline_3587$$+=12,$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$=$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$.substr(0,$actionsStartIndex$jscomp$inline_3588_eventActionsIndex$jscomp$inline_3587$$)+
$actionStr$jscomp$inline_3582$$+","+$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$.substr($actionsStartIndex$jscomp$inline_3588_eventActionsIndex$jscomp$inline_3587$$)):($currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$&&($currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$+=";"),$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$+="slideChange:"+$actionStr$jscomp$inline_3582$$);_.$Services$$module$src$services$actionServiceForDoc$$($context$jscomp$inline_3580$$);
$frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$.setAttribute("on",$currentActionsStr$jscomp$inline_3585_newActionsStr$jscomp$inline_3584$$);delete $frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$[_.$ACTION_MAP_$$module$src$service$action_impl$$]}$frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$=this.$H$.bind(this);for(var $name$jscomp$253$$ in $ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$)_.$JSCompiler_StaticMethods_registerAction$$(this,$name$jscomp$253$$,
$frameElement$jscomp$7_gwdPageDeck_handler$jscomp$48$$)};
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.$H$=function($invocation$jscomp$35$$){var $JSCompiler_inline_result$jscomp$848_gwdPageDeck$jscomp$inline_3592$$="setCurrentPage"==$invocation$jscomp$35$$.method?($JSCompiler_inline_result$jscomp$848_gwdPageDeck$jscomp$inline_3592$$=$JSCompiler_StaticMethods_getRoot_$$(this).getElementById("pagedeck"))&&$invocation$jscomp$35$$.source==$JSCompiler_inline_result$jscomp$848_gwdPageDeck$jscomp$inline_3592$$:!0;$JSCompiler_inline_result$jscomp$848_gwdPageDeck$jscomp$inline_3592$$&&
$JSCompiler_StaticMethods_executeInvocation_$$(this,$invocation$jscomp$35$$)};$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.$I$=function($event$jscomp$141$$){_.$Services$$module$src$services$actionServiceForDoc$$(this.element).$trigger$(this.element,this.$G$+$event$jscomp$141$$.detail.eventName,$event$jscomp$141$$,100)};
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.detachedCallback=function(){$JSCompiler_StaticMethods_getRoot_$$(this).removeEventListener("gwd.timelineEvent",this.$F$,!0);return!0};var $AMP$jscomp$inline_3601$$=self.AMP;$AMP$jscomp$inline_3601$$.registerServiceForDoc("gwd",$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$);
$AMP$jscomp$inline_3601$$.registerElement("amp-gwd-animation",$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{-webkit-animation:none!important;animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/");
})});

//# sourceMappingURL=amp-gwd-animation-0.1.js.map
