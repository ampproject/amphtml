(self.AMP=self.AMP||[]).push({n:"amp-consent",i:["_base_i","_base_misc"],v:"1904281823091",f:(function(AMP,_){
var $JSCompiler_StaticMethods_onQueueEmpty$$=function($JSCompiler_StaticMethods_onQueueEmpty$self$$,$handler$jscomp$37$$){$JSCompiler_StaticMethods_onQueueEmpty$self$$.$F$=$handler$jscomp$37$$;0==$JSCompiler_StaticMethods_onQueueEmpty$self$$.$D$&&$handler$jscomp$37$$()},$JSCompiler_StaticMethods_onQueueNotEmpty$$=function($JSCompiler_StaticMethods_onQueueNotEmpty$self$$,$handler$jscomp$38$$){$JSCompiler_StaticMethods_onQueueNotEmpty$self$$.$G$=$handler$jscomp$38$$;0<$JSCompiler_StaticMethods_onQueueNotEmpty$self$$.$D$&&
$handler$jscomp$38$$()},$isAmpElement$$module$src$dom$$=function($element$jscomp$23_tag$jscomp$7$$){$element$jscomp$23_tag$jscomp$7$$=$element$jscomp$23_tag$jscomp$7$$.tagName;return _.$startsWith$$module$src$string$$($element$jscomp$23_tag$jscomp$7$$,"AMP-")&&!("AMP-STICKY-AD-TOP-PADDING"==$element$jscomp$23_tag$jscomp$7$$||"AMP-BODY"==$element$jscomp$23_tag$jscomp$7$$)},$calculateLegacyStateValue$$module$extensions$amp_consent$0_1$consent_info$$=function($consentState$jscomp$11$$){return 1==$consentState$jscomp$11$$?
!0:2==$consentState$jscomp$11$$?!1:null},$isConsentInfoStoredValueSame$$module$extensions$amp_consent$0_1$consent_info$$=function($infoA$$,$infoB$$){if(!$infoA$$&&!$infoB$$)return!0;if($infoA$$&&$infoB$$){var $stringEqual$$=($infoA$$.consentString||"")===($infoB$$.consentString||""),$isDirtyEqual$$=!!$infoA$$.isDirty===!!$infoB$$.isDirty;return $calculateLegacyStateValue$$module$extensions$amp_consent$0_1$consent_info$$($infoA$$.consentState)===$calculateLegacyStateValue$$module$extensions$amp_consent$0_1$consent_info$$($infoB$$.consentState)&&
$stringEqual$$&&$isDirtyEqual$$}return!1},$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$=function($consentState$jscomp$12$$,$opt_consentString$$,$opt_isDirty$$){return{consentState:$consentState$jscomp$12$$,consentString:$opt_consentString$$,isDirty:$opt_isDirty$$}},$convertValueToState$$module$extensions$amp_consent$0_1$consent_info$$=function($value$jscomp$218$$){return!0===$value$jscomp$218$$||1===$value$jscomp$218$$?1:!1===$value$jscomp$218$$||0===$value$jscomp$218$$?
2:5},$JSCompiler_StaticMethods_updateConsentInstanceState$$=function($JSCompiler_StaticMethods_updateConsentInstanceState$self$$,$state$jscomp$56$$,$consentStr$$){$JSCompiler_StaticMethods_updateConsentInstanceState$self$$.$instance_$?($JSCompiler_StaticMethods_updateConsentInstanceState$self$$.$instance_$.update($state$jscomp$56$$,$consentStr$$),$JSCompiler_StaticMethods_updateConsentInstanceState$self$$.$D$&&$JSCompiler_StaticMethods_updateConsentInstanceState$self$$.$D$($constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$($state$jscomp$56$$,
$consentStr$$))):_.$dev$$module$src$log$$().error("CONSENT-STATE-MANAGER","instance not registered")},$JSCompiler_StaticMethods_onConsentStateChange$$=function($JSCompiler_StaticMethods_onConsentStateChange$self$$,$handler$jscomp$46$$){$JSCompiler_StaticMethods_onConsentStateChange$self$$.$D$=$handler$jscomp$46$$;$JSCompiler_StaticMethods_onConsentStateChange$self$$.$instance_$.get().then(function($JSCompiler_StaticMethods_onConsentStateChange$self$$){$handler$jscomp$46$$($JSCompiler_StaticMethods_onConsentStateChange$self$$)})},
$JSCompiler_StaticMethods_whenConsentReady$$=function($JSCompiler_StaticMethods_whenConsentReady$self$$){if($JSCompiler_StaticMethods_whenConsentReady$self$$.$instance_$)return Promise.resolve();if(!$JSCompiler_StaticMethods_whenConsentReady$self$$.$F$){var $deferred$jscomp$39$$=new _.$Deferred$$module$src$utils$promise$$;$JSCompiler_StaticMethods_whenConsentReady$self$$.$F$=$deferred$jscomp$39$$.$promise$;$JSCompiler_StaticMethods_whenConsentReady$self$$.$consentReadyResolver_$=$deferred$jscomp$39$$.resolve}return $JSCompiler_StaticMethods_whenConsentReady$self$$.$F$},
$ConsentInstance$$module$extensions$amp_consent$0_1$consent_state_manager$$=function($ampdoc$jscomp$168$$,$id$jscomp$70$$,$config$jscomp$56$$){this.$ampdoc_$=$ampdoc$jscomp$168$$;this.$K$=_.$isExperimentOn$$module$src$experiments$$($ampdoc$jscomp$168$$.$win$,"amp-consent-v2");this.$J$=$id$jscomp$70$$;this.$I$=null;this.$G$=_.$Services$$module$src$services$storageForDoc$$($ampdoc$jscomp$168$$);this.$D$=null;this.$F$="amp-consent:"+$id$jscomp$70$$;this.$H$=$config$jscomp$56$$.onUpdateHref||null},$JSCompiler_StaticMethods_updateStoredValue_$$=
function($JSCompiler_StaticMethods_updateStoredValue_$self$$,$consentInfo$jscomp$1$$){$JSCompiler_StaticMethods_updateStoredValue_$self$$.$G$.then(function($storage$jscomp$6$$){if($isConsentInfoStoredValueSame$$module$extensions$amp_consent$0_1$consent_info$$($consentInfo$jscomp$1$$,$JSCompiler_StaticMethods_updateStoredValue_$self$$.$D$)){var $JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$=$consentInfo$jscomp$1$$.consentString;if($JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$&&
150<$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$.length)_.$user$$module$src$log$$().error("CONSENT-STATE-MANAGER","Cannot store consentString which length exceeds 150 Previous stored consentInfo will be cleared"),$storage$jscomp$6$$.remove($JSCompiler_StaticMethods_updateStoredValue_$self$$.$F$);else{a:if($JSCompiler_StaticMethods_updateStoredValue_$self$$.$K$||$consentInfo$jscomp$1$$.consentString||void 0!==$consentInfo$jscomp$1$$.isDirty){$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$=
_.$map$$module$src$utils$object$$();var $consentState$jscomp$inline_3235$$=$consentInfo$jscomp$1$$.consentState;if(1==$consentState$jscomp$inline_3235$$)$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$.s=1;else if(2==$consentState$jscomp$inline_3235$$)$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$.s=0;else{$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$=
null;break a}$consentInfo$jscomp$1$$.consentString&&($JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$.r=$consentInfo$jscomp$1$$.consentString);!0===$consentInfo$jscomp$1$$.isDirty&&($JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$.d=1);$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$=0==Object.keys($JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$)?
null:$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$}else $JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$=$calculateLegacyStateValue$$module$extensions$amp_consent$0_1$consent_info$$($consentInfo$jscomp$1$$.consentState);null!=$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$&&(_.$JSCompiler_StaticMethods_setNonBoolean$$($storage$jscomp$6$$,$JSCompiler_StaticMethods_updateStoredValue_$self$$.$F$,
$JSCompiler_inline_result$jscomp$803_consentStr$jscomp$1_obj$jscomp$inline_3234_value$jscomp$219$$),$JSCompiler_StaticMethods_sendUpdateHrefRequest_$$($JSCompiler_StaticMethods_updateStoredValue_$self$$,$consentInfo$jscomp$1$$))}}})},$JSCompiler_StaticMethods_sendUpdateHrefRequest_$$=function($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$,$consentInfo$jscomp$3$$){if($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$H$){var $consentState$jscomp$13$$=$calculateLegacyStateValue$$module$extensions$amp_consent$0_1$consent_info$$($consentInfo$jscomp$3$$.consentState);
_.$Services$$module$src$services$cidForDoc$$($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$ampdoc_$).then(function($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$){return $JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.get({scope:"AMP-CONSENT",createCookieIfNotPresent:!0},Promise.resolve())}).then(function($request$jscomp$32_userId$$){$request$jscomp$32_userId$$={consentInstanceId:$JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$J$,ampUserId:$request$jscomp$32_userId$$};
null!=$consentState$jscomp$13$$&&($request$jscomp$32_userId$$.consentState=$consentState$jscomp$13$$);$consentInfo$jscomp$3$$.consentString&&($request$jscomp$32_userId$$.consentString=$consentInfo$jscomp$3$$.consentString);var $init$jscomp$17$$={credentials:"include",method:"POST",body:$request$jscomp$32_userId$$,ampCors:!1};_.$Services$$module$src$services$viewerForDoc$$($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$ampdoc_$).$D$.then(function(){_.$JSCompiler_StaticMethods_fetchJson$$(_.$Services$$module$src$services$xhrFor$$($JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$ampdoc_$.$win$),
$JSCompiler_StaticMethods_sendUpdateHrefRequest_$self$$.$H$,$init$jscomp$17$$)})})}},$ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$=function($baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$,$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$,$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$){this.$G$=$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$;
this.$S$=this.$Y$=this.$U$=this.$M$=this.$X$=!1;this.$D$=null;this.$ea$=_.$isExperimentOn$$module$src$experiments$$($baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$.$win$,"amp-consent-v2")&&$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$.uiConfig&&!0===$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$.uiConfig.overlay;this.$H$=!0;this.$K$=this.$J$=null;this.$ampdoc_$=$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$.$getAmpDoc$();
this.$P$=_.$Services$$module$src$services$viewportForDoc$$(this.$ampdoc_$);this.$F$=$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$.element;this.$I$=$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$.$win$;this.$Z$=this.$I$.document;this.$O$=this.$ba$=this.$W$=null;this.$R$="30vh";this.$V$=!0;this.$aa$=this.$fa$.bind(this);if($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$)($config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$=
this.$ampdoc_$.getElementById($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$))||_.$user$$module$src$log$$().error("amp-consent-ui","postPromptUI element with id=%s not found",$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$),this.$D$=$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$,this.$M$=!0;else{$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$=
$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$.promptUI;var $containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$=$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$.promptUISrc;if($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$)($config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$=this.$ampdoc_$.getElementById($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$))&&
this.$F$.contains($config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$)||_.$user$$module$src$log$$().error("amp-consent-ui","child element of <amp-consent> with promptUI id %s not found",$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$),this.$D$=$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$;else if($containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$&&
_.$isExperimentOn$$module$src$experiments$$(this.$I$,"amp-consent-v2")){this.$X$=!0;$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$=this.$F$.ownerDocument.createElement("iframe");$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$="allow-scripts";$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.src=$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$;
var $src$jscomp$inline_6532_srcUrl$jscomp$inline_6534$$=$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.src;$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$=_.$Services$$module$src$services$urlForDoc$$(this.$F$);$src$jscomp$inline_6532_srcUrl$jscomp$inline_6534$$=$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$.parse($src$jscomp$inline_6532_srcUrl$jscomp$inline_6534$$);
$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$=$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$.parse(this.$ampdoc_$.$AmpDoc$$module$src$service$ampdoc_impl_prototype$getUrl$());$src$jscomp$inline_6532_srcUrl$jscomp$inline_6534$$.origin!=$containerUrl$jscomp$inline_6535_promptUISrc$jscomp$inline_3244_urlService$jscomp$inline_6533$$.origin&&($baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$=
"allow-scripts allow-same-origin");$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.setAttribute("sandbox",$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$);$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.classList.add("i-amphtml-consent-ui-fill");this.$D$=$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$;
$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$=this.$F$.ownerDocument.createElement("placeholder");_.$toggle$$module$src$style$$($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$,!1);$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.classList.add("i-amphtml-consent-ui-placeholder");$baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$=
_.$htmlFor$$module$src$static_template$$($iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$)($_template$$module$extensions$amp_consent$0_1$consent_ui$$);$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$.appendChild($baseInstance$jscomp$5_loadingSpinner$jscomp$inline_6539_sandbox$jscomp$inline_6530$$);this.$O$=$iframe$jscomp$inline_6529_opt_postPromptUI_placeholder$jscomp$inline_6538_promptUI$jscomp$inline_3243$$;
this.$ba$=$config$jscomp$57_postPromptUI$jscomp$inline_3242_promptElement$jscomp$inline_3245$$.clientConfig||null}}},$JSCompiler_StaticMethods_handleReady_$$=function($JSCompiler_StaticMethods_handleReady_$self$$,$data$jscomp$150$$){$JSCompiler_StaticMethods_handleReady_$self$$.$R$="30vh";$JSCompiler_StaticMethods_handleReady_$self$$.$V$=!0;if($data$jscomp$150$$.initialHeight)if("string"===typeof $data$jscomp$150$$.initialHeight&&0<=$data$jscomp$150$$.initialHeight.indexOf("vh")){var $dataHeight$$=
parseInt($data$jscomp$150$$.initialHeight,10);10<=$dataHeight$$&&60>=$dataHeight$$?$JSCompiler_StaticMethods_handleReady_$self$$.$R$=$dataHeight$$+"vh":_.$user$$module$src$log$$().error("amp-consent-ui","Inavlid initial height: "+$data$jscomp$150$$.initialHeight+".Minimum: 10vh. Maximum: 60vh.")}else _.$user$$module$src$log$$().error("amp-consent-ui","Inavlid initial height: "+$data$jscomp$150$$.initialHeight+'.Must be a string in "vh" units.');!1===$data$jscomp$150$$.border&&($JSCompiler_StaticMethods_handleReady_$self$$.$V$=
!1);$JSCompiler_StaticMethods_handleReady_$self$$.$W$.resolve()},$JSCompiler_StaticMethods_getClientInfoPromise_$$=function($JSCompiler_StaticMethods_getClientInfoPromise_$self$$){return _.$getServicePromiseForDoc$$module$src$service$$($JSCompiler_StaticMethods_getClientInfoPromise_$self$$.$ampdoc_$,"consentStateManager").then(function($consentStateManager$$){return $consentStateManager$$.$instance_$.get().then(function($consentStateManager$$){var $consentInfo$jscomp$4$$=$consentStateManager$$.consentState;
return _.$dict$$module$src$utils$object$$({clientConfig:$JSCompiler_StaticMethods_getClientInfoPromise_$self$$.$ba$,consentState:1===$consentInfo$jscomp$4$$?"accepted":2===$consentInfo$jscomp$4$$?"rejected":"unknown",consentString:$consentStateManager$$.consentString})})})},$JSCompiler_StaticMethods_loadIframe_$$=function($JSCompiler_StaticMethods_loadIframe_$self$$){$JSCompiler_StaticMethods_loadIframe_$self$$.$W$=new _.$Deferred$$module$src$utils$promise$$;var $classList$jscomp$4_iframePromise$$=
$JSCompiler_StaticMethods_loadIframe_$self$$.$F$.classList;$JSCompiler_StaticMethods_loadIframe_$self$$.$F$.querySelector("placeholder")||_.$insertAfterOrAtStart$$module$src$dom$$($JSCompiler_StaticMethods_loadIframe_$self$$.$F$,$JSCompiler_StaticMethods_loadIframe_$self$$.$O$,null);$classList$jscomp$4_iframePromise$$.add("i-amphtml-consent-ui-loading");_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_loadIframe_$self$$.$D$,!1);$classList$jscomp$4_iframePromise$$=$JSCompiler_StaticMethods_getClientInfoPromise_$$($JSCompiler_StaticMethods_loadIframe_$self$$).then(function($classList$jscomp$4_iframePromise$$){$JSCompiler_StaticMethods_loadIframe_$self$$.$D$.setAttribute("name",
JSON.stringify($classList$jscomp$4_iframePromise$$));$JSCompiler_StaticMethods_loadIframe_$self$$.$I$.addEventListener("message",$JSCompiler_StaticMethods_loadIframe_$self$$.$aa$);_.$insertAfterOrAtStart$$module$src$dom$$($JSCompiler_StaticMethods_loadIframe_$self$$.$F$,$JSCompiler_StaticMethods_loadIframe_$self$$.$D$,null)});return Promise.all([$classList$jscomp$4_iframePromise$$,$JSCompiler_StaticMethods_loadIframe_$self$$.$W$.$promise$,$JSCompiler_StaticMethods_loadIframe_$self$$.$G$.$mutateElement$(function(){_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_loadIframe_$self$$.$O$,
!0)})])},$JSCompiler_StaticMethods_showIframe_$$=function($JSCompiler_StaticMethods_showIframe_$self$$){var $classList$jscomp$5$$=$JSCompiler_StaticMethods_showIframe_$self$$.$F$.classList;$classList$jscomp$5$$.add("i-amphtml-consent-ui-iframe-active");_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_showIframe_$self$$.$O$,!1);_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_showIframe_$self$$.$D$,!0);$JSCompiler_StaticMethods_resetAnimationStyles_$$($JSCompiler_StaticMethods_showIframe_$self$$);
$JSCompiler_StaticMethods_showIframe_$self$$.$G$.$mutateElement$(function(){$classList$jscomp$5$$.remove("i-amphtml-consent-ui-loading");$JSCompiler_StaticMethods_showIframe_$self$$.$G$.$mutateElement$(function(){$classList$jscomp$5$$.add("i-amphtml-consent-ui-in");$JSCompiler_StaticMethods_showIframe_$self$$.$Y$=!0;$JSCompiler_StaticMethods_showIframe_$self$$.$D$&&_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_showIframe_$self$$.$D$,{height:$JSCompiler_StaticMethods_showIframe_$self$$.$R$});
_.$setImportantStyles$$module$src$style$$($JSCompiler_StaticMethods_showIframe_$self$$.$F$,{transform:"translate3d(0px, calc(100% - "+$JSCompiler_StaticMethods_showIframe_$self$$.$R$+"), 0px)"});$JSCompiler_StaticMethods_showIframe_$self$$.$V$&&$JSCompiler_StaticMethods_showIframe_$self$$.$F$.classList.add("i-amphtml-consent-ui-enable-border")})})},$JSCompiler_StaticMethods_resetAnimationStyles_$$=function($JSCompiler_StaticMethods_resetAnimationStyles_$self$$){_.$setStyles$$module$src$style$$($JSCompiler_StaticMethods_resetAnimationStyles_$self$$.$F$,
{transform:"",transition:""})},$JSCompiler_StaticMethods_maybeShowOverlay_$$=function($JSCompiler_StaticMethods_maybeShowOverlay_$self$$){if($JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$ea$){if(!$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$J$){var $mask$jscomp$8$$=$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$I$.document.createElement("div");$mask$jscomp$8$$.classList.add("i-amphtml-consent-ui-mask");$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$F$.ownerDocument.body.appendChild($mask$jscomp$8$$);
$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$J$=$mask$jscomp$8$$}_.$toggle$$module$src$style$$($JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$J$,!0);$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$H$&&(_.$JSCompiler_StaticMethods_enterOverlayMode$$($JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$P$),$JSCompiler_StaticMethods_maybeShowOverlay_$self$$.$H$=!1)}},$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$=function($ampdoc$jscomp$169_consentValueInitiated$$){this.$ampdoc_$=
$ampdoc$jscomp$169_consentValueInitiated$$;this.$G$=_.$map$$module$src$utils$object$$();this.$F$=_.$map$$module$src$utils$object$$();this.$K$=_.$getServicePromiseForDoc$$module$src$service$$(this.$ampdoc_$,"consentStateManager");this.$O$=new _.$Deferred$$module$src$utils$promise$$;$ampdoc$jscomp$169_consentValueInitiated$$=new _.$Deferred$$module$src$utils$promise$$;this.$R$=$ampdoc$jscomp$169_consentValueInitiated$$.$promise$;this.$I$=$ampdoc$jscomp$169_consentValueInitiated$$.resolve;this.$P$=new _.$Observable$$module$src$observable$$;
this.$H$=this.$D$=this.$M$=null},$JSCompiler_StaticMethods_registerConsentPolicyInstance$$=function($JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$,$policyId$jscomp$6$$,$config$jscomp$59$$){if(!$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$F$[$policyId$jscomp$6$$]){var $waitFor$$=Object.keys($config$jscomp$59$$.waitFor||{});if(1!==$waitFor$$.length||$waitFor$$[0]!==$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$M$)_.$user$$module$src$log$$().error("consent-policy-manager",
"invalid waitFor value, consent policy will never resolve");else{var $instance$jscomp$10$$=new $ConsentPolicyInstance$$module$extensions$amp_consent$0_1$consent_policy_manager$$($config$jscomp$59$$);$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$F$[$policyId$jscomp$6$$]=$instance$jscomp$10$$;$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$G$[$policyId$jscomp$6$$]&&($JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$G$[$policyId$jscomp$6$$].resolve(),$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$G$[$policyId$jscomp$6$$]=
null);$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$R$.then(function(){$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$D$&&$instance$jscomp$10$$.evaluate($JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$D$);$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$P$.add(function($JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$){$instance$jscomp$10$$.evaluate($JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$)});$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$O$.$promise$.then(function(){$JSCompiler_StaticMethods_startTimeout$$($instance$jscomp$10$$,
$JSCompiler_StaticMethods_registerConsentPolicyInstance$self$$.$ampdoc_$.$win$)})})}}},$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$$=function($JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$){$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$K$.then(function($manager$jscomp$12$$){$JSCompiler_StaticMethods_whenConsentReady$$($manager$jscomp$12$$).then(function(){$JSCompiler_StaticMethods_onConsentStateChange$$($manager$jscomp$12$$,
function($manager$jscomp$12$$){var $info$jscomp$13$$=$manager$jscomp$12$$.consentState,$prevConsentStr$jscomp$inline_3267$$=$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$H$;$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$H$=$manager$jscomp$12$$.consentString;5!==$info$jscomp$13$$&&(4==$info$jscomp$13$$?1!=$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$&&
2!=$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$&&($JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$=4):3==$info$jscomp$13$$?(null===$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$&&($JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$=
5),$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$H$=$prevConsentStr$jscomp$inline_3267$$):$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$=$info$jscomp$13$$,$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$P$.$fire$($JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$D$));
$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$I$&&($JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$I$(),$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$self$$.$I$=null)})})})},$JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$$=function($JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$self$$,
$policyId$jscomp$11$$){if($JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$self$$.$F$[$policyId$jscomp$11$$])return Promise.resolve();$JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$self$$.$G$[$policyId$jscomp$11$$]||($JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$self$$.$G$[$policyId$jscomp$11$$]=new _.$Deferred$$module$src$utils$promise$$);return $JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$self$$.$G$[$policyId$jscomp$11$$].$promise$},$ConsentPolicyInstance$$module$extensions$amp_consent$0_1$consent_policy_manager$$=
function($config$jscomp$60$$){this.$H$=$config$jscomp$60$$;var $readyDeferred$jscomp$1$$=new _.$Deferred$$module$src$utils$promise$$;this.$G$=$readyDeferred$jscomp$1$$.$promise$;this.$D$=$readyDeferred$jscomp$1$$.resolve;this.$F$=4;this.$I$=$config$jscomp$60$$.unblockOn||[1,3]},$JSCompiler_StaticMethods_startTimeout$$=function($JSCompiler_StaticMethods_startTimeout$self$$,$win$jscomp$352$$){var $timeoutConfig$$=$JSCompiler_StaticMethods_startTimeout$self$$.$H$.timeout,$timeoutSecond$$=null,$fallbackState$$;
void 0!=$timeoutConfig$$&&(_.$isObject$$module$src$types$$($timeoutConfig$$)?($timeoutConfig$$.fallbackAction&&"reject"==$timeoutConfig$$.fallbackAction?$fallbackState$$=2:$timeoutConfig$$.fallbackAction&&"dismiss"!=$timeoutConfig$$.fallbackAction&&_.$user$$module$src$log$$().error("consent-policy-manager","unsupported fallbackAction %s",$timeoutConfig$$.fallbackAction),$timeoutSecond$$=$timeoutConfig$$.seconds):$timeoutSecond$$=$timeoutConfig$$);null!=$timeoutSecond$$&&$win$jscomp$352$$.setTimeout(function(){$fallbackState$$=
$fallbackState$$||5;$JSCompiler_StaticMethods_startTimeout$self$$.evaluate($fallbackState$$,!0)},1E3*$timeoutSecond$$)},$ConsentConfig$$module$extensions$amp_consent$0_1$consent_config$$=function($element$jscomp$417$$){this.$element_$=$element$jscomp$417$$;this.$F$=$element$jscomp$417$$.ownerDocument.defaultView;this.$D$=null},$JSCompiler_StaticMethods_getConsentConfig$$=function($JSCompiler_StaticMethods_getConsentConfig$self$$){if(!$JSCompiler_StaticMethods_getConsentConfig$self$$.$D$){try{var $JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$=
_.$getChildJsonConfig$$module$src$json$$($JSCompiler_StaticMethods_getConsentConfig$self$$.$element_$)}catch($e$276$jscomp$inline_6550$$){throw _.$user$$module$src$log$$($JSCompiler_StaticMethods_getConsentConfig$self$$.$element_$).$createError$("%s: %s","amp-consent/consent-config",$e$276$jscomp$inline_6550$$);}var $JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=
$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.consents;_.$isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_getConsentConfig$self$$.$F$,"amp-consent-v2");if($JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.consents){$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=
Object.keys($JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$);if(0<$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$.length){$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.consentInstanceId=
$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[0];$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.consents[$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[0]];
for(var $attrs$jscomp$inline_6557_i$jscomp$inline_3276$$=Object.keys($JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$),$i$jscomp$inline_6558$$=0;$i$jscomp$inline_6558$$<$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$.length;$i$jscomp$inline_6558$$++){var $attr$jscomp$inline_6559$$=$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$[$i$jscomp$inline_6558$$];
!$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$[$attr$jscomp$inline_6559$$]&&$ALLOWED_DEPR_CONSENTINSTANCE_ATTRS$$module$extensions$amp_consent$0_1$consent_config$$[$attr$jscomp$inline_6559$$]&&($JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$[$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$[$i$jscomp$inline_6558$$]]=$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$[$i$jscomp$inline_6558$$]])}}delete $JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.consents}$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=
_.$isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_getConsentConfig$self$$.$F$,"amp-consent-v2")?($JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=$JSCompiler_StaticMethods_getConsentConfig$self$$.$element_$.getAttribute("type"))?$CMP_CONFIG$$module$extensions$amp_consent$0_1$cmps$$[$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$]:
null:null;$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$=_.$deepMerge$$module$src$utils$object$$($JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$||{},$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$||{},1);if($JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.policy)for($JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$=
Object.keys($JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.policy),$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$=0;$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$<$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$.length;$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$++)"default"!=$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$]&&
(_.$user$$module$src$log$$().$Log$$module$src$log_prototype$warn$("amp-consent/consent-config","policy %s is currently not supported and will be ignored",$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$]),delete $JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$.policy[$JSCompiler_inline_result$jscomp$5950_consentInstanceConfigDepr$jscomp$inline_6556_consentsConfigDepr$jscomp$inline_6554_keys$jscomp$inline_3275_keys$jscomp$inline_6555_type$jscomp$inline_6562$$[$attrs$jscomp$inline_6557_i$jscomp$inline_3276$$]]);
$JSCompiler_StaticMethods_getConsentConfig$self$$.$D$=$JSCompiler_inline_result$jscomp$5949_config$jscomp$inline_3274_config$jscomp$inline_6553$$}return $JSCompiler_StaticMethods_getConsentConfig$self$$.$D$},$expandPolicyConfig$$module$extensions$amp_consent$0_1$consent_config$$=function($policyConfig$$,$consentId$jscomp$1_defaultPolicy$$){var $defaultWaitForItems$$={};$defaultWaitForItems$$[$consentId$jscomp$1_defaultPolicy$$]=void 0;$consentId$jscomp$1_defaultPolicy$$={waitFor:$defaultWaitForItems$$};
var $unblockOnAll$$=[4,1,2,3],$rejectAllOnZero$$={waitFor:$defaultWaitForItems$$,timeout:{seconds:0,fallbackAction:"reject"},unblockOn:$unblockOnAll$$};$policyConfig$$._till_responded={waitFor:$defaultWaitForItems$$,unblockOn:$unblockOnAll$$};$policyConfig$$._till_accepted=$consentId$jscomp$1_defaultPolicy$$;$policyConfig$$._auto_reject=$rejectAllOnZero$$;if($policyConfig$$&&$policyConfig$$["default"])return $policyConfig$$;$policyConfig$$["default"]=$consentId$jscomp$1_defaultPolicy$$;return $policyConfig$$},
$AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$=function($$jscomp$super$this$jscomp$36_element$jscomp$418$$){$$jscomp$super$this$jscomp$36_element$jscomp$418$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$36_element$jscomp$418$$)||this;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$F$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$K$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$I$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$M$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$D$=
null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$U$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$P$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$O$=null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$G$=!1;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$S$=!1;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$R$=_.$JSCompiler_StaticMethods_getVsync$$($$jscomp$super$this$jscomp$36_element$jscomp$418$$);$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$J$=
null;$$jscomp$super$this$jscomp$36_element$jscomp$418$$.$H$=null;return $$jscomp$super$this$jscomp$36_element$jscomp$418$$},$JSCompiler_StaticMethods_enableInteractions_$$=function($JSCompiler_StaticMethods_enableInteractions_$self$$){_.$JSCompiler_StaticMethods_registerAction$$($JSCompiler_StaticMethods_enableInteractions_$self$$,"accept",function(){$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$$($JSCompiler_StaticMethods_enableInteractions_$self$$,
"accept")});_.$JSCompiler_StaticMethods_registerAction$$($JSCompiler_StaticMethods_enableInteractions_$self$$,"reject",function(){$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$$($JSCompiler_StaticMethods_enableInteractions_$self$$,"reject")});_.$JSCompiler_StaticMethods_registerAction$$($JSCompiler_StaticMethods_enableInteractions_$self$$,"dismiss",function(){$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$$($JSCompiler_StaticMethods_enableInteractions_$self$$,
"dismiss")});_.$JSCompiler_StaticMethods_registerAction$$($JSCompiler_StaticMethods_enableInteractions_$self$$,"prompt",function(){$JSCompiler_StaticMethods_scheduleDisplay_$$($JSCompiler_StaticMethods_enableInteractions_$self$$)});$JSCompiler_StaticMethods_enableExternalInteractions_$$($JSCompiler_StaticMethods_enableInteractions_$self$$)},$JSCompiler_StaticMethods_enableExternalInteractions_$$=function($JSCompiler_StaticMethods_enableExternalInteractions_$self$$){$JSCompiler_StaticMethods_enableExternalInteractions_$self$$.$win$.addEventListener("message",
function($event$jscomp$114$$){if($JSCompiler_StaticMethods_enableExternalInteractions_$self$$.$G$){var $data$jscomp$152$$=$event$jscomp$114$$.data;if($data$jscomp$152$$&&"consent-response"==$data$jscomp$152$$.type)if($data$jscomp$152$$.action){if(_.$isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_enableExternalInteractions_$self$$.$win$,"amp-consent-v2")&&void 0!==$data$jscomp$152$$.info){"string"!=typeof $data$jscomp$152$$.info&&(_.$user$$module$src$log$$().error("amp-consent",
"consent-response info only supports string, %s, treated as undefined",$data$jscomp$152$$.info),$data$jscomp$152$$.info=void 0);"dismiss"===$data$jscomp$152$$.action&&($data$jscomp$152$$.info&&$JSCompiler_StaticMethods_enableExternalInteractions_$self$$.$user$().error("amp-consent","Consent string value %s not applicable on user dismiss, stored value will be kept and used",$consentString$jscomp$1$$),$data$jscomp$152$$.info=void 0);var $consentString$jscomp$1$$=$data$jscomp$152$$.info}for(var $iframes$$=
$JSCompiler_StaticMethods_enableExternalInteractions_$self$$.element.querySelectorAll("iframe"),$i$jscomp$290$$=0;$i$jscomp$290$$<$iframes$$.length;$i$jscomp$290$$++)if($iframes$$[$i$jscomp$290$$].contentWindow===$event$jscomp$114$$.source){$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$$($JSCompiler_StaticMethods_enableExternalInteractions_$self$$,$data$jscomp$152$$.action,$consentString$jscomp$1$$);break}}else _.$user$$module$src$log$$().error("amp-consent",
"consent-response message missing required info")}})},$JSCompiler_StaticMethods_scheduleDisplay_$$=function($JSCompiler_StaticMethods_scheduleDisplay_$self$$){$JSCompiler_StaticMethods_scheduleDisplay_$self$$.$I$||_.$dev$$module$src$log$$().error("amp-consent","notification ui manager not found");!$JSCompiler_StaticMethods_scheduleDisplay_$self$$.$S$&&$JSCompiler_StaticMethods_scheduleDisplay_$self$$.$M$&&($JSCompiler_StaticMethods_scheduleDisplay_$self$$.$S$=!0,_.$JSCompiler_StaticMethods_registerUI$$($JSCompiler_StaticMethods_scheduleDisplay_$self$$.$I$,
$JSCompiler_StaticMethods_scheduleDisplay_$self$$.$V$.bind($JSCompiler_StaticMethods_scheduleDisplay_$self$$)))},$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$$=function($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$,$action$jscomp$24$$,$consentString$jscomp$2$$){_.$isEnumValue$$module$src$types$$($ACTION_TYPE$$module$extensions$amp_consent$0_1$amp_consent$$,$action$jscomp$24$$)&&
$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$G$&&($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$F$?("accept"==$action$jscomp$24$$?$JSCompiler_StaticMethods_updateConsentInstanceState$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$F$,1,$consentString$jscomp$2$$):"reject"==$action$jscomp$24$$?
$JSCompiler_StaticMethods_updateConsentInstanceState$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$F$,2,$consentString$jscomp$2$$):"dismiss"==$action$jscomp$24$$&&$JSCompiler_StaticMethods_updateConsentInstanceState$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$F$,3),$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$G$||
_.$dev$$module$src$log$$().error("amp-consent","%s no consent ui to hide"),$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$M$.$hide$(),$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$G$=!1,$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$O$&&($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$O$(),
$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$O$=null),$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$handleAction_$self$$.$S$=!1):_.$dev$$module$src$log$$().error("amp-consent","No consent state manager"))},$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$$=function($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$){$JSCompiler_StaticMethods_passSharedData_$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$);
$JSCompiler_StaticMethods_getConsentRequiredPromise_$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$).then(function($isConsentRequired$$){return $JSCompiler_StaticMethods_initPromptUI_$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$,$isConsentRequired$$)}).then(function($isPostPromptUIRequired$$){$isPostPromptUIRequired$$&&$JSCompiler_StaticMethods_handlePostPromptUI_$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$);
$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$.$K$.$O$.resolve()}).catch(function(){});$JSCompiler_StaticMethods_enableInteractions_$$($JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$self$$)},$JSCompiler_StaticMethods_getConsentRequiredPromise_$$=function($JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$){var $consentRequiredPromise$$=null;$JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$.$D$.promptIfUnknownForGeoGroup?
$consentRequiredPromise$$=$JSCompiler_StaticMethods_isConsentRequiredGeo_$$($JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$,$JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$.$D$.promptIfUnknownForGeoGroup):$consentRequiredPromise$$=$JSCompiler_StaticMethods_getConsentRemote_$$($JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$).then(function($consentRequiredPromise$$){return $consentRequiredPromise$$&&_.$hasOwn$$module$src$utils$object$$($consentRequiredPromise$$,"promptIfUnknown")?
!!$consentRequiredPromise$$.promptIfUnknown:($JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$.$user$().error("amp-consent","Expecting promptIfUnknown from checkConsentHref when promptIfUnknownForGeoGroup is not specified"),!1)});return $consentRequiredPromise$$.then(function($JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$){return!!$JSCompiler_StaticMethods_getConsentRequiredPromise_$self$$})},$JSCompiler_StaticMethods_passSharedData_$$=function($JSCompiler_StaticMethods_passSharedData_$self$$){var $sharedDataPromise$jscomp$2$$=
$JSCompiler_StaticMethods_getConsentRemote_$$($JSCompiler_StaticMethods_passSharedData_$self$$).then(function($JSCompiler_StaticMethods_passSharedData_$self$$){return $JSCompiler_StaticMethods_passSharedData_$self$$&&void 0!==$JSCompiler_StaticMethods_passSharedData_$self$$.sharedData?$JSCompiler_StaticMethods_passSharedData_$self$$.sharedData:null});$JSCompiler_StaticMethods_passSharedData_$self$$.$F$.$instance_$.$I$=$sharedDataPromise$jscomp$2$$},$JSCompiler_StaticMethods_isConsentRequiredGeo_$$=
function($JSCompiler_StaticMethods_isConsentRequiredGeo_$self$$,$geoGroup$jscomp$1$$){return _.$Services$$module$src$services$geoForDocOrNull$$($JSCompiler_StaticMethods_isConsentRequiredGeo_$self$$.element).then(function($JSCompiler_StaticMethods_isConsentRequiredGeo_$self$$){return 2==$JSCompiler_StaticMethods_isConsentRequiredGeo_$self$$.$isInCountryGroup$($geoGroup$jscomp$1$$)})},$JSCompiler_StaticMethods_getConsentRemote_$$=function($JSCompiler_StaticMethods_getConsentRemote_$self$$){if($JSCompiler_StaticMethods_getConsentRemote_$self$$.$J$)return $JSCompiler_StaticMethods_getConsentRemote_$self$$.$J$;
if($JSCompiler_StaticMethods_getConsentRemote_$self$$.$D$.checkConsentHref){var $href$jscomp$10_request$jscomp$33$$={consentInstanceId:$JSCompiler_StaticMethods_getConsentRemote_$self$$.$H$};$JSCompiler_StaticMethods_getConsentRemote_$self$$.$D$.clientConfig&&($href$jscomp$10_request$jscomp$33$$.clientConfig=$JSCompiler_StaticMethods_getConsentRemote_$self$$.$D$.clientConfig);var $init$jscomp$18$$={credentials:"include",method:"POST",body:$href$jscomp$10_request$jscomp$33$$,requireAmpResponseSourceOrigin:!1};
$href$jscomp$10_request$jscomp$33$$=$JSCompiler_StaticMethods_getConsentRemote_$self$$.$D$.checkConsentHref;var $ampdoc$jscomp$170$$=$JSCompiler_StaticMethods_getConsentRemote_$self$$.$getAmpDoc$(),$sourceBase$$=_.$getSourceUrl$$module$src$url$$($ampdoc$jscomp$170$$.$AmpDoc$$module$src$service$ampdoc_impl_prototype$getUrl$()),$resolvedHref$$=_.$resolveRelativeUrl$$module$src$url$$($href$jscomp$10_request$jscomp$33$$,$sourceBase$$);$JSCompiler_StaticMethods_getConsentRemote_$self$$.$J$=_.$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$170$$).$D$.then(function(){return _.$JSCompiler_StaticMethods_fetchJson$$(_.$Services$$module$src$services$xhrFor$$($JSCompiler_StaticMethods_getConsentRemote_$self$$.$win$),
$resolvedHref$$,$init$jscomp$18$$).then(function($JSCompiler_StaticMethods_getConsentRemote_$self$$){return $JSCompiler_StaticMethods_getConsentRemote_$self$$.json()})})}else $JSCompiler_StaticMethods_getConsentRemote_$self$$.$J$=Promise.resolve(null);return $JSCompiler_StaticMethods_getConsentRemote_$self$$.$J$},$JSCompiler_StaticMethods_initPromptUI_$$=function($JSCompiler_StaticMethods_initPromptUI_$self$$,$isConsentRequired$jscomp$1$$){$JSCompiler_StaticMethods_initPromptUI_$self$$.$M$=new $ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$($JSCompiler_StaticMethods_initPromptUI_$self$$,
$JSCompiler_StaticMethods_initPromptUI_$self$$.$D$);return $JSCompiler_StaticMethods_initPromptUI_$self$$.$F$.$instance_$.get().then(function($info$jscomp$15$$){if($info$jscomp$15$$.consentString||1===$info$jscomp$15$$.consentState||2===$info$jscomp$15$$.consentState)return!0;if(!$isConsentRequired$jscomp$1$$)return $JSCompiler_StaticMethods_updateConsentInstanceState$$($JSCompiler_StaticMethods_initPromptUI_$self$$.$F$,4),!1;$JSCompiler_StaticMethods_scheduleDisplay_$$($JSCompiler_StaticMethods_initPromptUI_$self$$);
return!0})},$JSCompiler_StaticMethods_handlePostPromptUI_$$=function($JSCompiler_StaticMethods_handlePostPromptUI_$self$$){$JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$P$&&($JSCompiler_StaticMethods_onQueueEmpty$$($JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$I$,function(){$JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$R$.$mutate$(function(){$JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$P$.show()})}),$JSCompiler_StaticMethods_onQueueNotEmpty$$($JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$I$,
function(){$JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$R$.$mutate$(function(){$JSCompiler_StaticMethods_handlePostPromptUI_$self$$.$P$.$hide$()})}))},$CONSENT_ITEM_STATE$$module$extensions$amp_consent$0_1$consent_info$$={$ACCEPTED$:1,$REJECTED$:2,$DISMISSED$:3,$NOT_REQUIRED$:4,$UNKNOWN$:5};$ConsentInstance$$module$extensions$amp_consent$0_1$consent_state_manager$$.prototype.update=function($newConsentInfo_state$jscomp$57$$,$consentString_oldConsentInfo$$){var $localConsentStr$$=this.$D$&&this.$D$.consentString;var $JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$=$newConsentInfo_state$jscomp$57$$;var $previousState$jscomp$inline_3230$$=this.$D$&&this.$D$.consentState;_.$isEnumValue$$module$src$types$$($CONSENT_ITEM_STATE$$module$extensions$amp_consent$0_1$consent_info$$,
$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$)||($JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$=5);$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$=3==$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$||5==$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$?$previousState$jscomp$inline_3230$$||5:4==$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$&&$previousState$jscomp$inline_3230$$&&5!=$previousState$jscomp$inline_3230$$?
$previousState$jscomp$inline_3230$$:$JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$;3===$newConsentInfo_state$jscomp$57$$?this.$D$=$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$($JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$,$localConsentStr$$):($newConsentInfo_state$jscomp$57$$=$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$($JSCompiler_inline_result$jscomp$802_newState$jscomp$inline_3229$$,$consentString_oldConsentInfo$$),
$consentString_oldConsentInfo$$=this.$D$,this.$D$=$newConsentInfo_state$jscomp$57$$,$isConsentInfoStoredValueSame$$module$extensions$amp_consent$0_1$consent_info$$($newConsentInfo_state$jscomp$57$$,$consentString_oldConsentInfo$$)||$JSCompiler_StaticMethods_updateStoredValue_$$(this,$newConsentInfo_state$jscomp$57$$))};
$ConsentInstance$$module$extensions$amp_consent$0_1$consent_state_manager$$.prototype.get=function(){var $$jscomp$this$jscomp$563$$=this;return this.$D$?Promise.resolve(this.$D$):this.$G$.then(function($storage$jscomp$7$$){return $storage$jscomp$7$$.get($$jscomp$this$jscomp$563$$.$F$)}).then(function($JSCompiler_inline_result$jscomp$801_storedValue$$){if($$jscomp$this$jscomp$563$$.$D$)return $$jscomp$this$jscomp$563$$.$D$;if(void 0===$JSCompiler_inline_result$jscomp$801_storedValue$$)$JSCompiler_inline_result$jscomp$801_storedValue$$=
$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$(5,void 0,void 0);else if("boolean"===typeof $JSCompiler_inline_result$jscomp$801_storedValue$$)$JSCompiler_inline_result$jscomp$801_storedValue$$=$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$($convertValueToState$$module$extensions$amp_consent$0_1$consent_info$$($JSCompiler_inline_result$jscomp$801_storedValue$$),void 0,void 0);else{if(!_.$isObject$$module$src$types$$($JSCompiler_inline_result$jscomp$801_storedValue$$))throw _.$dev$$module$src$log$$().$createError$("Invalid stored consent value");
$JSCompiler_inline_result$jscomp$801_storedValue$$=$constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$($convertValueToState$$module$extensions$amp_consent$0_1$consent_info$$($JSCompiler_inline_result$jscomp$801_storedValue$$.s),$JSCompiler_inline_result$jscomp$801_storedValue$$.r,$JSCompiler_inline_result$jscomp$801_storedValue$$.d&&1===$JSCompiler_inline_result$jscomp$801_storedValue$$.d)}$$jscomp$this$jscomp$563$$.$D$=$JSCompiler_inline_result$jscomp$801_storedValue$$;return $$jscomp$this$jscomp$563$$.$D$}).catch(function($$jscomp$this$jscomp$563$$){_.$dev$$module$src$log$$().error("CONSENT-STATE-MANAGER",
"Failed to read storage",$$jscomp$this$jscomp$563$$);return $constructConsentInfo$$module$extensions$amp_consent$0_1$consent_info$$(5)})};var $_template$$module$extensions$amp_consent$0_1$consent_ui$$=['<svg viewBox="0 0 40 40"><defs><linearGradient id=grad><stop stop-color="rgb(105, 105, 105)"></stop><stop offset=100% stop-color="rgb(105, 105, 105)" stop-opacity=0></stop></linearGradient></defs><path d="M11,4.4 A18,18, 0,1,0, 38,20" stroke=url(#grad)></path></svg>'];
$ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$.prototype.show=function(){var $$jscomp$this$jscomp$565$$=this;if(this.$D$){_.$toggle$$module$src$style$$(this.$F$,!0);var $classList$$=this.$F$.classList;$classList$$.add("amp-active");$classList$$.remove("amp-hidden");_.$JSCompiler_StaticMethods_addToFixedLayer$$(this.$G$.$getViewport$(),this.$F$);if(this.$X$)$JSCompiler_StaticMethods_loadIframe_$$(this).then(function(){$$jscomp$this$jscomp$565$$.$G$.$mutateElement$(function(){$$jscomp$this$jscomp$565$$.$M$||
($$jscomp$this$jscomp$565$$.$K$=$$jscomp$this$jscomp$565$$.$Z$.activeElement);$JSCompiler_StaticMethods_maybeShowOverlay_$$($$jscomp$this$jscomp$565$$);$JSCompiler_StaticMethods_showIframe_$$($$jscomp$this$jscomp$565$$);$$jscomp$this$jscomp$565$$.$M$||$$jscomp$this$jscomp$565$$.$D$.focus()})});else{var $show$jscomp$3$$=function(){$$jscomp$this$jscomp$565$$.$D$&&(_.$toggle$$module$src$style$$($$jscomp$this$jscomp$565$$.$D$,!0),$$jscomp$this$jscomp$565$$.$M$||($$jscomp$this$jscomp$565$$.$K$=$$jscomp$this$jscomp$565$$.$Z$.activeElement,
$JSCompiler_StaticMethods_maybeShowOverlay_$$($$jscomp$this$jscomp$565$$),$$jscomp$this$jscomp$565$$.$G$.$scheduleLayout$($$jscomp$this$jscomp$565$$.$D$),$$jscomp$this$jscomp$565$$.$D$.focus()))};$isAmpElement$$module$src$dom$$(this.$D$)?this.$D$.$whenBuilt$().then(function(){return $show$jscomp$3$$()}):$show$jscomp$3$$()}this.$U$=!0}};
$ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$.prototype.$hide$=function(){var $$jscomp$this$jscomp$566$$=this;this.$D$&&this.$G$.$mutateElement$(function(){if($$jscomp$this$jscomp$566$$.$X$){var $classList$jscomp$1_classList$jscomp$inline_3248$$=$$jscomp$this$jscomp$566$$.$F$.classList;$classList$jscomp$1_classList$jscomp$inline_3248$$.remove("i-amphtml-consent-ui-iframe-active");$$jscomp$this$jscomp$566$$.$I$.removeEventListener("message",$$jscomp$this$jscomp$566$$.$aa$);$classList$jscomp$1_classList$jscomp$inline_3248$$.remove("i-amphtml-consent-ui-iframe-fullscreen");
$$jscomp$this$jscomp$566$$.$S$=!1;$classList$jscomp$1_classList$jscomp$inline_3248$$.remove("i-amphtml-consent-ui-in");$$jscomp$this$jscomp$566$$.$Y$=!1;$$jscomp$this$jscomp$566$$.$D$.removeAttribute("name");_.$removeElement$$module$src$dom$$($$jscomp$this$jscomp$566$$.$D$)}$$jscomp$this$jscomp$566$$.$M$||($classList$jscomp$1_classList$jscomp$inline_3248$$=$$jscomp$this$jscomp$566$$.$F$.classList,$classList$jscomp$1_classList$jscomp$inline_3248$$.remove("amp-active"),$classList$jscomp$1_classList$jscomp$inline_3248$$.add("amp-hidden"));
$$jscomp$this$jscomp$566$$.$ea$&&($$jscomp$this$jscomp$566$$.$J$&&_.$toggle$$module$src$style$$($$jscomp$this$jscomp$566$$.$J$,!1),$$jscomp$this$jscomp$566$$.$H$||(_.$JSCompiler_StaticMethods_leaveOverlayMode$$($$jscomp$this$jscomp$566$$.$P$),$$jscomp$this$jscomp$566$$.$H$=!0));$$jscomp$this$jscomp$566$$.$H$||(_.$JSCompiler_StaticMethods_leaveOverlayMode$$($$jscomp$this$jscomp$566$$.$P$),$$jscomp$this$jscomp$566$$.$H$=!0);$JSCompiler_StaticMethods_resetAnimationStyles_$$($$jscomp$this$jscomp$566$$);
_.$JSCompiler_StaticMethods_removeFromFixedLayer$$($$jscomp$this$jscomp$566$$.$G$.$getViewport$(),$$jscomp$this$jscomp$566$$.$F$);_.$toggle$$module$src$style$$($$jscomp$this$jscomp$566$$.$D$,!1);$$jscomp$this$jscomp$566$$.$U$=!1;$$jscomp$this$jscomp$566$$.$K$?($$jscomp$this$jscomp$566$$.$K$.focus(),$$jscomp$this$jscomp$566$$.$K$=null):0<$$jscomp$this$jscomp$566$$.$I$.document.body.children.length&&$$jscomp$this$jscomp$566$$.$I$.document.body.children[0].focus()})};
$ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$.prototype.$fa$=function($data$jscomp$151_event$jscomp$113$$){var $$jscomp$this$jscomp$570$$=this;this.$D$.contentWindow===$data$jscomp$151_event$jscomp$113$$.source&&($data$jscomp$151_event$jscomp$113$$=$data$jscomp$151_event$jscomp$113$$.data)&&"consent-ui"==$data$jscomp$151_event$jscomp$113$$.type&&("ready"===$data$jscomp$151_event$jscomp$113$$.action&&$JSCompiler_StaticMethods_handleReady_$$(this,$data$jscomp$151_event$jscomp$113$$),"enter-fullscreen"===
$data$jscomp$151_event$jscomp$113$$.action&&this.$Y$&&this.$G$.$mutateElement$(function(){$$jscomp$this$jscomp$570$$.$D$&&$$jscomp$this$jscomp$570$$.$U$&&!$$jscomp$this$jscomp$570$$.$S$&&($JSCompiler_StaticMethods_resetAnimationStyles_$$($$jscomp$this$jscomp$570$$),$$jscomp$this$jscomp$570$$.$F$.classList.add("i-amphtml-consent-ui-iframe-fullscreen"),$$jscomp$this$jscomp$570$$.$H$&&(_.$JSCompiler_StaticMethods_enterOverlayMode$$($$jscomp$this$jscomp$570$$.$P$),$$jscomp$this$jscomp$570$$.$H$=!1),$$jscomp$this$jscomp$570$$.$S$=
!0)}))};var $WHITELIST_POLICY$$module$extensions$amp_consent$0_1$consent_policy_manager$$={"default":!0,_till_responded:!0,_till_accepted:!0,_auto_reject:!0};
$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$.prototype.$J$=function($policyId$jscomp$7$$){var $$jscomp$this$jscomp$573$$=this;return $WHITELIST_POLICY$$module$extensions$amp_consent$0_1$consent_policy_manager$$[$policyId$jscomp$7$$]?$JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$$(this,$policyId$jscomp$7$$).then(function(){return $$jscomp$this$jscomp$573$$.$F$[$policyId$jscomp$7$$].$G$.then(function(){return $$jscomp$this$jscomp$573$$.$F$[$policyId$jscomp$7$$].$F$})}):(_.$user$$module$src$log$$().error("consent-policy-manager",
"can not find policy %s, only predefined policies are supported",$policyId$jscomp$7$$),Promise.resolve(4))};
$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$.prototype.$V$=function($policyId$jscomp$8$$){var $$jscomp$this$jscomp$574$$=this;return $WHITELIST_POLICY$$module$extensions$amp_consent$0_1$consent_policy_manager$$[$policyId$jscomp$8$$]?$JSCompiler_StaticMethods_whenPolicyInstanceRegistered_$$(this,$policyId$jscomp$8$$).then(function(){return $$jscomp$this$jscomp$574$$.$F$[$policyId$jscomp$8$$].$G$.then(function(){var $JSCompiler_StaticMethods_shouldUnblock$self$jscomp$inline_3269$$=$$jscomp$this$jscomp$574$$.$F$[$policyId$jscomp$8$$];
return-1<$JSCompiler_StaticMethods_shouldUnblock$self$jscomp$inline_3269$$.$I$.indexOf($JSCompiler_StaticMethods_shouldUnblock$self$jscomp$inline_3269$$.$F$)})}):(_.$user$$module$src$log$$().error("consent-policy-manager","can not find policy %s, only predefined policies are supported",$policyId$jscomp$8$$),Promise.resolve(!1))};$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$.prototype.$U$=function($policyId$jscomp$9$$){var $$jscomp$this$jscomp$575$$=this;return this.$J$($policyId$jscomp$9$$).then(function(){return $$jscomp$this$jscomp$575$$.$K$}).then(function($policyId$jscomp$9$$){return $policyId$jscomp$9$$.$instance_$.$I$})};
$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$.prototype.$S$=function($policyId$jscomp$10$$){var $$jscomp$this$jscomp$576$$=this;return this.$J$($policyId$jscomp$10$$).then(function(){return $$jscomp$this$jscomp$576$$.$H$})};
$ConsentPolicyInstance$$module$extensions$amp_consent$0_1$consent_policy_manager$$.prototype.evaluate=function($state$jscomp$60$$,$isFallback$$){!$state$jscomp$60$$||void 0!==$isFallback$$&&$isFallback$$&&!this.$D$||(this.$F$=1===$state$jscomp$60$$?1:2===$state$jscomp$60$$?2:4===$state$jscomp$60$$?3:4,this.$D$&&(this.$D$(),this.$D$=null))};var $CMP_CONFIG$$module$extensions$amp_consent$0_1$cmps$$={};if(_.$getMode$$module$src$mode$$().test||_.$getMode$$module$src$mode$$().localDev)$CMP_CONFIG$$module$extensions$amp_consent$0_1$cmps$$._ping_={consentInstanceId:"_ping_",checkConsentHref:"/get-consent-v1",promptUISrc:"/test/manual/diy-consent.html"};$CMP_CONFIG$$module$extensions$amp_consent$0_1$cmps$$.didomi={consentInstanceId:"didomi",checkConsentHref:"https://api.privacy-center.org/amp/check-consent",promptUISrc:"https://sdk-amp.privacy-center.org/loader.html"};var $ALLOWED_DEPR_CONSENTINSTANCE_ATTRS$$module$extensions$amp_consent$0_1$consent_config$$={promptUI:!0,checkConsentHref:!0,promptIfUnknownForGeoGroup:!0,onUpdateHref:!0};var $ACTION_TYPE$$module$extensions$amp_consent$0_1$amp_consent$$={$ACCEPT$:"accept",$REJECT$:"reject",$DISMISS$:"dismiss"};_.$$jscomp$inherits$$($AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$,AMP.BaseElement);$AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$.prototype.$getConsentPolicy$=function(){return null};
$AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$.prototype.$buildCallback$=function(){var $$jscomp$this$jscomp$578$$=this;this.$D$=$JSCompiler_StaticMethods_getConsentConfig$$(new $ConsentConfig$$module$extensions$amp_consent$0_1$consent_config$$(this.element));this.$H$=this.$D$.consentInstanceId;this.$D$.postPromptUI&&(this.$P$=new $ConsentUI$$module$extensions$amp_consent$0_1$consent_ui$$(this,_.$dict$$module$src$utils$object$$({}),this.$D$.postPromptUI));this.$U$=$expandPolicyConfig$$module$extensions$amp_consent$0_1$consent_config$$(this.$D$.policy||
_.$dict$$module$src$utils$object$$({}),this.$H$);for(var $children$jscomp$136_consentPolicyManagerPromise$$=this.$getRealChildren$(),$consentStateManagerPromise_i$jscomp$289$$=0;$consentStateManagerPromise_i$jscomp$289$$<$children$jscomp$136_consentPolicyManagerPromise$$.length;$consentStateManagerPromise_i$jscomp$289$$++){var $child$jscomp$19_notificationUiManagerPromise$$=$children$jscomp$136_consentPolicyManagerPromise$$[$consentStateManagerPromise_i$jscomp$289$$];_.$toggle$$module$src$style$$($child$jscomp$19_notificationUiManagerPromise$$,
!1);_.$Resource$$module$src$service$resource$setOwner$$($child$jscomp$19_notificationUiManagerPromise$$,this.element)}$children$jscomp$136_consentPolicyManagerPromise$$=_.$getServicePromiseForDoc$$module$src$service$$(this.$getAmpDoc$(),"consentPolicyManager").then(function($children$jscomp$136_consentPolicyManagerPromise$$){$$jscomp$this$jscomp$578$$.$K$=$children$jscomp$136_consentPolicyManagerPromise$$;$children$jscomp$136_consentPolicyManagerPromise$$=$$jscomp$this$jscomp$578$$.$K$;$children$jscomp$136_consentPolicyManagerPromise$$.$M$=
$$jscomp$this$jscomp$578$$.$H$;$JSCompiler_StaticMethods_ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager_prototype$init_$$($children$jscomp$136_consentPolicyManagerPromise$$);$children$jscomp$136_consentPolicyManagerPromise$$=Object.keys($$jscomp$this$jscomp$578$$.$U$);for(var $consentStateManagerPromise_i$jscomp$289$$=0;$consentStateManagerPromise_i$jscomp$289$$<$children$jscomp$136_consentPolicyManagerPromise$$.length;$consentStateManagerPromise_i$jscomp$289$$++)$JSCompiler_StaticMethods_registerConsentPolicyInstance$$($$jscomp$this$jscomp$578$$.$K$,
$children$jscomp$136_consentPolicyManagerPromise$$[$consentStateManagerPromise_i$jscomp$289$$],$$jscomp$this$jscomp$578$$.$U$[$children$jscomp$136_consentPolicyManagerPromise$$[$consentStateManagerPromise_i$jscomp$289$$]])});$consentStateManagerPromise_i$jscomp$289$$=_.$getServicePromiseForDoc$$module$src$service$$(this.$getAmpDoc$(),"consentStateManager").then(function($children$jscomp$136_consentPolicyManagerPromise$$){var $consentStateManagerPromise_i$jscomp$289$$=$$jscomp$this$jscomp$578$$.$H$,
$child$jscomp$19_notificationUiManagerPromise$$=$$jscomp$this$jscomp$578$$.$D$;$children$jscomp$136_consentPolicyManagerPromise$$.$instance_$?_.$dev$$module$src$log$$().error("CONSENT-STATE-MANAGER","Cannot register consent instance %s, instance %s has already been registered.",$consentStateManagerPromise_i$jscomp$289$$,$children$jscomp$136_consentPolicyManagerPromise$$.$instanceId_$):($children$jscomp$136_consentPolicyManagerPromise$$.$instanceId_$=$consentStateManagerPromise_i$jscomp$289$$,$children$jscomp$136_consentPolicyManagerPromise$$.$instance_$=
new $ConsentInstance$$module$extensions$amp_consent$0_1$consent_state_manager$$($children$jscomp$136_consentPolicyManagerPromise$$.$ampdoc_$,$consentStateManagerPromise_i$jscomp$289$$,$child$jscomp$19_notificationUiManagerPromise$$),$children$jscomp$136_consentPolicyManagerPromise$$.$consentReadyResolver_$&&($children$jscomp$136_consentPolicyManagerPromise$$.$consentReadyResolver_$(),$children$jscomp$136_consentPolicyManagerPromise$$.$consentReadyResolver_$=null));$$jscomp$this$jscomp$578$$.$F$=$children$jscomp$136_consentPolicyManagerPromise$$});
$child$jscomp$19_notificationUiManagerPromise$$=_.$getServicePromiseForDoc$$module$src$service$$(this.$getAmpDoc$(),"notificationUIManager").then(function($children$jscomp$136_consentPolicyManagerPromise$$){$$jscomp$this$jscomp$578$$.$I$=$children$jscomp$136_consentPolicyManagerPromise$$});Promise.all([$consentStateManagerPromise_i$jscomp$289$$,$child$jscomp$19_notificationUiManagerPromise$$,$children$jscomp$136_consentPolicyManagerPromise$$]).then(function(){$JSCompiler_StaticMethods_AmpConsent$$module$extensions$amp_consent$0_1$amp_consent_prototype$init_$$($$jscomp$this$jscomp$578$$)})};
$AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$.prototype.$V$=function(){var $$jscomp$this$jscomp$581$$=this;this.$G$&&_.$dev$$module$src$log$$().error("amp-consent","Attempt to show an already displayed prompt UI");this.$R$.$mutate$(function(){$$jscomp$this$jscomp$581$$.$M$.show();$$jscomp$this$jscomp$581$$.$G$=!0});var $deferred$jscomp$40$$=new _.$Deferred$$module$src$utils$promise$$;this.$O$=$deferred$jscomp$40$$.resolve;return $deferred$jscomp$40$$.$promise$};
var $AMP$jscomp$inline_3292$$=self.AMP;$AMP$jscomp$inline_3292$$.registerElement("amp-consent",$AmpConsent$$module$extensions$amp_consent$0_1$amp_consent$$,"amp-consent{position:fixed;bottom:0;left:0;overflow:hidden!important;background:hsla(0,0%,100%,0.7);width:100%;z-index:2147483645}amp-consent[i-amphtml-notbuilt]>*{display:none!important}amp-consent>*{max-height:100vh!important}amp-consent.amp-active{visibility:visible}amp-consent.amp-hidden{visibility:hidden}@-webkit-keyframes amp-consent-ui-placeholder-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amp-consent-ui-placeholder-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.i-amphtml-consent-ui-placeholder{width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.i-amphtml-consent-ui-placeholder>svg{width:30px;height:30px;fill:none;stroke-width:1.5px;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;-webkit-animation:amp-consent-ui-placeholder-spin 1000ms linear infinite;animation:amp-consent-ui-placeholder-spin 1000ms linear infinite}.i-amphtml-consent-ui-fill{position:absolute;top:0;left:0;width:100%}iframe.i-amphtml-consent-ui-fill{border:none}amp-consent.i-amphtml-consent-ui-iframe-active{width:100%!important;height:100vh!important;padding:0px!important;margin:0px!important;-webkit-transform:translate3d(0px,100vh,0px)!important;transform:translate3d(0px,100vh,0px)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-enable-border{border-top-left-radius:8px!important;border-top-right-radius:8px!important;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in{-webkit-transition:-webkit-transform 0.5s ease-out!important;transition:-webkit-transform 0.5s ease-out!important;transition:transform 0.5s ease-out!important;transition:transform 0.5s ease-out,-webkit-transform 0.5s ease-out!important}amp-consent.i-amphtml-consent-ui-iframe-active.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen{top:0px!important;-webkit-transform:translateZ(0px)!important;transform:translateZ(0px)!important;border-top-left-radius:0px!important;border-top-right-radius:0px!important}amp-consent.i-amphtml-consent-ui-in.i-amphtml-consent-ui-iframe-fullscreen>.i-amphtml-consent-ui-fill{height:100%!important}@-webkit-keyframes i-amphtml-consent-ui-mask{0%{opacity:0.0}to{opacity:0.2}}@keyframes i-amphtml-consent-ui-mask{0%{opacity:0.0}to{opacity:0.2}}.i-amphtml-consent-ui-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;-webkit-animation:i-amphtml-consent-ui-mask 0.25s ease-in;animation:i-amphtml-consent-ui-mask 0.25s ease-in;background-image:none!important;background-color:#000;z-index:2147483644}\n/*# sourceURL=/extensions/amp-consent/0.1/amp-consent.css*/");
$AMP$jscomp$inline_3292$$.registerServiceForDoc("notificationUIManager",_.$NotificationUiManager$$module$src$service$notification_ui_manager$$);$AMP$jscomp$inline_3292$$.registerServiceForDoc("consentStateManager",function($ampdoc$jscomp$167$$){this.$ampdoc_$=$ampdoc$jscomp$167$$;this.$consentReadyResolver_$=this.$F$=this.$D$=this.$instance_$=this.$instanceId_$=null});$AMP$jscomp$inline_3292$$.registerServiceForDoc("consentPolicyManager",$ConsentPolicyManager$$module$extensions$amp_consent$0_1$consent_policy_manager$$);
})});

//# sourceMappingURL=amp-consent-0.1.js.map
