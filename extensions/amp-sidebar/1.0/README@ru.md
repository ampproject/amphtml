# Bento Sidebar

Компонент предоставляет способ отображения мета-содержимого, к которому не требуется постоянный доступ: элементов навигации, ссылок, кнопок, меню. Боковая панель вызывается нажатием на кнопку, визуально скрывая под собой основное содержимое страницы.

## Веб-компонент

Чтобы гарантировать правильную загрузку, вы должны подключить необходимые CSS-библиотеки всех компонентов Bento (это нужно сделать перед добавлением пользовательских стилей). Как вариант, вы можете использовать встраиваемые облегченные стили от предыдущей версии компонента. См. [Макет и стиль](#layout-and-style).

Представленные ниже примеры демонстрируют использование веб-компонента `<bento-sidebar>`.

### Пример: импорт через npm

```sh
npm install @bentoproject/sidebar
```

```javascript
import {defineElement as defineBentoSidebar} from '@bentoproject/sidebar';
defineBentoSidebar();
```

### Пример: подключение через `<script>`

```html
<head>
  <!-- These styles prevent Cumulative Layout Shift on the unupgraded custom element -->
  <style>
    bento-sidebar:not([open]) {
      display: none !important;
    }
  </style>
  <script src="https://cdn.ampproject.org/bento.js"></script>
  <script
    async
    src="https://cdn.ampproject.org/v0/bento-sidebar-1.0.js"
  ></script>
</head>
<body>
  <bento-sidebar id="sidebar1" side="right">
    <ul>
      <li>Nav item 1</li>
      <li>Nav item 2</li>
      <li>Nav item 3</li>
      <li>Nav item 4</li>
      <li>Nav item 5</li>
      <li>Nav item 6</li>
    </ul>
  </bento-sidebar>

  <div class="buttons" style="margin-top: 8px">
    <button id="open-sidebar">Open sidebar</button>
  </div>

  <script>
    (async () => {
      const sidebar = document.querySelector('#sidebar1');
      await customElements.whenDefined('bento-sidebar');
      const api = await sidebar.getApi();

      // set up button actions
      document.querySelector('#open-sidebar').onclick = () => api.open();
    })();
  </script>
</body>
```

### Bento Toolbar

Вы можете создать элемент Bento Toolbar, отображаемый внутри `<body>`. Для этого необходимо разместить внутри `<bento-sidebar>` дочерний элемент `<nav>` и в качестве значения атрибута `toolbar` указать медиазапрос, а в качестве значения `toolbar-target` — идентификатор целевого элемента. Атрибут `toolbar` создает копию элемента `<nav>` вместе с дочерними элементами и добавляет ее к содержимому элемента `toolbar-target`.

#### Поведение

- В рамках боковой панели можно создавать панели инструментов, добавляя дочерние элементы nav с указанием атрибутов `toolbar` и `toolbar-target`.
- Элемент nav должен быть дочерним по отношению к `<bento-sidebar>` и иметь следующий формат: `<nav toolbar="(media-query)" toolbar-target="elementID">`.
    - Пример допустимого применения атрибута toolbar: `<nav toolbar="(max-width: 1024px)" toolbar-target="target-element">`.
- Панель инструментов отображается только в случае срабатывания медиазапроса, указанного в атрибуте `toolbar`. Кроме того, для отображения панели инструментов на странице должен присутствовать элемент с идентификатором, указанным в атрибуте `toolbar-target`.

##### Пример: простая панель инструментов

В приведенном ниже примере атрибут `toolbar` используется для отображения панели инструментов, если ширина окна не превышает 767px. Панель инструментов содержит поле ввода для поискового запроса. Элемент с атрибутом `toolbar` будет добавлен к содержимому элемента `<div id="target-element">`.

```html
<bento-sidebar id="sidebar1" side="right">
  <ul>
    <li>Nav item 1</li>
    <li>Nav item 2</li>
    <li>Nav item 3</li>
    <li>Nav item 4</li>
    <li>Nav item 5</li>
    <li>Nav item 6</li>
  </ul>

  <nav toolbar="(max-width: 767px)" toolbar-target="target-element">
    <ul>
      <li>
        <input placeholder="Search..." />
      </li>
    </ul>
  </nav>
</bento-sidebar>

<div id="target-element"></div>
```

### Интерактивность и использование API

API компонентов с поддержкой Bento позволяет обеспечить высокий уровень интерактивности при использовании их в качестве автономных веб-компонентов. Чтобы получить доступ к API компонента `bento-sidebar`, включите в документ тег script со следующим содержимым:

```javascript
await customElements.whenDefined('bento-sidebar');
const api = await carousel.getApi();
```

#### Действия

API компонента `bento-sidebar` позволяет выполнять следующие действия:

##### open()

Открывает боковую панель.

```javascript
api.open();
```

##### close()

Закрывает боковую панель.

```javascript
api.close();
```

##### toggle()

Переключает видимость боковой панели.

```javascript
api.toggle(0);
```

### Макет и стиль

У каждого компонента Bento есть небольшая библиотека CSS, которую следует подключать, чтобы гарантировать правильную загрузку без [сдвигов содержимого](https://web.dev/cls/). Поскольку приоритетность CSS определяется порядком, следует вручную убедиться, что таблицы стилей подключаются раньше каких-либо пользовательских стилей.

```html
<link
  rel="stylesheet"
  type="text/css"
  href="https://cdn.ampproject.org/v0/bento-sidebar-1.0.css"
/>
```

Как вариант, вы также можете использовать встраиваемые облегченные стили от предыдущей версии компонента:

```html
<style>
  bento-sidebar:not([open]) {
    display: none !important;
  }
</style>
```

#### Пользовательские стили

Компонент `bento-sidebar` поддерживает стилизацию при помощи стандартных CSS-атрибутов.

- Атрибут `width` элемента `bento-sidebar` используется для изменения ширины (по умолчанию — 45px).
- При необходимости элементу `bento-sidebar` можно задать высоту, указав атрибут height. Если высота превышает 100vw, у боковой панели будет вертикальная полоса прокрутки. Предопределенная высота боковой панели — 100vw, но при помощи CSS ее можно уменьшить.
- Текущее состояние боковой панели отражается при помощи атрибута `open`, устанавливаемого элементу `bento-sidebar`, когда боковая панель на странице находится в открытом состоянии.

```css
bento-sidebar[open] {
  height: 100%;
  width: 50px;
}
```

### Рекомендации по UX

При использовании `<bento-sidebar>` не забывайте, что многие пользователи будут просматривать вашу страницу с мобильных устройств, в связи с чем на странице может отображаться заголовок с фиксированной позицией. Кроме того, многие браузеры размещают в верхней части экрана свою собственную панель. В такой ситуации отображение в верхней части экрана еще одного фиксированного элемента с содержимым, не несущим смысловой нагрузки, является нерациональным использованием пространства.

Поэтому не следует использовать для размещения кнопки открытия боковой панели фиксированный заголовок, занимающий всю ширину страницы.

- Боковая панель может отображаться только в левой или правой части страницы.
- Максимальная высота боковой панели — 100vh, при превышении которых появляется вертикальная полоса прокрутки. По умолчанию высота равна 100vh, но ее можно переопределить через CSS.
- Ширину боковой панели можно настраивать при помощи CSS.
- `<bento-sidebar>`  *рекомендуется* размещать непосредственно внутри элемента `<body>`, чтобы сохранить логику структуры DOM, необходимую для работы специальных возможностей, а также не допустить влияния контейнера на поведение элемента. Учтите, что если один из вышестоящих по отношению к `bento-sidebar` элементов имеет явно заданный `z-index`, это может привести к отображению поверх боковой панели других элементов (таких, как заголовки) и нарушению ее функциональности.

### Атрибуты

#### side

Указывает, с какой стороны должна открываться боковая панель: `left` (слева) или `right` (справа). Если параметр `side` не указан, то значение `side` определяется на основе атрибута `dir` элемента `body` (`ltr` =&gt; `left`, `rtl` =&gt; `right`); если `dir` не определен, то по умолчанию в качестве значения `side` используется `left`.

#### open

Этот атрибут присутствует, когда боковая панель открыта.

#### toolbar

Этот атрибут используется в дочерних элементах `<nav toolbar="(media-query)" toolbar-target="elementID">` для указания медиазапроса, определяющего условия отображения панели инструментов. Подробнее об использовании панелей инструментов см. в [соответствующем разделе](#bento-toolbar).

#### toolbar-target

Этот атрибут используется в дочерних элементах `<nav toolbar="(media-query)" toolbar-target="elementID">` для указания идентификатора целевого элемента на странице. При помощи атрибута `toolbar-target` можно указать идентификатор элемента, внутри которого будет размещена панель инструментов (без использования соответствующих стандартных стилей). Подробнее об использовании панелей инструментов см. в [соответствующем разделе](#bento-toolbar).

---

## Компонент для Preact/React

В приведенных ниже примерах демонстрируется использование `<BentoSidebar>` в качестве функционального компонента, который можно использовать с библиотеками Preact или React.

### Пример: импорт через npm

```sh
npm install @bentoproject/sidebar
```

```javascript
import React from 'react';
import {BentoSidebar} from '@bentoproject/sidebar/react';
import '@bentoproject/sidebar/styles.css';

function App() {
  return (
    <BentoSidebar>
      <ul>
        <li>Nav item 1</li>
        <li>Nav item 2</li>
        <li>Nav item 3</li>
        <li>Nav item 4</li>
        <li>Nav item 5</li>
        <li>Nav item 6</li>
      </ul>
    </BentoSidebar>
  );
}
```

### Bento Toolbar

Вы можете создать элемент Bento Toolbar, отображаемый внутри `<body>`. Для этого необходимо разместить внутри `<bento-sidebar>` дочерний элемент `<BentoSidebarToolbar>` и в качестве значения prop `toolbar` указать медиазапрос, а в качестве значения `toolbarTarget` — идентификатор целевого элемента. Prop `toolbar` создает копию элемента `<BentoSidebarToolbar>` вместе с дочерними элементами и добавляет ее к содержимому элемента `toolbarTarget`.

#### Поведение

- В рамках боковой панели можно создавать панели инструментов, добавляя дочерние элементы nav с указанием props `toolbar` и `toolbarTarget`.
- Элемент nav должен быть дочерним по отношению к `<BentoSidebar>` и иметь следующий формат: `<BentoSidebarToolbar toolbar="(media-query)" toolbarTarget="elementID">`.
    - Пример допустимого применения prop toolbar: `<BentoSidebarToolbar toolbar="(max-width: 1024px)" toolbarTarget="target-element">`.
- Панель инструментов отображается только в случае срабатывания медиазапроса, указанного в prop `toolbar`. Кроме того, для отображения панели инструментов на странице должен присутствовать элемент с идентификатором, указанным в prop `toolbarTarget`.

##### Пример: простая панель инструментов

В приведенном ниже примере атрибут `toolbar` используется для отображения панели инструментов, если ширина окна не превышает 767px. Панель инструментов содержит поле ввода для поискового запроса. Элемент с атрибутом `toolbar` будет добавлен к содержимому элемента `<div id="target-element">`.

```jsx
<>
  <BentoSidebar>
    <ul>
      <li>Nav item 1</li>
      <li>Nav item 2</li>
      <li>Nav item 3</li>
      <li>Nav item 4</li>
      <li>Nav item 5</li>
      <li>Nav item 6</li>
    </ul>
    <BentoSidebarToolbar
      toolbar="(max-width: 767px)"
      toolbarTarget="target-element"
    >
      <ul>
        <li>Toolbar Item 1</li>
        <li>Toolbar Item 2</li>
      </ul>
    </BentoSidebarToolbar>
  </BentoSidebar>

  <div id="target-element"></div>
</>
```

### Интерактивность и использование API

API компонентов Bento предоставляет высокий уровень интерактивности. Для доступа к API компонента `BentoSidebar` необходимо передать компоненту `ref`:

```javascript
import React, {createRef} from 'react';
const ref = createRef();

function App() {
  return (
    <BentoSidebar ref={ref}>
      <ul>
        <li>Nav item 1</li>
        <li>Nav item 2</li>
        <li>Nav item 3</li>
        <li>Nav item 4</li>
        <li>Nav item 5</li>
        <li>Nav item 6</li>
      </ul>
    </BentoSidebar>
  );
}
```

#### Действия

API компонента `BentoSidebar` позволяет выполнять следующие действия:

##### open()

Открывает боковую панель.

```javascript
ref.current.open();
```

##### close()

Закрывает боковую панель.

```javascript
ref.current.close();
```

##### toggle()

Переключает видимость боковой панели.

```javascript
ref.current.toggle(0);
```

### Макет и стиль

Компонент `BentoSidebar` поддерживает стилизацию при помощи стандартных CSS-атрибутов.

- Атрибут `width` элемента `bento-sidebar` используется для изменения ширины (по умолчанию — 45px).
- При необходимости элементу `bento-sidebar` можно задать высоту, указав атрибут height. Если высота превышает 100vw, у боковой панели будет вертикальная полоса прокрутки. Предопределенная высота боковой панели — 100vw, но при помощи CSS ее можно уменьшить.

Чтобы компонент отображался так, как вы хотите, обязательно укажите его размер. Это можно сделать как при помощи встраиваемого стиля:

```jsx
<BentoSidebar style={{width: 300, height: '100%'}}>
  <ul>
    <li>Nav item 1</li>
    <li>Nav item 2</li>
    <li>Nav item 3</li>
    <li>Nav item 4</li>
    <li>Nav item 5</li>
    <li>Nav item 6</li>
  </ul>
</BentoSidebar>
```

...так и при помощи `className`:

```jsx
<BentoSidebar className="custom-styles">
  <ul>
    <li>Nav item 1</li>
    <li>Nav item 2</li>
    <li>Nav item 3</li>
    <li>Nav item 4</li>
    <li>Nav item 5</li>
    <li>Nav item 6</li>
  </ul>
</BentoSidebar>
```

```css
.custom-styles {
  height: 100%;
  width: 300px;
}
```

### Рекомендации по UX

При использовании `<BentoSidebar>` не забывайте, что многие пользователи будут просматривать вашу страницу с мобильных устройств, в связи с чем на странице может отображаться заголовок с фиксированной позицией. Кроме того, многие браузеры размещают в верхней части экрана свою собственную панель. В такой ситуации отображение в верхней части экрана еще одного фиксированного элемента с содержимым, не несущим смысловой нагрузки, является нерациональным использованием пространства.

Поэтому не следует использовать для размещения кнопки открытия боковой панели фиксированный заголовок, занимающий всю ширину страницы.

- Боковая панель может отображаться только в левой или правой части страницы.
- Максимальная высота боковой панели — 100vh, при превышении которых появляется вертикальная полоса прокрутки. По умолчанию высота равна 100vh, но ее можно переопределить через CSS.
- Ширину боковой панели можно настраивать при помощи CSS.
- `<BentoSidebar>`  *рекомендуется* размещать непосредственно внутри элемента `<body>`, чтобы сохранить логику структуры DOM, необходимую для работы специальных возможностей, а также не допустить влияния контейнера на поведение элемента. Учтите, что если один из вышестоящих по отношению к `BentoSidebar` элементов имеет явно заданный `z-index`, это может привести к отображению поверх боковой панели других элементов (таких, как заголовки) и нарушению ее функциональности.

### Props

#### side

Указывает, с какой стороны должна открываться боковая панель: `left` (слева) или `right` (справа). Если параметр `side` не указан, то значение `side` определяется на основе атрибута `dir` элемента `body` (`ltr` =&gt; `left`, `rtl` =&gt; `right`); если `dir` не определен, то по умолчанию в качестве значения `side` используется `left`.

#### toolbar

Этот prop используется в дочерних элементах `<BentoSidebarToolbar toolbar="(media-query)" toolbarTarget="elementID">` для указания медиазапроса, определяющего условия отображения панели инструментов. Подробнее об использовании панелей инструментов см. в [соответствующем разделе](#bento-toolbar).

#### toolbarTarget

Этот атрибут используется в дочерних элементах `<BentoSidebarToolbar toolbar="(media-query)" toolbarTarget="elementID">` для указания идентификатора целевого элемента на странице. При помощи prop `toolbarTarget` можно указать идентификатор элемента, внутри которого будет размещена панель инструментов (без использования соответствующих стандартных стилей). Подробнее об использовании панелей инструментов см. в [соответствующем разделе](#bento-toolbar).
