{
  "vars": {
    "clientId": "CLIENT_ID(__gads)",
    "startJson": "%7B",
    "endJson": "%7D",
    "q": "%22",
    "c": "%3A",
    ",": "%2C%20",
    "sourceKV": "${q}source${q}${c} ${q}${source}${q}",
    "activeKV": "${q}is_active${q}${c} ${q}${active}${q}",
    "adnameKV": "${q}ad_name${q}${c} ${q}${adname}${q}",
    "skusKV": "${q}skus${q}${c} ${q}${skus}${q}",
    "productKV": "${q}product${q}${c} ${q}${product}${q}"
  },
  "requests": {
    "baseParams": "u_tz=240&v=1&cookie=${clientId}&cdm=${sourceHostName}&_amp_source_origin=${sourceHost}",
    "baseUrl": "https://pubads.g.doubleclick.net/subopt/data?${baseParams}",
    "stateParams": "states=${publicationId}%3A${state}%3A${productId}",
    "eventParams": "events=${publicationId}%3A${event}%3A${startJson}${keyValues}${endJson}",
    "sendSubscriptionState": "${baseUrl}&${stateParams}",
    "sendEvent": "${baseUrl}&${eventParams}"
  },
  "triggers": {
    "onSubscribed": {
      "on": "subscriptions-access-granted",
      "request": "sendSubscriptionState",
      "vars": {
        "state": "subscriber"
      }
    },
    "onNotSubscribed": {
      "on": "subscriptions-access-denied",
      "request": "sendSubscriptionState",
      "vars": {
        "state": "non_subscriber"
      }
    },
    "onShowOffers": {
      "on": "subscriptions-action-showOffers-started",
      "request": "sendEvent",
      "vars": {
        "event": "offers_shown",
        "active": "true",
        "keyValues": "${skusKV}${,}${sourceKV}${,}${activeKV}"
      }
    },
    "onPaywall": {
      "on": "subscriptions-paywall-activated",
      "request": "sendEvent",
      "vars": {
        "event": "paywall",
        "active": "false",
        "keyValues": "${sourceKV}${,}${activeKV}"
      }
    },
    "onSelectOffer": {
      "on": "subscriptions-action-subscribe-started",
      "request": "sendEvent",
      "vars": {
        "event": "offer_selected",
        "active": "true",
        "keyValues": "${productKV}${,}${activeKV}"
      }
    },
    "onStartBuyflow": {
      "on": "subscriptions-action-subscribe-started",
      "request": "sendEvent",
      "vars": {
        "event": "payment_flow_start",
        "active": "true",
        "keyValues": "${productKV}${,}${activeKV}"
      }
    },
    "onPaymentComplete": {
      "on": "subscriptions-action-subscribe-success",
      "request": "sendEvent",
      "vars": {
        "event": "payment_complete",
        "active": "true",
        "keyValues": "${productKV}${,}${activeKV}"
      }
    }
  },
  "transport": {
    "beacon": true,
    "xhrpost": false,
    "image": false
  }
}
