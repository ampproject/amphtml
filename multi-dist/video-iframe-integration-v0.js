(function(){var $JSCompiler_prototypeAlias$$;function $dict$$module$src$utils$object$$($opt_initial$jscomp$1$$){return $opt_initial$jscomp$1$$||{}};var $optsSupported$$module$src$event_helper_listen$$;
function $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$11$$,$eventType$jscomp$3$$,$listener$jscomp$62$$){var $opt_evtListenerOpts$$=void 0,$localElement$$=$element$jscomp$11$$,$localListener$$=$listener$jscomp$62$$;var $wrapped$$=function($element$jscomp$11$$){try{return $localListener$$($element$jscomp$11$$)}catch($e$jscomp$7$$){throw self.reportError($e$jscomp$7$$),$e$jscomp$7$$;}};var $optsSupported$$=$detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(),$capture$$=
!1;$opt_evtListenerOpts$$&&($capture$$=$opt_evtListenerOpts$$.capture);$localElement$$.addEventListener($eventType$jscomp$3$$,$wrapped$$,$optsSupported$$?$opt_evtListenerOpts$$:$capture$$)}
function $detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(){if(void 0!==$optsSupported$$module$src$event_helper_listen$$)return $optsSupported$$module$src$event_helper_listen$$;$optsSupported$$module$src$event_helper_listen$$=!1;try{var $options$jscomp$14$$={get capture(){$optsSupported$$module$src$event_helper_listen$$=!0}};self.addEventListener("test-options",null,$options$jscomp$14$$);self.removeEventListener("test-options",null,$options$jscomp$14$$)}catch($err$jscomp$3$$){}return $optsSupported$$module$src$event_helper_listen$$}
;function $tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($component$jscomp$4$$,$fallback$$){$fallback$$=void 0===$fallback$$?"":$fallback$$;try{return decodeURIComponent($component$jscomp$4$$)}catch($e$jscomp$8$$){return $fallback$$}};var $regex$$module$src$url_parse_query_string$$=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;
function $parseQueryString_$$module$src$url_parse_query_string$$($queryString$$){var $params$jscomp$1$$=Object.create(null);if(!$queryString$$)return $params$jscomp$1$$;for(var $match$$;$match$$=$regex$$module$src$url_parse_query_string$$.exec($queryString$$);){var $name$jscomp$70$$=$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$$[1],$match$$[1]),$value$jscomp$90$$=$match$$[2]?$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$$[2],$match$$[2]):"";
$params$jscomp$1$$[$name$jscomp$70$$]=$value$jscomp$90$$}return $params$jscomp$1$$};var $rtvVersion$$module$src$mode$$="";
function $getMode$$module$src$mode$$($opt_win$$){var $win$$=$opt_win$$||self;if($win$$.AMP_MODE)var $JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$=$win$$.AMP_MODE;else{$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$=$win$$;var $JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$=self.AMP_CONFIG||{},$JSCompiler_runningTests$jscomp$inline_20$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$.test||!(!$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.AMP_TEST&&
!$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.__karma__),$JSCompiler_isLocalDev$jscomp$inline_21$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$.localDev||$JSCompiler_runningTests$jscomp$inline_20$$,$JSCompiler_hashQuery$jscomp$inline_22$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.location.originalHash||$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.location.hash);
$JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$=$JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$.spt;var $JSCompiler_searchQuery$jscomp$inline_24$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.location.search);$rtvVersion$$module$src$mode$$||($rtvVersion$$module$src$mode$$=$JSCompiler_isLocalDev$jscomp$inline_21$$?"1904281823091":$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.AMP_CONFIG&&
$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.AMP_CONFIG.v?$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.AMP_CONFIG.v:"011904281823091");$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$=$win$$.AMP_MODE={localDev:$JSCompiler_isLocalDev$jscomp$inline_21$$,development:!("1"!=$JSCompiler_hashQuery$jscomp$inline_22$$.development&&!$JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$.AMP_DEV_MODE),examiner:"2"==$JSCompiler_hashQuery$jscomp$inline_22$$.development,
filter:$JSCompiler_hashQuery$jscomp$inline_22$$.filter,geoOverride:$JSCompiler_hashQuery$jscomp$inline_22$$["amp-geo"],minified:!0,lite:void 0!=$JSCompiler_searchQuery$jscomp$inline_24$$.amp_lite,test:$JSCompiler_runningTests$jscomp$inline_20$$,log:$JSCompiler_hashQuery$jscomp$inline_22$$.log,version:"1904281823091",rtvVersion:$rtvVersion$$module$src$mode$$,singlePassType:$JSCompiler_AMP_CONFIG$jscomp$inline_16_JSCompiler_singlePassType$jscomp$inline_23$$}}return $JSCompiler_temp$jscomp$12_JSCompiler_win$jscomp$inline_15$$}
;self.log=self.log||{user:null,dev:null,userForEmbed:null};function $listen$$module$src$event_helper$$($element$jscomp$12$$,$eventType$jscomp$4$$,$listener$jscomp$63$$){$internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$12$$,$eventType$jscomp$4$$,$listener$jscomp$63$$)};function $once$$module$src$utils$function$$($fn$jscomp$2$$){var $evaluated$$=!1,$retValue$$=null,$callback$jscomp$55$$=$fn$jscomp$2$$;return function($fn$jscomp$2$$){for(var $args$$=[],$$jscomp$restIndex$$=0;$$jscomp$restIndex$$<arguments.length;++$$jscomp$restIndex$$)$args$$[$$jscomp$restIndex$$-0]=arguments[$$jscomp$restIndex$$];$evaluated$$||($retValue$$=$callback$jscomp$55$$.apply(self,$args$$),$evaluated$$=!0,$callback$jscomp$55$$=null);return $retValue$$}};function $tryResolve$$module$src$utils$promise$$($fn$jscomp$3$$){new Promise(function($resolve$jscomp$3$$){$resolve$jscomp$3$$($fn$jscomp$3$$())})};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function $tryParseJson$$module$src$json$$($json$jscomp$1$$){var $opt_onFailed$$;try{return JSON.parse($json$jscomp$1$$)}catch($e$jscomp$15$$){return $opt_onFailed$$&&$opt_onFailed$$($e$jscomp$15$$),null}};function $userAssert$$module$src$video_iframe_integration$$($shouldBeTrueish$jscomp$4$$,$args$jscomp$1$$){for(var $$jscomp$restParams$jscomp$1$$=[],$$jscomp$restIndex$jscomp$1$$=1;$$jscomp$restIndex$jscomp$1$$<arguments.length;++$$jscomp$restIndex$jscomp$1$$)$$jscomp$restParams$jscomp$1$$[$$jscomp$restIndex$jscomp$1$$-1]=arguments[$$jscomp$restIndex$jscomp$1$$];if(!$shouldBeTrueish$jscomp$4$$)throw Error($$jscomp$restParams$jscomp$1$$.join(" "));return $shouldBeTrueish$jscomp$4$$}
var $validMethods$$module$src$video_iframe_integration$$="pause play mute unmute fullscreenenter fullscreenexit showcontrols hidecontrols".split(" "),$validEvents$$module$src$video_iframe_integration$$="canplay load playing pause ended muted unmuted".split(" ");
function $AmpVideoIntegration$$module$src$video_iframe_integration$$($win$jscomp$11$$){var $$jscomp$this$jscomp$1$$=this;this.$isAmpVideoIntegration_$=!0;this.$callCounter_$=0;this.$callbacks_$={};this.$win_$=$win$jscomp$11$$;this.$methods_$={};this.$listenToOnce_$=$once$$module$src$utils$function$$(function(){$listenTo$$module$src$video_iframe_integration$$($$jscomp$this$jscomp$1$$.$win_$,function($win$jscomp$11$$){var $JSCompiler_method$jscomp$inline_40_e$jscomp$16$$=$win$jscomp$11$$.id;"number"===
typeof $JSCompiler_method$jscomp$inline_40_e$jscomp$16$$&&isFinite($JSCompiler_method$jscomp$inline_40_e$jscomp$16$$)&&$$jscomp$this$jscomp$1$$.$callbacks_$[$JSCompiler_method$jscomp$inline_40_e$jscomp$16$$]?((0,$$jscomp$this$jscomp$1$$.$callbacks_$[$JSCompiler_method$jscomp$inline_40_e$jscomp$16$$])($win$jscomp$11$$.args),delete $$jscomp$this$jscomp$1$$.$callbacks_$[$JSCompiler_method$jscomp$inline_40_e$jscomp$16$$]):"method"==$win$jscomp$11$$.event&&($win$jscomp$11$$=$win$jscomp$11$$.method,$win$jscomp$11$$ in
$$jscomp$this$jscomp$1$$.$methods_$&&$$jscomp$this$jscomp$1$$.$methods_$[$win$jscomp$11$$].call())})});this.$usedListenToHelper_$=this.$muted_$=!1;this.$getMetadataOnce_$=$once$$module$src$utils$function$$(function(){var $win$jscomp$11$$=$tryParseJson$$module$src$json$$($$jscomp$this$jscomp$1$$.$win_$.name),$canonicalUrl$$=$win$jscomp$11$$.canonicalUrl,$sourceUrl$$=$win$jscomp$11$$.sourceUrl;return{canonicalUrl:$canonicalUrl$$,sourceUrl:$sourceUrl$$}})}$JSCompiler_prototypeAlias$$=$AmpVideoIntegration$$module$src$video_iframe_integration$$.prototype;
$JSCompiler_prototypeAlias$$.getMetadata=function(){return this.$getMetadataOnce_$()};
$JSCompiler_prototypeAlias$$.method=function($name$jscomp$75$$,$callback$jscomp$67$$){$userAssert$$module$src$video_iframe_integration$$(-1<$validMethods$$module$src$video_iframe_integration$$.indexOf($name$jscomp$75$$),"Invalid method "+$name$jscomp$75$$+".");var $wrappedCallback$$="play"==$name$jscomp$75$$||"pause"==$name$jscomp$75$$?$JSCompiler_StaticMethods_safePlayOrPause_$$($callback$jscomp$67$$):$callback$jscomp$67$$;this.$methods_$[$name$jscomp$75$$]=$wrappedCallback$$;this.$listenToOnce_$()};
$JSCompiler_prototypeAlias$$.listenTo=function($type$jscomp$135$$,$obj$jscomp$31$$,$opt_initializer$jscomp$1$$){var $$jscomp$this$jscomp$2$$=this;$userAssert$$module$src$video_iframe_integration$$(!this.$usedListenToHelper_$,"%s `listenTo` is meant to be used once per page.","<amp-video-iframe>");var $types$$={jwplayer:function(){$userAssert$$module$src$video_iframe_integration$$(!$opt_initializer$jscomp$1$$,"%s jwplayer integration does not take an initializer","<amp-video-iframe>");$$jscomp$this$jscomp$2$$.$listenToJwPlayer_$($obj$jscomp$31$$)},
videojs:function(){$JSCompiler_StaticMethods_listenToVideoJs_$$($$jscomp$this$jscomp$2$$,$obj$jscomp$31$$,$opt_initializer$jscomp$1$$)}};$userAssert$$module$src$video_iframe_integration$$($types$$[$type$jscomp$135$$.toLowerCase()],"%s Invalid listener type ["+$type$jscomp$135$$+"]. "+("Valid types are ["+Object.keys($types$$).join(", ")+"]"),"<amp-video-iframe>")();this.$usedListenToHelper_$=!0};
$JSCompiler_prototypeAlias$$.$listenToJwPlayer_$=function($player$$){var $$jscomp$arguments$$=arguments,$$jscomp$this$jscomp$3$$=this;["error","setupError"].forEach(function($e$jscomp$17$$){$player$$.on($e$jscomp$17$$,function(){$userAssert$$module$src$video_iframe_integration$$.apply(null,[!1].concat($$jscomp$arguments$$));$$jscomp$this$jscomp$3$$.postEvent("error")})});["adSkipped","adComplete","adError"].forEach(function($$jscomp$arguments$$){$player$$.on($$jscomp$arguments$$,function(){return $$jscomp$this$jscomp$3$$.postEvent("ad_end")})});
$player$$.on("adStarted",function(){return $$jscomp$this$jscomp$3$$.postEvent("ad_start")});var $redispatchAs$$={play:"playing",ready:"canplay",pause:"pause"};Object.keys($redispatchAs$$).forEach(function($$jscomp$arguments$$){$player$$.on($$jscomp$arguments$$,function(){return $$jscomp$this$jscomp$3$$.postEvent($redispatchAs$$[$$jscomp$arguments$$])})});$player$$.on("volume",function($player$$){return $JSCompiler_StaticMethods_onVolumeChange_$$($$jscomp$this$jscomp$3$$,$player$$.volume)});this.method("play",
function(){return $player$$.play()});this.method("pause",function(){return $player$$.pause()});this.method("mute",function(){return $player$$.setMute(!0)});this.method("unmute",function(){return $player$$.setMute(!1)});this.method("showcontrols",function(){return $player$$.setControls(!0)});this.method("hidecontrols",function(){return $player$$.setControls(!1)});this.method("fullscreenenter",function(){return $player$$.setFullscreen(!0)});this.method("fullscreenexit",function(){return $player$$.setFullscreen(!1)})};
function $JSCompiler_StaticMethods_listenToVideoJs_$$($JSCompiler_StaticMethods_listenToVideoJs_$self$$,$element$jscomp$35$$,$opt_initializer$jscomp$2$$){var $initializer$$=$userAssert$$module$src$video_iframe_integration$$($opt_initializer$jscomp$2$$||$JSCompiler_StaticMethods_listenToVideoJs_$self$$.$win_$.videojs,"Video.JS not imported or initializer undefined."),$player$jscomp$1$$=$initializer$$($element$jscomp$35$$);$player$jscomp$1$$.ready(function(){var $opt_initializer$jscomp$2$$="canplay";
["playing","pause","ended"].forEach(function($opt_initializer$jscomp$2$$){$player$jscomp$1$$.on($opt_initializer$jscomp$2$$,function(){return $JSCompiler_StaticMethods_listenToVideoJs_$self$$.postEvent($opt_initializer$jscomp$2$$)})});if(3<=$player$jscomp$1$$.readyState())$JSCompiler_StaticMethods_listenToVideoJs_$self$$.postEvent($opt_initializer$jscomp$2$$);else $player$jscomp$1$$.on($opt_initializer$jscomp$2$$,function(){return $JSCompiler_StaticMethods_listenToVideoJs_$self$$.postEvent($opt_initializer$jscomp$2$$)});
$listen$$module$src$event_helper$$($element$jscomp$35$$,"volumechange",function(){return $JSCompiler_StaticMethods_onVolumeChange_$$($JSCompiler_StaticMethods_listenToVideoJs_$self$$,$player$jscomp$1$$.volume())});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("play",function(){return $player$jscomp$1$$.play()});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("pause",function(){return $player$jscomp$1$$.pause()});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("mute",function(){return $player$jscomp$1$$.muted(!0)});
$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("unmute",function(){return $player$jscomp$1$$.muted(!1)});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("showcontrols",function(){return $player$jscomp$1$$.controls(!0)});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("hidecontrols",function(){return $player$jscomp$1$$.controls(!1)});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("fullscreenenter",function(){return $player$jscomp$1$$.requestFullscreen()});$JSCompiler_StaticMethods_listenToVideoJs_$self$$.method("fullscreenexit",
function(){return $player$jscomp$1$$.exitFullscreen()})})}
function $JSCompiler_StaticMethods_onVolumeChange_$$($JSCompiler_StaticMethods_onVolumeChange_$self$$,$newVolume$$){.01>$newVolume$$?($JSCompiler_StaticMethods_onVolumeChange_$self$$.$muted_$=!0,$JSCompiler_StaticMethods_onVolumeChange_$self$$.postEvent("muted")):$JSCompiler_StaticMethods_onVolumeChange_$self$$.$muted_$&&($JSCompiler_StaticMethods_onVolumeChange_$self$$.$muted_$=!1,$JSCompiler_StaticMethods_onVolumeChange_$self$$.postEvent("unmuted"))}
function $JSCompiler_StaticMethods_safePlayOrPause_$$($callback$jscomp$69$$){return function(){try{$tryResolve$$module$src$utils$promise$$(function(){return $callback$jscomp$69$$()})}catch($e$jscomp$22$$){}}}
$JSCompiler_prototypeAlias$$.postEvent=function($event$jscomp$9$$){$userAssert$$module$src$video_iframe_integration$$(-1<$validEvents$$module$src$video_iframe_integration$$.indexOf($event$jscomp$9$$),"%s Invalid event ["+$event$jscomp$9$$+"]","<amp-video-iframe>");$JSCompiler_StaticMethods_postToParent_$$(this,$dict$$module$src$utils$object$$({event:$event$jscomp$9$$}))};
$JSCompiler_prototypeAlias$$.postAnalyticsEvent=function($eventType$jscomp$7$$,$opt_vars$$){$JSCompiler_StaticMethods_postToParent_$$(this,$dict$$module$src$utils$object$$({event:"analytics",analytics:{eventType:$eventType$jscomp$7$$,vars:$opt_vars$$}}))};
function $JSCompiler_StaticMethods_postToParent_$$($JSCompiler_StaticMethods_postToParent_$self$$,$data$jscomp$58$$,$opt_callback$jscomp$5$$){var $id$jscomp$8$$=$JSCompiler_StaticMethods_postToParent_$self$$.$callCounter_$++,$completeData$$=Object.assign({id:$id$jscomp$8$$},$data$jscomp$58$$);!$getMode$$module$src$mode$$($JSCompiler_StaticMethods_postToParent_$self$$.$win_$).test&&$JSCompiler_StaticMethods_postToParent_$self$$.$win_$.parent&&$JSCompiler_StaticMethods_postToParent_$self$$.$win_$.parent.postMessage($completeData$$,
"*");$opt_callback$jscomp$5$$&&($JSCompiler_StaticMethods_postToParent_$self$$.$callbacks_$[$id$jscomp$8$$]=$opt_callback$jscomp$5$$)}$JSCompiler_prototypeAlias$$.getIntersection=function($callback$jscomp$70$$){this.$listenToOnce_$();$JSCompiler_StaticMethods_postToParent_$$(this,$dict$$module$src$utils$object$$({method:"getIntersection"}),$callback$jscomp$70$$)};
function $listenTo$$module$src$video_iframe_integration$$($win$jscomp$12$$,$onMessage$$){$listen$$module$src$event_helper$$($win$jscomp$12$$,"message",function($win$jscomp$12$$){($win$jscomp$12$$=$tryParseJson$$module$src$json$$($win$jscomp$12$$.data))&&$onMessage$$($win$jscomp$12$$)})}
function $adopt$$module$src$video_iframe_integration$$(){var $global$jscomp$1$$=self;$userAssert$$module$src$video_iframe_integration$$(!$global$jscomp$1$$.__AMP__VIDEO_IFRAME__,"%s video-iframe-integration-v0.js should only be included once.");$global$jscomp$1$$.__AMP__VIDEO_IFRAME__=!0;$global$jscomp$1$$.reportError=console.error.bind(console);var $integration$$=new $AmpVideoIntegration$$module$src$video_iframe_integration$$($global$jscomp$1$$),$callbacks$$=$global$jscomp$1$$.AmpVideoIframe=$global$jscomp$1$$.AmpVideoIframe||
[];$callbacks$$.push=function($global$jscomp$1$$){return $global$jscomp$1$$($integration$$)};$callbacks$$.forEach($callbacks$$.push)}$getMode$$module$src$mode$$(self).test||$adopt$$module$src$video_iframe_integration$$();})();

//# sourceMappingURL=video-iframe-integration-v0.js.map
