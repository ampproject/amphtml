(self.AMP=self.AMP||[]).push({n:"amp-experiment",v:"1904281823091",f:(function(AMP,_){
var $$jscomp$objectCreate$$="function"==typeof Object.create?Object.create:function($prototype$$){function $ctor$$(){}$ctor$$.prototype=$prototype$$;return new $ctor$$},$JSCompiler_temp$jscomp$15$$;
if("function"==typeof Object.setPrototypeOf)$JSCompiler_temp$jscomp$15$$=Object.setPrototypeOf;else{var $JSCompiler_inline_result$jscomp$16$$;a:{var $JSCompiler_x$jscomp$inline_22$$={a:!0},$JSCompiler_y$jscomp$inline_23$$={};try{$JSCompiler_y$jscomp$inline_23$$.__proto__=$JSCompiler_x$jscomp$inline_22$$;$JSCompiler_inline_result$jscomp$16$$=$JSCompiler_y$jscomp$inline_23$$.a;break a}catch($JSCompiler_e$jscomp$inline_24$$){}$JSCompiler_inline_result$jscomp$16$$=!1}$JSCompiler_temp$jscomp$15$$=$JSCompiler_inline_result$jscomp$16$$?
function($target$jscomp$83$$,$proto$jscomp$3$$){$target$jscomp$83$$.__proto__=$proto$jscomp$3$$;if($target$jscomp$83$$.__proto__!==$proto$jscomp$3$$)throw new TypeError($target$jscomp$83$$+" is not extensible");return $target$jscomp$83$$}:null}var $$jscomp$setPrototypeOf$$=$JSCompiler_temp$jscomp$15$$;var $toString_$$module$src$types$$=Object.prototype.toString;self.log=self.log||{user:null,dev:null,userForEmbed:null};var $logs$$module$src$log$$=self.log;
function $userAssert$$module$src$log$$($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$,$opt_4$jscomp$1$$){if(!$logs$$module$src$log$$.user)throw Error("failed to call initLogConstructor");return $logs$$module$src$log$$.user.assert($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$,$opt_4$jscomp$1$$,void 0,void 0,void 0,void 0,void 0)};var $hasOwn_$$module$src$utils$object$$=Object.prototype.hasOwnProperty;function $Deferred$$module$src$utils$promise$$(){var $resolve$$,$reject$$;this.promise=new Promise(function($res$jscomp$1$$,$rej$$){$resolve$$=$res$jscomp$1$$;$reject$$=$rej$$});this.resolve=$resolve$$;this.reject=$reject$$};function $getService$$module$src$service$$($win$jscomp$9$$,$id$jscomp$11$$){$win$jscomp$9$$=$win$jscomp$9$$.__AMP_TOP||$win$jscomp$9$$;return $getServiceInternal$$module$src$service$$($win$jscomp$9$$,$id$jscomp$11$$)}
function $getServiceForDoc$$module$src$service$$($elementOrAmpDoc$$){var $ampdoc$jscomp$2_holder$jscomp$2$$=$getAmpdoc$$module$src$service$$($elementOrAmpDoc$$);$ampdoc$jscomp$2_holder$jscomp$2$$=$getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$2_holder$jscomp$2$$);return $getServiceInternal$$module$src$service$$($ampdoc$jscomp$2_holder$jscomp$2$$,"viewer")}
function $getServicePromiseForDoc$$module$src$service$$($JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$,$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$){$JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$=$getAmpdocServiceHolder$$module$src$service$$($JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$);var $JSCompiler_cached$jscomp$inline_30$$=$getServicePromiseOrNullInternal$$module$src$service$$($JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$,
$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$);$JSCompiler_cached$jscomp$inline_30$$?$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$=$JSCompiler_cached$jscomp$inline_30$$:($JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$=$getServices$$module$src$service$$($JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$),$JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$[$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$]=
$emptyServiceHolderWithPromise$$module$src$service$$(),$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$=$JSCompiler_holder$jscomp$inline_28_JSCompiler_services$jscomp$inline_31_elementOrAmpDoc$jscomp$1$$[$JSCompiler_inline_result$jscomp$18_id$jscomp$17$$].promise);return $JSCompiler_inline_result$jscomp$18_id$jscomp$17$$}
function $getAmpdoc$$module$src$service$$($nodeOrDoc$jscomp$3$$){return $nodeOrDoc$jscomp$3$$.nodeType?$getService$$module$src$service$$(($nodeOrDoc$jscomp$3$$.ownerDocument||$nodeOrDoc$jscomp$3$$).defaultView,"ampdoc").getAmpDoc($nodeOrDoc$jscomp$3$$):$nodeOrDoc$jscomp$3$$}
function $getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$){$ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$=$getAmpdoc$$module$src$service$$($ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$);return $ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$.isSingleDoc()?$ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$.win:$ampdoc$jscomp$4_nodeOrDoc$jscomp$4$$}
function $getServiceInternal$$module$src$service$$($holder$jscomp$4_s$jscomp$10$$,$id$jscomp$19$$){var $services$$=$getServices$$module$src$service$$($holder$jscomp$4_s$jscomp$10$$);$holder$jscomp$4_s$jscomp$10$$=$services$$[$id$jscomp$19$$];$holder$jscomp$4_s$jscomp$10$$.obj||($holder$jscomp$4_s$jscomp$10$$.obj=new $holder$jscomp$4_s$jscomp$10$$.ctor($holder$jscomp$4_s$jscomp$10$$.context),$holder$jscomp$4_s$jscomp$10$$.ctor=null,$holder$jscomp$4_s$jscomp$10$$.context=null,$holder$jscomp$4_s$jscomp$10$$.resolve&&
$holder$jscomp$4_s$jscomp$10$$.resolve($holder$jscomp$4_s$jscomp$10$$.obj));return $holder$jscomp$4_s$jscomp$10$$.obj}
function $getServicePromiseOrNullInternal$$module$src$service$$($holder$jscomp$8$$,$id$jscomp$23$$){var $s$jscomp$13$$=$getServices$$module$src$service$$($holder$jscomp$8$$)[$id$jscomp$23$$];if($s$jscomp$13$$){if($s$jscomp$13$$.promise)return $s$jscomp$13$$.promise;$getServiceInternal$$module$src$service$$($holder$jscomp$8$$,$id$jscomp$23$$);return $s$jscomp$13$$.promise=Promise.resolve($s$jscomp$13$$.obj)}return null}
function $getServices$$module$src$service$$($holder$jscomp$9$$){var $services$jscomp$5$$=$holder$jscomp$9$$.services;$services$jscomp$5$$||($services$jscomp$5$$=$holder$jscomp$9$$.services={});return $services$jscomp$5$$}
function $emptyServiceHolderWithPromise$$module$src$service$$(){var $deferred$$=new $Deferred$$module$src$utils$promise$$,$$jscomp$destructuring$var6_reject$jscomp$3$$=$deferred$$,$promise$jscomp$1$$=$$jscomp$destructuring$var6_reject$jscomp$3$$.promise,$resolve$jscomp$4$$=$$jscomp$destructuring$var6_reject$jscomp$3$$.resolve;$$jscomp$destructuring$var6_reject$jscomp$3$$=$$jscomp$destructuring$var6_reject$jscomp$3$$.reject;$promise$jscomp$1$$.catch(function(){});return{obj:null,promise:$promise$jscomp$1$$,
resolve:$resolve$jscomp$4$$,reject:$$jscomp$destructuring$var6_reject$jscomp$3$$,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function $getElementServiceForDoc$$module$src$element_service$$($element$jscomp$42$$){return $getElementServiceIfAvailableForDoc$$module$src$element_service$$($element$jscomp$42$$).then(function($element$jscomp$42$$){return $userAssert$$module$src$log$$($element$jscomp$42$$,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","userNotificationManager","amp-user-notification","amp-user-notification",
"amp-user-notification")})}
function $getElementServiceIfAvailableForDoc$$module$src$element_service$$($element$jscomp$43$$){var $s$jscomp$15$$=$getServicePromiseOrNullInternal$$module$src$service$$($getAmpdocServiceHolder$$module$src$service$$($element$jscomp$43$$),"userNotificationManager");if($s$jscomp$15$$)return $s$jscomp$15$$;var $ampdoc$jscomp$7$$=$getAmpdoc$$module$src$service$$($element$jscomp$43$$);return $ampdoc$jscomp$7$$.whenBodyAvailable().then(function(){var $element$jscomp$43$$=$ampdoc$jscomp$7$$.win;var $s$jscomp$15$$=
$ampdoc$jscomp$7$$.win.document.head;if($s$jscomp$15$$){var $JSCompiler_inline_result$jscomp$58_JSCompiler_scripts$jscomp$inline_60$$=[];$s$jscomp$15$$=$s$jscomp$15$$.querySelectorAll("script[custom-element]");for(var $JSCompiler_i$jscomp$inline_62$$=0;$JSCompiler_i$jscomp$inline_62$$<$s$jscomp$15$$.length;$JSCompiler_i$jscomp$inline_62$$++)$JSCompiler_inline_result$jscomp$58_JSCompiler_scripts$jscomp$inline_60$$.push($s$jscomp$15$$[$JSCompiler_i$jscomp$inline_62$$].getAttribute("custom-element"))}else $JSCompiler_inline_result$jscomp$58_JSCompiler_scripts$jscomp$inline_60$$=
[];$element$jscomp$43$$=$JSCompiler_inline_result$jscomp$58_JSCompiler_scripts$jscomp$inline_60$$.includes("amp-user-notification")?$getService$$module$src$service$$($element$jscomp$43$$,"extensions").waitForExtension($element$jscomp$43$$,"amp-user-notification"):Promise.resolve();return $element$jscomp$43$$}).then(function(){var $s$jscomp$15$$=$ampdoc$jscomp$7$$.win;return $s$jscomp$15$$.ampExtendedElements&&$s$jscomp$15$$.ampExtendedElements["amp-user-notification"]?$getServicePromiseForDoc$$module$src$service$$($element$jscomp$43$$,
"userNotificationManager"):null})};var $nameValidator$$module$extensions$amp_experiment$0_1$variant$$=/^[\w-]+$/;function $Variants$$module$extensions$amp_experiment$0_1$variant$$($ampdoc$jscomp$10$$){this.ampdoc=$ampdoc$jscomp$10$$;this.$variantsDeferred_$=new $Deferred$$module$src$utils$promise$$}$Variants$$module$extensions$amp_experiment$0_1$variant$$.prototype.init=function($variants$$){this.$variantsDeferred_$.resolve($variants$$)};$Variants$$module$extensions$amp_experiment$0_1$variant$$.prototype.getVariants=function(){return this.$variantsDeferred_$.promise};
$Variants$$module$extensions$amp_experiment$0_1$variant$$.prototype.whenReady=function(){return this.getVariants()};
function $allocateVariant$$module$extensions$amp_experiment$0_1$variant$$($ampdoc$jscomp$11$$,$experimentName$$,$config$jscomp$2$$){$assertName$$module$extensions$amp_experiment$0_1$variant$$($experimentName$$);$validateConfig$$module$extensions$amp_experiment$0_1$variant$$($config$jscomp$2$$);var $viewer$$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$11$$),$override$$=$viewer$$.getParam("amp-x-"+$experimentName$$);if($override$$&&$hasOwn_$$module$src$utils$object$$.call($config$jscomp$2$$.variants,
$override$$))return Promise.resolve($override$$);var $sticky$$=!1!==$config$jscomp$2$$.sticky,$cidScope$$=$config$jscomp$2$$.cidScope||"amp-experiment",$hasConsentPromise$$=Promise.resolve(!0);if($sticky$$&&$config$jscomp$2$$.consentNotificationId){var $element$jscomp$65$$=$ampdoc$jscomp$11$$.getHeadNode();$hasConsentPromise$$=$getElementServiceForDoc$$module$src$element_service$$($element$jscomp$65$$).then(function($ampdoc$jscomp$11$$){return $ampdoc$jscomp$11$$.getNotification($config$jscomp$2$$.consentNotificationId)}).then(function($ampdoc$jscomp$11$$){$userAssert$$module$src$log$$($ampdoc$jscomp$11$$,
"Notification not found: "+$config$jscomp$2$$.consentNotificationId);return $ampdoc$jscomp$11$$.isDismissed()})}return $hasConsentPromise$$.then(function($override$$){if(!$override$$)return null;var $viewer$$=$config$jscomp$2$$.group||$experimentName$$;return $getBucketTicket$$module$extensions$amp_experiment$0_1$variant$$($ampdoc$jscomp$11$$,$viewer$$,$sticky$$?$cidScope$$:null).then(function($ampdoc$jscomp$11$$){for(var $experimentName$$=0,$override$$=Object.keys($config$jscomp$2$$.variants).sort(),
$viewer$$=0;$viewer$$<$override$$.length;$viewer$$++)if($experimentName$$+=$config$jscomp$2$$.variants[$override$$[$viewer$$]],$ampdoc$jscomp$11$$<$experimentName$$)return $override$$[$viewer$$];return null})})}
function $validateConfig$$module$extensions$amp_experiment$0_1$variant$$($config$jscomp$3$$){var $variants$jscomp$1$$=$config$jscomp$3$$.variants;$userAssert$$module$src$log$$("[object Object]"===$toString_$$module$src$types$$.call($variants$jscomp$1$$)&&0<Object.keys($variants$jscomp$1$$).length,"Missing experiment variants config.");$config$jscomp$3$$.group&&$assertName$$module$extensions$amp_experiment$0_1$variant$$($config$jscomp$3$$.group);var $totalPercentage$$=0,$variantName$$;for($variantName$$ in $variants$jscomp$1$$)if($hasOwn_$$module$src$utils$object$$.call($variants$jscomp$1$$,
$variantName$$)){$assertName$$module$extensions$amp_experiment$0_1$variant$$($variantName$$);var $percentage$$=$variants$jscomp$1$$[$variantName$$];$userAssert$$module$src$log$$("number"===typeof $percentage$$&&0<$percentage$$&&100>$percentage$$,"Invalid percentage %s:%s. Has to be greater than 0 and less than 100",$variantName$$,$percentage$$);$totalPercentage$$+=$percentage$$}$userAssert$$module$src$log$$(100>=$totalPercentage$$.toFixed(6),"Total percentage is bigger than 100: "+$totalPercentage$$)}
function $getBucketTicket$$module$extensions$amp_experiment$0_1$variant$$($ampdoc$jscomp$12$$,$group$jscomp$1$$,$opt_cidScope$$){if(!$opt_cidScope$$)return Promise.resolve(100*$ampdoc$jscomp$12$$.win.Math.random());var $cidPromise$$=$getServicePromiseForDoc$$module$src$service$$($ampdoc$jscomp$12$$,"cid").then(function($ampdoc$jscomp$12$$){return $ampdoc$jscomp$12$$.get({scope:$opt_cidScope$$,createCookieIfNotPresent:!0},Promise.resolve())});return Promise.all([$cidPromise$$,$getService$$module$src$service$$($ampdoc$jscomp$12$$.win,
"crypto")]).then(function($ampdoc$jscomp$12$$){return $ampdoc$jscomp$12$$[1].uniform($group$jscomp$1$$+":"+$ampdoc$jscomp$12$$[0])}).then(function($ampdoc$jscomp$12$$){return 100*$ampdoc$jscomp$12$$})}function $assertName$$module$extensions$amp_experiment$0_1$variant$$($name$jscomp$75$$){$userAssert$$module$src$log$$($nameValidator$$module$extensions$amp_experiment$0_1$variant$$.test($name$jscomp$75$$),"Invalid name: %s. Allowed chars are [a-zA-Z0-9-_].",$name$jscomp$75$$)};function $AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$($var_args$jscomp$55$$){return AMP.BaseElement.apply(this,arguments)||this}var $JSCompiler_parentCtor$jscomp$inline_46$$=AMP.BaseElement;$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.prototype=$$jscomp$objectCreate$$($JSCompiler_parentCtor$jscomp$inline_46$$.prototype);$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.prototype.constructor=$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$;
if($$jscomp$setPrototypeOf$$)$$jscomp$setPrototypeOf$$($AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$,$JSCompiler_parentCtor$jscomp$inline_46$$);else for(var $JSCompiler_p$jscomp$inline_47$$ in $JSCompiler_parentCtor$jscomp$inline_46$$)if("prototype"!=$JSCompiler_p$jscomp$inline_47$$)if(Object.defineProperties){var $JSCompiler_descriptor$jscomp$inline_48$$=Object.getOwnPropertyDescriptor($JSCompiler_parentCtor$jscomp$inline_46$$,$JSCompiler_p$jscomp$inline_47$$);$JSCompiler_descriptor$jscomp$inline_48$$&&
Object.defineProperty($AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$,$JSCompiler_p$jscomp$inline_47$$,$JSCompiler_descriptor$jscomp$inline_48$$)}else $AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$[$JSCompiler_p$jscomp$inline_47$$]=$JSCompiler_parentCtor$jscomp$inline_46$$[$JSCompiler_p$jscomp$inline_47$$];$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.$superClass_$=$JSCompiler_parentCtor$jscomp$inline_46$$.prototype;
$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.prototype.isLayoutSupported=function($layout$jscomp$3$$){return"nodisplay"==$layout$jscomp$3$$||"container"==$layout$jscomp$3$$};
$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.prototype.buildCallback=function(){var $$jscomp$this$jscomp$1$$=this;return $getServicePromiseForDoc$$module$src$service$$(this.getAmpDoc(),"variant").then(function($variantsService$$){try{var $config$jscomp$4$$=$JSCompiler_StaticMethods_getConfig_$$($$jscomp$this$jscomp$1$$),$results$jscomp$1$$=Object.create(null),$variants$jscomp$2$$=Object.keys($config$jscomp$4$$).map(function($variantsService$$){return $allocateVariant$$module$extensions$amp_experiment$0_1$variant$$($$jscomp$this$jscomp$1$$.getAmpDoc(),
$variantsService$$,$config$jscomp$4$$[$variantsService$$]).then(function($$jscomp$this$jscomp$1$$){$results$jscomp$1$$[$variantsService$$]=$$jscomp$this$jscomp$1$$})}),$experimentVariants$$=Promise.all($variants$jscomp$2$$).then(function(){return $results$jscomp$1$$}).then($$jscomp$this$jscomp$1$$.$addToBody_$.bind($$jscomp$this$jscomp$1$$));$variantsService$$.init($experimentVariants$$)}catch($e$jscomp$17$$){throw $variantsService$$.init({}),$e$jscomp$17$$;}})};
function $JSCompiler_StaticMethods_getConfig_$$($JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$){$JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$=$JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$.element.children;$userAssert$$module$src$log$$(1==$JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$.length&&"SCRIPT"==$JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$[0].tagName&&"APPLICATION/JSON"==$JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$[0].getAttribute("type").toUpperCase(),
'<amp-experiment> should contain exactly one <script type="application/json"> child.');return JSON.parse($JSCompiler_StaticMethods_getConfig_$self_children$jscomp$127$$[0].textContent)}
$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$.prototype.$addToBody_$=function($experiments$$){return this.getAmpDoc().whenBodyAvailable().then(function($body$jscomp$1$$){for(var $name$jscomp$76$$ in $experiments$$)$experiments$$[$name$jscomp$76$$]&&$body$jscomp$1$$.setAttribute("amp-x-"+$name$jscomp$76$$,$experiments$$[$name$jscomp$76$$]);return $experiments$$})};
(function($AMP$jscomp$1$$){$AMP$jscomp$1$$.registerServiceForDoc("variant",$Variants$$module$extensions$amp_experiment$0_1$variant$$);$AMP$jscomp$1$$.registerElement("amp-experiment",$AmpExperiment$$module$extensions$amp_experiment$0_1$amp_experiment$$)})(self.AMP);
})});

//# sourceMappingURL=amp-experiment-0.1.js.map
