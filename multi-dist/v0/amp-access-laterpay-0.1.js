(self.AMP=self.AMP||[]).push({n:"amp-access-laterpay",v:"1904281823091",f:(function(AMP,_){
function $Deferred$$module$src$utils$promise$$(){var $resolve$$,$reject$$;this.promise=new Promise(function($res$$,$rej$$){$resolve$$=$res$$;$reject$$=$rej$$});this.resolve=$resolve$$;this.reject=$reject$$};function $tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($component$jscomp$4$$,$fallback$$){$fallback$$=void 0===$fallback$$?"":$fallback$$;try{return decodeURIComponent($component$jscomp$4$$)}catch($e$jscomp$7$$){return $fallback$$}};var $regex$$module$src$url_parse_query_string$$=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;
function $parseQueryString_$$module$src$url_parse_query_string$$($queryString$$){var $params$jscomp$1$$=Object.create(null);if(!$queryString$$)return $params$jscomp$1$$;for(var $match$$;$match$$=$regex$$module$src$url_parse_query_string$$.exec($queryString$$);){var $name$jscomp$70$$=$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$$[1],$match$$[1]),$value$jscomp$87$$=$match$$[2]?$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$$[2],$match$$[2]):"";
$params$jscomp$1$$[$name$jscomp$70$$]=$value$jscomp$87$$}return $params$jscomp$1$$};var $rtvVersion$$module$src$mode$$="";
function $getMode$$module$src$mode$$(){var $opt_win$$,$win$$=$opt_win$$||self;if($win$$.AMP_MODE)var $JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$=$win$$.AMP_MODE;else{$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$=$win$$;var $JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$=self.AMP_CONFIG||{},$JSCompiler_runningTests$jscomp$inline_23$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$.test||!(!$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.AMP_TEST&&
!$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.__karma__),$JSCompiler_isLocalDev$jscomp$inline_24$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$.localDev||$JSCompiler_runningTests$jscomp$inline_23$$,$JSCompiler_hashQuery$jscomp$inline_25$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.location.originalHash||$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.location.hash);
$JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$=$JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$.spt;var $JSCompiler_searchQuery$jscomp$inline_27$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.location.search);$rtvVersion$$module$src$mode$$||($rtvVersion$$module$src$mode$$=$JSCompiler_isLocalDev$jscomp$inline_24$$?"1904281823091":$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.AMP_CONFIG&&
$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.AMP_CONFIG.v?$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.AMP_CONFIG.v:"011904281823091");$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$=$win$$.AMP_MODE={localDev:$JSCompiler_isLocalDev$jscomp$inline_24$$,development:!("1"!=$JSCompiler_hashQuery$jscomp$inline_25$$.development&&!$JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$.AMP_DEV_MODE),examiner:"2"==$JSCompiler_hashQuery$jscomp$inline_25$$.development,
filter:$JSCompiler_hashQuery$jscomp$inline_25$$.filter,geoOverride:$JSCompiler_hashQuery$jscomp$inline_25$$["amp-geo"],minified:!0,lite:void 0!=$JSCompiler_searchQuery$jscomp$inline_27$$.amp_lite,test:$JSCompiler_runningTests$jscomp$inline_23$$,log:$JSCompiler_hashQuery$jscomp$inline_25$$.log,version:"1904281823091",rtvVersion:$rtvVersion$$module$src$mode$$,singlePassType:$JSCompiler_AMP_CONFIG$jscomp$inline_19_JSCompiler_singlePassType$jscomp$inline_26$$}}return $JSCompiler_temp$jscomp$8_JSCompiler_win$jscomp$inline_18$$}
;self.log=self.log||{user:null,dev:null,userForEmbed:null};var $logs$$module$src$log$$=self.log;function $user$$module$src$log$$(){if(!$logs$$module$src$log$$.user)throw Error("failed to call initLogConstructor");return $logs$$module$src$log$$.user}
function $userAssert$$module$src$log$$($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$,$opt_4$jscomp$1$$){return $user$$module$src$log$$().assert($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$,$opt_4$jscomp$1$$,void 0,void 0,void 0,void 0,void 0)};function $getService$$module$src$service$$($win$jscomp$8$$,$id$jscomp$11$$){$win$jscomp$8$$=$win$jscomp$8$$.__AMP_TOP||$win$jscomp$8$$;return $getServiceInternal$$module$src$service$$($win$jscomp$8$$,$id$jscomp$11$$)}
function $getServiceForDoc$$module$src$service$$($elementOrAmpDoc$$){var $ampdoc$jscomp$2_holder$jscomp$2$$=$getAmpdoc$$module$src$service$$($elementOrAmpDoc$$);$ampdoc$jscomp$2_holder$jscomp$2$$=$getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$2_holder$jscomp$2$$);return $getServiceInternal$$module$src$service$$($ampdoc$jscomp$2_holder$jscomp$2$$,"viewport")}
function $getAmpdoc$$module$src$service$$($nodeOrDoc$jscomp$2$$){return $nodeOrDoc$jscomp$2$$.nodeType?$getService$$module$src$service$$(($nodeOrDoc$jscomp$2$$.ownerDocument||$nodeOrDoc$jscomp$2$$).defaultView,"ampdoc").getAmpDoc($nodeOrDoc$jscomp$2$$):$nodeOrDoc$jscomp$2$$}
function $getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$){$ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$=$getAmpdoc$$module$src$service$$($ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$);return $ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$.isSingleDoc()?$ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$.win:$ampdoc$jscomp$4_nodeOrDoc$jscomp$3$$}
function $getServiceInternal$$module$src$service$$($holder$jscomp$4_s$jscomp$8$$,$id$jscomp$19$$){var $services$$=$getServices$$module$src$service$$($holder$jscomp$4_s$jscomp$8$$);$holder$jscomp$4_s$jscomp$8$$=$services$$[$id$jscomp$19$$];$holder$jscomp$4_s$jscomp$8$$.obj||($holder$jscomp$4_s$jscomp$8$$.obj=new $holder$jscomp$4_s$jscomp$8$$.ctor($holder$jscomp$4_s$jscomp$8$$.context),$holder$jscomp$4_s$jscomp$8$$.ctor=null,$holder$jscomp$4_s$jscomp$8$$.context=null,$holder$jscomp$4_s$jscomp$8$$.resolve&&
$holder$jscomp$4_s$jscomp$8$$.resolve($holder$jscomp$4_s$jscomp$8$$.obj));return $holder$jscomp$4_s$jscomp$8$$.obj}
function $getServicePromiseOrNullInternal$$module$src$service$$($holder$jscomp$8$$){var $s$jscomp$11$$=$getServices$$module$src$service$$($holder$jscomp$8$$).access;if($s$jscomp$11$$){if($s$jscomp$11$$.promise)return $s$jscomp$11$$.promise;$getServiceInternal$$module$src$service$$($holder$jscomp$8$$,"access");return $s$jscomp$11$$.promise=Promise.resolve($s$jscomp$11$$.obj)}return null}
function $getServices$$module$src$service$$($holder$jscomp$9$$){var $services$jscomp$5$$=$holder$jscomp$9$$.services;$services$jscomp$5$$||($services$jscomp$5$$=$holder$jscomp$9$$.services={});return $services$jscomp$5$$}
function $emptyServiceHolderWithPromise$$module$src$service$$(){var $deferred$$=new $Deferred$$module$src$utils$promise$$,$$jscomp$destructuring$var2_reject$jscomp$3$$=$deferred$$,$promise$jscomp$1$$=$$jscomp$destructuring$var2_reject$jscomp$3$$.promise,$resolve$jscomp$4$$=$$jscomp$destructuring$var2_reject$jscomp$3$$.resolve;$$jscomp$destructuring$var2_reject$jscomp$3$$=$$jscomp$destructuring$var2_reject$jscomp$3$$.reject;$promise$jscomp$1$$.catch(function(){});return{obj:null,promise:$promise$jscomp$1$$,
resolve:$resolve$jscomp$4$$,reject:$$jscomp$destructuring$var2_reject$jscomp$3$$,context:null,ctor:null}};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function $getElementServiceForDoc$$module$src$element_service$$($element$jscomp$32$$){return $getElementServiceIfAvailableForDoc$$module$src$element_service$$($element$jscomp$32$$).then(function($element$jscomp$32$$){return $userAssert$$module$src$log$$($element$jscomp$32$$,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.","access","amp-access","amp-access","amp-access")})}
function $getElementServiceIfAvailableForDoc$$module$src$element_service$$($element$jscomp$33$$){var $s$jscomp$13$$=$getServicePromiseOrNullInternal$$module$src$service$$($getAmpdocServiceHolder$$module$src$service$$($element$jscomp$33$$));if($s$jscomp$13$$)return $s$jscomp$13$$;var $ampdoc$jscomp$7$$=$getAmpdoc$$module$src$service$$($element$jscomp$33$$);return $ampdoc$jscomp$7$$.whenBodyAvailable().then(function(){var $element$jscomp$33$$=$ampdoc$jscomp$7$$.win;var $s$jscomp$13$$=$ampdoc$jscomp$7$$.win.document.head;
if($s$jscomp$13$$){var $JSCompiler_inline_result$jscomp$68_JSCompiler_scripts$jscomp$inline_71$$=[];$s$jscomp$13$$=$s$jscomp$13$$.querySelectorAll("script[custom-element]");for(var $JSCompiler_i$jscomp$inline_73$$=0;$JSCompiler_i$jscomp$inline_73$$<$s$jscomp$13$$.length;$JSCompiler_i$jscomp$inline_73$$++)$JSCompiler_inline_result$jscomp$68_JSCompiler_scripts$jscomp$inline_71$$.push($s$jscomp$13$$[$JSCompiler_i$jscomp$inline_73$$].getAttribute("custom-element"))}else $JSCompiler_inline_result$jscomp$68_JSCompiler_scripts$jscomp$inline_71$$=
[];$element$jscomp$33$$=$JSCompiler_inline_result$jscomp$68_JSCompiler_scripts$jscomp$inline_71$$.includes("amp-access")?$getService$$module$src$service$$($element$jscomp$33$$,"extensions").waitForExtension($element$jscomp$33$$,"amp-access"):Promise.resolve();return $element$jscomp$33$$}).then(function(){var $s$jscomp$13$$=$ampdoc$jscomp$7$$.win;if($s$jscomp$13$$.ampExtendedElements&&$s$jscomp$13$$.ampExtendedElements["amp-access"]){$s$jscomp$13$$=$getAmpdocServiceHolder$$module$src$service$$($element$jscomp$33$$);
var $JSCompiler_cached$jscomp$inline_64$$=$getServicePromiseOrNullInternal$$module$src$service$$($s$jscomp$13$$);$JSCompiler_cached$jscomp$inline_64$$?$s$jscomp$13$$=$JSCompiler_cached$jscomp$inline_64$$:($s$jscomp$13$$=$getServices$$module$src$service$$($s$jscomp$13$$),$s$jscomp$13$$.access=$emptyServiceHolderWithPromise$$module$src$service$$(),$s$jscomp$13$$=$s$jscomp$13$$.access.promise)}else $s$jscomp$13$$=null;return $s$jscomp$13$$})};function $installStylesForDoc$$module$src$style_installer$$($ampdoc$jscomp$10$$,$cb$jscomp$1$$){var $cssText$$=".amp-access-laterpay{position:relative}@media (min-width:420px){.amp-access-laterpay{width:420px}}.amp-access-laterpay ul{width:100%;padding:0;margin:0 0 40px}.amp-access-laterpay li{list-style:none;margin-bottom:20px}.amp-access-laterpay label,.amp-access-laterpay li{display:-webkit-box;display:-ms-flexbox;display:flex}.amp-access-laterpay label{padding-right:10px}.amp-access-laterpay input{width:20px}.amp-access-laterpay-container{padding:16px 24px 16px 16px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-radius:12px;box-shadow:0 0 10px -1px rgba(0,0,0,0.25)}.amp-access-laterpay-sandbox{width:112%;padding:15px 10px;background-color:#f2902a;color:#fff;font-weight:700;text-align:center}.amp-access-laterpay-badge{text-align:center;color:#999}.amp-access-laterpay-badge a{color:#8db444}.amp-access-laterpay-header{font-size:1.2em;margin-bottom:40px}.amp-access-laterpay-metadata{width:92%}.amp-access-laterpay-title{font-size:1.1em;margin:0;padding:0}.amp-access-laterpay-description{font-size:0.9em;margin:0;padding:0}.amp-access-laterpay-price-container{margin-top:0;margin-left:auto}.amp-access-laterpay-price{font-size:1.5em}.amp-access-laterpay-currency{font-size:0.7em}.amp-access-laterpay-purchase-button{font-size:1.1em;padding:0.5em 0.8em;background-color:#8db444;border-radius:4px;border:0;color:#fff;width:70%}.amp-access-laterpay-already-purchased-link-container{font-size:0.9em}\n/*# sourceURL=/extensions/amp-access-laterpay/0.1/amp-access-laterpay.css*/",
$opt_isRuntimeCss$$=!1,$opt_ext$$="amp-access-laterpay",$cssRoot$$=$ampdoc$jscomp$10$$.getHeadNode(),$style$jscomp$6$$=$insertStyleElement$$module$src$style_installer$$($cssRoot$$,$maybeTransform$$module$src$style_installer$$($cssRoot$$,$cssText$$),$opt_isRuntimeCss$$||!1,$opt_ext$$||null);if($cb$jscomp$1$$){var $rootNode$jscomp$1$$=$ampdoc$jscomp$10$$.getRootNode();if($styleLoaded$$module$src$style_installer$$($rootNode$jscomp$1$$,$style$jscomp$6$$))$cb$jscomp$1$$($style$jscomp$6$$);else var $interval$jscomp$1$$=
setInterval(function(){$styleLoaded$$module$src$style_installer$$($rootNode$jscomp$1$$,$style$jscomp$6$$)&&(clearInterval($interval$jscomp$1$$),$cb$jscomp$1$$($style$jscomp$6$$))},4)}}
function $insertStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$,$isRuntimeCss$$,$ext$$){var $styleMap$$=$cssRoot$jscomp$1$$.__AMP_CSS_SM;if(!$styleMap$$){var $JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$=Object.create(null);$styleMap$$=$cssRoot$jscomp$1$$.__AMP_CSS_SM=$JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$}var $isExtCss$$=!$isRuntimeCss$$&&$ext$$&&"amp-custom"!=$ext$$&&"amp-keyframes"!=$ext$$;if($JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$=
$isRuntimeCss$$?"amp-runtime":$isExtCss$$?"amp-extension="+$ext$$:null){var $existing$$=$getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$styleMap$$,$JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$);if($existing$$)return $existing$$.textContent!==$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$&&($existing$$.textContent=$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$),$existing$$}var $style$jscomp$8$$=($cssRoot$jscomp$1$$.ownerDocument||$cssRoot$jscomp$1$$).createElement("style");
$style$jscomp$8$$.textContent=$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$;var $afterElement$$=null;$isRuntimeCss$$?$style$jscomp$8$$.setAttribute("amp-runtime",""):$isExtCss$$?($style$jscomp$8$$.setAttribute("amp-extension",$ext$$||""),$afterElement$$=$getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$styleMap$$,"amp-runtime")):($ext$$&&$style$jscomp$8$$.setAttribute($ext$$,""),$afterElement$$=$cssRoot$jscomp$1$$.lastChild);$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$=
$afterElement$$;$cssRoot$jscomp$1$$.insertBefore($style$jscomp$8$$,$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$?$JSCompiler_after$jscomp$inline_52_cssText$jscomp$2$$.nextSibling:$cssRoot$jscomp$1$$.firstChild);$JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$&&($styleMap$$[$JSCompiler_obj$jscomp$inline_48_key$jscomp$43$$]=$style$jscomp$8$$);return $style$jscomp$8$$}
function $getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$2_existing$jscomp$1$$,$styleMap$jscomp$1$$,$key$jscomp$44$$){return $styleMap$jscomp$1$$[$key$jscomp$44$$]?$styleMap$jscomp$1$$[$key$jscomp$44$$]:($cssRoot$jscomp$2_existing$jscomp$1$$=$cssRoot$jscomp$2_existing$jscomp$1$$.querySelector("style["+$key$jscomp$44$$+"]"))?$styleMap$jscomp$1$$[$key$jscomp$44$$]=$cssRoot$jscomp$2_existing$jscomp$1$$:null}
function $maybeTransform$$module$src$style_installer$$($cssRoot$jscomp$4_transformer$jscomp$1$$,$cssText$jscomp$3$$){return($cssRoot$jscomp$4_transformer$jscomp$1$$=$cssRoot$jscomp$4_transformer$jscomp$1$$.__AMP_CSS_TR)?$cssRoot$jscomp$4_transformer$jscomp$1$$($cssText$jscomp$3$$):$cssText$jscomp$3$$}
function $styleLoaded$$module$src$style_installer$$($doc$jscomp$21_i$jscomp$13$$,$style$jscomp$9$$){var $sheets$$=$doc$jscomp$21_i$jscomp$13$$.styleSheets;for($doc$jscomp$21_i$jscomp$13$$=0;$doc$jscomp$21_i$jscomp$13$$<$sheets$$.length;$doc$jscomp$21_i$jscomp$13$$++){var $sheet$$=$sheets$$[$doc$jscomp$21_i$jscomp$13$$];if($sheet$$.ownerNode==$style$jscomp$9$$)return!0}return!1};var $optsSupported$$module$src$event_helper_listen$$;
function $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$61$$,$eventType$jscomp$3$$,$listener$jscomp$62$$){var $opt_evtListenerOpts$$=void 0,$localElement$$=$element$jscomp$61$$,$localListener$$=$listener$jscomp$62$$;var $wrapped$$=function($element$jscomp$61$$){try{return $localListener$$($element$jscomp$61$$)}catch($e$jscomp$17$$){throw self.reportError($e$jscomp$17$$),$e$jscomp$17$$;}};var $optsSupported$$=$detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(),$capture$$=
!1;$opt_evtListenerOpts$$&&($capture$$=$opt_evtListenerOpts$$.capture);$localElement$$.addEventListener($eventType$jscomp$3$$,$wrapped$$,$optsSupported$$?$opt_evtListenerOpts$$:$capture$$);return function(){$localElement$$&&$localElement$$.removeEventListener($eventType$jscomp$3$$,$wrapped$$,$optsSupported$$?$opt_evtListenerOpts$$:$capture$$);$wrapped$$=$localElement$$=$localListener$$=null}}
function $detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(){if(void 0!==$optsSupported$$module$src$event_helper_listen$$)return $optsSupported$$module$src$event_helper_listen$$;$optsSupported$$module$src$event_helper_listen$$=!1;try{var $options$jscomp$14$$={get capture(){$optsSupported$$module$src$event_helper_listen$$=!0}};self.addEventListener("test-options",null,$options$jscomp$14$$);self.removeEventListener("test-options",null,$options$jscomp$14$$)}catch($err$jscomp$3$$){}return $optsSupported$$module$src$event_helper_listen$$}
;function $listen$$module$src$event_helper$$($element$jscomp$62$$,$eventType$jscomp$4$$,$listener$jscomp$63$$){return $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$62$$,$eventType$jscomp$4$$,$listener$jscomp$63$$)};var $CONFIG_URLS$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$live$$={eu:"https://connector.laterpay.net",us:"https://connector.uselaterpay.com"},$CONFIG_URLS$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$sandbox$$={eu:"https://connector.sandbox.laterpaytest.net",us:"https://connector.sandbox.uselaterpaytest.com"},$DEFAULT_MESSAGES$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$={premiumContentTitle:"Buy only this article",payLaterButton:"Buy Now, Pay Later",payNowButton:"Buy Now",
defaultButton:"Buy Now",alreadyPurchasedLink:"I already bought this",sandbox:"Site in test mode. No payment required."};
function $LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$($accessService$$,$accessSource$$){this.ampdoc=$accessService$$.ampdoc;this.$accessSource_$=$accessSource$$;this.$viewport_$=$getServiceForDoc$$module$src$service$$(this.ampdoc);this.$laterpayConfig_$=this.$accessSource_$.getAdapterConfig();this.$alreadyPurchasedListener_$=this.$purchaseButtonListener_$=this.$purchaseConfig_$=null;this.$purchaseOptionListeners_$=[];this.$containerEmpty_$=!0;this.$purchaseButton_$=this.$selectedPurchaseOption_$=
this.$innerContainer_$=null;this.$currentLocale_$=this.$laterpayConfig_$.locale||"en";this.$i18n_$=Object.assign({},$DEFAULT_MESSAGES$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$,this.$laterpayConfig_$.localeMessages||{});this.$purchaseConfigBaseUrl_$=$JSCompiler_StaticMethods_getConfigUrl_$$(this)+"/api/v1/public/amp?article_url=CANONICAL_URL&amp_reader_id=READER_ID&return_url=RETURN_URL";var $articleId$$=this.$laterpayConfig_$.articleId;$articleId$$&&(this.$purchaseConfigBaseUrl_$+=
"&article_id="+encodeURIComponent($articleId$$));this.$timer_$=$getService$$module$src$service$$(this.ampdoc.win,"timer");this.$vsync_$=$getService$$module$src$service$$(this.ampdoc.win,"vsync");this.$xhr_$=$getService$$module$src$service$$(this.ampdoc.win,"xhr");$installStylesForDoc$$module$src$style_installer$$(this.ampdoc,function(){})}
function $JSCompiler_StaticMethods_getConfigUrl_$$($JSCompiler_StaticMethods_getConfigUrl_$self$$){var $region$$=$JSCompiler_StaticMethods_getConfigUrl_$self$$.$laterpayConfig_$.region||"eu";return($getMode$$module$src$mode$$().localDev||$getMode$$module$src$mode$$().development)&&$JSCompiler_StaticMethods_getConfigUrl_$self$$.$laterpayConfig_$.configUrl?$JSCompiler_StaticMethods_getConfigUrl_$self$$.$laterpayConfig_$.configUrl:$JSCompiler_StaticMethods_getConfigUrl_$self$$.$laterpayConfig_$.sandbox?
$CONFIG_URLS$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$sandbox$$[$region$$]:$CONFIG_URLS$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$live$$[$region$$]}
$LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$.prototype.authorize=function(){var $$jscomp$this$jscomp$1$$=this;return $JSCompiler_StaticMethods_getPurchaseConfig_$$(this).then(function($response$jscomp$2$$){if(204===$response$jscomp$2$$.status)throw $user$$module$src$log$$().createError("No merchant domains have been matched for this article, or no paid content configurations are setup.");$$jscomp$this$jscomp$1$$.$laterpayConfig_$.scrollToTopAfterAuth&&$$jscomp$this$jscomp$1$$.$vsync_$.mutate(function(){return $$jscomp$this$jscomp$1$$.$viewport_$.setScrollTop(0)});
$JSCompiler_StaticMethods_emptyContainer_$$($$jscomp$this$jscomp$1$$);return{access:$response$jscomp$2$$.access}},function($err$jscomp$4$$){if(!$err$jscomp$4$$||!$err$jscomp$4$$.response)throw $err$jscomp$4$$;var $response$jscomp$3$$=$err$jscomp$4$$.response;if(402!==$response$jscomp$3$$.status)throw $err$jscomp$4$$;return $response$jscomp$3$$.json().catch(function(){}).then(function($err$jscomp$4$$){$$jscomp$this$jscomp$1$$.$purchaseConfig_$=$err$jscomp$4$$;$JSCompiler_StaticMethods_emptyContainer_$$($$jscomp$this$jscomp$1$$).then($$jscomp$this$jscomp$1$$.$renderPurchaseOverlay_$.bind($$jscomp$this$jscomp$1$$));
return{access:!1}})})};
function $JSCompiler_StaticMethods_getPurchaseConfig_$$($JSCompiler_StaticMethods_getPurchaseConfig_$self$$){var $url$jscomp$22$$=$JSCompiler_StaticMethods_getPurchaseConfig_$self$$.$purchaseConfigBaseUrl_$+"&article_title="+encodeURIComponent($JSCompiler_StaticMethods_getArticleTitle_$$($JSCompiler_StaticMethods_getPurchaseConfig_$self$$)),$urlPromise$$=$JSCompiler_StaticMethods_getPurchaseConfig_$self$$.$accessSource_$.buildUrl($url$jscomp$22$$,!1);return $urlPromise$$.then(function($url$jscomp$22$$){return $JSCompiler_StaticMethods_getPurchaseConfig_$self$$.$accessSource_$.getLoginUrl($url$jscomp$22$$)}).then(function($url$jscomp$22$$){if($logs$$module$src$log$$.dev)var $urlPromise$$=$logs$$module$src$log$$.dev;
else throw Error("failed to call initLogConstructor");$urlPromise$$.info("amp-access-laterpay","Authorization URL: ",$url$jscomp$22$$);return $JSCompiler_StaticMethods_getPurchaseConfig_$self$$.$timer_$.timeoutPromise(3E3,$JSCompiler_StaticMethods_getPurchaseConfig_$self$$.$xhr_$.fetchJson($url$jscomp$22$$,{credentials:"include"})).then(function($JSCompiler_StaticMethods_getPurchaseConfig_$self$$){return $JSCompiler_StaticMethods_getPurchaseConfig_$self$$.json()})})}
function $JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createElement_$self$$,$name$jscomp$75$$){return $JSCompiler_StaticMethods_createElement_$self$$.ampdoc.win.document.createElement($name$jscomp$75$$)}
function $JSCompiler_StaticMethods_getArticleTitle_$$($JSCompiler_StaticMethods_getArticleTitle_$self$$){var $title$jscomp$10$$=$JSCompiler_StaticMethods_getArticleTitle_$self$$.ampdoc.getRootNode().querySelector($JSCompiler_StaticMethods_getArticleTitle_$self$$.$laterpayConfig_$.articleTitleSelector);$userAssert$$module$src$log$$($title$jscomp$10$$,"No article title element found with selector %s",$JSCompiler_StaticMethods_getArticleTitle_$self$$.$laterpayConfig_$.articleTitleSelector);return $title$jscomp$10$$.textContent.trim()}
function $JSCompiler_StaticMethods_getContainer_$$($JSCompiler_StaticMethods_getContainer_$self$$){var $dialogContainer$$=$JSCompiler_StaticMethods_getContainer_$self$$.ampdoc.getElementById("amp-access-laterpay-dialog");return $user$$module$src$log$$().assertElement($dialogContainer$$,"No element found with id amp-access-laterpay-dialog")}
function $JSCompiler_StaticMethods_emptyContainer_$$($JSCompiler_StaticMethods_emptyContainer_$self$$){if($JSCompiler_StaticMethods_emptyContainer_$self$$.$containerEmpty_$)return Promise.resolve();for(var $unlistener$$;$unlistener$$=$JSCompiler_StaticMethods_emptyContainer_$self$$.$purchaseOptionListeners_$.shift();)$unlistener$$();$JSCompiler_StaticMethods_emptyContainer_$self$$.$purchaseButtonListener_$&&($JSCompiler_StaticMethods_emptyContainer_$self$$.$purchaseButtonListener_$(),$JSCompiler_StaticMethods_emptyContainer_$self$$.$purchaseButtonListener_$=
null);$JSCompiler_StaticMethods_emptyContainer_$self$$.$alreadyPurchasedListener_$&&($JSCompiler_StaticMethods_emptyContainer_$self$$.$alreadyPurchasedListener_$(),$JSCompiler_StaticMethods_emptyContainer_$self$$.$alreadyPurchasedListener_$=null);return $JSCompiler_StaticMethods_emptyContainer_$self$$.$vsync_$.mutatePromise(function(){$JSCompiler_StaticMethods_emptyContainer_$self$$.$containerEmpty_$=!0;$JSCompiler_StaticMethods_emptyContainer_$self$$.$innerContainer_$=null;for(var $unlistener$$=
$JSCompiler_StaticMethods_getContainer_$$($JSCompiler_StaticMethods_emptyContainer_$self$$);$unlistener$$.firstChild;)$unlistener$$.removeChild($unlistener$$.firstChild)})}
$LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$.prototype.$renderPurchaseOverlay_$=function(){var $$jscomp$this$jscomp$4$$=this,$dialogContainer$jscomp$1$$=$JSCompiler_StaticMethods_getContainer_$$(this);this.$innerContainer_$=$JSCompiler_StaticMethods_createElement_$$(this,"div");this.$innerContainer_$.className="amp-access-laterpay-container";this.$laterpayConfig_$.sandbox&&$JSCompiler_StaticMethods_renderTextBlock_$$(this,"sandbox");$JSCompiler_StaticMethods_renderTextBlock_$$(this,
"header");var $listContainer$$=$JSCompiler_StaticMethods_createElement_$$(this,"ul");this.$purchaseConfig_$.premiumcontent.title=this.$i18n_$.premiumContentTitle;this.$purchaseConfig_$.premiumcontent.description=$JSCompiler_StaticMethods_getArticleTitle_$$(this);$listContainer$$.appendChild($JSCompiler_StaticMethods_createPurchaseOption_$$(this,this.$purchaseConfig_$.premiumcontent));this.$purchaseConfig_$.timepasses.forEach(function($dialogContainer$jscomp$1$$){$listContainer$$.appendChild($JSCompiler_StaticMethods_createPurchaseOption_$$($$jscomp$this$jscomp$4$$,
$dialogContainer$jscomp$1$$))});this.$purchaseConfig_$.subscriptions.forEach(function($dialogContainer$jscomp$1$$){$listContainer$$.appendChild($JSCompiler_StaticMethods_createPurchaseOption_$$($$jscomp$this$jscomp$4$$,$dialogContainer$jscomp$1$$))});var $purchaseButton$$=$JSCompiler_StaticMethods_createElement_$$(this,"button");$purchaseButton$$.className="amp-access-laterpay-purchase-button";$purchaseButton$$.textContent=this.$i18n_$.defaultButton;this.$purchaseButton_$=$purchaseButton$$;this.$purchaseButtonListener_$=
$listen$$module$src$event_helper$$($purchaseButton$$,"click",function($dialogContainer$jscomp$1$$){var $listContainer$$=$$jscomp$this$jscomp$4$$.$selectedPurchaseOption_$.dataset.purchaseType;$JSCompiler_StaticMethods_handlePurchase_$$($$jscomp$this$jscomp$4$$,$dialogContainer$jscomp$1$$,$$jscomp$this$jscomp$4$$.$selectedPurchaseOption_$.value,$listContainer$$)});this.$innerContainer_$.appendChild($listContainer$$);this.$innerContainer_$.appendChild($purchaseButton$$);this.$innerContainer_$.appendChild($JSCompiler_StaticMethods_createAlreadyPurchasedLink_$$(this,
this.$purchaseConfig_$.apl));$JSCompiler_StaticMethods_renderTextBlock_$$(this,"footer");$dialogContainer$jscomp$1$$.appendChild(this.$innerContainer_$);$dialogContainer$jscomp$1$$.appendChild($JSCompiler_StaticMethods_createLaterpayBadge_$$(this));this.$containerEmpty_$=!1;$JSCompiler_StaticMethods_preselectFirstOption_$$(this,$listContainer$$.firstElementChild)};
function $JSCompiler_StaticMethods_preselectFirstOption_$$($JSCompiler_StaticMethods_preselectFirstOption_$self$$,$firstOption$$){var $firstInput$$=$firstOption$$.querySelector('input[type="radio"]');$firstInput$$.checked=!0;$JSCompiler_StaticMethods_selectPurchaseOption_$$($JSCompiler_StaticMethods_preselectFirstOption_$self$$,$firstInput$$)}
function $JSCompiler_StaticMethods_renderTextBlock_$$($JSCompiler_StaticMethods_renderTextBlock_$self$$,$area$$){if($JSCompiler_StaticMethods_renderTextBlock_$self$$.$i18n_$[$area$$]){var $el$jscomp$9$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_renderTextBlock_$self$$,"p");$el$jscomp$9$$.className="amp-access-laterpay-"+$area$$;$el$jscomp$9$$.textContent=$JSCompiler_StaticMethods_renderTextBlock_$self$$.$i18n_$[$area$$];$JSCompiler_StaticMethods_renderTextBlock_$self$$.$innerContainer_$.appendChild($el$jscomp$9$$)}}
function $JSCompiler_StaticMethods_createLaterpayBadge_$$($JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$){var $a$jscomp$1$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$,"a");$a$jscomp$1$$.href="https://laterpay.net";$a$jscomp$1$$.target="_blank";$a$jscomp$1$$.textContent="LaterPay";$JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$,
"p");$JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$.className="amp-access-laterpay-badge";$JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$.textContent="Powered by ";$JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$.appendChild($a$jscomp$1$$);return $JSCompiler_StaticMethods_createLaterpayBadge_$self_el$jscomp$10$$}
function $JSCompiler_StaticMethods_createPurchaseOption_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,$option$$){var $li$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,"li"),$control$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,"label");$control$$.for=$option$$.title;$control$$.appendChild($JSCompiler_StaticMethods_createRadioControl_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,
$option$$));var $metadataContainer$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,"div");$metadataContainer$$.className="amp-access-laterpay-metadata";var $description$jscomp$4_title$jscomp$11$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,"span");$description$jscomp$4_title$jscomp$11$$.className="amp-access-laterpay-title";$description$jscomp$4_title$jscomp$11$$.textContent=$option$$.title;$metadataContainer$$.appendChild($description$jscomp$4_title$jscomp$11$$);
$description$jscomp$4_title$jscomp$11$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,"p");$description$jscomp$4_title$jscomp$11$$.className="amp-access-laterpay-description";$description$jscomp$4_title$jscomp$11$$.textContent=$option$$.description;$metadataContainer$$.appendChild($description$jscomp$4_title$jscomp$11$$);$control$$.appendChild($metadataContainer$$);$li$$.appendChild($control$$);$li$$.appendChild($JSCompiler_StaticMethods_createPrice_$$($JSCompiler_StaticMethods_createPurchaseOption_$self$$,
$option$$.price));return $li$$}
function $JSCompiler_StaticMethods_createRadioControl_$$($JSCompiler_StaticMethods_createRadioControl_$self$$,$option$jscomp$1_purchaseType$jscomp$1$$){var $radio$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createRadioControl_$self$$,"input");$radio$$.name="purchaseOption";$radio$$.type="radio";$radio$$.id=$option$jscomp$1_purchaseType$jscomp$1$$.title;$radio$$.value=$option$jscomp$1_purchaseType$jscomp$1$$.purchase_url;$option$jscomp$1_purchaseType$jscomp$1$$="ppu"===$option$jscomp$1_purchaseType$jscomp$1$$.purchase_type?
"payLater":"payNow";var $purchaseActionLabel$$=$JSCompiler_StaticMethods_createRadioControl_$self$$.$i18n_$[$option$jscomp$1_purchaseType$jscomp$1$$+"Button"];$radio$$.setAttribute("data-purchase-action-label",$purchaseActionLabel$$);$radio$$.setAttribute("data-purchase-type",$option$jscomp$1_purchaseType$jscomp$1$$);$JSCompiler_StaticMethods_createRadioControl_$self$$.$purchaseOptionListeners_$.push($listen$$module$src$event_helper$$($radio$$,"change",$JSCompiler_StaticMethods_createRadioControl_$self$$.$handlePurchaseOptionSelection_$.bind($JSCompiler_StaticMethods_createRadioControl_$self$$)));
return $radio$$}
function $JSCompiler_StaticMethods_createPrice_$$($JSCompiler_StaticMethods_createPrice_$self$$,$price$$){var $currency$$=Object.keys($price$$)[0],$formattedPrice$$=($price$$[$currency$$]/100).toLocaleString($JSCompiler_StaticMethods_createPrice_$self$$.$currentLocale_$,{style:"decimal",minimumFractionDigits:0}),$valueEl$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPrice_$self$$,"span");$valueEl$$.className="amp-access-laterpay-price";$valueEl$$.textContent=$formattedPrice$$;
var $currencyEl$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPrice_$self$$,"sup");$currencyEl$$.className="amp-access-laterpay-currency";$currencyEl$$.textContent=$currency$$;var $priceEl$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createPrice_$self$$,"p");$priceEl$$.className="amp-access-laterpay-price-container";$priceEl$$.appendChild($valueEl$$);$priceEl$$.appendChild($currencyEl$$);return $priceEl$$}
function $JSCompiler_StaticMethods_createAlreadyPurchasedLink_$$($JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$,$href$$){var $p$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$,"p");$p$$.className="amp-access-laterpay-already-purchased-link-container";var $a$jscomp$2$$=$JSCompiler_StaticMethods_createElement_$$($JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$,"a");$a$jscomp$2$$.href=$href$$;$a$jscomp$2$$.textContent=
$JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$.$i18n_$.alreadyPurchasedLink;$JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$.$alreadyPurchasedListener_$=$listen$$module$src$event_helper$$($a$jscomp$2$$,"click",function($p$$){$JSCompiler_StaticMethods_handlePurchase_$$($JSCompiler_StaticMethods_createAlreadyPurchasedLink_$self$$,$p$$,$href$$,"alreadyPurchased")});$p$$.appendChild($a$jscomp$2$$);return $p$$}
$LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$.prototype.$handlePurchaseOptionSelection_$=function($ev$jscomp$2$$){$ev$jscomp$2$$.preventDefault();$JSCompiler_StaticMethods_selectPurchaseOption_$$(this,$ev$jscomp$2$$.target)};
function $JSCompiler_StaticMethods_selectPurchaseOption_$$($JSCompiler_StaticMethods_selectPurchaseOption_$self$$,$target$jscomp$86$$){var $selectedOptionClassname$$="amp-access-laterpay-selected",$prevPurchaseOption$$=$JSCompiler_StaticMethods_selectPurchaseOption_$self$$.$selectedPurchaseOption_$,$purchaseActionLabel$jscomp$1$$=$target$jscomp$86$$.dataset.purchaseActionLabel;$prevPurchaseOption$$&&$prevPurchaseOption$$.classList.contains($selectedOptionClassname$$)&&$prevPurchaseOption$$.classList.remove($selectedOptionClassname$$);
$JSCompiler_StaticMethods_selectPurchaseOption_$self$$.$selectedPurchaseOption_$=$target$jscomp$86$$;$JSCompiler_StaticMethods_selectPurchaseOption_$self$$.$selectedPurchaseOption_$.classList.add($selectedOptionClassname$$);$JSCompiler_StaticMethods_selectPurchaseOption_$self$$.$purchaseButton_$.textContent=$purchaseActionLabel$jscomp$1$$}
function $JSCompiler_StaticMethods_handlePurchase_$$($JSCompiler_StaticMethods_handlePurchase_$self$$,$ev$jscomp$3$$,$purchaseUrl$$,$purchaseType$jscomp$2$$){$ev$jscomp$3$$.preventDefault();$JSCompiler_StaticMethods_handlePurchase_$self$$.$accessSource_$.buildUrl($purchaseUrl$$,!1).then(function($ev$jscomp$3$$){$JSCompiler_StaticMethods_handlePurchase_$self$$.$accessSource_$.loginWithUrl($ev$jscomp$3$$,$purchaseType$jscomp$2$$)})}
$LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$.prototype.pingback=function(){return Promise.resolve()};(function($AMP$jscomp$1$$){$AMP$jscomp$1$$.registerServiceForDoc("laterpay",function($AMP$jscomp$1$$){$AMP$jscomp$1$$=$AMP$jscomp$1$$.getHeadNode();return $getElementServiceForDoc$$module$src$element_service$$($AMP$jscomp$1$$).then(function($AMP$jscomp$1$$){var $ampdoc$jscomp$11_element$jscomp$65$$=$AMP$jscomp$1$$.getVendorSource("laterpay"),$accessService$jscomp$1$$=new $LaterpayVendor$$module$extensions$amp_access_laterpay$0_1$laterpay_impl$$($AMP$jscomp$1$$,$ampdoc$jscomp$11_element$jscomp$65$$),
$adapter$$=$ampdoc$jscomp$11_element$jscomp$65$$.getAdapter();$adapter$$.registerVendor($accessService$jscomp$1$$);return $accessService$jscomp$1$$})})})(self.AMP);
})});

//# sourceMappingURL=amp-access-laterpay-0.1.js.map
