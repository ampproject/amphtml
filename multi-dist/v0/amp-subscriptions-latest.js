(self.AMP=self.AMP||[]).push({n:"amp-subscriptions",v:"1904281823091",f:(function(AMP,_){
var $JSCompiler_prototypeAlias$$;function $Deferred$$module$src$utils$promise$$(){var $resolve$$,$reject$$;this.promise=new Promise(function($res$$,$rej$$){$resolve$$=$res$$;$reject$$=$rej$$});this.resolve=$resolve$$;this.reject=$reject$$};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function $tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($component$jscomp$4$$,$fallback$$){$fallback$$=void 0===$fallback$$?"":$fallback$$;try{return decodeURIComponent($component$jscomp$4$$)}catch($e$jscomp$7$$){return $fallback$$}};var $regex$$module$src$url_parse_query_string$$=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;
function $parseQueryString_$$module$src$url_parse_query_string$$($queryString$$){var $params$jscomp$1$$=Object.create(null);if(!$queryString$$)return $params$jscomp$1$$;for(var $match$jscomp$1_value$jscomp$88$$;$match$jscomp$1_value$jscomp$88$$=$regex$$module$src$url_parse_query_string$$.exec($queryString$$);){var $name$jscomp$70$$=$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$jscomp$1_value$jscomp$88$$[1],$match$jscomp$1_value$jscomp$88$$[1]);$match$jscomp$1_value$jscomp$88$$=
$match$jscomp$1_value$jscomp$88$$[2]?$tryDecodeUriComponent_$$module$src$url_try_decode_uri_component$$($match$jscomp$1_value$jscomp$88$$[2],$match$jscomp$1_value$jscomp$88$$[2]):"";$params$jscomp$1$$[$name$jscomp$70$$]=$match$jscomp$1_value$jscomp$88$$}return $params$jscomp$1$$};var $rtvVersion$$module$src$mode$$="";
function $getMode$$module$src$mode$$(){var $opt_win$$,$win$$=$opt_win$$||self;if($win$$.AMP_MODE)var $JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$=$win$$.AMP_MODE;else{$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$=$win$$;var $JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$=self.AMP_CONFIG||{},$JSCompiler_runningTests$jscomp$inline_43$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$.test||!(!$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.AMP_TEST&&
!$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.__karma__),$JSCompiler_isLocalDev$jscomp$inline_44$$=!!$JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$.localDev||$JSCompiler_runningTests$jscomp$inline_43$$,$JSCompiler_hashQuery$jscomp$inline_45$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.location.originalHash||$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.location.hash);
$JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$=$JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$.spt;var $JSCompiler_searchQuery$jscomp$inline_47$$=$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.location.search);$rtvVersion$$module$src$mode$$||($rtvVersion$$module$src$mode$$=$JSCompiler_isLocalDev$jscomp$inline_44$$?"1904281823091":$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.AMP_CONFIG&&
$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.AMP_CONFIG.v?$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.AMP_CONFIG.v:"011904281823091");$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$=$win$$.AMP_MODE={localDev:$JSCompiler_isLocalDev$jscomp$inline_44$$,development:!("1"!=$JSCompiler_hashQuery$jscomp$inline_45$$.development&&!$JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$.AMP_DEV_MODE),examiner:"2"==$JSCompiler_hashQuery$jscomp$inline_45$$.development,
filter:$JSCompiler_hashQuery$jscomp$inline_45$$.filter,geoOverride:$JSCompiler_hashQuery$jscomp$inline_45$$["amp-geo"],minified:!0,lite:void 0!=$JSCompiler_searchQuery$jscomp$inline_47$$.amp_lite,test:$JSCompiler_runningTests$jscomp$inline_43$$,log:$JSCompiler_hashQuery$jscomp$inline_45$$.log,version:"1904281823091",rtvVersion:$rtvVersion$$module$src$mode$$,singlePassType:$JSCompiler_AMP_CONFIG$jscomp$inline_39_JSCompiler_singlePassType$jscomp$inline_46$$}}return $JSCompiler_temp$jscomp$18_JSCompiler_win$jscomp$inline_38$$}
;self.log=self.log||{user:null,dev:null,userForEmbed:null};var $logs$$module$src$log$$=self.log;function $user$$module$src$log$$(){if(!$logs$$module$src$log$$.user)throw Error("failed to call initLogConstructor");return $logs$$module$src$log$$.user}function $dev$$module$src$log$$(){if($logs$$module$src$log$$.dev)return $logs$$module$src$log$$.dev;throw Error("failed to call initLogConstructor");}
function $userAssert$$module$src$log$$($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$){return $user$$module$src$log$$().assert($shouldBeTrueish$jscomp$3$$,$opt_message$jscomp$14$$,$opt_1$jscomp$1$$,$opt_2$jscomp$1$$,$opt_3$jscomp$1$$,void 0,void 0,void 0,void 0,void 0,void 0)};var $scopeSelectorSupported$$module$src$css$$;var $hasOwn_$$module$src$utils$object$$=Object.prototype.hasOwnProperty;function $map$$module$src$utils$object$$(){var $opt_initial$$,$obj$jscomp$25$$=Object.create(null);$opt_initial$$&&Object.assign($obj$jscomp$25$$,$opt_initial$$);return $obj$jscomp$25$$}function $dict$$module$src$utils$object$$($opt_initial$jscomp$1$$){return $opt_initial$jscomp$1$$||{}};function $waitForChild$$module$src$dom$$($parent$jscomp$2$$,$checkFunc$$,$callback$jscomp$57$$){if($checkFunc$$($parent$jscomp$2$$))$callback$jscomp$57$$();else{var $win$jscomp$6$$=$parent$jscomp$2$$.ownerDocument.defaultView;if($win$jscomp$6$$.MutationObserver){var $observer$$=new $win$jscomp$6$$.MutationObserver(function(){$checkFunc$$($parent$jscomp$2$$)&&($observer$$.disconnect(),$callback$jscomp$57$$())});$observer$$.observe($parent$jscomp$2$$,{childList:!0})}else var $interval$$=$win$jscomp$6$$.setInterval(function(){$checkFunc$$($parent$jscomp$2$$)&&
($win$jscomp$6$$.clearInterval($interval$$),$callback$jscomp$57$$())},5)}}
function $createElementWithAttributes$$module$src$dom$$($doc$jscomp$12_element$jscomp$14$$,$tagName$jscomp$5$$,$attributes$jscomp$2$$){$doc$jscomp$12_element$jscomp$14$$=$doc$jscomp$12_element$jscomp$14$$.createElement($tagName$jscomp$5$$);for(var $JSCompiler_attr$jscomp$inline_54$$ in $attributes$jscomp$2$$)$doc$jscomp$12_element$jscomp$14$$.setAttribute($JSCompiler_attr$jscomp$inline_54$$,$attributes$jscomp$2$$[$JSCompiler_attr$jscomp$inline_54$$]);return $doc$jscomp$12_element$jscomp$14$$}
function $closest$$module$src$dom$$($el$jscomp$2_element$jscomp$15$$,$callback$jscomp$60$$){for(var $opt_stopAt$$;$el$jscomp$2_element$jscomp$15$$&&$el$jscomp$2_element$jscomp$15$$!==$opt_stopAt$$;$el$jscomp$2_element$jscomp$15$$=$el$jscomp$2_element$jscomp$15$$.parentElement)if($callback$jscomp$60$$($el$jscomp$2_element$jscomp$15$$))return $el$jscomp$2_element$jscomp$15$$;return null}
function $closestAncestorElementBySelector$$module$src$dom$$($element$jscomp$16$$){return $element$jscomp$16$$.closest?$element$jscomp$16$$.closest("[subscriptions-action]"):$closest$$module$src$dom$$($element$jscomp$16$$,function($element$jscomp$16$$){var $el$jscomp$3$$=$element$jscomp$16$$.matches||$element$jscomp$16$$.webkitMatchesSelector||$element$jscomp$16$$.mozMatchesSelector||$element$jscomp$16$$.msMatchesSelector||$element$jscomp$16$$.oMatchesSelector;return $el$jscomp$3$$?$el$jscomp$3$$.call($element$jscomp$16$$,
"[subscriptions-action]"):!1})}
function $childElementByTag$$module$src$dom$$($JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$){/^[\w-]+$/.test("footer");if(void 0!==$scopeSelectorSupported$$module$src$css$$)var $JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$=$scopeSelectorSupported$$module$src$css$$;else{try{var $JSCompiler_doc$jscomp$inline_181$$=$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$.ownerDocument,$JSCompiler_testElement$jscomp$inline_182$$=
$JSCompiler_doc$jscomp$inline_181$$.createElement("div"),$JSCompiler_testChild$jscomp$inline_183$$=$JSCompiler_doc$jscomp$inline_181$$.createElement("div");$JSCompiler_testElement$jscomp$inline_182$$.appendChild($JSCompiler_testChild$jscomp$inline_183$$);$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$=$JSCompiler_testElement$jscomp$inline_182$$.querySelector(":scope div")===$JSCompiler_testChild$jscomp$inline_183$$}catch($JSCompiler_e$jscomp$inline_184$$){$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$=
!1}$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$=$scopeSelectorSupported$$module$src$css$$=$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$}$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$?$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$=
$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$.querySelector("> footer".replace(/^|,/g,"$&:scope ")):($JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$.classList.add("i-amphtml-scoped"),$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$="> footer".replace(/^|,/g,"$&.i-amphtml-scoped "),$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$=
$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$.querySelectorAll($JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$),$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$.classList.remove("i-amphtml-scoped"),$JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$=void 0===$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$[0]?
null:$JSCompiler_elements$jscomp$inline_153_JSCompiler_inline_result$jscomp$174_JSCompiler_scopedSelector$jscomp$inline_152_JSCompiler_temp$jscomp$173$$[0]);return $JSCompiler_inline_result$jscomp$24_parent$jscomp$12$$}function $iterateCursor$$module$src$dom$$($iterable$jscomp$2$$,$cb$$){for(var $length$jscomp$17$$=$iterable$jscomp$2$$.length,$i$jscomp$9$$=0;$i$jscomp$9$$<$length$jscomp$17$$;$i$jscomp$9$$++)$cb$$($iterable$jscomp$2$$[$i$jscomp$9$$],$i$jscomp$9$$)}
function $openWindowDialog$$module$src$dom$$($win$jscomp$7$$,$url$jscomp$21$$,$opt_features$$){try{var $res$jscomp$1$$=$win$jscomp$7$$.open($url$jscomp$21$$,"_blank",$opt_features$$)}catch($e$jscomp$11$$){$dev$$module$src$log$$().error("DOM","Failed to open url on target: ","_blank",$e$jscomp$11$$)}$res$jscomp$1$$||($res$jscomp$1$$=$win$jscomp$7$$.open($url$jscomp$21$$,"_top"));return $res$jscomp$1$$};function $getValueForExpr$$module$src$json$$($obj$jscomp$29_value$jscomp$93$$,$expr$jscomp$3_i$jscomp$10$$){if("."==$expr$jscomp$3_i$jscomp$10$$)return $obj$jscomp$29_value$jscomp$93$$;var $parts$$=$expr$jscomp$3_i$jscomp$10$$.split(".");for($expr$jscomp$3_i$jscomp$10$$=0;$expr$jscomp$3_i$jscomp$10$$<$parts$$.length;$expr$jscomp$3_i$jscomp$10$$++){var $part$$=$parts$$[$expr$jscomp$3_i$jscomp$10$$];if($part$$&&$obj$jscomp$29_value$jscomp$93$$&&void 0!==$obj$jscomp$29_value$jscomp$93$$[$part$$]&&(null==
$obj$jscomp$29_value$jscomp$93$$||"object"!=typeof $obj$jscomp$29_value$jscomp$93$$?0:Object.prototype.hasOwnProperty.call($obj$jscomp$29_value$jscomp$93$$,$part$$)))$obj$jscomp$29_value$jscomp$93$$=$obj$jscomp$29_value$jscomp$93$$[$part$$];else{$obj$jscomp$29_value$jscomp$93$$=void 0;break}}return $obj$jscomp$29_value$jscomp$93$$}
function $tryParseJson$$module$src$json$$($json$jscomp$1$$,$opt_onFailed$$){try{return JSON.parse($json$jscomp$1$$)}catch($e$jscomp$13$$){return $opt_onFailed$$&&$opt_onFailed$$($e$jscomp$13$$),null}};function $CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$($ampdoc$$){this.$ampdoc_$=$ampdoc$$;this.$decryptionPromise_$=null;var $parsedEncryptedKeys$$=this.$ampdoc_$.getRootNode().querySelector("script[keys]");this.$encryptedKeys_$=$parsedEncryptedKeys$$&&$tryParseJson$$module$src$json$$($parsedEncryptedKeys$$.textContent)||null}$CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$.prototype.getEncryptedKeys=function(){return this.$encryptedKeys_$};
$CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$.prototype.getEncryptedDocumentKey=function($serviceId$$){var $encryptedKeys$$=this.getEncryptedKeys();return $encryptedKeys$$?$encryptedKeys$$[$serviceId$$]||null:null};
$CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$.prototype.tryToDecryptDocument=function(){var $$jscomp$this$jscomp$1$$=this;return this.$decryptionPromise_$?this.$decryptionPromise_$:this.$decryptionPromise_$=this.$ampdoc_$.whenReady().then(function(){var $encryptedSections$$=$$jscomp$this$jscomp$1$$.$ampdoc_$.getRootNode().querySelectorAll("script[encrypted]"),$promises$jscomp$1$$=[];$iterateCursor$$module$src$dom$$($encryptedSections$$,function($$jscomp$this$jscomp$1$$){$promises$jscomp$1$$.push($JSCompiler_StaticMethods_decryptDocumentContent_$$().then(function($encryptedSections$$){$$jscomp$this$jscomp$1$$.outerHTML=
$encryptedSections$$}))});return Promise.all($promises$jscomp$1$$)})};function $JSCompiler_StaticMethods_decryptDocumentContent_$$(){var $placeholder$$="<h2><i> abc </i></h2>";return Promise.resolve($placeholder$$)};function $getService$$module$src$service$$($win$jscomp$11$$,$id$jscomp$11$$){$win$jscomp$11$$=$win$jscomp$11$$.__AMP_TOP||$win$jscomp$11$$;return $getServiceInternal$$module$src$service$$($win$jscomp$11$$,$id$jscomp$11$$)}
function $getServiceForDoc$$module$src$service$$($elementOrAmpDoc$$,$id$jscomp$15$$){var $ampdoc$jscomp$3_holder$jscomp$2$$=$getAmpdoc$$module$src$service$$($elementOrAmpDoc$$);$ampdoc$jscomp$3_holder$jscomp$2$$=$getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$3_holder$jscomp$2$$);return $getServiceInternal$$module$src$service$$($ampdoc$jscomp$3_holder$jscomp$2$$,$id$jscomp$15$$)}
function $getAmpdoc$$module$src$service$$($nodeOrDoc$jscomp$2$$){return $nodeOrDoc$jscomp$2$$.nodeType?$getService$$module$src$service$$(($nodeOrDoc$jscomp$2$$.ownerDocument||$nodeOrDoc$jscomp$2$$).defaultView,"ampdoc").getAmpDoc($nodeOrDoc$jscomp$2$$):$nodeOrDoc$jscomp$2$$}
function $getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$){$ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$=$getAmpdoc$$module$src$service$$($ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$);return $ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$.isSingleDoc()?$ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$.win:$ampdoc$jscomp$5_nodeOrDoc$jscomp$3$$}
function $getServiceInternal$$module$src$service$$($holder$jscomp$4_s$jscomp$8$$,$id$jscomp$19$$){$isServiceRegistered$$module$src$service$$($holder$jscomp$4_s$jscomp$8$$,$id$jscomp$19$$);var $services$$=$getServices$$module$src$service$$($holder$jscomp$4_s$jscomp$8$$);$holder$jscomp$4_s$jscomp$8$$=$services$$[$id$jscomp$19$$];$holder$jscomp$4_s$jscomp$8$$.obj||($holder$jscomp$4_s$jscomp$8$$.obj=new $holder$jscomp$4_s$jscomp$8$$.ctor($holder$jscomp$4_s$jscomp$8$$.context),$holder$jscomp$4_s$jscomp$8$$.ctor=
null,$holder$jscomp$4_s$jscomp$8$$.context=null,$holder$jscomp$4_s$jscomp$8$$.resolve&&$holder$jscomp$4_s$jscomp$8$$.resolve($holder$jscomp$4_s$jscomp$8$$.obj));return $holder$jscomp$4_s$jscomp$8$$.obj}
function $getServicePromiseInternal$$module$src$service$$($holder$jscomp$6_services$jscomp$2$$,$id$jscomp$21$$){var $cached$$=$getServicePromiseOrNullInternal$$module$src$service$$($holder$jscomp$6_services$jscomp$2$$,$id$jscomp$21$$);if($cached$$)return $cached$$;$holder$jscomp$6_services$jscomp$2$$=$getServices$$module$src$service$$($holder$jscomp$6_services$jscomp$2$$);$holder$jscomp$6_services$jscomp$2$$[$id$jscomp$21$$]=$emptyServiceHolderWithPromise$$module$src$service$$();return $holder$jscomp$6_services$jscomp$2$$[$id$jscomp$21$$].promise}
function $getServicePromiseOrNullInternal$$module$src$service$$($holder$jscomp$8$$,$id$jscomp$23$$){var $s$jscomp$11$$=$getServices$$module$src$service$$($holder$jscomp$8$$)[$id$jscomp$23$$];if($s$jscomp$11$$){if($s$jscomp$11$$.promise)return $s$jscomp$11$$.promise;$getServiceInternal$$module$src$service$$($holder$jscomp$8$$,$id$jscomp$23$$);return $s$jscomp$11$$.promise=Promise.resolve($s$jscomp$11$$.obj)}return null}
function $getServices$$module$src$service$$($holder$jscomp$9$$){var $services$jscomp$5$$=$holder$jscomp$9$$.services;$services$jscomp$5$$||($services$jscomp$5$$=$holder$jscomp$9$$.services={});return $services$jscomp$5$$}
function $isServiceRegistered$$module$src$service$$($holder$jscomp$12_service$jscomp$4$$,$id$jscomp$27$$){$holder$jscomp$12_service$jscomp$4$$=$holder$jscomp$12_service$jscomp$4$$.services&&$holder$jscomp$12_service$jscomp$4$$.services[$id$jscomp$27$$];return!(!$holder$jscomp$12_service$jscomp$4$$||!$holder$jscomp$12_service$jscomp$4$$.ctor&&!$holder$jscomp$12_service$jscomp$4$$.obj)}
function $emptyServiceHolderWithPromise$$module$src$service$$(){var $$jscomp$destructuring$var10_reject$jscomp$3$$=new $Deferred$$module$src$utils$promise$$,$promise$jscomp$1$$=$$jscomp$destructuring$var10_reject$jscomp$3$$.promise,$resolve$jscomp$9$$=$$jscomp$destructuring$var10_reject$jscomp$3$$.resolve;$$jscomp$destructuring$var10_reject$jscomp$3$$=$$jscomp$destructuring$var10_reject$jscomp$3$$.reject;$promise$jscomp$1$$.catch(function(){});return{obj:null,promise:$promise$jscomp$1$$,resolve:$resolve$jscomp$9$$,
reject:$$jscomp$destructuring$var10_reject$jscomp$3$$,context:null,ctor:null}};function $getElementServiceIfAvailableForDoc$$module$src$element_service$$($element$jscomp$34$$){var $s$jscomp$13$$=$getServicePromiseOrNullInternal$$module$src$service$$($getAmpdocServiceHolder$$module$src$service$$($element$jscomp$34$$),"amp-analytics-instrumentation");if($s$jscomp$13$$)return $s$jscomp$13$$;var $ampdoc$jscomp$8$$=$getAmpdoc$$module$src$service$$($element$jscomp$34$$);return $ampdoc$jscomp$8$$.whenBodyAvailable().then(function(){var $element$jscomp$34$$=$ampdoc$jscomp$8$$.win;var $s$jscomp$13$$=
$ampdoc$jscomp$8$$.win.document.head;if($s$jscomp$13$$){var $JSCompiler_inline_result$jscomp$175_JSCompiler_scripts$jscomp$inline_187$$=[];$s$jscomp$13$$=$s$jscomp$13$$.querySelectorAll("script[custom-element]");for(var $JSCompiler_i$jscomp$inline_189$$=0;$JSCompiler_i$jscomp$inline_189$$<$s$jscomp$13$$.length;$JSCompiler_i$jscomp$inline_189$$++)$JSCompiler_inline_result$jscomp$175_JSCompiler_scripts$jscomp$inline_187$$.push($s$jscomp$13$$[$JSCompiler_i$jscomp$inline_189$$].getAttribute("custom-element"))}else $JSCompiler_inline_result$jscomp$175_JSCompiler_scripts$jscomp$inline_187$$=
[];$element$jscomp$34$$=$JSCompiler_inline_result$jscomp$175_JSCompiler_scripts$jscomp$inline_187$$.includes("amp-analytics")?$getService$$module$src$service$$($element$jscomp$34$$,"extensions").waitForExtension($element$jscomp$34$$,"amp-analytics"):Promise.resolve();return $element$jscomp$34$$}).then(function(){var $s$jscomp$13$$=$ampdoc$jscomp$8$$.win;return $s$jscomp$13$$.ampExtendedElements&&$s$jscomp$13$$.ampExtendedElements["amp-analytics"]?$getServicePromiseInternal$$module$src$service$$($getAmpdocServiceHolder$$module$src$service$$($element$jscomp$34$$),
"amp-analytics-instrumentation"):null})};var $propertyNameCache$$module$src$style$$,$vendorPrefixes$$module$src$style$$="Webkit webkit Moz moz ms O o".split(" ");
function $getVendorJsPropertyName$$module$src$style$$($style$jscomp$1$$,$camelCase$jscomp$1$$){var $opt_bypassCache$$;if(2>$camelCase$jscomp$1$$.length?0:0==$camelCase$jscomp$1$$.lastIndexOf("--",0))return $camelCase$jscomp$1$$;$propertyNameCache$$module$src$style$$||($propertyNameCache$$module$src$style$$=$map$$module$src$utils$object$$());var $propertyName$jscomp$9$$=$propertyNameCache$$module$src$style$$[$camelCase$jscomp$1$$];if(!$propertyName$jscomp$9$$||$opt_bypassCache$$){$propertyName$jscomp$9$$=
$camelCase$jscomp$1$$;if(void 0===$style$jscomp$1$$[$camelCase$jscomp$1$$]){var $JSCompiler_inline_result$jscomp$28_titleCase$jscomp$1$$=$camelCase$jscomp$1$$.charAt(0).toUpperCase()+$camelCase$jscomp$1$$.slice(1);a:{for(var $JSCompiler_i$jscomp$inline_79$$=0;$JSCompiler_i$jscomp$inline_79$$<$vendorPrefixes$$module$src$style$$.length;$JSCompiler_i$jscomp$inline_79$$++){var $JSCompiler_propertyName$jscomp$inline_80$$=$vendorPrefixes$$module$src$style$$[$JSCompiler_i$jscomp$inline_79$$]+$JSCompiler_inline_result$jscomp$28_titleCase$jscomp$1$$;
if(void 0!==$style$jscomp$1$$[$JSCompiler_propertyName$jscomp$inline_80$$]){$JSCompiler_inline_result$jscomp$28_titleCase$jscomp$1$$=$JSCompiler_propertyName$jscomp$inline_80$$;break a}}$JSCompiler_inline_result$jscomp$28_titleCase$jscomp$1$$=""}var $prefixedPropertyName$$=$JSCompiler_inline_result$jscomp$28_titleCase$jscomp$1$$;void 0!==$style$jscomp$1$$[$prefixedPropertyName$$]&&($propertyName$jscomp$9$$=$prefixedPropertyName$$)}$opt_bypassCache$$||($propertyNameCache$$module$src$style$$[$camelCase$jscomp$1$$]=
$propertyName$jscomp$9$$)}return $propertyName$jscomp$9$$}function $setImportantStyles$$module$src$style$$($element$jscomp$56_style$jscomp$2$$,$styles$$){$element$jscomp$56_style$jscomp$2$$=$element$jscomp$56_style$jscomp$2$$.style;for(var $k$jscomp$3$$ in $styles$$)$element$jscomp$56_style$jscomp$2$$.setProperty($getVendorJsPropertyName$$module$src$style$$($element$jscomp$56_style$jscomp$2$$,$k$jscomp$3$$),$styles$$[$k$jscomp$3$$].toString(),"important")}
function $toggle$$module$src$style$$($element$jscomp$60$$,$opt_display$$){void 0===$opt_display$$&&($opt_display$$=$element$jscomp$60$$.hasAttribute("hidden"));$opt_display$$?$element$jscomp$60$$.removeAttribute("hidden"):$element$jscomp$60$$.setAttribute("hidden","")};function $Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$($ampdoc$jscomp$11_doc$jscomp$14$$){var $$jscomp$this$jscomp$2$$=this;this.$ampdoc_$=$ampdoc$jscomp$11_doc$jscomp$14$$;this.$vsync_$=$getService$$module$src$service$$($ampdoc$jscomp$11_doc$jscomp$14$$.win,"vsync");this.$timer_$=$getService$$module$src$service$$($ampdoc$jscomp$11_doc$jscomp$14$$.win,"timer");this.$viewport_$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$11_doc$jscomp$14$$,"viewport");this.$visible_$=!1;this.$content_$=
null;this.$lastAction_$=Promise.resolve();$ampdoc$jscomp$11_doc$jscomp$14$$=this.$ampdoc_$.win.document;this.$wrapper_$=$createElementWithAttributes$$module$src$dom$$($ampdoc$jscomp$11_doc$jscomp$14$$,"amp-subscriptions-dialog",{role:"dialog"});$toggle$$module$src$style$$(this.$wrapper_$,!1);this.$closeButton_$=$createElementWithAttributes$$module$src$dom$$($ampdoc$jscomp$11_doc$jscomp$14$$,"button",{"class":"i-amphtml-subs-dialog-close-button"});this.showCloseAction(!1);this.$wrapper_$.appendChild(this.$closeButton_$);
this.$closeButton_$.addEventListener("click",function(){$$jscomp$this$jscomp$2$$.close()});this.$ampdoc_$.getBody().appendChild(this.$wrapper_$);$setImportantStyles$$module$src$style$$(this.$wrapper_$,{transform:"translateY(100%)"})}$JSCompiler_prototypeAlias$$=$Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$.prototype;$JSCompiler_prototypeAlias$$.getRoot=function(){return this.$wrapper_$};$JSCompiler_prototypeAlias$$.isVisible=function(){return this.$visible_$};
$JSCompiler_prototypeAlias$$.open=function($content$jscomp$1$$,$showCloseAction$$){var $$jscomp$this$jscomp$3$$=this;$showCloseAction$$=void 0===$showCloseAction$$?!0:$showCloseAction$$;return $JSCompiler_StaticMethods_action_$$(this,function(){return $JSCompiler_StaticMethods_open_$$($$jscomp$this$jscomp$3$$,$content$jscomp$1$$,$showCloseAction$$)})};$JSCompiler_prototypeAlias$$.close=function(){var $$jscomp$this$jscomp$4$$=this;return $JSCompiler_StaticMethods_action_$$(this,function(){return $JSCompiler_StaticMethods_close_$$($$jscomp$this$jscomp$4$$)})};
function $JSCompiler_StaticMethods_action_$$($JSCompiler_StaticMethods_action_$self$$,$action$$){return $JSCompiler_StaticMethods_action_$self$$.$lastAction_$=$JSCompiler_StaticMethods_action_$self$$.$lastAction_$.then($action$$)}
function $JSCompiler_StaticMethods_open_$$($JSCompiler_StaticMethods_open_$self$$,$content$jscomp$2$$,$showCloseAction$jscomp$1$$){$showCloseAction$jscomp$1$$=void 0===$showCloseAction$jscomp$1$$?!0:$showCloseAction$jscomp$1$$;$JSCompiler_StaticMethods_open_$self$$.$content_$?$JSCompiler_StaticMethods_open_$self$$.$wrapper_$.replaceChild($content$jscomp$2$$,$JSCompiler_StaticMethods_open_$self$$.$content_$):$JSCompiler_StaticMethods_open_$self$$.$wrapper_$.appendChild($content$jscomp$2$$);$JSCompiler_StaticMethods_open_$self$$.$content_$=
$content$jscomp$2$$;if($JSCompiler_StaticMethods_open_$self$$.$visible_$)return Promise.resolve();$JSCompiler_StaticMethods_open_$self$$.$visible_$=!0;return $JSCompiler_StaticMethods_open_$self$$.$vsync_$.mutatePromise(function(){$toggle$$module$src$style$$($JSCompiler_StaticMethods_open_$self$$.$wrapper_$,!0);$JSCompiler_StaticMethods_open_$self$$.showCloseAction($showCloseAction$jscomp$1$$)}).then(function(){return $JSCompiler_StaticMethods_open_$self$$.$vsync_$.mutatePromise(function(){$setImportantStyles$$module$src$style$$($JSCompiler_StaticMethods_open_$self$$.$wrapper_$,
{transform:"translateY(0)"})}).then(function(){return $JSCompiler_StaticMethods_open_$self$$.$timer_$.promise(300)})}).then(function(){var $content$jscomp$2$$;return $JSCompiler_StaticMethods_open_$self$$.$vsync_$.runPromise({measure:function(){$content$jscomp$2$$=$JSCompiler_StaticMethods_open_$self$$.$wrapper_$.offsetHeight},mutate:function(){$JSCompiler_StaticMethods_open_$self$$.$viewport_$.updatePaddingBottom($content$jscomp$2$$)}})})}
function $JSCompiler_StaticMethods_close_$$($JSCompiler_StaticMethods_close_$self$$){return $JSCompiler_StaticMethods_close_$self$$.$visible_$?$JSCompiler_StaticMethods_close_$self$$.$vsync_$.mutatePromise(function(){$setImportantStyles$$module$src$style$$($JSCompiler_StaticMethods_close_$self$$.$wrapper_$,{transform:"translateY(100%)"})}).then(function(){return $JSCompiler_StaticMethods_close_$self$$.$timer_$.promise(300)}).then(function(){return $JSCompiler_StaticMethods_close_$self$$.$vsync_$.mutatePromise(function(){$toggle$$module$src$style$$($JSCompiler_StaticMethods_close_$self$$.$wrapper_$,
!1);$JSCompiler_StaticMethods_close_$self$$.$viewport_$.updatePaddingBottom(0);$JSCompiler_StaticMethods_close_$self$$.$visible_$=!1})}):Promise.resolve()}$JSCompiler_prototypeAlias$$.showCloseAction=function($show$$){$toggle$$module$src$style$$(this.$closeButton_$,$show$$)};function $isDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$16$$){var $readyState$$=$doc$jscomp$16$$.readyState;return"loading"!=$readyState$$&&"uninitialized"!=$readyState$$}
function $onDocumentState$$module$third_party$subscriptions_project$config$$($doc$jscomp$18$$,$callback$jscomp$67$$){var $ready$jscomp$1$$=$isDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$18$$);if($ready$jscomp$1$$)$callback$jscomp$67$$($doc$jscomp$18$$);else{var $readyListener$jscomp$1$$=function(){$isDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$18$$)&&($ready$jscomp$1$$||($ready$jscomp$1$$=!0,$callback$jscomp$67$$($doc$jscomp$18$$)),
$doc$jscomp$18$$.removeEventListener("readystatechange",$readyListener$jscomp$1$$))};$doc$jscomp$18$$.addEventListener("readystatechange",$readyListener$jscomp$1$$)}}function $whenDocumentReady$$module$third_party$subscriptions_project$config$$($doc$jscomp$19$$){return new Promise(function($resolve$jscomp$10$$){$onDocumentState$$module$third_party$subscriptions_project$config$$($doc$jscomp$19$$,$resolve$jscomp$10$$)})}
function $GlobalDoc$$module$third_party$subscriptions_project$config$$($winOrDoc$$){var $isWin$$=!!$winOrDoc$$.document;this.$win_$=$isWin$$?$winOrDoc$$:$winOrDoc$$.defaultView;this.$doc_$=$isWin$$?$winOrDoc$$.document:$winOrDoc$$}$JSCompiler_prototypeAlias$$=$GlobalDoc$$module$third_party$subscriptions_project$config$$.prototype;$JSCompiler_prototypeAlias$$.getWin=function(){return this.$win_$};$JSCompiler_prototypeAlias$$.getRootNode=function(){return this.$doc_$};
$JSCompiler_prototypeAlias$$.getRootElement=function(){return this.$doc_$.documentElement};$JSCompiler_prototypeAlias$$.getHead=function(){return this.$doc_$.head};$JSCompiler_prototypeAlias$$.getBody=function(){return this.$doc_$.body};$JSCompiler_prototypeAlias$$.isReady=function(){return $isDocumentReady$$module$third_party$subscriptions_project$config$$(this.$doc_$)};$JSCompiler_prototypeAlias$$.whenReady=function(){return $whenDocumentReady$$module$third_party$subscriptions_project$config$$(this.$doc_$)};
function $resolveDoc$$module$third_party$subscriptions_project$config$$($input$jscomp$9$$){return 9===$input$jscomp$9$$.nodeType||$input$jscomp$9$$.document?new $GlobalDoc$$module$third_party$subscriptions_project$config$$($input$jscomp$9$$):$input$jscomp$9$$}
function $PageConfig$$module$third_party$subscriptions_project$config$$($productOrPublicationId$$,$locked$$){var $div$$=$productOrPublicationId$$.indexOf(":");if(-1!=$div$$){var $productId$$=$productOrPublicationId$$;var $publicationId$$=$productId$$.substring(0,$div$$);var $label$jscomp$4$$=$productId$$.substring($div$$+1);if("*"==$label$jscomp$4$$)throw Error("wildcard disallowed");}else $publicationId$$=$productOrPublicationId$$,$label$jscomp$4$$=$productId$$=null;this.$publicationId_$=$publicationId$$;
this.$productId_$=$productId$$;this.$label_$=$label$jscomp$4$$;this.$locked_$=$locked$$}$PageConfig$$module$third_party$subscriptions_project$config$$.prototype.getPublicationId=function(){return this.$publicationId_$};$PageConfig$$module$third_party$subscriptions_project$config$$.prototype.getProductId=function(){return this.$productId_$};$PageConfig$$module$third_party$subscriptions_project$config$$.prototype.getLabel=function(){return this.$label_$};
$PageConfig$$module$third_party$subscriptions_project$config$$.prototype.isLocked=function(){return this.$locked_$};function $debugLog$$module$third_party$subscriptions_project$config$$($var_args$jscomp$55$$){if(/swg.debug=1/.test(self.location.hash)){var $logArgs$$=Array.prototype.slice.call(arguments,0);$logArgs$$.unshift("[Subscriptions]");$log$$module$third_party$subscriptions_project$config$$.apply($log$$module$third_party$subscriptions_project$config$$,$logArgs$$)}}
function $log$$module$third_party$subscriptions_project$config$$($var_args$jscomp$56$$){console.log.apply(console,arguments)}var $ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$="CreativeWork Article NewsArticle Blog Comment Course HowTo Message Review WebPage".split(" "),$RE_ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$=new RegExp($ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$.join("|"));
function $PageConfigResolver$$module$third_party$subscriptions_project$config$$($winOrDoc$jscomp$1$$){var $$jscomp$this$jscomp$7$$=this;this.$doc_$=$resolveDoc$$module$third_party$subscriptions_project$config$$($winOrDoc$jscomp$1$$);this.$configResolver_$=null;this.$configPromise_$=new Promise(function($winOrDoc$jscomp$1$$){$$jscomp$this$jscomp$7$$.$configResolver_$=$winOrDoc$jscomp$1$$});this.$metaParser_$=new $MetaParser$$module$third_party$subscriptions_project$config$$(this.$doc_$);this.$ldParser_$=
new $JsonLdParser$$module$third_party$subscriptions_project$config$$(this.$doc_$);this.$microdataParser_$=new $MicrodataParser$$module$third_party$subscriptions_project$config$$(this.$doc_$)}$PageConfigResolver$$module$third_party$subscriptions_project$config$$.prototype.resolveConfig=function(){Promise.resolve().then(this.check.bind(this));this.$doc_$.whenReady().then(this.check.bind(this));return this.$configPromise_$};
$PageConfigResolver$$module$third_party$subscriptions_project$config$$.prototype.check=function(){if(!this.$configResolver_$)return null;var $config$jscomp$2$$=this.$metaParser_$.check();$config$jscomp$2$$||($config$jscomp$2$$=this.$ldParser_$.check());$config$jscomp$2$$||($config$jscomp$2$$=this.$microdataParser_$.check());$config$jscomp$2$$?(this.$configResolver_$($config$jscomp$2$$),this.$configResolver_$=null):this.$doc_$.isReady()&&(this.$configResolver_$(Promise.reject(Error("No config could be discovered in the page"))),
this.$configResolver_$=null);$debugLog$$module$third_party$subscriptions_project$config$$($config$jscomp$2$$);return $config$jscomp$2$$};function $TypeChecker$$module$third_party$subscriptions_project$config$$(){}$TypeChecker$$module$third_party$subscriptions_project$config$$.prototype.checkValue=function($value$jscomp$102$$,$expectedTypes$$){return $value$jscomp$102$$?this.checkArray(Array.isArray($value$jscomp$102$$)?$value$jscomp$102$$:[$value$jscomp$102$$],$expectedTypes$$):!1};
$TypeChecker$$module$third_party$subscriptions_project$config$$.prototype.checkString=function($itemtype$$,$expectedTypes$jscomp$1$$){return $itemtype$$?this.checkArray($itemtype$$.split(/\s+/),$expectedTypes$jscomp$1$$):!1};
$TypeChecker$$module$third_party$subscriptions_project$config$$.prototype.checkArray=function($typeArray$$,$expectedTypes$jscomp$2$$){var $found$$=!1;$typeArray$$.forEach(function($typeArray$$){$found$$=$found$$||$expectedTypes$jscomp$2$$.includes($typeArray$$.replace(/^http:\/\/schema.org\//i,""))});return $found$$};function $MetaParser$$module$third_party$subscriptions_project$config$$($doc$jscomp$20$$){this.$doc_$=$doc$jscomp$20$$}
$MetaParser$$module$third_party$subscriptions_project$config$$.prototype.check=function(){if(!this.$doc_$.getBody())return null;var $productId$jscomp$1$$=$getMetaTag$$module$third_party$subscriptions_project$config$$(this.$doc_$.getRootNode(),"subscriptions-product-id");if(!$productId$jscomp$1$$)return null;var $accessibleForFree$$=$getMetaTag$$module$third_party$subscriptions_project$config$$(this.$doc_$.getRootNode(),"subscriptions-accessible-for-free");return new $PageConfig$$module$third_party$subscriptions_project$config$$($productId$jscomp$1$$,
$accessibleForFree$$&&"false"==$accessibleForFree$$.toLowerCase()||!1)};function $JsonLdParser$$module$third_party$subscriptions_project$config$$($doc$jscomp$21$$){this.$doc_$=$doc$jscomp$21$$;this.$checkType_$=new $TypeChecker$$module$third_party$subscriptions_project$config$$}
$JsonLdParser$$module$third_party$subscriptions_project$config$$.prototype.check=function(){if(!this.$doc_$.getBody())return null;for(var $domReady$$=this.$doc_$.isReady(),$elements$jscomp$1$$=this.$doc_$.getRootNode().querySelectorAll('script[type="application/ld+json"]'),$i$jscomp$15$$=0;$i$jscomp$15$$<$elements$jscomp$1$$.length;$i$jscomp$15$$++){var $element$jscomp$63$$=$elements$jscomp$1$$[$i$jscomp$15$$],$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$;
if(($JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=!$element$jscomp$63$$["__SWG-SEEN__"]&&$element$jscomp$63$$.textContent)&&!($JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=$domReady$$))a:{$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=$element$jscomp$63$$;do if($JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$.nextSibling){$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=
!0;break a}while(($JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$.parentNode)&&void 0!=$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$);$JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$=!1}if($JSCompiler_currentElement$jscomp$inline_87_JSCompiler_temp$jscomp$29_JSCompiler_temp$jscomp$30$$&&
($element$jscomp$63$$["__SWG-SEEN__"]=!0,$RE_ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$.test($element$jscomp$63$$.textContent))){var $possibleConfig$$=this.$tryExtractConfig_$($element$jscomp$63$$);if($possibleConfig$$)return $possibleConfig$$}}return null};
$JsonLdParser$$module$third_party$subscriptions_project$config$$.prototype.$tryExtractConfig_$=function($element$jscomp$64_json$jscomp$4$$){a:{try{var $JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$=JSON.parse($element$jscomp$64_json$jscomp$4$$.textContent);break a}catch($JSCompiler_e$jscomp$inline_91$$){}$JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$=void 0}$element$jscomp$64_json$jscomp$4$$=$JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$;if(!$element$jscomp$64_json$jscomp$4$$||
!this.$checkType_$.checkValue($element$jscomp$64_json$jscomp$4$$["@type"],$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$))return null;$JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$=null;var $partOfArray$$=$JSCompiler_StaticMethods_valueArray_$$($element$jscomp$64_json$jscomp$4$$,"isPartOf");if($partOfArray$$)for(var $i$jscomp$16$$=0;$i$jscomp$16$$<$partOfArray$$.length&&!($JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$=this.$discoverProductId_$($partOfArray$$[$i$jscomp$16$$]));$i$jscomp$16$$++);
if(!$JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$)return null;var $isAccessibleForFree$$=$JSCompiler_StaticMethods_bool_$$($JSCompiler_StaticMethods_singleValue_$$($element$jscomp$64_json$jscomp$4$$,"isAccessibleForFree"));return new $PageConfig$$module$third_party$subscriptions_project$config$$($JSCompiler_inline_result$jscomp$31_productId$jscomp$2$$,!$isAccessibleForFree$$)};
function $JSCompiler_StaticMethods_bool_$$($value$jscomp$104$$){var $def$$=!0;if(null==$value$jscomp$104$$||""===$value$jscomp$104$$)return $def$$;if("boolean"==typeof $value$jscomp$104$$)return $value$jscomp$104$$;if("string"==typeof $value$jscomp$104$$){var $lowercase$$=$value$jscomp$104$$.toLowerCase();if("false"==$lowercase$$)return!1;if("true"==$lowercase$$)return!0}return $def$$}
$JsonLdParser$$module$third_party$subscriptions_project$config$$.prototype.$discoverProductId_$=function($json$jscomp$5$$){return this.$checkType_$.checkValue($json$jscomp$5$$["@type"],["Product"])?$JSCompiler_StaticMethods_singleValue_$$($json$jscomp$5$$,"productID"):null};
function $JSCompiler_StaticMethods_valueArray_$$($json$jscomp$6_value$jscomp$105$$,$name$jscomp$75$$){$json$jscomp$6_value$jscomp$105$$=$json$jscomp$6_value$jscomp$105$$[$name$jscomp$75$$];return null==$json$jscomp$6_value$jscomp$105$$||""===$json$jscomp$6_value$jscomp$105$$?null:Array.isArray($json$jscomp$6_value$jscomp$105$$)?$json$jscomp$6_value$jscomp$105$$:[$json$jscomp$6_value$jscomp$105$$]}
function $JSCompiler_StaticMethods_singleValue_$$($json$jscomp$7_value$jscomp$106$$,$name$jscomp$76$$){var $valueArray$$=$JSCompiler_StaticMethods_valueArray_$$($json$jscomp$7_value$jscomp$106$$,$name$jscomp$76$$);$json$jscomp$7_value$jscomp$106$$=$valueArray$$&&$valueArray$$[0];return null==$json$jscomp$7_value$jscomp$106$$||""===$json$jscomp$7_value$jscomp$106$$?null:$json$jscomp$7_value$jscomp$106$$}
function $MicrodataParser$$module$third_party$subscriptions_project$config$$($doc$jscomp$22$$){this.$doc_$=$doc$jscomp$22$$;this.$productId_$=this.$access_$=null;this.$checkType_$=new $TypeChecker$$module$third_party$subscriptions_project$config$$}
function $JSCompiler_StaticMethods_discoverAccess_$$($JSCompiler_StaticMethods_discoverAccess_$self$$,$i$jscomp$17_root$jscomp$7$$){var $ALREADY_SEEN$$="alreadySeenForAccessInfo",$nodeList$$=$i$jscomp$17_root$jscomp$7$$.querySelectorAll("[itemprop='isAccessibleForFree']");for($i$jscomp$17_root$jscomp$7$$=0;$nodeList$$[$i$jscomp$17_root$jscomp$7$$];$i$jscomp$17_root$jscomp$7$$++){var $element$jscomp$65$$=$nodeList$$[$i$jscomp$17_root$jscomp$7$$],$content$jscomp$3$$=$element$jscomp$65$$.getAttribute("content")||
$element$jscomp$65$$.textContent;if($content$jscomp$3$$&&$JSCompiler_StaticMethods_isValidElement_$$($JSCompiler_StaticMethods_discoverAccess_$self$$,$element$jscomp$65$$,$ALREADY_SEEN$$)){var $accessForFree$$=null;"true"==$content$jscomp$3$$.toLowerCase()?$accessForFree$$=!0:"false"==$content$jscomp$3$$.toLowerCase()&&($accessForFree$$=!1);return $accessForFree$$}}return null}
function $JSCompiler_StaticMethods_isValidElement_$$($JSCompiler_StaticMethods_isValidElement_$self$$,$current$$,$alreadySeen$$){for(var $node$jscomp$6_type$jscomp$134$$=$current$$;$node$jscomp$6_type$jscomp$134$$&&!$node$jscomp$6_type$jscomp$134$$[$alreadySeen$$];$node$jscomp$6_type$jscomp$134$$=$node$jscomp$6_type$jscomp$134$$.parentNode)if($node$jscomp$6_type$jscomp$134$$[$alreadySeen$$]=!0,$node$jscomp$6_type$jscomp$134$$.hasAttribute&&$node$jscomp$6_type$jscomp$134$$.hasAttribute("itemscope"))return $node$jscomp$6_type$jscomp$134$$=
$node$jscomp$6_type$jscomp$134$$.getAttribute("itemtype"),$JSCompiler_StaticMethods_isValidElement_$self$$.$checkType_$.checkString($node$jscomp$6_type$jscomp$134$$,$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$);return!1}
$MicrodataParser$$module$third_party$subscriptions_project$config$$.prototype.$discoverProductId_$=function($nodeList$jscomp$1_root$jscomp$9$$){$nodeList$jscomp$1_root$jscomp$9$$=$nodeList$jscomp$1_root$jscomp$9$$.querySelectorAll('[itemprop="productID"]');for(var $i$jscomp$18$$=0;$nodeList$jscomp$1_root$jscomp$9$$[$i$jscomp$18$$];$i$jscomp$18$$++){var $element$jscomp$66$$=$nodeList$jscomp$1_root$jscomp$9$$[$i$jscomp$18$$],$content$jscomp$4$$=$element$jscomp$66$$.getAttribute("content")||$element$jscomp$66$$.textContent,
$item$$=$element$jscomp$66$$.closest("[itemtype][itemscope]");if(!(-1>=$item$$.getAttribute("itemtype").indexOf("http://schema.org/Product"))&&$JSCompiler_StaticMethods_isValidElement_$$(this,$item$$.parentElement,"alreadySeenForProductInfo"))return $content$jscomp$4$$}return null};
function $JSCompiler_StaticMethods_getPageConfig_$$($JSCompiler_StaticMethods_getPageConfig_$self$$){var $locked$jscomp$2$$=null;null!=$JSCompiler_StaticMethods_getPageConfig_$self$$.$access_$?$locked$jscomp$2$$=!$JSCompiler_StaticMethods_getPageConfig_$self$$.$access_$:$JSCompiler_StaticMethods_getPageConfig_$self$$.$doc_$.isReady()&&($locked$jscomp$2$$=!1);return null!=$JSCompiler_StaticMethods_getPageConfig_$self$$.$productId_$&&null!=$locked$jscomp$2$$?new $PageConfig$$module$third_party$subscriptions_project$config$$($JSCompiler_StaticMethods_getPageConfig_$self$$.$productId_$,
$locked$jscomp$2$$):null}
$MicrodataParser$$module$third_party$subscriptions_project$config$$.prototype.$tryExtractConfig_$=function(){var $$jscomp$this$jscomp$8$$=this,$config$jscomp$3_element$jscomp$67$$=$JSCompiler_StaticMethods_getPageConfig_$$(this);if($config$jscomp$3_element$jscomp$67$$)return $config$jscomp$3_element$jscomp$67$$;for(var $nodeList$jscomp$2$$=Array.prototype.slice.call(this.$doc_$.getRootNode().querySelectorAll("[itemscope][itemtype]")).filter(function($config$jscomp$3_element$jscomp$67$$){return $$jscomp$this$jscomp$8$$.$checkType_$.checkString($config$jscomp$3_element$jscomp$67$$.getAttribute("itemtype"),$ALLOWED_TYPES$$module$third_party$subscriptions_project$config$$)}),
$i$jscomp$19$$=0;$nodeList$jscomp$2$$[$i$jscomp$19$$]&&null==$config$jscomp$3_element$jscomp$67$$;$i$jscomp$19$$++)$config$jscomp$3_element$jscomp$67$$=$nodeList$jscomp$2$$[$i$jscomp$19$$],null==this.$access_$&&(this.$access_$=$JSCompiler_StaticMethods_discoverAccess_$$(this,$config$jscomp$3_element$jscomp$67$$)),this.$productId_$||(this.$productId_$=this.$discoverProductId_$($config$jscomp$3_element$jscomp$67$$)),$config$jscomp$3_element$jscomp$67$$=$JSCompiler_StaticMethods_getPageConfig_$$(this);
return $config$jscomp$3_element$jscomp$67$$};$MicrodataParser$$module$third_party$subscriptions_project$config$$.prototype.check=function(){return this.$doc_$.getBody()?this.$tryExtractConfig_$():null};
function $getMetaTag$$module$third_party$subscriptions_project$config$$($el$jscomp$9_rootNode$jscomp$1$$,$name$jscomp$77$$){return($el$jscomp$9_rootNode$jscomp$1$$=$el$jscomp$9_rootNode$jscomp$1$$.querySelector('meta[name="'+$name$jscomp$77$$+'"]'))?$el$jscomp$9_rootNode$jscomp$1$$.getAttribute("content"):null};function $DocImpl$$module$extensions$amp_subscriptions$0_1$doc_impl$$($ampdoc$jscomp$12$$){this.$ampdoc_$=$ampdoc$jscomp$12$$}$JSCompiler_prototypeAlias$$=$DocImpl$$module$extensions$amp_subscriptions$0_1$doc_impl$$.prototype;$JSCompiler_prototypeAlias$$.getWin=function(){return this.$ampdoc_$.win};$JSCompiler_prototypeAlias$$.getRootNode=function(){return this.$ampdoc_$.getRootNode()};
$JSCompiler_prototypeAlias$$.getRootElement=function(){var $root$jscomp$10$$=this.$ampdoc_$.getRootNode();return $root$jscomp$10$$.documentElement||$root$jscomp$10$$.body||$root$jscomp$10$$};$JSCompiler_prototypeAlias$$.getHead=function(){return this.$ampdoc_$.getHeadNode()};$JSCompiler_prototypeAlias$$.getBody=function(){return this.$ampdoc_$.isBodyAvailable()?this.$ampdoc_$.getBody():null};$JSCompiler_prototypeAlias$$.isReady=function(){return this.$ampdoc_$.isReady()};
$JSCompiler_prototypeAlias$$.whenReady=function(){return this.$ampdoc_$.whenReady()};function $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$($$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$){var $source$jscomp$13$$=$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.source,$raw$$=void 0===$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.raw?"":$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.raw,$service$jscomp$8$$=$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.service,$granted$$=void 0===$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.granted?
!1:$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.granted,$grantReason$$=void 0===$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.grantReason?"":$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.grantReason,$dataObject$$=$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.dataObject;$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$=$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$.decryptedDocumentKey;this.raw=$raw$$;this.source=
$source$jscomp$13$$;this.service=$service$jscomp$8$$;this.granted=$granted$$;this.grantReason=$grantReason$$;this.data=$dataObject$$;this.decryptedDocumentKey=$$jscomp$destructuring$var13_decryptedDocumentKey$jscomp$1$$}function $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$($service$jscomp$9$$){return new $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"",raw:"",service:$service$jscomp$9$$,granted:!1})}
$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$.prototype.json=function(){var $entitlementJson$$=$dict$$module$src$utils$object$$({source:this.source,service:this.service,granted:this.granted,grantReason:this.grantReason,data:this.data});return $entitlementJson$$};$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$.prototype.jsonForPingback=function(){return Object.assign({},{raw:this.raw},this.json())};
function $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$($json$jscomp$8$$){var $rawData$$=void 0===$rawData$$?null:$rawData$$;$json$jscomp$8$$||($json$jscomp$8$$={});var $raw$jscomp$1$$=$rawData$$||JSON.stringify($json$jscomp$8$$);return new $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:$json$jscomp$8$$.source||"",raw:$raw$jscomp$1$$,service:"",granted:$json$jscomp$8$$.granted||!1,grantReason:$json$jscomp$8$$.grantReason,dataObject:$json$jscomp$8$$.data||
null,decryptedDocumentKey:$json$jscomp$8$$.decryptedDocumentKey||null})}$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$.prototype.isSubscriber=function(){return this.granted&&"SUBSCRIBER"===this.grantReason};function $LruCache$$module$src$utils$lru_cache$$(){var $capacity$$=100;this.$capacity_$=$capacity$$;this.$access_$=this.$size_$=0;this.$cache_$=Object.create(null)}$LruCache$$module$src$utils$lru_cache$$.prototype.has=function($key$jscomp$44$$){return!!this.$cache_$[$key$jscomp$44$$]};$LruCache$$module$src$utils$lru_cache$$.prototype.get=function($key$jscomp$45$$){var $cacheable$$=this.$cache_$[$key$jscomp$45$$];if($cacheable$$)return $cacheable$$.access=++this.$access_$,$cacheable$$.payload};
$LruCache$$module$src$utils$lru_cache$$.prototype.put=function($JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$,$payload$$){this.has($JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$)||this.$size_$++;this.$cache_$[$JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$]={payload:$payload$$,access:this.$access_$};if(!(this.$size_$<=this.$capacity_$)){$dev$$module$src$log$$().warn("lru-cache","Trimming LRU cache");$JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$=this.$cache_$;var $JSCompiler_oldest$jscomp$inline_95$$=
this.$access_$+1,$JSCompiler_key$jscomp$inline_97$$;for($JSCompiler_key$jscomp$inline_97$$ in $JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$){var $JSCompiler_access$jscomp$inline_98$$=$JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$[$JSCompiler_key$jscomp$inline_97$$].access;if($JSCompiler_access$jscomp$inline_98$$<$JSCompiler_oldest$jscomp$inline_95$$){$JSCompiler_oldest$jscomp$inline_95$$=$JSCompiler_access$jscomp$inline_98$$;var $JSCompiler_oldestKey$jscomp$inline_96$$=$JSCompiler_key$jscomp$inline_97$$}}void 0!==
$JSCompiler_oldestKey$jscomp$inline_96$$&&(delete $JSCompiler_cache$jscomp$inline_94_key$jscomp$46$$[$JSCompiler_oldestKey$jscomp$inline_96$$],this.$size_$--)}};var $env$$module$src$config$$=self.AMP_CONFIG||{},$urls$$module$src$config$$={thirdParty:$env$$module$src$config$$.thirdPartyUrl||"https://3p.ampproject.net",thirdPartyFrameHost:$env$$module$src$config$$.thirdPartyFrameHost||"ampproject.net",thirdPartyFrameRegex:("string"==typeof $env$$module$src$config$$.thirdPartyFrameRegex?new RegExp($env$$module$src$config$$.thirdPartyFrameRegex):$env$$module$src$config$$.thirdPartyFrameRegex)||/^d-\d+\.ampproject\.net$/,cdn:$env$$module$src$config$$.cdnUrl||
"https://cdn.ampproject.org",cdnProxyRegex:("string"==typeof $env$$module$src$config$$.cdnProxyRegex?new RegExp($env$$module$src$config$$.cdnProxyRegex):$env$$module$src$config$$.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/,localhostRegex:/^https?:\/\/localhost(:\d+)?$/,errorReporting:$env$$module$src$config$$.errorReportingUrl||"https://amp-error-reporting.appspot.com/r",localDev:$env$$module$src$config$$.localDev||!1};var $SERVING_TYPE_PREFIX$$module$src$url$$=$dict$$module$src$utils$object$$({c:!0,v:!0,a:!0,ad:!0,action:!0}),$a$$module$src$url$$,$cache$$module$src$url$$,$AMP_JS_PARAMS_REGEX$$module$src$url$$=/[?&]amp_js[^&]*/,$AMP_GSA_PARAMS_REGEX$$module$src$url$$=/[?&]amp_gsa[^&]*/,$AMP_R_PARAMS_REGEX$$module$src$url$$=/[?&]amp_r[^&]*/,$AMP_KIT_PARAMS_REGEX$$module$src$url$$=/[?&]amp_kit[^&]*/,$GOOGLE_EXPERIMENT_PARAMS_REGEX$$module$src$url$$=/[?&]usqp[^&]*/;
function $getWinOrigin$$module$src$url$$($win$jscomp$43$$){return $win$jscomp$43$$.origin||$parseUrlDeprecated$$module$src$url$$($win$jscomp$43$$.location.href).origin}
function $parseUrlDeprecated$$module$src$url$$($JSCompiler_inline_result$jscomp$32_url$jscomp$22$$){var $opt_nocache$$;$a$$module$src$url$$||($a$$module$src$url$$=self.document.createElement("a"),$cache$$module$src$url$$=self.UrlCache||(self.UrlCache=new $LruCache$$module$src$utils$lru_cache$$));var $JSCompiler_opt_cache$jscomp$inline_101$$=$opt_nocache$$?null:$cache$$module$src$url$$,$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$=$a$$module$src$url$$;if($JSCompiler_opt_cache$jscomp$inline_101$$&&
$JSCompiler_opt_cache$jscomp$inline_101$$.has($JSCompiler_inline_result$jscomp$32_url$jscomp$22$$))$JSCompiler_inline_result$jscomp$32_url$jscomp$22$$=$JSCompiler_opt_cache$jscomp$inline_101$$.get($JSCompiler_inline_result$jscomp$32_url$jscomp$22$$);else{$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.href=$JSCompiler_inline_result$jscomp$32_url$jscomp$22$$;$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.protocol||($JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.href=
$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.href);var $JSCompiler_info$jscomp$inline_103$$={href:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.href,protocol:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.protocol,host:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.host,hostname:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.hostname,port:"0"==$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.port?
"":$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.port,pathname:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.pathname,search:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.search,hash:$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.hash,origin:null};"/"!==$JSCompiler_info$jscomp$inline_103$$.pathname[0]&&($JSCompiler_info$jscomp$inline_103$$.pathname="/"+$JSCompiler_info$jscomp$inline_103$$.pathname);if("http:"==
$JSCompiler_info$jscomp$inline_103$$.protocol&&80==$JSCompiler_info$jscomp$inline_103$$.port||"https:"==$JSCompiler_info$jscomp$inline_103$$.protocol&&443==$JSCompiler_info$jscomp$inline_103$$.port)$JSCompiler_info$jscomp$inline_103$$.port="",$JSCompiler_info$jscomp$inline_103$$.host=$JSCompiler_info$jscomp$inline_103$$.hostname;$JSCompiler_info$jscomp$inline_103$$.origin=$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.origin&&"null"!=$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.origin?
$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$.origin:"data:"!=$JSCompiler_info$jscomp$inline_103$$.protocol&&$JSCompiler_info$jscomp$inline_103$$.host?$JSCompiler_info$jscomp$inline_103$$.protocol+"//"+$JSCompiler_info$jscomp$inline_103$$.host:$JSCompiler_info$jscomp$inline_103$$.href;$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$=$getMode$$module$src$mode$$().test&&Object.freeze?Object.freeze($JSCompiler_info$jscomp$inline_103$$):$JSCompiler_info$jscomp$inline_103$$;
$JSCompiler_opt_cache$jscomp$inline_101$$&&$JSCompiler_opt_cache$jscomp$inline_101$$.put($JSCompiler_inline_result$jscomp$32_url$jscomp$22$$,$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$);$JSCompiler_inline_result$jscomp$32_url$jscomp$22$$=$JSCompiler_a$jscomp$inline_102_JSCompiler_frozen$jscomp$inline_104$$}return $JSCompiler_inline_result$jscomp$32_url$jscomp$22$$}
function $addParamToUrl$$module$src$url$$($JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$,$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$){$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$=encodeURIComponent("crypt")+"="+encodeURIComponent($JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$);if($JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$){$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$=
$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$.split("#",2);var $JSCompiler_mainAndQuery$jscomp$inline_110$$=$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$[0].split("?",2);$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$=$JSCompiler_mainAndQuery$jscomp$inline_110$$[0]+($JSCompiler_mainAndQuery$jscomp$inline_110$$[1]?"?"+$JSCompiler_mainAndQuery$jscomp$inline_110$$[1]+"&"+$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$:
"?"+$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$);$JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$+=$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$[1]?"#"+$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$[1]:""}else $JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$=$JSCompiler_mainAndFragment$jscomp$inline_109_url$jscomp$25$$;
return $JSCompiler_inline_result$jscomp$33_JSCompiler_newUrl$jscomp$inline_111_field$jscomp$1_value$jscomp$107$$}
function $assertHttpsUrl$$module$src$url$$($JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$,$elementContext$$){var $sourceName$$=void 0===$sourceName$$?"source":$sourceName$$;$userAssert$$module$src$log$$(null!=$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$,"%s %s must be available",$elementContext$$,$sourceName$$);var $theUrlString$$=$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$;
$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$=$theUrlString$$;"string"==typeof $JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$&&($JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$=$parseUrlDeprecated$$module$src$url$$($JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$));var $JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$;
($JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$="https:"==$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.protocol||"localhost"==$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.hostname||"127.0.0.1"==$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.hostname)||($JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$=$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.hostname,
$JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$=$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.length-10,$JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$=0<=$JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$&&$JSCompiler_string$jscomp$inline_158_JSCompiler_url$jscomp$inline_113_urlString$jscomp$1$$.indexOf(".localhost",$JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$)==$JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$);
$userAssert$$module$src$log$$($JSCompiler_index$jscomp$inline_159_JSCompiler_temp$jscomp$144$$||/^(\/\/)/.test($theUrlString$$),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',$elementContext$$,$sourceName$$,$theUrlString$$);return $theUrlString$$};var $optsSupported$$module$src$event_helper_listen$$;
function $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$68$$,$eventType$jscomp$3$$,$listener$jscomp$62$$){var $opt_evtListenerOpts$$=void 0,$localElement$$=$element$jscomp$68$$,$localListener$$=$listener$jscomp$62$$;var $wrapped$$=function($element$jscomp$68$$){try{return $localListener$$($element$jscomp$68$$)}catch($e$jscomp$17$$){throw self.reportError($e$jscomp$17$$),$e$jscomp$17$$;}};var $optsSupported$$=$detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(),$capture$$=
!1;$opt_evtListenerOpts$$&&($capture$$=$opt_evtListenerOpts$$.capture);$localElement$$.addEventListener($eventType$jscomp$3$$,$wrapped$$,$optsSupported$$?$opt_evtListenerOpts$$:$capture$$);return function(){$localElement$$&&$localElement$$.removeEventListener($eventType$jscomp$3$$,$wrapped$$,$optsSupported$$?$opt_evtListenerOpts$$:$capture$$);$wrapped$$=$localElement$$=$localListener$$=null}}
function $detectEvtListenerOptsSupport$$module$src$event_helper_listen$$(){if(void 0!==$optsSupported$$module$src$event_helper_listen$$)return $optsSupported$$module$src$event_helper_listen$$;$optsSupported$$module$src$event_helper_listen$$=!1;try{var $options$jscomp$14$$={get capture(){$optsSupported$$module$src$event_helper_listen$$=!0}};self.addEventListener("test-options",null,$options$jscomp$14$$);self.removeEventListener("test-options",null,$options$jscomp$14$$)}catch($err$jscomp$3$$){}return $optsSupported$$module$src$event_helper_listen$$}
;function $listen$$module$src$event_helper$$($element$jscomp$69$$,$listener$jscomp$63$$){return $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$69$$,"message",$listener$jscomp$63$$)}
function $listenOnce$$module$src$event_helper$$($element$jscomp$70$$,$listener$jscomp$64$$){var $localListener$jscomp$1$$=$listener$jscomp$64$$,$unlisten$$=$internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$70$$,"click",function($element$jscomp$70$$){try{$localListener$jscomp$1$$($element$jscomp$70$$)}finally{$localListener$jscomp$1$$=null,$unlisten$$()}});return $unlisten$$};var $RETURN_URL_REGEX$$module$extensions$amp_access$0_1$login_dialog$$=/RETURN_URL/;
function $openLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$($ampdoc$jscomp$14$$,$urlOrPromise$jscomp$1$$){var $JSCompiler_viewer$jscomp$inline_117$$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$14$$,"viewer");return(parseInt($JSCompiler_viewer$jscomp$inline_117$$.getParam("dialog"),10)?new $ViewerLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$($JSCompiler_viewer$jscomp$inline_117$$,$urlOrPromise$jscomp$1$$):new $WebLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$($ampdoc$jscomp$14$$.win,
$JSCompiler_viewer$jscomp$inline_117$$,$urlOrPromise$jscomp$1$$)).open()}function $ViewerLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$($viewer$jscomp$1$$,$urlOrPromise$jscomp$3$$){this.viewer=$viewer$jscomp$1$$;this.urlOrPromise=$urlOrPromise$jscomp$3$$}
$ViewerLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.prototype.getLoginUrl=function(){var $urlPromise$$="string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise;return $urlPromise$$.then(function($urlPromise$$){return $buildLoginUrl$$module$extensions$amp_access$0_1$login_dialog$$($urlPromise$$,"RETURN_URL")})};
$ViewerLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.prototype.open=function(){var $$jscomp$this$jscomp$9$$=this;return this.getLoginUrl().then(function($loginUrl$$){return $$jscomp$this$jscomp$9$$.viewer.sendMessageAwaitResponse("openDialog",$dict$$module$src$utils$object$$({url:$loginUrl$$}))})};
function $WebLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$($win$jscomp$46$$,$viewer$jscomp$2$$,$urlOrPromise$jscomp$4$$){this.win=$win$jscomp$46$$;this.viewer=$viewer$jscomp$2$$;this.urlOrPromise=$urlOrPromise$jscomp$4$$;this.$messageUnlisten_$=this.$heartbeatInterval_$=this.$dialogReadyPromise_$=this.$dialog_$=this.$reject_$=this.$resolve_$=null}
$WebLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.prototype.open=function(){var $$jscomp$this$jscomp$10$$=this;$userAssert$$module$src$log$$(!this.$resolve_$,"Dialog already opened");return(new Promise(function($resolve$jscomp$14$$,$reject$jscomp$5$$){$$jscomp$this$jscomp$10$$.$resolve_$=$resolve$jscomp$14$$;$$jscomp$this$jscomp$10$$.$reject_$=$reject$jscomp$5$$;$JSCompiler_StaticMethods_openInternal_$$($$jscomp$this$jscomp$10$$)})).then(function($result$jscomp$1$$){$JSCompiler_StaticMethods_cleanup_$$($$jscomp$this$jscomp$10$$);
return $result$jscomp$1$$},function($error$jscomp$14$$){$JSCompiler_StaticMethods_cleanup_$$($$jscomp$this$jscomp$10$$);throw $error$jscomp$14$$;})};
function $JSCompiler_StaticMethods_cleanup_$$($JSCompiler_StaticMethods_cleanup_$self$$){$JSCompiler_StaticMethods_cleanup_$self$$.$resolve_$=null;$JSCompiler_StaticMethods_cleanup_$self$$.$reject_$=null;if($JSCompiler_StaticMethods_cleanup_$self$$.$dialog_$){try{$JSCompiler_StaticMethods_cleanup_$self$$.$dialog_$.close()}catch($e$jscomp$19$$){}$JSCompiler_StaticMethods_cleanup_$self$$.$dialog_$=null}$JSCompiler_StaticMethods_cleanup_$self$$.$heartbeatInterval_$&&($JSCompiler_StaticMethods_cleanup_$self$$.win.clearInterval($JSCompiler_StaticMethods_cleanup_$self$$.$heartbeatInterval_$),
$JSCompiler_StaticMethods_cleanup_$self$$.$heartbeatInterval_$=null);$JSCompiler_StaticMethods_cleanup_$self$$.$messageUnlisten_$&&($JSCompiler_StaticMethods_cleanup_$self$$.$messageUnlisten_$(),$JSCompiler_StaticMethods_cleanup_$self$$.$messageUnlisten_$=null)}
$WebLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.prototype.getLoginUrl=function(){var $$jscomp$this$jscomp$11$$=this;return("string"==typeof this.urlOrPromise?Promise.resolve(this.urlOrPromise):this.urlOrPromise).then(function($url$jscomp$42$$){return $buildLoginUrl$$module$extensions$amp_access$0_1$login_dialog$$($url$jscomp$42$$,$JSCompiler_StaticMethods_getReturnUrl_$$($$jscomp$this$jscomp$11$$))})};
function $JSCompiler_StaticMethods_openInternal_$$($JSCompiler_StaticMethods_openInternal_$self$$){var $options$jscomp$15_screen$jscomp$1$$=$JSCompiler_StaticMethods_openInternal_$self$$.win.screen,$loginUrl$jscomp$1_w$jscomp$9$$=Math.floor(Math.min(700,.9*$options$jscomp$15_screen$jscomp$1$$.width)),$h$jscomp$6$$=Math.floor(Math.min(450,.9*$options$jscomp$15_screen$jscomp$1$$.height)),$sizing$$="height="+$h$jscomp$6$$+",width="+$loginUrl$jscomp$1_w$jscomp$9$$+",left="+Math.floor(($options$jscomp$15_screen$jscomp$1$$.width-
$loginUrl$jscomp$1_w$jscomp$9$$)/2)+",top="+Math.floor(($options$jscomp$15_screen$jscomp$1$$.height-$h$jscomp$6$$)/2);$options$jscomp$15_screen$jscomp$1$$=$sizing$$+",resizable=yes,scrollbars=yes";var $returnUrl$$=$JSCompiler_StaticMethods_getReturnUrl_$$($JSCompiler_StaticMethods_openInternal_$self$$);$JSCompiler_StaticMethods_openInternal_$self$$.$dialogReadyPromise_$=null;"string"==typeof $JSCompiler_StaticMethods_openInternal_$self$$.urlOrPromise?($loginUrl$jscomp$1_w$jscomp$9$$=$buildLoginUrl$$module$extensions$amp_access$0_1$login_dialog$$($JSCompiler_StaticMethods_openInternal_$self$$.urlOrPromise,
$returnUrl$$),$JSCompiler_StaticMethods_openInternal_$self$$.$dialog_$=$openWindowDialog$$module$src$dom$$($JSCompiler_StaticMethods_openInternal_$self$$.win,$loginUrl$jscomp$1_w$jscomp$9$$,$options$jscomp$15_screen$jscomp$1$$),$JSCompiler_StaticMethods_openInternal_$self$$.$dialog_$&&($JSCompiler_StaticMethods_openInternal_$self$$.$dialogReadyPromise_$=Promise.resolve())):($JSCompiler_StaticMethods_openInternal_$self$$.$dialog_$=$openWindowDialog$$module$src$dom$$($JSCompiler_StaticMethods_openInternal_$self$$.win,
"",$options$jscomp$15_screen$jscomp$1$$),$JSCompiler_StaticMethods_openInternal_$self$$.$dialog_$&&($JSCompiler_StaticMethods_openInternal_$self$$.$dialogReadyPromise_$=$JSCompiler_StaticMethods_openInternal_$self$$.urlOrPromise.then(function($options$jscomp$15_screen$jscomp$1$$){$options$jscomp$15_screen$jscomp$1$$=$buildLoginUrl$$module$extensions$amp_access$0_1$login_dialog$$($options$jscomp$15_screen$jscomp$1$$,$returnUrl$$);$JSCompiler_StaticMethods_openInternal_$self$$.$dialog_$.location.replace($options$jscomp$15_screen$jscomp$1$$)},
function($JSCompiler_StaticMethods_openInternal_$self$$){throw Error("failed to resolve url: "+$JSCompiler_StaticMethods_openInternal_$self$$);})));$JSCompiler_StaticMethods_openInternal_$self$$.$dialogReadyPromise_$?$JSCompiler_StaticMethods_openInternal_$self$$.$dialogReadyPromise_$.then(function(){$JSCompiler_StaticMethods_setupDialog_$$($JSCompiler_StaticMethods_openInternal_$self$$,$returnUrl$$)},function($options$jscomp$15_screen$jscomp$1$$){$JSCompiler_StaticMethods_loginDone_$$($JSCompiler_StaticMethods_openInternal_$self$$,
null,$options$jscomp$15_screen$jscomp$1$$)}):$JSCompiler_StaticMethods_loginDone_$$($JSCompiler_StaticMethods_openInternal_$self$$,null,Error("failed to open dialog"))}
function $JSCompiler_StaticMethods_setupDialog_$$($JSCompiler_StaticMethods_setupDialog_$self$$,$returnUrl$jscomp$1$$){var $returnOrigin$$=$parseUrlDeprecated$$module$src$url$$($returnUrl$jscomp$1$$).origin;$JSCompiler_StaticMethods_setupDialog_$self$$.$heartbeatInterval_$=$JSCompiler_StaticMethods_setupDialog_$self$$.win.setInterval(function(){$JSCompiler_StaticMethods_setupDialog_$self$$.$dialog_$.closed&&($JSCompiler_StaticMethods_setupDialog_$self$$.win.clearInterval($JSCompiler_StaticMethods_setupDialog_$self$$.$heartbeatInterval_$),
$JSCompiler_StaticMethods_setupDialog_$self$$.$heartbeatInterval_$=null,$JSCompiler_StaticMethods_setupDialog_$self$$.win.setTimeout(function(){$JSCompiler_StaticMethods_loginDone_$$($JSCompiler_StaticMethods_setupDialog_$self$$,"")},3E3))},500);$JSCompiler_StaticMethods_setupDialog_$self$$.$messageUnlisten_$=$listen$$module$src$event_helper$$($JSCompiler_StaticMethods_setupDialog_$self$$.win,function($returnUrl$jscomp$1$$){$returnUrl$jscomp$1$$.origin==$returnOrigin$$&&$returnUrl$jscomp$1$$.data&&
"amp"==$returnUrl$jscomp$1$$.data.sentinel&&"result"==$returnUrl$jscomp$1$$.data.type&&($JSCompiler_StaticMethods_setupDialog_$self$$.$dialog_$&&$JSCompiler_StaticMethods_setupDialog_$self$$.$dialog_$.postMessage($dict$$module$src$utils$object$$({sentinel:"amp",type:"result-ack"}),$returnOrigin$$),$JSCompiler_StaticMethods_loginDone_$$($JSCompiler_StaticMethods_setupDialog_$self$$,$returnUrl$jscomp$1$$.data.result))})}
function $JSCompiler_StaticMethods_loginDone_$$($JSCompiler_StaticMethods_loginDone_$self$$,$result$jscomp$2$$,$opt_error$jscomp$2$$){$JSCompiler_StaticMethods_loginDone_$self$$.$resolve_$&&($opt_error$jscomp$2$$?$JSCompiler_StaticMethods_loginDone_$self$$.$reject_$($opt_error$jscomp$2$$):$JSCompiler_StaticMethods_loginDone_$self$$.$resolve_$($result$jscomp$2$$),$JSCompiler_StaticMethods_cleanup_$$($JSCompiler_StaticMethods_loginDone_$self$$))}
function $JSCompiler_StaticMethods_getReturnUrl_$$($JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$){var $currentUrl$$=$JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$.viewer.getResolvedViewerUrl();if($getMode$$module$src$mode$$().localDev){var $loc$$=$JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$.win.location;$JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$=$loc$$.protocol+"//"+$loc$$.host+"/extensions/amp-access/0.1/amp-login-done.html"}else $JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$=
$urls$$module$src$config$$.cdn+"/v0/amp-login-done-0.1.html";return $JSCompiler_StaticMethods_getReturnUrl_$self_returnUrl$jscomp$2$$+"?url="+encodeURIComponent($currentUrl$$)}
function $buildLoginUrl$$module$extensions$amp_access$0_1$login_dialog$$($url$jscomp$44$$,$returnUrl$jscomp$3$$){return $RETURN_URL_REGEX$$module$extensions$amp_access$0_1$login_dialog$$.test($url$jscomp$44$$)?$url$jscomp$44$$.replace($RETURN_URL_REGEX$$module$extensions$amp_access$0_1$login_dialog$$,encodeURIComponent($returnUrl$jscomp$3$$)):$url$jscomp$44$$+(-1==$url$jscomp$44$$.indexOf("?")?"?":"&")+"return="+encodeURIComponent($returnUrl$jscomp$3$$)};function $Actions$$module$extensions$amp_subscriptions$0_1$actions$$($ampdoc$jscomp$16$$,$urlBuilder$$,$analytics$$,$actionMap$$){for(var $k$jscomp$6$$ in $actionMap$$)$assertHttpsUrl$$module$src$url$$($actionMap$$[$k$jscomp$6$$],"action "+$k$jscomp$6$$);this.$actionsConfig_$=$actionMap$$;this.$builtActionUrlMap_$={};this.$urlBuilder_$=$urlBuilder$$;this.$analytics_$=$analytics$$;this.$actionPromise_$=null;this.$actionStartTime_$=0;this.$openPopup_$=$openLoginDialog$$module$extensions$amp_access$0_1$login_dialog$$.bind(null,
$ampdoc$jscomp$16$$);this.build()}
$Actions$$module$extensions$amp_subscriptions$0_1$actions$$.prototype.build=function(){var $$jscomp$this$jscomp$14$$=this;if(0==Object.keys(this.$actionsConfig_$).length)return null;var $promises$jscomp$2$$=[],$$jscomp$loop$16$$={},$k$jscomp$7$$;for($k$jscomp$7$$ in this.$actionsConfig_$)$$jscomp$loop$16$$.$$jscomp$loop$prop$k$17$=$k$jscomp$7$$,$promises$jscomp$2$$.push(this.$urlBuilder_$.buildUrl(this.$actionsConfig_$[$$jscomp$loop$16$$.$$jscomp$loop$prop$k$17$],!0).then(function($promises$jscomp$2$$){return function($$jscomp$loop$16$$){$$jscomp$this$jscomp$14$$.$builtActionUrlMap_$[$promises$jscomp$2$$.$$jscomp$loop$prop$k$17$]=
$$jscomp$loop$16$$}}($$jscomp$loop$16$$))),$$jscomp$loop$16$$={$$jscomp$loop$prop$k$17$:$$jscomp$loop$16$$.$$jscomp$loop$prop$k$17$};return Promise.all($promises$jscomp$2$$).then(function(){return $$jscomp$this$jscomp$14$$.$builtActionUrlMap_$})};
$Actions$$module$extensions$amp_subscriptions$0_1$actions$$.prototype.execute=function($action$jscomp$1$$){$userAssert$$module$src$log$$(this.$actionsConfig_$[$action$jscomp$1$$],"Action URL is not configured: %s",$action$jscomp$1$$);var $url$jscomp$46$$=$userAssert$$module$src$log$$(this.$builtActionUrlMap_$[$action$jscomp$1$$],"Action URL is not ready: %s",$action$jscomp$1$$);return $JSCompiler_StaticMethods_execute_$$(this,$url$jscomp$46$$,$action$jscomp$1$$)};
function $JSCompiler_StaticMethods_execute_$$($JSCompiler_StaticMethods_execute_$self$$,$url$jscomp$47$$,$action$jscomp$2$$){var $now$$=Date.now();if($JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$&&1E3>$now$$-$JSCompiler_StaticMethods_execute_$self$$.$actionStartTime_$)return $JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$;$JSCompiler_StaticMethods_execute_$self$$.$analytics_$.actionEvent("local",$action$jscomp$2$$,"started");var $dialogPromise$$=$JSCompiler_StaticMethods_execute_$self$$.$openPopup_$($url$jscomp$47$$),
$actionPromise$$=$dialogPromise$$.then(function($url$jscomp$47$$){$JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$=null;$url$jscomp$47$$=$parseQueryString_$$module$src$url_parse_query_string$$($url$jscomp$47$$).success;var $now$$="true"==$url$jscomp$47$$||"yes"==$url$jscomp$47$$||"1"==$url$jscomp$47$$;$now$$?$JSCompiler_StaticMethods_execute_$self$$.$analytics_$.actionEvent("local",$action$jscomp$2$$,"success"):$JSCompiler_StaticMethods_execute_$self$$.$analytics_$.actionEvent("local",$action$jscomp$2$$,
"rejected");return $now$$||!$url$jscomp$47$$}).catch(function($url$jscomp$47$$){$JSCompiler_StaticMethods_execute_$self$$.$analytics_$.actionEvent("local",$action$jscomp$2$$,"failed");$JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$==$actionPromise$$&&($JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$=null);throw $url$jscomp$47$$;});$JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$=$actionPromise$$;$JSCompiler_StaticMethods_execute_$self$$.$actionStartTime_$=$now$$;return $JSCompiler_StaticMethods_execute_$self$$.$actionPromise_$}
;var $parser$$module$extensions$amp_access$0_1$access_expr_impl$$=function(){function $o$jscomp$1$$($o$jscomp$1$$,$Parser$$,$$V0$$,$$V1$$){$$V0$$=$$V0$$||{};for($$V1$$=$o$jscomp$1$$.length;$$V1$$--;$$V0$$[$o$jscomp$1$$[$$V1$$]]=$Parser$$);return $$V0$$}function $Parser$$(){this.yy={}}var $$V0$$=[1,3],$$V1$$=[1,4],$$V2$$=[1,18],$$V3$$=[1,13],$$V4$$=[1,14],$$V5$$=[1,15],$$V6$$=[1,16],$$V7$$=[1,17],$$V8$$=[1,20],$$V9$$=[1,21],$$Va$$=[5,6,7,10],$$Vb$$=[5,6,7,10,15,16,17,18,19,20,21],$$Vc$$=[5,6,7,10,15,
16,17,18,19,20,21,25],$parser$$={trace:function(){},yy:{},$symbols_$:{error:2,result:3,search_condition:4,EOF:5,OR:6,AND:7,NOT:8,"(":9,")":10,predicate:11,comparison_predicate:12,truthy_predicate:13,scalar_exp:14,EQ:15,DEQ:16,NEQ:17,LT:18,LTE:19,GT:20,GTE:21,atom:22,field_ref:23,literal:24,DOT:25,field_name:26,NAME:27,STRING:28,NUMERIC:29,TRUE:30,FALSE:31,NULL:32,$accept:0,$end:1},$terminals_$:{2:"error",5:"EOF",6:"OR",7:"AND",8:"NOT",9:"(",10:")",15:"EQ",16:"DEQ",17:"NEQ",18:"LT",19:"LTE",20:"GT",
21:"GTE",25:"DOT",27:"NAME",28:"STRING",29:"NUMERIC",30:"TRUE",31:"FALSE",32:"NULL"},$productions_$:[0,[3,2],[4,3],[4,3],[4,2],[4,3],[4,1],[11,1],[11,1],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[12,3],[13,1],[14,1],[14,1],[22,1],[23,3],[23,1],[26,1],[24,1],[24,1],[24,1],[24,1],[24,1]],performAction:function($o$jscomp$1$$,$Parser$$,$$V0$$,$$V1$$,$$V2$$,$$V3$$){var $$V4$$=$$V3$$.length-1;switch($$V2$$){case 1:return $$V3$$[$$V4$$-1];case 2:this.$$$=$$V3$$[$$V4$$-2]||$$V3$$[$$V4$$];break;case 3:this.$$$=
$$V3$$[$$V4$$-2]&&$$V3$$[$$V4$$];break;case 4:this.$$$=!$$V3$$[$$V4$$];break;case 5:this.$$$=$$V3$$[$$V4$$-1];break;case 6:case 7:case 8:case 17:case 18:case 19:this.$$$=$$V3$$[$$V4$$];break;case 9:this.$$$=$$V3$$[$$V4$$-2]===$$V3$$[$$V4$$];break;case 10:throw Error('"==" is not allowed, use "="');case 11:this.$$$=$$V3$$[$$V4$$-2]!==$$V3$$[$$V4$$];break;case 12:this.$$$=typeof $$V3$$[$$V4$$-2]==typeof $$V3$$[$$V4$$]&&$$V3$$[$$V4$$-2]<$$V3$$[$$V4$$];break;case 13:this.$$$=typeof $$V3$$[$$V4$$-2]==
typeof $$V3$$[$$V4$$]&&$$V3$$[$$V4$$-2]<=$$V3$$[$$V4$$];break;case 14:this.$$$=typeof $$V3$$[$$V4$$-2]==typeof $$V3$$[$$V4$$]&&$$V3$$[$$V4$$-2]>$$V3$$[$$V4$$];break;case 15:this.$$$=typeof $$V3$$[$$V4$$-2]==typeof $$V3$$[$$V4$$]&&$$V3$$[$$V4$$-2]>=$$V3$$[$$V4$$];break;case 16:this.$$$=void 0!==$$V3$$[$$V4$$]&&null!==$$V3$$[$$V4$$]&&""!==$$V3$$[$$V4$$]&&0!==$$V3$$[$$V4$$]&&!1!==$$V3$$[$$V4$$];break;case 20:this.$$$="[object Object]"==Object.prototype.toString.call($$V3$$[$$V4$$-2])&&$$V3$$[$$V4$$-
2].hasOwnProperty($$V3$$[$$V4$$])?$$V3$$[$$V4$$-2][$$V3$$[$$V4$$]]:null;break;case 21:this.$$$=void 0!==$$V1$$[$$V3$$[$$V4$$]]?$$V1$$[$$V3$$[$$V4$$]]:null;break;case 22:this.$$$=$o$jscomp$1$$;break;case 23:this.$$$=$o$jscomp$1$$.substring(1,$o$jscomp$1$$.length-1);break;case 24:this.$$$=Number($o$jscomp$1$$);break;case 25:this.$$$=!0;break;case 26:this.$$$=!1;break;case 27:this.$$$=null}},table:[{3:1,4:2,8:$$V0$$,9:$$V1$$,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,
31:$$V6$$,32:$$V7$$},{1:[3]},{5:[1,19],6:$$V8$$,7:$$V9$$},{4:22,8:$$V0$$,9:$$V1$$,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{4:23,8:$$V0$$,9:$$V1$$,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},$o$jscomp$1$$($$Va$$,[2,6]),$o$jscomp$1$$($$Va$$,[2,7]),$o$jscomp$1$$($$Va$$,[2,8]),$o$jscomp$1$$($$Va$$,[2,16],{15:[1,24],16:[1,25],17:[1,26],18:[1,27],19:[1,28],20:[1,29],21:[1,30]}),$o$jscomp$1$$($$Vb$$,
[2,17]),$o$jscomp$1$$($$Vb$$,[2,18],{25:[1,31]}),$o$jscomp$1$$($$Vb$$,[2,19]),$o$jscomp$1$$($$Vc$$,[2,21]),$o$jscomp$1$$($$Vb$$,[2,23]),$o$jscomp$1$$($$Vb$$,[2,24]),$o$jscomp$1$$($$Vb$$,[2,25]),$o$jscomp$1$$($$Vb$$,[2,26]),$o$jscomp$1$$($$Vb$$,[2,27]),$o$jscomp$1$$($$Vc$$,[2,22]),{1:[2,1]},{4:32,8:$$V0$$,9:$$V1$$,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{4:33,8:$$V0$$,9:$$V1$$,11:5,12:6,13:7,14:8,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,
29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},$o$jscomp$1$$($$Va$$,[2,4]),{6:$$V8$$,7:$$V9$$,10:[1,34]},{14:35,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:36,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:37,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:38,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:39,22:9,23:10,24:11,26:12,27:$$V2$$,
28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:40,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{14:41,22:9,23:10,24:11,26:12,27:$$V2$$,28:$$V3$$,29:$$V4$$,30:$$V5$$,31:$$V6$$,32:$$V7$$},{26:42,27:$$V2$$},$o$jscomp$1$$([5,6,10],[2,2],{7:$$V9$$}),$o$jscomp$1$$($$Va$$,[2,3]),$o$jscomp$1$$($$Va$$,[2,5]),$o$jscomp$1$$($$Va$$,[2,9]),$o$jscomp$1$$($$Va$$,[2,10]),$o$jscomp$1$$($$Va$$,[2,11]),$o$jscomp$1$$($$Va$$,[2,12]),$o$jscomp$1$$($$Va$$,[2,13]),$o$jscomp$1$$($$Va$$,
[2,14]),$o$jscomp$1$$($$Va$$,[2,15]),$o$jscomp$1$$($$Vc$$,[2,20])],defaultActions:{19:[2,1]},parseError:function($o$jscomp$1$$,$Parser$$){if($Parser$$.recoverable)this.trace($o$jscomp$1$$);else throw $o$jscomp$1$$=Error($o$jscomp$1$$),$o$jscomp$1$$.hash=$Parser$$,$o$jscomp$1$$;},parse:function($o$jscomp$1$$){function $Parser$$(){var $o$jscomp$1$$=$lexer$jscomp$1$$.lex()||$$V8$$;"number"!==typeof $o$jscomp$1$$&&($o$jscomp$1$$=$$V0$$.$symbols_$[$o$jscomp$1$$]||$o$jscomp$1$$);return $o$jscomp$1$$}var $$V0$$=
this,$$V1$$=[0],$$V2$$=[null],$$V3$$=[],$$V4$$=this.table,$input$jscomp$10$$="",$$V5$$=0,$$V6$$=0,$$V7$$=0,$$Va$$=2,$$V8$$=1,$$Vb$$=$$V3$$.slice.call(arguments,1),$lexer$jscomp$1$$=Object.create(this.lexer),$sharedState$$={yy:{}};for($action$jscomp$3_k$jscomp$9$$ in this.yy)Object.prototype.hasOwnProperty.call(this.yy,$action$jscomp$3_k$jscomp$9$$)&&($sharedState$$.yy[$action$jscomp$3_k$jscomp$9$$]=this.yy[$action$jscomp$3_k$jscomp$9$$]);$lexer$jscomp$1$$.setInput($o$jscomp$1$$,$sharedState$$.yy);
$sharedState$$.yy.lexer=$lexer$jscomp$1$$;$sharedState$$.yy.parser=this;"undefined"==typeof $lexer$jscomp$1$$.yylloc&&($lexer$jscomp$1$$.yylloc={});var $$V9$$=$lexer$jscomp$1$$.yylloc;$$V3$$.push($$V9$$);var $$Vc$$=$lexer$jscomp$1$$.options&&$lexer$jscomp$1$$.options.ranges;this.parseError="function"===typeof $sharedState$$.yy.parseError?$sharedState$$.yy.parseError:Object.getPrototypeOf(this).parseError;for(var $symbol$$,$parser$$,$state$$,$r$jscomp$1$$,$yyval$$={},$p$$,$len$$,$newState$$,$expected$$;;){$state$$=
$$V1$$[$$V1$$.length-1];if(this.defaultActions[$state$$])var $action$jscomp$3_k$jscomp$9$$=this.defaultActions[$state$$];else{if(null===$symbol$$||"undefined"==typeof $symbol$$)$symbol$$=$Parser$$();$action$jscomp$3_k$jscomp$9$$=$$V4$$[$state$$]&&$$V4$$[$state$$][$symbol$$]}if("undefined"===typeof $action$jscomp$3_k$jscomp$9$$||!$action$jscomp$3_k$jscomp$9$$.length||!$action$jscomp$3_k$jscomp$9$$[0]){var $errStr$$="";$expected$$=[];for($p$$ in $$V4$$[$state$$])this.$terminals_$[$p$$]&&$p$$>$$Va$$&&
$expected$$.push("'"+this.$terminals_$[$p$$]+"'");$errStr$$=$lexer$jscomp$1$$.showPosition?"Parse error on line "+($$V5$$+1)+":\n"+$lexer$jscomp$1$$.showPosition()+"\nExpecting "+$expected$$.join(", ")+", got '"+(this.$terminals_$[$symbol$$]||$symbol$$)+"'":"Parse error on line "+($$V5$$+1)+": Unexpected "+($symbol$$==$$V8$$?"end of input":"'"+(this.$terminals_$[$symbol$$]||$symbol$$)+"'");this.parseError($errStr$$,{text:$lexer$jscomp$1$$.match,token:this.$terminals_$[$symbol$$]||$symbol$$,line:$lexer$jscomp$1$$.yylineno,
loc:$$V9$$,expected:$expected$$})}if($action$jscomp$3_k$jscomp$9$$[0]instanceof Array&&1<$action$jscomp$3_k$jscomp$9$$.length)throw Error("Parse Error: multiple actions possible at state: "+$state$$+", token: "+$symbol$$);switch($action$jscomp$3_k$jscomp$9$$[0]){case 1:$$V1$$.push($symbol$$);$$V2$$.push($lexer$jscomp$1$$.yytext);$$V3$$.push($lexer$jscomp$1$$.yylloc);$$V1$$.push($action$jscomp$3_k$jscomp$9$$[1]);$symbol$$=null;$parser$$?($symbol$$=$parser$$,$parser$$=null):($$V6$$=$lexer$jscomp$1$$.yyleng,
$input$jscomp$10$$=$lexer$jscomp$1$$.yytext,$$V5$$=$lexer$jscomp$1$$.yylineno,$$V9$$=$lexer$jscomp$1$$.yylloc,0<$$V7$$&&$$V7$$--);break;case 2:$len$$=this.$productions_$[$action$jscomp$3_k$jscomp$9$$[1]][1];$yyval$$.$$$=$$V2$$[$$V2$$.length-$len$$];$yyval$$.$_$$={first_line:$$V3$$[$$V3$$.length-($len$$||1)].first_line,last_line:$$V3$$[$$V3$$.length-1].last_line,first_column:$$V3$$[$$V3$$.length-($len$$||1)].first_column,last_column:$$V3$$[$$V3$$.length-1].last_column};$$Vc$$&&($yyval$$.$_$$.range=
[$$V3$$[$$V3$$.length-($len$$||1)].range[0],$$V3$$[$$V3$$.length-1].range[1]]);$r$jscomp$1$$=this.performAction.apply($yyval$$,[$input$jscomp$10$$,$$V6$$,$$V5$$,$sharedState$$.yy,$action$jscomp$3_k$jscomp$9$$[1],$$V2$$,$$V3$$].concat($$Vb$$));if("undefined"!==typeof $r$jscomp$1$$)return $r$jscomp$1$$;$len$$&&($$V1$$=$$V1$$.slice(0,-2*$len$$),$$V2$$=$$V2$$.slice(0,-1*$len$$),$$V3$$=$$V3$$.slice(0,-1*$len$$));$$V1$$.push(this.$productions_$[$action$jscomp$3_k$jscomp$9$$[1]][0]);$$V2$$.push($yyval$$.$$$);
$$V3$$.push($yyval$$.$_$$);$newState$$=$$V4$$[$$V1$$[$$V1$$.length-2]][$$V1$$[$$V1$$.length-1]];$$V1$$.push($newState$$);break;case 3:return!0}}}},$lexer$$=function(){return{EOF:1,parseError:function($o$jscomp$1$$,$Parser$$){if(this.yy.parser)this.yy.parser.parseError($o$jscomp$1$$,$Parser$$);else throw Error($o$jscomp$1$$);},setInput:function($o$jscomp$1$$,$Parser$$){this.yy=$Parser$$||this.yy||{};this._input=$o$jscomp$1$$;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=
this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},input:function(){var $o$jscomp$1$$=this._input[0];this.yytext+=$o$jscomp$1$$;this.yyleng++;this.offset++;this.match+=$o$jscomp$1$$;this.matched+=$o$jscomp$1$$;var $Parser$$=$o$jscomp$1$$.match(/(?:\r\n?|\n).*/g);$Parser$$?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&
this.yylloc.range[1]++;this._input=this._input.slice(1);return $o$jscomp$1$$},unput:function($o$jscomp$1$$){var $Parser$$=$o$jscomp$1$$.length,$$V0$$=$o$jscomp$1$$.split(/(?:\r\n?|\n)/g);this._input=$o$jscomp$1$$+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-$Parser$$);this.offset-=$Parser$$;var $$V1$$=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);$$V0$$.length-1&&(this.yylineno-=$$V0$$.length-
1);$o$jscomp$1$$=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:$$V0$$?($$V0$$.length===$$V1$$.length?this.yylloc.first_column:0)+$$V1$$[$$V1$$.length-$$V0$$.length].length-$$V0$$[0].length:this.yylloc.first_column-$Parser$$};this.options.ranges&&(this.yylloc.range=[$o$jscomp$1$$[0],$o$jscomp$1$$[0]+this.yyleng-$Parser$$]);this.yyleng=this.yytext.length;return this},more:function(){this._more=!0;return this},
reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function($o$jscomp$1$$){this.unput(this.match.slice($o$jscomp$1$$))},pastInput:function(){var $o$jscomp$1$$=this.matched.substr(0,this.matched.length-this.match.length);
return(20<$o$jscomp$1$$.length?"...":"")+$o$jscomp$1$$.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var $o$jscomp$1$$=this.match;20>$o$jscomp$1$$.length&&($o$jscomp$1$$+=this._input.substr(0,20-$o$jscomp$1$$.length));return($o$jscomp$1$$.substr(0,20)+(20<$o$jscomp$1$$.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var $o$jscomp$1$$=this.pastInput(),$Parser$$=Array($o$jscomp$1$$.length+1).join("-");return $o$jscomp$1$$+this.upcomingInput()+"\n"+$Parser$$+"^"},test_match:function($o$jscomp$1$$,
$Parser$$){var $$V0$$;if(this.options.backtrack_lexer){var $$V1$$={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&($$V1$$.yylloc.range=this.yylloc.range.slice(0))}if($$V0$$=
$o$jscomp$1$$[0].match(/(?:\r\n?|\n).*/g))this.yylineno+=$$V0$$.length;this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:$$V0$$?$$V0$$[$$V0$$.length-1].length-$$V0$$[$$V0$$.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+$o$jscomp$1$$[0].length};this.yytext+=$o$jscomp$1$$[0];this.match+=$o$jscomp$1$$[0];this.matches=$o$jscomp$1$$;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=
this.yyleng]);this._backtrack=this._more=!1;this._input=this._input.slice($o$jscomp$1$$[0].length);this.matched+=$o$jscomp$1$$[0];$o$jscomp$1$$=this.performAction.call(this,this.yy,this,$Parser$$,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if($o$jscomp$1$$)return $o$jscomp$1$$;if(this._backtrack)for(var $$V2$$ in $$V1$$)this[$$V2$$]=$$V1$$[$$V2$$];return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var $o$jscomp$1$$;this._more||
(this.match=this.yytext="");for(var $Parser$$=this._currentRules(),$$V0$$=0;$$V0$$<$Parser$$.length;$$V0$$++)if(($o$jscomp$1$$=this._input.match(this.rules[$Parser$$[$$V0$$]]))&&(!$$V1$$||$o$jscomp$1$$[0].length>$$V1$$[0].length)){var $$V1$$=$o$jscomp$1$$;var $$V2$$=$$V0$$;if(this.options.backtrack_lexer){$$V1$$=this.test_match($o$jscomp$1$$,$Parser$$[$$V0$$]);if(!1!==$$V1$$)return $$V1$$;if(this._backtrack)$$V1$$=!1;else return!1}else if(!this.options.flex)break}return $$V1$$?($$V1$$=this.test_match($$V1$$,
$Parser$$[$$V2$$]),!1!==$$V1$$?$$V1$$:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var $o$jscomp$1$$=this.next();return $o$jscomp$1$$?$o$jscomp$1$$:this.lex()},begin:function($o$jscomp$1$$){this.conditionStack.push($o$jscomp$1$$)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&
this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function($o$jscomp$1$$){$o$jscomp$1$$=this.conditionStack.length-1-Math.abs($o$jscomp$1$$||0);return 0<=$o$jscomp$1$$?this.conditionStack[$o$jscomp$1$$]:"INITIAL"},pushState:function($o$jscomp$1$$){this.begin($o$jscomp$1$$)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function($o$jscomp$1$$,$Parser$$,
$$V0$$){switch($$V0$$){case 1:return 7;case 2:return 6;case 3:return 8;case 4:return 32;case 5:return 30;case 6:return 30;case 7:return 31;case 8:return 31;case 9:return 9;case 10:return 10;case 11:return"|";case 12:return 19;case 13:return 18;case 14:return 21;case 15:return 20;case 16:return 17;case 17:return 16;case 18:return 15;case 19:return 29;case 20:return 27;case 21:return 28;case 22:return 28;case 23:return 25;case 24:return"INVALID";case 25:return 5}},rules:[/^(?:\s+)/,/^(?:AND\b)/,/^(?:OR\b)/,
/^(?:NOT\b)/,/^(?:NULL\b)/,/^(?:TRUE\b)/,/^(?:true\b)/,/^(?:FALSE\b)/,/^(?:false\b)/,/^(?:\()/,/^(?:\))/,/^(?:\|)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:!=)/,/^(?:==)/,/^(?:=)/,/^(?:-?[0-9]+(\.[0-9]+)?\b)/,/^(?:[a-zA-Z_][a-zA-Z0-9_]*)/,/^(?:'[^']*')/,/^(?:"[^"]*")/,/^(?:\.)/,/^(?:.)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}}}();$parser$$.lexer=$lexer$$;$Parser$$.prototype=$parser$$;$parser$$.Parser=$Parser$$;return new $Parser$$}();function $evaluateAccessExpr$$module$extensions$amp_access$0_1$access_expr$$($expr$jscomp$4$$,$data$jscomp$57$$){try{return $parser$$module$extensions$amp_access$0_1$access_expr_impl$$.yy=$data$jscomp$57$$,!!$parser$$module$extensions$amp_access$0_1$access_expr_impl$$.parse($expr$jscomp$4$$)}finally{$parser$$module$extensions$amp_access$0_1$access_expr_impl$$.yy=null}};function $evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$($expr$jscomp$5$$,$data$jscomp$58$$){return $evaluateAccessExpr$$module$extensions$amp_access$0_1$access_expr$$($expr$jscomp$5$$,$data$jscomp$58$$)};function $LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$($ampdoc$jscomp$17$$,$dialog$$,$serviceAdapter$$){this.$ampdoc_$=$ampdoc$jscomp$17$$;this.$rootNode_$=$ampdoc$jscomp$17$$.getRootNode();this.$dialog_$=$dialog$$;this.$templates_$=$getService$$module$src$service$$($ampdoc$jscomp$17$$.win,"templates");this.$serviceAdapter_$=$serviceAdapter$$}
$LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$.prototype.render=function($renderState$$){return Promise.all([$JSCompiler_StaticMethods_renderActions_$$(this,$renderState$$),$JSCompiler_StaticMethods_renderDialog_$$(this,$renderState$$)])};
$LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$.prototype.reset=function(){this.$dialog_$.close();return $JSCompiler_StaticMethods_renderActionsInNode_$$(this,{},this.$rootNode_$,function(){return!1})};
function $JSCompiler_StaticMethods_renderActions_$$($JSCompiler_StaticMethods_renderActions_$self$$,$renderState$jscomp$1$$){$JSCompiler_StaticMethods_renderActionsInNode_$$($JSCompiler_StaticMethods_renderActions_$self$$,$renderState$jscomp$1$$,$JSCompiler_StaticMethods_renderActions_$self$$.$rootNode_$,$evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$)}
function $JSCompiler_StaticMethods_renderDialog_$$($JSCompiler_StaticMethods_renderDialog_$self$$,$authResponse$$){return $JSCompiler_StaticMethods_renderDialog_$self$$.$ampdoc_$.whenReady().then(function(){for(var $candidates$$=$JSCompiler_StaticMethods_renderDialog_$self$$.$ampdoc_$.getRootNode().querySelectorAll("[subscriptions-dialog][subscriptions-display]"),$i$jscomp$23$$=0;$i$jscomp$23$$<$candidates$$.length;$i$jscomp$23$$++){var $candidate$jscomp$1$$=$candidates$$[$i$jscomp$23$$],$expr$jscomp$6$$=
$candidate$jscomp$1$$.getAttribute("subscriptions-display");if($expr$jscomp$6$$&&$evaluateAccessExpr$$module$extensions$amp_access$0_1$access_expr$$($expr$jscomp$6$$,$authResponse$$))return $candidate$jscomp$1$$}}).then(function($candidate$jscomp$2$$){if($candidate$jscomp$2$$){if("TEMPLATE"==$candidate$jscomp$2$$.tagName)return $JSCompiler_StaticMethods_renderDialog_$self$$.$templates_$.renderTemplate($candidate$jscomp$2$$,$authResponse$$).then(function($candidate$jscomp$2$$){return $JSCompiler_StaticMethods_renderActionsInNode_$$($JSCompiler_StaticMethods_renderDialog_$self$$,
$authResponse$$,$candidate$jscomp$2$$,$evaluateExpr$$module$extensions$amp_subscriptions$0_1$expr$$)});var $clone$$=$candidate$jscomp$2$$.cloneNode(!0);$clone$$.removeAttribute("subscriptions-dialog");$clone$$.removeAttribute("subscriptions-display");return $clone$$}}).then(function($authResponse$$){if($authResponse$$)return $JSCompiler_StaticMethods_renderDialog_$self$$.$dialog_$.open($authResponse$$,!0)})}
function $JSCompiler_StaticMethods_renderActionsInNode_$$($JSCompiler_StaticMethods_renderActionsInNode_$self$$,$renderState$jscomp$3$$,$rootNode$jscomp$2$$,$evaluateExpr$$){return $JSCompiler_StaticMethods_renderActionsInNode_$self$$.$ampdoc_$.whenReady().then(function(){for(var $querySelectors$$='[subscriptions-action], [subscriptions-section="actions"], [subscriptions-actions]',$actionCandidates$$=$rootNode$jscomp$2$$.querySelectorAll($querySelectors$$),$i$jscomp$24$$=0;$i$jscomp$24$$<$actionCandidates$$.length;$i$jscomp$24$$++){var $candidate$jscomp$3$$=
$actionCandidates$$[$i$jscomp$24$$],$expr$jscomp$7$$=$candidate$jscomp$3$$.getAttribute("subscriptions-display");$expr$jscomp$7$$&&$evaluateExpr$$($expr$jscomp$7$$,$renderState$jscomp$3$$)?($candidate$jscomp$3$$.classList.add("i-amphtml-subs-display"),$candidate$jscomp$3$$.getAttribute("subscriptions-service")&&$candidate$jscomp$3$$.getAttribute("subscriptions-action")&&"false"!==$candidate$jscomp$3$$.getAttribute("subscriptions-decorate")&&!$candidate$jscomp$3$$.hasAttribute("i-amphtml-subs-decorated")&&
($JSCompiler_StaticMethods_renderActionsInNode_$self$$.$serviceAdapter_$.decorateServiceAction($candidate$jscomp$3$$,$candidate$jscomp$3$$.getAttribute("subscriptions-service"),$candidate$jscomp$3$$.getAttribute("subscriptions-action"),null),$candidate$jscomp$3$$.setAttribute("i-amphtml-subs-decorated",!0))):$candidate$jscomp$3$$.classList.remove("i-amphtml-subs-display")}return $rootNode$jscomp$2$$})};function $UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$,$readerIdPromise$$){var $headNode$$=$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$.getHeadNode();
a:{$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=$headNode$$;var $JSCompiler_win$jscomp$inline_163$$=$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$.ownerDocument.defaultView;if($JSCompiler_win$jscomp$inline_163$$!=
($JSCompiler_win$jscomp$inline_163$$.__AMP_TOP||$JSCompiler_win$jscomp$inline_163$$)){if($isServiceRegistered$$module$src$service$$($JSCompiler_win$jscomp$inline_163$$,"url-replace")&&($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=$getServiceInternal$$module$src$service$$($JSCompiler_win$jscomp$inline_163$$,"url-replace")))break a;$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=
null}else $JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=$getAmpdoc$$module$src$service$$($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$),$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=
$getAmpdocServiceHolder$$module$src$service$$($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$),$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$=$isServiceRegistered$$module$src$service$$($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$,
"url-replace")?$getServiceInternal$$module$src$service$$($JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$,"url-replace"):null}this.$urlReplacements_$=$JSCompiler_ampdoc$jscomp$inline_192_JSCompiler_element$jscomp$inline_161_JSCompiler_embedService$jscomp$inline_165_JSCompiler_holder$jscomp$inline_193_JSCompiler_inline_result$jscomp$146_ampdoc$jscomp$18$$;
this.$readerIdPromise_$=$readerIdPromise$$;this.$authResponse_$=null}$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$.prototype.setAuthResponse=function($authResponse$jscomp$1$$){this.$authResponse_$=$authResponse$jscomp$1$$};
$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$.prototype.buildUrl=function($url$jscomp$48$$,$useAuthData$$){var $$jscomp$this$jscomp$18$$=this;return $JSCompiler_StaticMethods_prepareUrlVars_$$(this,$useAuthData$$).then(function($useAuthData$$){return $$jscomp$this$jscomp$18$$.$urlReplacements_$.expandUrlAsync($url$jscomp$48$$,$useAuthData$$)})};
$UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$.prototype.collectUrlVars=function($url$jscomp$49$$,$useAuthData$jscomp$1$$){var $$jscomp$this$jscomp$19$$=this;return $JSCompiler_StaticMethods_prepareUrlVars_$$(this,$useAuthData$jscomp$1$$).then(function($useAuthData$jscomp$1$$){return $$jscomp$this$jscomp$19$$.$urlReplacements_$.collectVars($url$jscomp$49$$,$useAuthData$jscomp$1$$)})};
function $JSCompiler_StaticMethods_prepareUrlVars_$$($JSCompiler_StaticMethods_prepareUrlVars_$self$$,$useAuthData$jscomp$2$$){return $JSCompiler_StaticMethods_prepareUrlVars_$self$$.$readerIdPromise_$.then(function($readerId$$){var $vars$jscomp$2$$={READER_ID:$readerId$$,ACCESS_READER_ID:$readerId$$};$useAuthData$jscomp$2$$&&($vars$jscomp$2$$.AUTHDATA=function($useAuthData$jscomp$2$$){if($JSCompiler_StaticMethods_prepareUrlVars_$self$$.$authResponse_$)return $getValueForExpr$$module$src$json$$($JSCompiler_StaticMethods_prepareUrlVars_$self$$.$authResponse_$,
$useAuthData$jscomp$2$$)});return $vars$jscomp$2$$})};function $LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$($ampdoc$jscomp$19$$,$platformConfig$$,$serviceAdapter$jscomp$1$$){this.$ampdoc_$=$ampdoc$jscomp$19$$;this.$rootNode_$=$ampdoc$jscomp$19$$.getRootNode();this.$serviceConfig_$=$platformConfig$$;this.$serviceAdapter_$=$serviceAdapter$jscomp$1$$;this.$xhr_$=$getService$$module$src$service$$(this.$ampdoc_$.win,"xhr");this.$authorizationUrl_$=$assertHttpsUrl$$module$src$url$$($userAssert$$module$src$log$$(this.$serviceConfig_$.authorizationUrl,
"Service config does not have authorization Url"),"Authorization Url");this.$urlBuilder_$=new $UrlBuilder$$module$extensions$amp_subscriptions$0_1$url_builder$$(this.$ampdoc_$,this.$serviceAdapter_$.getReaderId("local"));this.$subscriptionAnalytics_$=$serviceAdapter$jscomp$1$$.getAnalytics();$userAssert$$module$src$log$$(this.$serviceConfig_$.actions,"Actions have not been defined in the service config");this.$actions_$=new $Actions$$module$extensions$amp_subscriptions$0_1$actions$$(this.$ampdoc_$,
this.$urlBuilder_$,this.$subscriptionAnalytics_$,this.validateActionMap(this.$serviceConfig_$.actions));this.$renderer_$=new $LocalSubscriptionPlatformRenderer$$module$extensions$amp_subscriptions$0_1$local_subscription_platform_renderer$$(this.$ampdoc_$,$serviceAdapter$jscomp$1$$.getDialog(),this.$serviceAdapter_$);this.$pingbackUrl_$=this.$serviceConfig_$.pingbackUrl||null;$JSCompiler_StaticMethods_initializeListeners_$$(this)}$JSCompiler_prototypeAlias$$=$LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$.prototype;
$JSCompiler_prototypeAlias$$.getServiceId=function(){return"local"};$JSCompiler_prototypeAlias$$.validateActionMap=function($actionMap$jscomp$1$$){$userAssert$$module$src$log$$($actionMap$jscomp$1$$.login,'Action "login" is not present in action map');$userAssert$$module$src$log$$($actionMap$jscomp$1$$.subscribe,'Action "subscribe" is not present in action map');return $actionMap$jscomp$1$$};
function $JSCompiler_StaticMethods_initializeListeners_$$($JSCompiler_StaticMethods_initializeListeners_$self$$){$JSCompiler_StaticMethods_initializeListeners_$self$$.$rootNode_$.addEventListener("click",function($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$){var $JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$=$closestAncestorElementBySelector$$module$src$dom$$($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$.target);$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$&&
($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$=$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$.getAttribute("subscriptions-action"),$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$=$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$.getAttribute("subscriptions-service"),"local"==$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$?
$JSCompiler_StaticMethods_initializeListeners_$self$$.executeAction($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$):"auto"==($JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$||"auto")?"login"==$JSCompiler_action$jscomp$inline_122_e$jscomp$21$$?($JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$=$JSCompiler_StaticMethods_initializeListeners_$self$$.$serviceAdapter_$.selectPlatformForLogin(),$JSCompiler_StaticMethods_initializeListeners_$self$$.$serviceAdapter_$.delegateActionToService($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$,
$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$.getServiceId())):$JSCompiler_StaticMethods_initializeListeners_$self$$.executeAction($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$):$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$&&$JSCompiler_StaticMethods_initializeListeners_$self$$.$serviceAdapter_$.delegateActionToService($JSCompiler_action$jscomp$inline_122_e$jscomp$21$$,$JSCompiler_platform$jscomp$inline_124_JSCompiler_serviceAttr$jscomp$inline_123_element$jscomp$74$$))})}
$JSCompiler_prototypeAlias$$.activate=function($entitlement$$){var $$jscomp$this$jscomp$22$$=this,$renderState$jscomp$4$$=$entitlement$$.json();this.$urlBuilder_$.setAuthResponse($renderState$jscomp$4$$);this.$actions_$.build().then(function(){$$jscomp$this$jscomp$22$$.$renderer_$.render($renderState$jscomp$4$$)})};$JSCompiler_prototypeAlias$$.reset=function(){this.$renderer_$.reset()};
$JSCompiler_prototypeAlias$$.executeAction=function($action$jscomp$5$$){var $$jscomp$this$jscomp$23$$=this,$actionExecution$$=this.$actions_$.execute($action$jscomp$5$$);return $actionExecution$$.then(function($action$jscomp$5$$){$action$jscomp$5$$&&$$jscomp$this$jscomp$23$$.$serviceAdapter_$.resetPlatforms();return!!$action$jscomp$5$$})};$JSCompiler_prototypeAlias$$.isPrerenderSafe=function(){return!1};
$JSCompiler_prototypeAlias$$.getEntitlements=function(){var $$jscomp$this$jscomp$24$$=this;return this.$urlBuilder_$.buildUrl(this.$authorizationUrl_$,!1).then(function($fetchUrl$$){var $encryptedDocumentKey$$=$$jscomp$this$jscomp$24$$.$serviceAdapter_$.getEncryptedDocumentKey("local");$encryptedDocumentKey$$&&($fetchUrl$$=$addParamToUrl$$module$src$url$$($fetchUrl$$,$encryptedDocumentKey$$));return $$jscomp$this$jscomp$24$$.$xhr_$.fetchJson($fetchUrl$$,{credentials:"include"}).then(function($$jscomp$this$jscomp$24$$){return $$jscomp$this$jscomp$24$$.json()}).then(function($$jscomp$this$jscomp$24$$){return $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$($$jscomp$this$jscomp$24$$)})})};
$JSCompiler_prototypeAlias$$.isPingbackEnabled=function(){return!!this.$pingbackUrl_$};
$JSCompiler_prototypeAlias$$.pingback=function($selectedEntitlement$$){var $$jscomp$this$jscomp$25$$=this;if(this.isPingbackEnabled){var $pingbackUrl$$=this.$pingbackUrl_$;return this.$urlBuilder_$.buildUrl($pingbackUrl$$,!0).then(function($pingbackUrl$$){return $$jscomp$this$jscomp$25$$.$xhr_$.sendSignal($pingbackUrl$$,{method:"POST",credentials:"include",headers:$dict$$module$src$utils$object$$({"Content-Type":"text/plain"}),body:JSON.stringify($selectedEntitlement$$.jsonForPingback())})})}};
$JSCompiler_prototypeAlias$$.getSupportedScoreFactor=function(){return 0};$JSCompiler_prototypeAlias$$.getBaseScore=function(){return this.$serviceConfig_$.baseScore||0};$JSCompiler_prototypeAlias$$.decorateUI=function(){};var $DEFAULT_SCORE_CONFIG$$module$extensions$amp_subscriptions$0_1$score_factors$$={};function $Observable$$module$src$observable$$(){this.$handlers_$=null}$JSCompiler_prototypeAlias$$=$Observable$$module$src$observable$$.prototype;$JSCompiler_prototypeAlias$$.add=function($handler$jscomp$4$$){var $$jscomp$this$jscomp$26$$=this;this.$handlers_$||(this.$handlers_$=[]);this.$handlers_$.push($handler$jscomp$4$$);return function(){$$jscomp$this$jscomp$26$$.remove($handler$jscomp$4$$)}};
$JSCompiler_prototypeAlias$$.remove=function($handler$jscomp$5_index$jscomp$73$$){this.$handlers_$&&($handler$jscomp$5_index$jscomp$73$$=this.$handlers_$.indexOf($handler$jscomp$5_index$jscomp$73$$),-1<$handler$jscomp$5_index$jscomp$73$$&&this.$handlers_$.splice($handler$jscomp$5_index$jscomp$73$$,1))};$JSCompiler_prototypeAlias$$.removeAll=function(){this.$handlers_$&&(this.$handlers_$.length=0)};
$JSCompiler_prototypeAlias$$.fire=function($opt_event$$){if(this.$handlers_$)for(var $handlers$$=this.$handlers_$,$i$jscomp$25$$=0;$i$jscomp$25$$<$handlers$$.length;$i$jscomp$25$$++)(0,$handlers$$[$i$jscomp$25$$])($opt_event$$)};$JSCompiler_prototypeAlias$$.getHandlerCount=function(){return this.$handlers_$?this.$handlers_$.length:0};function $PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$($expectedServiceIds$$,$scoreConfig$$,$fallbackEntitlement$$,$opt_Platforms$$){var $$jscomp$this$jscomp$27$$=this;this.$subscriptionPlatforms_$=$opt_Platforms$$||{};this.$serviceIds_$=$expectedServiceIds$$;this.$entitlements_$={};this.$entitlementDeferredMap_$={};$expectedServiceIds$$.forEach(function($expectedServiceIds$$){$$jscomp$this$jscomp$27$$.$entitlementDeferredMap_$[$expectedServiceIds$$]=new $Deferred$$module$src$utils$promise$$});
this.$onEntitlementResolvedCallbacks_$=new $Observable$$module$src$observable$$;this.$onPlatformResolvedCallbacks_$=new $Observable$$module$src$observable$$;this.$allResolvedPromise_$=this.$grantStatusEntitlementPromise_$=this.$grantStatusEntitlement_$=this.$grantStatusPromise_$=null;this.$failedPlatforms_$=[];this.$fallbackEntitlement_$=$fallbackEntitlement$$;this.$scoreConfig_$=Object.assign($DEFAULT_SCORE_CONFIG$$module$extensions$amp_subscriptions$0_1$score_factors$$,$scoreConfig$$)}
$JSCompiler_prototypeAlias$$=$PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$.prototype;$JSCompiler_prototypeAlias$$.resolvePlatform=function($serviceId$jscomp$2$$,$platform$jscomp$1$$){this.$subscriptionPlatforms_$[$serviceId$jscomp$2$$]=$platform$jscomp$1$$;this.$onPlatformResolvedCallbacks_$.fire({serviceId:$serviceId$jscomp$2$$})};
$JSCompiler_prototypeAlias$$.resetPlatformStore=function(){for(var $platformKey$$ in this.$subscriptionPlatforms_$)this.$subscriptionPlatforms_$[$platformKey$$].reset();return new $PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$(this.$serviceIds_$,this.$scoreConfig_$,this.$fallbackEntitlement_$,this.$subscriptionPlatforms_$)};
$JSCompiler_prototypeAlias$$.onPlatformResolves=function($serviceId$jscomp$3$$,$callback$jscomp$68$$){var $$jscomp$this$jscomp$28$$=this,$platform$jscomp$2$$=this.$subscriptionPlatforms_$[$serviceId$jscomp$3$$];$platform$jscomp$2$$?$callback$jscomp$68$$($platform$jscomp$2$$):this.$onPlatformResolvedCallbacks_$.add(function($platform$jscomp$2$$){$platform$jscomp$2$$.serviceId===$serviceId$jscomp$3$$&&$callback$jscomp$68$$($$jscomp$this$jscomp$28$$.getPlatform($serviceId$jscomp$3$$))})};
$JSCompiler_prototypeAlias$$.getPlatform=function($serviceId$jscomp$4$$){return this.$subscriptionPlatforms_$[$serviceId$jscomp$4$$]};$JSCompiler_prototypeAlias$$.getLocalPlatform=function(){var $localPlatform$$=this.getPlatform("local");return $localPlatform$$};
$JSCompiler_prototypeAlias$$.getAvailablePlatforms=function(){var $platforms$$=[],$platformKey$jscomp$1$$;for($platformKey$jscomp$1$$ in this.$subscriptionPlatforms_$){var $subscriptionPlatform$$=this.$subscriptionPlatforms_$[$platformKey$jscomp$1$$];$platforms$$.push($subscriptionPlatform$$)}return $platforms$$};$JSCompiler_prototypeAlias$$.onChange=function($callback$jscomp$69$$){this.$onEntitlementResolvedCallbacks_$.add($callback$jscomp$69$$)};
$JSCompiler_prototypeAlias$$.resolveEntitlement=function($serviceId$jscomp$5$$,$entitlement$jscomp$1$$){$entitlement$jscomp$1$$&&($entitlement$jscomp$1$$.service=$serviceId$jscomp$5$$);this.$entitlements_$[$serviceId$jscomp$5$$]=$entitlement$jscomp$1$$;var $deferred$jscomp$2$$=this.$entitlementDeferredMap_$[$serviceId$jscomp$5$$];$deferred$jscomp$2$$&&$deferred$jscomp$2$$.resolve($entitlement$jscomp$1$$);-1!=this.$failedPlatforms_$.indexOf($serviceId$jscomp$5$$)&&this.$failedPlatforms_$.splice(this.$failedPlatforms_$.indexOf($serviceId$jscomp$5$$));
$entitlement$jscomp$1$$.granted&&$JSCompiler_StaticMethods_saveGrantEntitlement_$$(this,$entitlement$jscomp$1$$);this.$onEntitlementResolvedCallbacks_$.fire({serviceId:$serviceId$jscomp$5$$,entitlement:$entitlement$jscomp$1$$})};$JSCompiler_prototypeAlias$$.getResolvedEntitlementFor=function($serviceId$jscomp$6$$){return this.$entitlements_$[$serviceId$jscomp$6$$]};$JSCompiler_prototypeAlias$$.getEntitlementPromiseFor=function($serviceId$jscomp$7$$){return this.$entitlementDeferredMap_$[$serviceId$jscomp$7$$].promise};
$JSCompiler_prototypeAlias$$.getGrantStatus=function(){var $$jscomp$this$jscomp$29$$=this;if(null!==this.$grantStatusPromise_$)return this.$grantStatusPromise_$.promise;this.$grantStatusPromise_$=new $Deferred$$module$src$utils$promise$$;for(var $key$jscomp$49$$ in this.$entitlements_$){var $entitlement$jscomp$2$$=this.$entitlements_$[$key$jscomp$49$$];$entitlement$jscomp$2$$.granted&&($JSCompiler_StaticMethods_saveGrantEntitlement_$$(this,$entitlement$jscomp$2$$),this.$grantStatusPromise_$.resolve(!0))}if($JSCompiler_StaticMethods_areAllPlatformsResolved_$$(this))this.$grantStatusPromise_$.resolve(!1);
else this.onChange(function($key$jscomp$49$$){$key$jscomp$49$$.entitlement.granted?$$jscomp$this$jscomp$29$$.$grantStatusPromise_$.resolve(!0):$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($$jscomp$this$jscomp$29$$)&&$$jscomp$this$jscomp$29$$.$grantStatusPromise_$.resolve(!1)});return this.$grantStatusPromise_$.promise};
function $JSCompiler_StaticMethods_saveGrantEntitlement_$$($JSCompiler_StaticMethods_saveGrantEntitlement_$self$$,$entitlement$jscomp$4$$){if(!$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$grantStatusEntitlement_$&&$entitlement$jscomp$4$$.granted||$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$grantStatusEntitlement_$&&!$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$grantStatusEntitlement_$.isSubscriber()&&$entitlement$jscomp$4$$.isSubscriber())$JSCompiler_StaticMethods_saveGrantEntitlement_$self$$.$grantStatusEntitlement_$=
$entitlement$jscomp$4$$}
$JSCompiler_prototypeAlias$$.getGrantEntitlement=function(){var $$jscomp$this$jscomp$30$$=this;if(this.$grantStatusEntitlementPromise_$)return this.$grantStatusEntitlementPromise_$.promise;this.$grantStatusEntitlementPromise_$=new $Deferred$$module$src$utils$promise$$;this.$grantStatusEntitlement_$&&this.$grantStatusEntitlement_$.isSubscriber()||$JSCompiler_StaticMethods_areAllPlatformsResolved_$$(this)?this.$grantStatusEntitlementPromise_$.resolve(this.$grantStatusEntitlement_$):this.$onEntitlementResolvedCallbacks_$.add(function(){($$jscomp$this$jscomp$30$$.$grantStatusEntitlement_$&&
$$jscomp$this$jscomp$30$$.$grantStatusEntitlement_$.isSubscriber()||$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($$jscomp$this$jscomp$30$$))&&$$jscomp$this$jscomp$30$$.$grantStatusEntitlementPromise_$.resolve($$jscomp$this$jscomp$30$$.$grantStatusEntitlement_$)});return this.$grantStatusEntitlementPromise_$.promise};$JSCompiler_prototypeAlias$$.reset=function(){this.$grantStatusPromise_$=null};
function $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$){if($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$)return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$.promise;$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$=new $Deferred$$module$src$utils$promise$$;if($JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$))$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$.resolve($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$));
else $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.onChange(function(){$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$)&&$JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$.resolve($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$($JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$))});return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$self$$.$allResolvedPromise_$.promise}
function $JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$$($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$){var $entitlements$$=[],$platform$jscomp$4$$;for($platform$jscomp$4$$ in $JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$entitlements_$)$hasOwn_$$module$src$utils$object$$.call($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$entitlements_$,$platform$jscomp$4$$)&&$entitlements$$.push($JSCompiler_StaticMethods_getAvailablePlatformsEntitlements_$self$$.$entitlements_$[$platform$jscomp$4$$]);
return $entitlements$$}
$JSCompiler_prototypeAlias$$.selectPlatform=function(){var $$jscomp$this$jscomp$32$$=this;return $JSCompiler_StaticMethods_getAllPlatformsEntitlements_$$(this).then(function(){var $JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$;a:{$JSCompiler_StaticMethods_areAllPlatformsResolved_$$($$jscomp$this$jscomp$32$$);for($JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$=$$jscomp$this$jscomp$32$$.getAvailablePlatforms();$JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$.length;){var $JSCompiler_platform$jscomp$inline_128$$=$JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$.pop();
if($$jscomp$this$jscomp$32$$.getResolvedEntitlementFor($JSCompiler_platform$jscomp$inline_128$$.getServiceId()).isSubscriber()){$JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$=$JSCompiler_platform$jscomp$inline_128$$;break a}}$JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$=$JSCompiler_StaticMethods_rankPlatformsByWeight_$$($$jscomp$this$jscomp$32$$,$JSCompiler_StaticMethods_getAllPlatformWeights_$$($$jscomp$this$jscomp$32$$))}return $JSCompiler_availablePlatforms$jscomp$inline_127_JSCompiler_inline_result$jscomp$36$$})};
function $JSCompiler_StaticMethods_areAllPlatformsResolved_$$($JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$){var $entitlementsResolved$$=Object.keys($JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$.$entitlements_$).length;return $entitlementsResolved$$===$JSCompiler_StaticMethods_areAllPlatformsResolved_$self$$.$serviceIds_$.length}
function $JSCompiler_StaticMethods_getSupportedFactorWeight_$$($JSCompiler_StaticMethods_getSupportedFactorWeight_$self$$,$factorName$$,$platform$jscomp$5$$){var $factorValue$$=$platform$jscomp$5$$.getSupportedScoreFactor($factorName$$);return"number"!==typeof $factorValue$$?0:$JSCompiler_StaticMethods_getSupportedFactorWeight_$self$$.$scoreConfig_$[$factorName$$]*Math.min(1,Math.max(-1,$factorValue$$))}
function $JSCompiler_StaticMethods_getAllPlatformWeights_$$($JSCompiler_StaticMethods_getAllPlatformWeights_$self$$){return $JSCompiler_StaticMethods_getAllPlatformWeights_$self$$.getAvailablePlatforms().map(function($platform$jscomp$7$$){return{platform:$platform$jscomp$7$$,weight:$JSCompiler_StaticMethods_calculatePlatformWeight_$$($JSCompiler_StaticMethods_getAllPlatformWeights_$self$$,$platform$jscomp$7$$)}})}
function $JSCompiler_StaticMethods_calculatePlatformWeight_$$($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,$platform$jscomp$8$$){var $factorWeights$$=[0],$weight$jscomp$2$$=$platform$jscomp$8$$.getBaseScore(),$factor$jscomp$1$$;for($factor$jscomp$1$$ in $JSCompiler_StaticMethods_calculatePlatformWeight_$self$$.$scoreConfig_$)$hasOwn_$$module$src$utils$object$$.call($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$.$scoreConfig_$,$factor$jscomp$1$$)&&$factorWeights$$.push($JSCompiler_StaticMethods_getSupportedFactorWeight_$$($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,
$factor$jscomp$1$$,$platform$jscomp$8$$));return $weight$jscomp$2$$+$factorWeights$$.reduce(function($JSCompiler_StaticMethods_calculatePlatformWeight_$self$$,$platform$jscomp$8$$){return $JSCompiler_StaticMethods_calculatePlatformWeight_$self$$+$platform$jscomp$8$$})}
function $JSCompiler_StaticMethods_rankPlatformsByWeight_$$($JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$,$platformWeights$$){var $localPlatform$jscomp$1$$=$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.getLocalPlatform();$platformWeights$$.sort(function($JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$,$platformWeights$$){return $platformWeights$$.weight==$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.weight&&$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.platform==
$localPlatform$jscomp$1$$?-1:$platformWeights$$.weight-$JSCompiler_StaticMethods_rankPlatformsByWeight_$self$$.weight});return $platformWeights$$[0].platform}
function $JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$$($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$){var $platformWeights$jscomp$1$$=$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$.getAvailablePlatforms().map(function($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$){var $platformWeights$jscomp$1$$=$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$.getSupportedScoreFactor("supportsViewer");return{platform:$JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$,
weight:"number"==typeof $platformWeights$jscomp$1$$?$platformWeights$jscomp$1$$:0}});return $JSCompiler_StaticMethods_rankPlatformsByWeight_$$($JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$self$$,$platformWeights$jscomp$1$$)}
$JSCompiler_prototypeAlias$$.reportPlatformFailureAndFallback=function($serviceId$jscomp$8$$){if($serviceId$jscomp$8$$===this.getLocalPlatform().getServiceId()&&this.$fallbackEntitlement_$)this.resolveEntitlement(this.getLocalPlatform().getServiceId(),this.$fallbackEntitlement_$),$user$$module$src$log$$().warn("amp-subscriptions","Local platform has failed to resolve,  using fallback entitlement.");else if(-1==this.$failedPlatforms_$.indexOf($serviceId$jscomp$8$$)){var $entitlement$jscomp$6$$=$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$($serviceId$jscomp$8$$);
this.resolveEntitlement($serviceId$jscomp$8$$,$entitlement$jscomp$6$$);this.$failedPlatforms_$.push($serviceId$jscomp$8$$)}};$JSCompiler_prototypeAlias$$.selectPlatformForLogin=function(){return $JSCompiler_StaticMethods_selectApplicablePlatformForFactor_$$(this)};function $Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$($ampdoc$jscomp$20$$){this.$ampdoc_$=$ampdoc$jscomp$20$$;this.$resources_$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$20$$,"resources");this.setGrantState(null);this.$ampdoc_$.getBody().classList.add("i-amphtml-subs-ready");this.addLoadingBar()}
function $JSCompiler_StaticMethods_setState_$$($JSCompiler_StaticMethods_setState_$self$$,$state$jscomp$1$$){$JSCompiler_StaticMethods_setState_$self$$.$resources_$.mutateElement($JSCompiler_StaticMethods_setState_$self$$.$ampdoc_$.getBody(),function(){$JSCompiler_StaticMethods_setState_$self$$.$ampdoc_$.getBody().classList.toggle("i-amphtml-subs-grant-unk",null===$state$jscomp$1$$);$JSCompiler_StaticMethods_setState_$self$$.$ampdoc_$.getBody().classList.toggle("i-amphtml-subs-grant-yes",!0===$state$jscomp$1$$);
$JSCompiler_StaticMethods_setState_$self$$.$ampdoc_$.getBody().classList.toggle("i-amphtml-subs-grant-no",!1===$state$jscomp$1$$)})}
$Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$.prototype.addLoadingBar=function(){var $$jscomp$this$jscomp$35$$=this;return this.$ampdoc_$.whenReady().then(function(){var $body$jscomp$1$$=$$jscomp$this$jscomp$35$$.$ampdoc_$.getBody();if(!$body$jscomp$1$$.querySelector("[subscriptions-section=loading]")){var $element$jscomp$76$$=$createElementWithAttributes$$module$src$dom$$($$jscomp$this$jscomp$35$$.$ampdoc_$.win.document,"div",$dict$$module$src$utils$object$$({"class":"i-amphtml-subs-progress",
"subscriptions-section":"loading"}));$body$jscomp$1$$.insertBefore($element$jscomp$76$$,$childElementByTag$$module$src$dom$$($body$jscomp$1$$))}})};
function $JSCompiler_StaticMethods_toggleState_$$($JSCompiler_StaticMethods_toggleState_$self$$,$state$jscomp$2$$){$JSCompiler_StaticMethods_toggleState_$self$$.$resources_$.mutateElement($JSCompiler_StaticMethods_toggleState_$self$$.$ampdoc_$.getBody(),function(){$JSCompiler_StaticMethods_toggleState_$self$$.$ampdoc_$.getBody().classList.toggle("i-amphtml-subs-loading",$state$jscomp$2$$)})}
$Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$.prototype.setGrantState=function($state$jscomp$3$$){$JSCompiler_StaticMethods_setState_$$(this,$state$jscomp$3$$)};$Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$.prototype.toggleLoading=function($loading$$){$JSCompiler_StaticMethods_toggleState_$$(this,$loading$$)};function $ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$($subscriptionService$$){this.$subscriptionService_$=$subscriptionService$$}$JSCompiler_prototypeAlias$$=$ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$.prototype;$JSCompiler_prototypeAlias$$.getPageConfig=function(){return this.$subscriptionService_$.getPageConfig()};$JSCompiler_prototypeAlias$$.getReaderId=function($serviceId$jscomp$9$$){return this.$subscriptionService_$.getReaderId($serviceId$jscomp$9$$)};
$JSCompiler_prototypeAlias$$.getEncryptedDocumentKey=function($serviceId$jscomp$10$$){return this.$subscriptionService_$.getEncryptedDocumentKey($serviceId$jscomp$10$$)};$JSCompiler_prototypeAlias$$.getAnalytics=function(){return this.$subscriptionService_$.getAnalytics()};$JSCompiler_prototypeAlias$$.delegateActionToLocal=function($action$jscomp$6$$){return this.delegateActionToService($action$jscomp$6$$,"local")};
$JSCompiler_prototypeAlias$$.delegateActionToService=function($action$jscomp$7$$,$serviceId$jscomp$11$$){return this.$subscriptionService_$.delegateActionToService($action$jscomp$7$$,$serviceId$jscomp$11$$)};$JSCompiler_prototypeAlias$$.decorateServiceAction=function($element$jscomp$77$$,$serviceId$jscomp$12$$,$action$jscomp$8$$,$options$jscomp$16$$){this.$subscriptionService_$.decorateServiceAction($element$jscomp$77$$,$serviceId$jscomp$12$$,$action$jscomp$8$$,$options$jscomp$16$$)};
$JSCompiler_prototypeAlias$$.resetPlatforms=function(){this.$subscriptionService_$.resetPlatforms()};$JSCompiler_prototypeAlias$$.getDialog=function(){return this.$subscriptionService_$.getDialog()};$JSCompiler_prototypeAlias$$.selectPlatformForLogin=function(){return this.$subscriptionService_$.selectPlatformForLogin()};function $triggerAnalyticsEvent$$module$src$analytics$$($target$jscomp$86$$,$eventType$jscomp$7$$,$opt_vars$$){$getElementServiceIfAvailableForDoc$$module$src$element_service$$($target$jscomp$86$$).then(function($analytics$jscomp$1$$){$analytics$jscomp$1$$&&$analytics$jscomp$1$$.triggerEventForTarget($target$jscomp$86$$,$eventType$jscomp$7$$,$opt_vars$$)})};function $SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$($element$jscomp$78$$){this.$element_$=$element$jscomp$78$$}$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.serviceEvent=function($eventType$jscomp$8$$,$serviceId$jscomp$13$$,$opt_vars$jscomp$1$$){this.event($eventType$jscomp$8$$,Object.assign($dict$$module$src$utils$object$$({serviceId:$serviceId$jscomp$13$$}),$opt_vars$jscomp$1$$))};
$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.event=function($eventType$jscomp$9$$,$opt_vars$jscomp$2$$){$user$$module$src$log$$().info("amp-subscriptions",$eventType$jscomp$9$$,$opt_vars$jscomp$2$$||"");$triggerAnalyticsEvent$$module$src$analytics$$(this.$element_$,$eventType$jscomp$9$$,$opt_vars$jscomp$2$$||$dict$$module$src$utils$object$$({}))};
$SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$.prototype.actionEvent=function($serviceId$jscomp$14$$,$action$jscomp$9$$,$status$$,$opt_vars$jscomp$3$$){this.serviceEvent("subscriptions-action-"+$action$jscomp$9$$+"-"+$status$$,$serviceId$jscomp$14$$,$opt_vars$jscomp$3$$)};function $utf8Decode$$module$src$utils$bytes$$($bytes$$){if("undefined"!==typeof TextDecoder)return(new TextDecoder("utf-8")).decode($bytes$$);for(var $JSCompiler_bytes$jscomp$inline_130$$=new Uint8Array($bytes$$.buffer||$bytes$$),$JSCompiler_array$jscomp$inline_131$$=Array($JSCompiler_bytes$jscomp$inline_130$$.length),$JSCompiler_i$jscomp$inline_132$$=0;$JSCompiler_i$jscomp$inline_132$$<$JSCompiler_bytes$jscomp$inline_130$$.length;$JSCompiler_i$jscomp$inline_132$$++)$JSCompiler_array$jscomp$inline_131$$[$JSCompiler_i$jscomp$inline_132$$]=
String.fromCharCode($JSCompiler_bytes$jscomp$inline_130$$[$JSCompiler_i$jscomp$inline_132$$]);var $asciiString$$=$JSCompiler_array$jscomp$inline_131$$.join("");return decodeURIComponent(escape($asciiString$$))}
function $stringToBytes$$module$src$utils$bytes$$($str$jscomp$10$$){for(var $bytes$jscomp$1$$=new Uint8Array($str$jscomp$10$$.length),$i$jscomp$26$$=0;$i$jscomp$26$$<$str$jscomp$10$$.length;$i$jscomp$26$$++){var $charCode$$=$str$jscomp$10$$.charCodeAt($i$jscomp$26$$);$bytes$jscomp$1$$[$i$jscomp$26$$]=$charCode$$}return $bytes$jscomp$1$$};var $base64UrlDecodeSubs$$module$src$utils$base64$$={"-":"+",_:"/",".":"="};function $base64UrlDecodeToBytes$$module$src$utils$base64$$($str$jscomp$11$$){var $encoded$$=atob($str$jscomp$11$$.replace(/[-_.]/g,function($str$jscomp$11$$){return $base64UrlDecodeSubs$$module$src$utils$base64$$[$str$jscomp$11$$]}));return $stringToBytes$$module$src$utils$bytes$$($encoded$$)};function $pemToBytes$$module$src$utils$pem$$($pem$$){$pem$$=$pem$$.trim();$pem$$=$pem$$.replace(/^\-+BEGIN[^-]*\-+/,"");$pem$$=$pem$$.replace(/\-+END[^-]*\-+$/,"");$pem$$=$pem$$.replace(/[\r\n]/g,"").trim();return $stringToBytes$$module$src$utils$bytes$$(atob($pem$$))};function $JwtHelper$$module$extensions$amp_access$0_1$jwt$$($win$jscomp$48$$){this.win=$win$jscomp$48$$;this.$subtle_$=$win$jscomp$48$$.crypto&&($win$jscomp$48$$.crypto.subtle||$win$jscomp$48$$.crypto.webkitSubtle)||null}$JwtHelper$$module$extensions$amp_access$0_1$jwt$$.prototype.decode=function($encodedToken$$){return $JSCompiler_StaticMethods_decodeInternal_$$($encodedToken$$).payload};$JwtHelper$$module$extensions$amp_access$0_1$jwt$$.prototype.isVerificationSupported=function(){return!!this.$subtle_$};
$JwtHelper$$module$extensions$amp_access$0_1$jwt$$.prototype.decodeAndVerify=function($encodedToken$jscomp$1$$,$pemPromise$$){var $$jscomp$this$jscomp$37$$=this;if(!this.$subtle_$)throw Error("Crypto is not supported on this platform");var $decodedPromise$$=new Promise(function($pemPromise$$){return $pemPromise$$($JSCompiler_StaticMethods_decodeInternal_$$($encodedToken$jscomp$1$$))});return $decodedPromise$$.then(function($encodedToken$jscomp$1$$){var $decodedPromise$$=$encodedToken$jscomp$1$$.header.alg;
if(!$decodedPromise$$||"RS256"!=$decodedPromise$$)throw Error("Only alg=RS256 is supported");return $JSCompiler_StaticMethods_importKey_$$($$jscomp$this$jscomp$37$$,$pemPromise$$).then(function($pemPromise$$){var $decodedPromise$$=$base64UrlDecodeToBytes$$module$src$utils$base64$$($encodedToken$jscomp$1$$.sig);return $$jscomp$this$jscomp$37$$.$subtle_$.verify({name:"RSASSA-PKCS1-v1_5"},$pemPromise$$,$decodedPromise$$,$stringToBytes$$module$src$utils$bytes$$($encodedToken$jscomp$1$$.verifiable))}).then(function($pemPromise$$){if($pemPromise$$)return $encodedToken$jscomp$1$$.payload;
throw Error("Signature verification failed");})})};
function $JSCompiler_StaticMethods_decodeInternal_$$($encodedToken$jscomp$2$$){function $invalidToken$$(){throw Error('Invalid token: "'+$encodedToken$jscomp$2$$+'"');}var $parts$jscomp$1$$=$encodedToken$jscomp$2$$.split(".");3!=$parts$jscomp$1$$.length&&$invalidToken$$();var $headerUtf8Bytes$$=$base64UrlDecodeToBytes$$module$src$utils$base64$$($parts$jscomp$1$$[0]),$payloadUtf8Bytes$$=$base64UrlDecodeToBytes$$module$src$utils$base64$$($parts$jscomp$1$$[1]);return{header:$tryParseJson$$module$src$json$$($utf8Decode$$module$src$utils$bytes$$($headerUtf8Bytes$$),
$invalidToken$$),payload:$tryParseJson$$module$src$json$$($utf8Decode$$module$src$utils$bytes$$($payloadUtf8Bytes$$),$invalidToken$$),verifiable:$parts$jscomp$1$$[0]+"."+$parts$jscomp$1$$[1],sig:$parts$jscomp$1$$[2]}}
function $JSCompiler_StaticMethods_importKey_$$($JSCompiler_StaticMethods_importKey_$self$$,$pemPromise$jscomp$1$$){return $pemPromise$jscomp$1$$.then(function($pemPromise$jscomp$1$$){return $JSCompiler_StaticMethods_importKey_$self$$.$subtle_$.importKey("spki",$pemToBytes$$module$src$utils$pem$$($pemPromise$jscomp$1$$),{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"])})};function $ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$($ampdoc$jscomp$21$$,$platformConfig$jscomp$1$$,$serviceAdapter$jscomp$2$$,$origin$jscomp$1$$){this.$ampdoc_$=$ampdoc$jscomp$21$$;this.$serviceAdapter_$=$serviceAdapter$jscomp$2$$;this.$pageConfig_$=$serviceAdapter$jscomp$2$$.getPageConfig();this.$platform_$=new $LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$($ampdoc$jscomp$21$$,$platformConfig$jscomp$1$$,
$serviceAdapter$jscomp$2$$);this.$viewer_$=$getServiceForDoc$$module$src$service$$(this.$ampdoc_$,"viewer");this.$viewer_$.onMessage("subscriptionchange",this.$subscriptionChange_$.bind(this));this.$jwtHelper_$=new $JwtHelper$$module$extensions$amp_access$0_1$jwt$$($ampdoc$jscomp$21$$.win);this.$publicationId_$=this.$pageConfig_$.getPublicationId();this.$currentProductId_$=this.$pageConfig_$.getProductId();this.$origin_$=$origin$jscomp$1$$}$JSCompiler_prototypeAlias$$=$ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$.prototype;
$JSCompiler_prototypeAlias$$.isPrerenderSafe=function(){return!0};
$JSCompiler_prototypeAlias$$.getEntitlements=function(){var $$jscomp$this$jscomp$39$$=this,$entitlementPromise$$=this.$viewer_$.sendMessageAwaitResponse("auth",$dict$$module$src$utils$object$$({publicationId:this.$publicationId_$,productId:this.$currentProductId_$,origin:this.$origin_$})).then(function($entitlementPromise$$){var $entitlementData$$=($entitlementPromise$$||{}).authorization;return $entitlementData$$?$JSCompiler_StaticMethods_verifyAuthToken_$$($$jscomp$this$jscomp$39$$,$entitlementData$$):
$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local")}).catch(function($entitlementPromise$$){$$jscomp$this$jscomp$39$$.$viewer_$.sendMessage("auth-rejected",$dict$$module$src$utils$object$$({reason:$entitlementPromise$$.message}));throw $entitlementPromise$$;});return $entitlementPromise$$};
function $JSCompiler_StaticMethods_verifyAuthToken_$$($JSCompiler_StaticMethods_verifyAuthToken_$self$$,$token$jscomp$6$$){return new Promise(function($resolve$jscomp$16$$){var $entitlements$jscomp$1_origin$jscomp$2$$=$getWinOrigin$$module$src$url$$($JSCompiler_StaticMethods_verifyAuthToken_$self$$.$ampdoc_$.win);var $JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$JSCompiler_StaticMethods_verifyAuthToken_$self$$.$ampdoc_$.win.location;
"string"==typeof $JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$&&($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$parseUrlDeprecated$$module$src$url$$($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$));var $JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$=
$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$;"string"==typeof $JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$&&($JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$=$parseUrlDeprecated$$module$src$url$$($JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$));
if($urls$$module$src$config$$.cdnProxyRegex.test($JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$.origin)){$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$=$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.pathname.split("/");$userAssert$$module$src$log$$($SERVING_TYPE_PREFIX$$module$src$url$$[$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$[1]],
"Unknown path prefix in url %s",$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.href);var $JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$=$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$[2],$JSCompiler_origin$jscomp$inline_170$$="s"==$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$?
"https://"+decodeURIComponent($JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$[3]):"http://"+decodeURIComponent($JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$);$userAssert$$module$src$log$$(0<$JSCompiler_origin$jscomp$inline_170$$.indexOf("."),"Expected a . in origin %s",$JSCompiler_origin$jscomp$inline_170$$);$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$.splice(1,
"s"==$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$?3:2);$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$=$JSCompiler_origin$jscomp$inline_170$$+$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$.join("/");$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$=
($JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$=$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.search)&&"?"!=$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$?($JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$=
$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$.replace($AMP_JS_PARAMS_REGEX$$module$src$url$$,"").replace($AMP_GSA_PARAMS_REGEX$$module$src$url$$,"").replace($AMP_R_PARAMS_REGEX$$module$src$url$$,"").replace($AMP_KIT_PARAMS_REGEX$$module$src$url$$,"").replace($GOOGLE_EXPERIMENT_PARAMS_REGEX$$module$src$url$$,"").replace(/^[?&]/,""))?"?"+$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$:
"":"";$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$+$JSCompiler_domainOrHttpsSignal$jscomp$inline_169_JSCompiler_inline_result$jscomp$178_JSCompiler_search$jscomp$inline_198_JSCompiler_urlSearch$jscomp$inline_197$$+($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.hash||
"")}else $JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.href;$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$parseUrlDeprecated$$module$src$url$$($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$).origin;
var $decodedData$$=$JSCompiler_StaticMethods_verifyAuthToken_$self$$.$jwtHelper_$.decode($token$jscomp$6$$),$currentProductId$$=$userAssert$$module$src$log$$($JSCompiler_StaticMethods_verifyAuthToken_$self$$.$pageConfig_$.getProductId(),"Product id is null");if($decodedData$$.aud!=$entitlements$jscomp$1_origin$jscomp$2$$&&$decodedData$$.aud!=$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$)throw $user$$module$src$log$$().createError('The mismatching "aud" field: '+
$decodedData$$.aud);if($decodedData$$.exp<Math.floor(Date.now()/1E3))throw $user$$module$src$log$$().createError("Payload is expired");$entitlements$jscomp$1_origin$jscomp$2$$=$decodedData$$.entitlements;$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local");if(Array.isArray($entitlements$jscomp$1_origin$jscomp$2$$))for($JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$=
0;$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$<$entitlements$jscomp$1_origin$jscomp$2$$.length;$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$++){if(-1!==$entitlements$jscomp$1_origin$jscomp$2$$[$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$].products.indexOf($currentProductId$$)){var $entitlementObject$$=
$entitlements$jscomp$1_origin$jscomp$2$$[$JSCompiler_path$jscomp$inline_168_JSCompiler_temp_const$jscomp$177_JSCompiler_url$jscomp$inline_195_index$jscomp$74$$];$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=new $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"viewer",raw:$token$jscomp$6$$,granted:!0,grantReason:$entitlementObject$$.subscriptionToken?"SUBSCRIBER":"",dataObject:$entitlementObject$$});break}}else $decodedData$$.metering&&
!$decodedData$$.entitlements?$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=new $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:$decodedData$$.iss||"",raw:$token$jscomp$6$$,granted:!0,grantReason:"METERING",dataObject:$decodedData$$.metering}):$entitlements$jscomp$1_origin$jscomp$2$$&&($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$=new $Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$$({source:"viewer",
raw:$token$jscomp$6$$,granted:$entitlements$jscomp$1_origin$jscomp$2$$.granted,grantReason:$entitlements$jscomp$1_origin$jscomp$2$$.subscriptionToken?"SUBSCRIBER":"",dataObject:$entitlements$jscomp$1_origin$jscomp$2$$}));$JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$.service="local";$resolve$jscomp$16$$($JSCompiler_inline_result$jscomp$148_JSCompiler_url$jscomp$inline_167_entitlement$jscomp$7_sourceOrigin$jscomp$1$$)})}
$JSCompiler_prototypeAlias$$.getServiceId=function(){return this.$platform_$.getServiceId()};$JSCompiler_prototypeAlias$$.activate=function(){};$JSCompiler_prototypeAlias$$.reset=function(){};$JSCompiler_prototypeAlias$$.isPingbackEnabled=function(){return this.$platform_$.isPingbackEnabled()};$JSCompiler_prototypeAlias$$.pingback=function($selectedPlatform$$){this.$platform_$.pingback($selectedPlatform$$)};$JSCompiler_prototypeAlias$$.getSupportedScoreFactor=function($factorName$jscomp$1$$){return this.$platform_$.getSupportedScoreFactor($factorName$jscomp$1$$)};
$JSCompiler_prototypeAlias$$.getBaseScore=function(){return 0};$JSCompiler_prototypeAlias$$.executeAction=function($action$jscomp$10$$){return this.$platform_$.executeAction($action$jscomp$10$$)};$JSCompiler_prototypeAlias$$.decorateUI=function($element$jscomp$79$$,$action$jscomp$11$$,$options$jscomp$17$$){return this.$platform_$.decorateUI($element$jscomp$79$$,$action$jscomp$11$$,$options$jscomp$17$$)};$JSCompiler_prototypeAlias$$.$subscriptionChange_$=function(){this.$serviceAdapter_$.resetPlatforms()};function $installStylesForDoc$$module$src$style_installer$$($ampdoc$jscomp$22$$,$cb$jscomp$1$$){var $cssText$$="[subscriptions-action]:not(.i-amphtml-subs-display),[subscriptions-actions]:not(.i-amphtml-subs-display),[subscriptions-section=actions]:not(.i-amphtml-subs-display),body.i-amphtml-subs-delegated [subscriptions-section=actions],body.i-amphtml-subs-grant-unk [subscriptions-action],body.i-amphtml-subs-grant-unk [subscriptions-section=actions],body:not(.i-amphtml-subs-grant-no) [subscriptions-section=content-not-granted],body:not(.i-amphtml-subs-grant-yes) [subscriptions-section=content],body:not(.i-amphtml-subs-loading) [subscriptions-section=loading]{display:none!important}amp-subscriptions-dialog{display:block!important;position:fixed!important;bottom:0!important;left:0!important;margin-left:0!important;width:100%!important;z-index:2147483641!important;max-height:90vh;box-sizing:border-box;opacity:1;background-image:none;background-color:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,0.2);margin-bottom:0;-webkit-transition:-webkit-transform 0.3s ease-in;transition:-webkit-transform 0.3s ease-in;transition:transform 0.3s ease-in;transition:transform 0.3s ease-in,-webkit-transform 0.3s ease-in}.i-amphtml-subs-dialog-close-button{position:absolute;width:28px;height:28px;top:-28px;right:0;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='13' height='13' viewBox='341 8 13 13' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%234F4F4F' d='M354 9.31L352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z' fill-rule='evenodd'/%3E%3C/svg%3E\");background-size:13px 13px;background-position:9px;background-color:#fff;background-repeat:no-repeat;box-shadow:0 -1px 1px 0 rgba(0,0,0,0.2);border:none;border-radius:12px 0 0 0;cursor:pointer}body:not(.i-amphtml-subs-grant-yes) .i-amphtml-subs-dialog-close-button{display:none}.i-amphtml-subs-progress{height:2px;background-color:#ccc;position:relative;margin:8px;overflow:hidden}.i-amphtml-subs-progress:after{content:\"\";background-color:#2196f3;height:2px;position:absolute;left:0;top:0;width:20%;-webkit-animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite;animation:i-amphtml-subs-loading-progress 1500ms ease-in-out infinite}@-webkit-keyframes i-amphtml-subs-loading-progress{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(500%);transform:translateX(500%)}}@keyframes i-amphtml-subs-loading-progress{0%{-webkit-transform:translateX(-100%);transform:translateX(-100%)}to{-webkit-transform:translateX(500%);transform:translateX(500%)}}@media (min-width:480px){amp-subscriptions-dialog{width:480px!important;left:-240px!important;margin-left:50vw!important}}\n/*# sourceURL=/extensions/amp-subscriptions/0.1/amp-subscriptions.css*/",
$opt_isRuntimeCss$$=!1,$opt_ext$$="amp-subscriptions",$cssRoot$$=$ampdoc$jscomp$22$$.getHeadNode(),$style$jscomp$6$$=$insertStyleElement$$module$src$style_installer$$($cssRoot$$,$maybeTransform$$module$src$style_installer$$($cssRoot$$,$cssText$$),$opt_isRuntimeCss$$||!1,$opt_ext$$||null);if($cb$jscomp$1$$){var $rootNode$jscomp$3$$=$ampdoc$jscomp$22$$.getRootNode();if($styleLoaded$$module$src$style_installer$$($rootNode$jscomp$3$$,$style$jscomp$6$$))$cb$jscomp$1$$($style$jscomp$6$$);else var $interval$jscomp$1$$=
setInterval(function(){$styleLoaded$$module$src$style_installer$$($rootNode$jscomp$3$$,$style$jscomp$6$$)&&(clearInterval($interval$jscomp$1$$),$cb$jscomp$1$$($style$jscomp$6$$))},4)}}
function $insertStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$,$isRuntimeCss$$,$ext$$){var $styleMap$$=$cssRoot$jscomp$1$$.__AMP_CSS_SM;$styleMap$$||($styleMap$$=$cssRoot$jscomp$1$$.__AMP_CSS_SM=$map$$module$src$utils$object$$());var $isExtCss$$=!$isRuntimeCss$$&&$ext$$&&"amp-custom"!=$ext$$&&"amp-keyframes"!=$ext$$,$key$jscomp$51$$=$isRuntimeCss$$?"amp-runtime":$isExtCss$$?"amp-extension="+$ext$$:null;if($key$jscomp$51$$){var $existing$$=
$getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$styleMap$$,$key$jscomp$51$$);if($existing$$)return $existing$$.textContent!==$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$&&($existing$$.textContent=$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$),$existing$$}var $style$jscomp$8$$=($cssRoot$jscomp$1$$.ownerDocument||$cssRoot$jscomp$1$$).createElement("style");$style$jscomp$8$$.textContent=$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$;var $afterElement$$=
null;$isRuntimeCss$$?$style$jscomp$8$$.setAttribute("amp-runtime",""):$isExtCss$$?($style$jscomp$8$$.setAttribute("amp-extension",$ext$$||""),$afterElement$$=$getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$1$$,$styleMap$$,"amp-runtime")):($ext$$&&$style$jscomp$8$$.setAttribute($ext$$,""),$afterElement$$=$cssRoot$jscomp$1$$.lastChild);$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$=$afterElement$$;$cssRoot$jscomp$1$$.insertBefore($style$jscomp$8$$,$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$?
$JSCompiler_after$jscomp$inline_139_cssText$jscomp$2$$.nextSibling:$cssRoot$jscomp$1$$.firstChild);$key$jscomp$51$$&&($styleMap$$[$key$jscomp$51$$]=$style$jscomp$8$$);return $style$jscomp$8$$}
function $getExistingStyleElement$$module$src$style_installer$$($cssRoot$jscomp$2_existing$jscomp$1$$,$styleMap$jscomp$1$$,$key$jscomp$52$$){return $styleMap$jscomp$1$$[$key$jscomp$52$$]?$styleMap$jscomp$1$$[$key$jscomp$52$$]:($cssRoot$jscomp$2_existing$jscomp$1$$=$cssRoot$jscomp$2_existing$jscomp$1$$.querySelector("style["+$key$jscomp$52$$+"]"))?$styleMap$jscomp$1$$[$key$jscomp$52$$]=$cssRoot$jscomp$2_existing$jscomp$1$$:null}
function $maybeTransform$$module$src$style_installer$$($cssRoot$jscomp$4_transformer$jscomp$1$$,$cssText$jscomp$3$$){return($cssRoot$jscomp$4_transformer$jscomp$1$$=$cssRoot$jscomp$4_transformer$jscomp$1$$.__AMP_CSS_TR)?$cssRoot$jscomp$4_transformer$jscomp$1$$($cssText$jscomp$3$$):$cssText$jscomp$3$$}
function $styleLoaded$$module$src$style_installer$$($doc$jscomp$30_i$jscomp$32$$,$style$jscomp$9$$){var $sheets$$=$doc$jscomp$30_i$jscomp$32$$.styleSheets;for($doc$jscomp$30_i$jscomp$32$$=0;$doc$jscomp$30_i$jscomp$32$$<$sheets$$.length;$doc$jscomp$30_i$jscomp$32$$++){var $sheet$$=$sheets$$[$doc$jscomp$30_i$jscomp$32$$];if($sheet$$.ownerNode==$style$jscomp$9$$)return!0}return!1};self.AMPErrors=self.AMPErrors||[];function $ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker$$($ampdoc$jscomp$23$$){this.$ampdoc_$=$ampdoc$jscomp$23$$;this.$viewer_$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$23$$,"viewer");this.$reportViewPromise_$=null;this.$timer_$=$getService$$module$src$service$$($ampdoc$jscomp$23$$.win,"timer");this.$viewport_$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$23$$,"viewport")}
$ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker$$.prototype.scheduleView=function($timeToView$$){var $$jscomp$this$jscomp$42$$=this;this.$reportViewPromise_$=null;return this.$ampdoc_$.whenReady().then(function(){return(new Promise(function($timeToView$$){$$jscomp$this$jscomp$42$$.$viewer_$.isVisible()&&$timeToView$$();$$jscomp$this$jscomp$42$$.$viewer_$.onVisibilityChanged(function(){$$jscomp$this$jscomp$42$$.$viewer_$.isVisible()&&$timeToView$$()})})).then(function(){return $JSCompiler_StaticMethods_reportWhenViewed_$$($$jscomp$this$jscomp$42$$,
$timeToView$$)})})};
function $JSCompiler_StaticMethods_reportWhenViewed_$$($JSCompiler_StaticMethods_reportWhenViewed_$self$$,$timeToView$jscomp$1$$){if($JSCompiler_StaticMethods_reportWhenViewed_$self$$.$reportViewPromise_$)return $JSCompiler_StaticMethods_reportWhenViewed_$self$$.$reportViewPromise_$;$JSCompiler_StaticMethods_reportWhenViewed_$self$$.$reportViewPromise_$=$JSCompiler_StaticMethods_whenViewed_$$($JSCompiler_StaticMethods_reportWhenViewed_$self$$,$timeToView$jscomp$1$$).catch(function($timeToView$jscomp$1$$){$JSCompiler_StaticMethods_reportWhenViewed_$self$$.$reportViewPromise_$=null;
throw $timeToView$jscomp$1$$;});return $JSCompiler_StaticMethods_reportWhenViewed_$self$$.$reportViewPromise_$}
function $JSCompiler_StaticMethods_whenViewed_$$($JSCompiler_StaticMethods_whenViewed_$self$$,$timeToView$jscomp$2$$){if(0==$timeToView$jscomp$2$$)return Promise.resolve();var $unlistenSet$$=[];return(new Promise(function($resolve$jscomp$18$$,$reject$jscomp$6$$){$unlistenSet$$.push($JSCompiler_StaticMethods_whenViewed_$self$$.$viewer_$.onVisibilityChanged(function(){$JSCompiler_StaticMethods_whenViewed_$self$$.$viewer_$.isVisible()||$reject$jscomp$6$$(Error("CANCELLED"))}));var $timeoutId$$=$JSCompiler_StaticMethods_whenViewed_$self$$.$timer_$.delay($resolve$jscomp$18$$,
$timeToView$jscomp$2$$);$unlistenSet$$.push(function(){return $JSCompiler_StaticMethods_whenViewed_$self$$.$timer_$.cancel($timeoutId$$)});$unlistenSet$$.push($JSCompiler_StaticMethods_whenViewed_$self$$.$viewport_$.onScroll($resolve$jscomp$18$$));$unlistenSet$$.push($listenOnce$$module$src$event_helper$$($JSCompiler_StaticMethods_whenViewed_$self$$.$ampdoc_$.getRootNode(),$resolve$jscomp$18$$))})).then(function(){$unlistenSet$$.forEach(function($JSCompiler_StaticMethods_whenViewed_$self$$){return $JSCompiler_StaticMethods_whenViewed_$self$$()})},
function($JSCompiler_StaticMethods_whenViewed_$self$$){$unlistenSet$$.forEach(function($JSCompiler_StaticMethods_whenViewed_$self$$){return $JSCompiler_StaticMethods_whenViewed_$self$$()});throw $JSCompiler_StaticMethods_whenViewed_$self$$;})};function $isStoryDocument$$module$src$utils$story$$($ampdoc$jscomp$24$$){return new Promise(function($resolve$jscomp$19$$){$ampdoc$jscomp$24$$.whenBodyAvailable().then(function(){var $body$jscomp$2$$=$ampdoc$jscomp$24$$.getBody();$waitForChild$$module$src$dom$$($body$jscomp$2$$,function(){return!!$body$jscomp$2$$.firstElementChild},function(){$resolve$jscomp$19$$("AMP-STORY"===$body$jscomp$2$$.firstElementChild.tagName)})})})};function $SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$($ampdoc$jscomp$25$$){var $configElement$$=$ampdoc$jscomp$25$$.getElementById("amp-subscriptions");this.$ampdoc_$=$ampdoc$jscomp$25$$;$installStylesForDoc$$module$src$style_installer$$($ampdoc$jscomp$25$$,function(){});this.$initialized_$=null;this.$renderer_$=new $Renderer$$module$extensions$amp_subscriptions$0_1$renderer$$($ampdoc$jscomp$25$$);this.$platformStore_$=this.$platformConfig_$=this.$pageConfig_$=
null;this.$configElement_$=$user$$module$src$log$$().assertElement($configElement$$);this.$subscriptionAnalytics_$=new $SubscriptionAnalytics$$module$extensions$amp_subscriptions$0_1$analytics$$(this.$configElement_$);this.$serviceAdapter_$=new $ServiceAdapter$$module$extensions$amp_subscriptions$0_1$service_adapter$$(this);this.$dialog_$=new $Dialog$$module$extensions$amp_subscriptions$0_1$dialog$$($ampdoc$jscomp$25$$);this.$viewerTracker_$=new $ViewerTracker$$module$extensions$amp_subscriptions$0_1$viewer_tracker$$($ampdoc$jscomp$25$$);
this.$viewer_$=$getServiceForDoc$$module$src$service$$($ampdoc$jscomp$25$$,"viewer");this.$viewTrackerPromise_$=null;this.$timer_$=$getService$$module$src$service$$($ampdoc$jscomp$25$$.win,"timer");this.$doesViewerProvideAuth_$=this.$viewer_$.hasCapability("auth");this.$cid_$=$getServicePromiseInternal$$module$src$service$$($getAmpdocServiceHolder$$module$src$service$$($ampdoc$jscomp$25$$),"cid");this.$readerIdPromiseMap_$={};this.$cryptoHandler_$=new $CryptoHandler$$module$extensions$amp_subscriptions$0_1$crypto_handler$$($ampdoc$jscomp$25$$)}
function $JSCompiler_StaticMethods_initialize_$$($JSCompiler_StaticMethods_initialize_$self$$){if(!$JSCompiler_StaticMethods_initialize_$self$$.$initialized_$){var $doc$jscomp$31$$=new $DocImpl$$module$extensions$amp_subscriptions$0_1$doc_impl$$($JSCompiler_StaticMethods_initialize_$self$$.$ampdoc_$),$pageConfigResolver$$=new $PageConfigResolver$$module$third_party$subscriptions_project$config$$($doc$jscomp$31$$);$JSCompiler_StaticMethods_initialize_$self$$.$initialized_$=Promise.all([$JSCompiler_StaticMethods_getPlatformConfig_$$($JSCompiler_StaticMethods_initialize_$self$$),
$pageConfigResolver$$.resolveConfig()]).then(function($doc$jscomp$31$$){$JSCompiler_StaticMethods_initialize_$self$$.$platformConfig_$=$doc$jscomp$31$$[0];$JSCompiler_StaticMethods_initialize_$self$$.$pageConfig_$=$doc$jscomp$31$$[1]})}return $JSCompiler_StaticMethods_initialize_$self$$.$initialized_$}
function $JSCompiler_StaticMethods_getPlatformConfig_$$($JSCompiler_StaticMethods_getPlatformConfig_$self$$){return new Promise(function($resolve$jscomp$20$$,$reject$jscomp$7$$){var $rawContent$$=$tryParseJson$$module$src$json$$($JSCompiler_StaticMethods_getPlatformConfig_$self$$.$configElement_$.textContent,function($JSCompiler_StaticMethods_getPlatformConfig_$self$$){$reject$jscomp$7$$('Failed to parse "amp-subscriptions" JSON: '+$JSCompiler_StaticMethods_getPlatformConfig_$self$$)});$resolve$jscomp$20$$($rawContent$$)})}
$JSCompiler_prototypeAlias$$=$SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$.prototype;$JSCompiler_prototypeAlias$$.getAnalytics=function(){return this.$subscriptionAnalytics_$};
$JSCompiler_prototypeAlias$$.registerPlatform=function($serviceId$jscomp$16$$,$subscriptionPlatformFactory$$){var $$jscomp$this$jscomp$47$$=this;return $JSCompiler_StaticMethods_initialize_$$(this).then(function(){if(!$$jscomp$this$jscomp$47$$.$doesViewerProvideAuth_$){var $matchedServices$$=$$jscomp$this$jscomp$47$$.$platformConfig_$.services.filter(function($subscriptionPlatformFactory$$){return($subscriptionPlatformFactory$$.serviceId||"local")===$serviceId$jscomp$16$$}),$matchedServiceConfig$$=
$userAssert$$module$src$log$$($matchedServices$$[0],"No matching services for the ID found"),$subscriptionPlatform$jscomp$1$$=$subscriptionPlatformFactory$$($matchedServiceConfig$$,$$jscomp$this$jscomp$47$$.$serviceAdapter_$);$$jscomp$this$jscomp$47$$.$platformStore_$.resolvePlatform($subscriptionPlatform$jscomp$1$$.getServiceId(),$subscriptionPlatform$jscomp$1$$);$$jscomp$this$jscomp$47$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-service-registered",$subscriptionPlatform$jscomp$1$$.getServiceId());
$$jscomp$this$jscomp$47$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-platform-registered",$subscriptionPlatform$jscomp$1$$.getServiceId());$JSCompiler_StaticMethods_fetchEntitlements_$$($$jscomp$this$jscomp$47$$,$subscriptionPlatform$jscomp$1$$)}})};
function $JSCompiler_StaticMethods_processGrantState_$$($JSCompiler_StaticMethods_processGrantState_$self$$,$grantState$$){$JSCompiler_StaticMethods_processGrantState_$self$$.$renderer_$.toggleLoading(!1);$JSCompiler_StaticMethods_processGrantState_$self$$.$renderer_$.setGrantState($grantState$$);$JSCompiler_StaticMethods_processGrantState_$self$$.$viewTrackerPromise_$=$JSCompiler_StaticMethods_processGrantState_$self$$.$viewerTracker_$.scheduleView(2E3)}
function $JSCompiler_StaticMethods_resolveEntitlementsToStore_$$($JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$,$serviceId$jscomp$17$$,$entitlement$jscomp$8$$){$JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$platformStore_$.resolveEntitlement($serviceId$jscomp$17$$,$entitlement$jscomp$8$$);$entitlement$jscomp$8$$.decryptedDocumentKey&&$JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$cryptoHandler_$.tryToDecryptDocument($entitlement$jscomp$8$$.decryptedDocumentKey);
$JSCompiler_StaticMethods_resolveEntitlementsToStore_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-entitlement-resolved",$serviceId$jscomp$17$$)}
function $JSCompiler_StaticMethods_fetchEntitlements_$$($JSCompiler_StaticMethods_fetchEntitlements_$self$$,$subscriptionPlatform$jscomp$2$$){var $timeout$jscomp$3$$=3E3;if($getMode$$module$src$mode$$().development||$getMode$$module$src$mode$$().localDev)$timeout$jscomp$3$$=6E3;var $visiblePromise$$=$subscriptionPlatform$jscomp$2$$.isPrerenderSafe()?Promise.resolve():$JSCompiler_StaticMethods_fetchEntitlements_$self$$.$viewer_$.whenFirstVisible();$visiblePromise$$.then(function(){return $JSCompiler_StaticMethods_fetchEntitlements_$self$$.$timer_$.timeoutPromise($timeout$jscomp$3$$,
$subscriptionPlatform$jscomp$2$$.getEntitlements()).then(function($timeout$jscomp$3$$){$timeout$jscomp$3$$=$timeout$jscomp$3$$||$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$($subscriptionPlatform$jscomp$2$$.getServiceId());$JSCompiler_StaticMethods_resolveEntitlementsToStore_$$($JSCompiler_StaticMethods_fetchEntitlements_$self$$,$subscriptionPlatform$jscomp$2$$.getServiceId(),$timeout$jscomp$3$$);return $timeout$jscomp$3$$}).catch(function($timeout$jscomp$3$$){var $visiblePromise$$=
$subscriptionPlatform$jscomp$2$$.getServiceId();$JSCompiler_StaticMethods_fetchEntitlements_$self$$.$platformStore_$.reportPlatformFailureAndFallback($visiblePromise$$);throw $user$$module$src$log$$().createError("fetch entitlements failed for "+$visiblePromise$$,$timeout$jscomp$3$$);})})}
$JSCompiler_prototypeAlias$$.start=function(){var $$jscomp$this$jscomp$49$$=this;$JSCompiler_StaticMethods_initialize_$$(this).then(function(){$$jscomp$this$jscomp$49$$.$subscriptionAnalytics_$.event("subscriptions-started");$$jscomp$this$jscomp$49$$.$renderer_$.toggleLoading(!0);$userAssert$$module$src$log$$($$jscomp$this$jscomp$49$$.$pageConfig_$,"Page config is null");if($$jscomp$this$jscomp$49$$.$doesViewerProvideAuth_$)$JSCompiler_StaticMethods_delegateAuthToViewer_$$($$jscomp$this$jscomp$49$$),
$JSCompiler_StaticMethods_startAuthorizationFlow_$$($$jscomp$this$jscomp$49$$,!1);else if($$jscomp$this$jscomp$49$$.$platformConfig_$.alwaysGrant)$JSCompiler_StaticMethods_processGrantState_$$($$jscomp$this$jscomp$49$$,!0);else{$userAssert$$module$src$log$$($$jscomp$this$jscomp$49$$.$platformConfig_$.services,"Services not configured in service config");var $serviceIds$$=$$jscomp$this$jscomp$49$$.$platformConfig_$.services.map(function($$jscomp$this$jscomp$49$$){return $$jscomp$this$jscomp$49$$.serviceId||
"local"});$JSCompiler_StaticMethods_initializePlatformStore_$$($$jscomp$this$jscomp$49$$,$serviceIds$$);$$jscomp$this$jscomp$49$$.$platformConfig_$.services.forEach(function($serviceIds$$){"local"==($serviceIds$$.serviceId||"local")&&$$jscomp$this$jscomp$49$$.$platformStore_$.resolvePlatform("local",new $LocalSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$local_subscription_platform$$($$jscomp$this$jscomp$49$$.$ampdoc_$,$serviceIds$$,$$jscomp$this$jscomp$49$$.$serviceAdapter_$))});
$$jscomp$this$jscomp$49$$.$platformStore_$.getAvailablePlatforms().forEach(function($serviceIds$$){$JSCompiler_StaticMethods_fetchEntitlements_$$($$jscomp$this$jscomp$49$$,$serviceIds$$)});$isStoryDocument$$module$src$utils$story$$($$jscomp$this$jscomp$49$$.$ampdoc_$).then(function($serviceIds$$){$JSCompiler_StaticMethods_startAuthorizationFlow_$$($$jscomp$this$jscomp$49$$,!$serviceIds$$)})}});return this};
function $JSCompiler_StaticMethods_initializePlatformStore_$$($JSCompiler_StaticMethods_initializePlatformStore_$self$$,$serviceIds$jscomp$1$$){var $fallbackEntitlement$jscomp$1$$=$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$platformConfig_$.fallbackEntitlement?$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$parseFromJson$$($JSCompiler_StaticMethods_initializePlatformStore_$self$$.$platformConfig_$.fallbackEntitlement):$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local");
$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$platformStore_$=new $PlatformStore$$module$extensions$amp_subscriptions$0_1$platform_store$$($serviceIds$jscomp$1$$,$JSCompiler_StaticMethods_initializePlatformStore_$self$$.$platformConfig_$.score,$fallbackEntitlement$jscomp$1$$)}
function $JSCompiler_StaticMethods_delegateAuthToViewer_$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$){var $origin$jscomp$3$$=$getWinOrigin$$module$src$url$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$ampdoc_$.win);$JSCompiler_StaticMethods_initializePlatformStore_$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$,["local"]);$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$platformConfig_$.services.forEach(function($service$jscomp$16$$){if("local"==($service$jscomp$16$$.serviceId||
"local")){var $viewerPlatform$$=new $ViewerSubscriptionPlatform$$module$extensions$amp_subscriptions$0_1$viewer_subscription_platform$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$ampdoc_$,$service$jscomp$16$$,$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$serviceAdapter_$,$origin$jscomp$3$$);$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$platformStore_$.resolvePlatform("local",$viewerPlatform$$);$viewerPlatform$$.getEntitlements().then(function($origin$jscomp$3$$){$JSCompiler_StaticMethods_resolveEntitlementsToStore_$$($JSCompiler_StaticMethods_delegateAuthToViewer_$self$$,
"local",$origin$jscomp$3$$)}).catch(function($origin$jscomp$3$$){$JSCompiler_StaticMethods_delegateAuthToViewer_$self$$.$platformStore_$.reportPlatformFailureAndFallback("local");$dev$$module$src$log$$().error("amp-subscriptions","Viewer auth failed:",$origin$jscomp$3$$)})}})}
$JSCompiler_prototypeAlias$$.getReaderId=function($serviceId$jscomp$19$$){var $readerId$jscomp$1$$=this.$readerIdPromiseMap_$[$serviceId$jscomp$19$$];if(!$readerId$jscomp$1$$){var $consent$jscomp$1$$=Promise.resolve(),$scope$$="amp-access"+("local"==$serviceId$jscomp$19$$?"":"-"+$serviceId$jscomp$19$$);$readerId$jscomp$1$$=this.$cid_$.then(function($serviceId$jscomp$19$$){return $serviceId$jscomp$19$$.get({scope:$scope$$,createCookieIfNotPresent:!0},$consent$jscomp$1$$)});this.$readerIdPromiseMap_$[$serviceId$jscomp$19$$]=
$readerId$jscomp$1$$}return $readerId$jscomp$1$$};$JSCompiler_prototypeAlias$$.getEncryptedDocumentKey=function($serviceId$jscomp$20$$){return this.$cryptoHandler_$.getEncryptedDocumentKey($serviceId$jscomp$20$$)};$JSCompiler_prototypeAlias$$.getDialog=function(){return this.$dialog_$};
$JSCompiler_prototypeAlias$$.maybeSelectAndActivatePlatform=function(){var $$jscomp$this$jscomp$51$$=this;$JSCompiler_StaticMethods_initialize_$$(this).then(function(){$$jscomp$this$jscomp$51$$.$doesViewerProvideAuth_$||$$jscomp$this$jscomp$51$$.$platformConfig_$.alwaysGrant||$JSCompiler_StaticMethods_selectAndActivatePlatform_$$($$jscomp$this$jscomp$51$$)})};
function $JSCompiler_StaticMethods_startAuthorizationFlow_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$,$doPlatformSelection$$){$doPlatformSelection$$=void 0===$doPlatformSelection$$?!0:$doPlatformSelection$$;$JSCompiler_StaticMethods_startAuthorizationFlow_$self$$.$platformStore_$.getGrantStatus().then(function($doPlatformSelection$$){$JSCompiler_StaticMethods_processGrantState_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$,$doPlatformSelection$$);$JSCompiler_StaticMethods_performPingback_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$)});
$doPlatformSelection$$&&$JSCompiler_StaticMethods_selectAndActivatePlatform_$$($JSCompiler_StaticMethods_startAuthorizationFlow_$self$$)}
function $JSCompiler_StaticMethods_selectAndActivatePlatform_$$($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$){var $requireValuesPromise$$=Promise.all([$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$platformStore_$.getGrantStatus(),$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$platformStore_$.selectPlatform(),$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$platformStore_$.getGrantEntitlement()]);$requireValuesPromise$$.then(function($requireValuesPromise$$){var $resolvedValues$$=
$requireValuesPromise$$[1],$grantEntitlement$$=$requireValuesPromise$$[2],$selectedEntitlement$jscomp$1$$=$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$platformStore_$.getResolvedEntitlementFor($resolvedValues$$.getServiceId()),$bestEntitlement$$=$grantEntitlement$$||$selectedEntitlement$jscomp$1$$;$resolvedValues$$.activate($selectedEntitlement$jscomp$1$$,$grantEntitlement$$);$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-service-activated",
$resolvedValues$$.getServiceId());$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-platform-activated",$resolvedValues$$.getServiceId());$bestEntitlement$$.granted?$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-access-granted",$bestEntitlement$$.service):($JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-paywall-activated",
$resolvedValues$$.getServiceId()),$JSCompiler_StaticMethods_selectAndActivatePlatform_$self$$.$subscriptionAnalytics_$.serviceEvent("subscriptions-access-denied",$resolvedValues$$.getServiceId()))})}
function $JSCompiler_StaticMethods_performPingback_$$($JSCompiler_StaticMethods_performPingback_$self$$){$JSCompiler_StaticMethods_performPingback_$self$$.$viewTrackerPromise_$&&$JSCompiler_StaticMethods_performPingback_$self$$.$viewTrackerPromise_$.then(function(){return $JSCompiler_StaticMethods_performPingback_$self$$.$platformStore_$.getGrantEntitlement()}).then(function($grantStateEntitlement$$){var $localPlatform$jscomp$2$$=$JSCompiler_StaticMethods_performPingback_$self$$.$platformStore_$.getLocalPlatform();
$localPlatform$jscomp$2$$.isPingbackEnabled()&&$localPlatform$jscomp$2$$.pingback($grantStateEntitlement$$||$Entitlement$$module$extensions$amp_subscriptions$0_1$entitlement$empty$$("local"))})}$JSCompiler_prototypeAlias$$.getPageConfig=function(){var $pageConfig$$=this.$pageConfig_$;return $pageConfig$$};
$JSCompiler_prototypeAlias$$.resetPlatforms=function(){var $$jscomp$this$jscomp$55$$=this;this.$platformStore_$=this.$platformStore_$.resetPlatformStore();this.$renderer_$.toggleLoading(!0);this.$platformStore_$.getAvailablePlatforms().forEach(function($subscriptionPlatform$jscomp$4$$){$JSCompiler_StaticMethods_fetchEntitlements_$$($$jscomp$this$jscomp$55$$,$subscriptionPlatform$jscomp$4$$)});this.$subscriptionAnalytics_$.serviceEvent("subscriptions-service-re-authorized","");this.$subscriptionAnalytics_$.serviceEvent("subscriptions-platform-re-authorized",
"");$JSCompiler_StaticMethods_startAuthorizationFlow_$$(this)};$JSCompiler_prototypeAlias$$.delegateActionToLocal=function($action$jscomp$12$$){return this.delegateActionToService($action$jscomp$12$$,"local")};
$JSCompiler_prototypeAlias$$.delegateActionToService=function($action$jscomp$13$$,$serviceId$jscomp$21$$){var $$jscomp$this$jscomp$56$$=this;return new Promise(function($resolve$jscomp$21$$){$$jscomp$this$jscomp$56$$.$platformStore_$.onPlatformResolves($serviceId$jscomp$21$$,function($platform$jscomp$10$$){$$jscomp$this$jscomp$56$$.$subscriptionAnalytics_$.event("subscriptions-action-delegated",$dict$$module$src$utils$object$$({action:$action$jscomp$13$$,serviceId:$serviceId$jscomp$21$$}));$resolve$jscomp$21$$($platform$jscomp$10$$.executeAction($action$jscomp$13$$))})})};
$JSCompiler_prototypeAlias$$.decorateServiceAction=function($element$jscomp$83$$,$serviceId$jscomp$22$$,$action$jscomp$14$$,$options$jscomp$19$$){this.$platformStore_$.onPlatformResolves($serviceId$jscomp$22$$,function($serviceId$jscomp$22$$){$serviceId$jscomp$22$$.decorateUI($element$jscomp$83$$,$action$jscomp$14$$,$options$jscomp$19$$)})};$JSCompiler_prototypeAlias$$.selectPlatformForLogin=function(){return this.$platformStore_$.selectPlatformForLogin()};
$JSCompiler_prototypeAlias$$.getAccessReaderId=function(){var $$jscomp$this$jscomp$57$$=this;return $JSCompiler_StaticMethods_initialize_$$(this).then(function(){return $$jscomp$this$jscomp$57$$.getReaderId("local")})};
$JSCompiler_prototypeAlias$$.getAuthdataField=function($field$jscomp$3$$){var $$jscomp$this$jscomp$58$$=this;return $JSCompiler_StaticMethods_initialize_$$(this).then(function(){return $$jscomp$this$jscomp$58$$.$platformStore_$.getEntitlementPromiseFor("local")}).then(function($$jscomp$this$jscomp$58$$){return $getValueForExpr$$module$src$json$$($$jscomp$this$jscomp$58$$.json(),$field$jscomp$3$$)})};(function($AMP$jscomp$1$$){$AMP$jscomp$1$$.registerServiceForDoc("subscriptions",function($AMP$jscomp$1$$){return(new $SubscriptionService$$module$extensions$amp_subscriptions$0_1$amp_subscriptions$$($AMP$jscomp$1$$)).start()})})(self.AMP);
})});

//# sourceMappingURL=amp-subscriptions-0.1.js.map
