(self.AMP=self.AMP||[]).push({n:"extensions-amp-gwd-animation-0.1-amp-gwd-animation.js", v:"erwin", f:(function(){var $VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$=["animationend","webkitAnimationEnd"];function $AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$($ampdoc$jscomp$153$$){var $$jscomp$this$jscomp$520$$=this;this.$ampdoc_$=$ampdoc$jscomp$153$$;this.B=this.$onAnimationEndEvent_$.bind(this);this.$ampdoc_$.whenBodyAvailable().then(function(){$$jscomp$this$jscomp$520$$.$initialize_$()})}$JSCompiler_prototypeAlias$$=$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.prototype;
$JSCompiler_prototypeAlias$$.$initialize_$=function(){for(var $JSCompiler_i$jscomp$inline_1912$$=0;$JSCompiler_i$jscomp$inline_1912$$<$VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.length;$JSCompiler_i$jscomp$inline_1912$$++)this.$ampdoc_$.getBody().addEventListener($VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$[$JSCompiler_i$jscomp$inline_1912$$],this.B,!0);this.setCurrentPage(0)};
$JSCompiler_prototypeAlias$$.setEnabled=function($enable$$){this.$ampdoc_$.getBody().classList.toggle("i-amphtml-gwd-animation-disabled",!$enable$$)};
$JSCompiler_prototypeAlias$$.setCurrentPage=function($index$jscomp$100$$){var $gwdPages$$=this.$ampdoc_$.getRootNode().querySelectorAll("."+$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-page-wrapper"));if($gwdPages$$.length){var $currentPageEl$$=this.$ampdoc_$.getRootNode().querySelector("."+$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-page-wrapper")+"."+$cssEscape$$module$third_party$css_escape$css_escape$$("gwd-play-animation"));$currentPageEl$$&&$JSCompiler_StaticMethods_deactivatePage_$$($currentPageEl$$);
var $newPageEl$$=$gwdPages$$[$index$jscomp$100$$];$newPageEl$$?$newPageEl$$.classList.add("gwd-play-animation"):$user$$module$src$log$$().error("GWD","Could not find page with index "+$index$jscomp$100$$+".")}};
function $JSCompiler_StaticMethods_deactivatePage_$$($pageEl$jscomp$1$$){$pageEl$jscomp$1$$.classList.remove("gwd-play-animation");[$pageEl$jscomp$1$$].concat($toArray$$module$src$types$$($pageEl$jscomp$1$$.querySelectorAll("*"))).forEach(function($pageEl$jscomp$1$$){$pageEl$jscomp$1$$.classList.remove("gwd-pause-animation");if($pageEl$jscomp$1$$.hasAttribute("data-gwd-label-animation")){var $el$jscomp$35$$=$pageEl$jscomp$1$$.getAttribute("data-gwd-label-animation");$pageEl$jscomp$1$$.classList.remove($el$jscomp$35$$);
$pageEl$jscomp$1$$.removeAttribute("data-gwd-label-animation")}delete $pageEl$jscomp$1$$.__AMP_GWD_GOTO_COUNTERS__})}$JSCompiler_prototypeAlias$$.play=function($id$jscomp$67_receiver$jscomp$2$$){($id$jscomp$67_receiver$jscomp$2$$=this.getReceiver($id$jscomp$67_receiver$jscomp$2$$))&&$id$jscomp$67_receiver$jscomp$2$$.classList.remove("gwd-pause-animation")};
$JSCompiler_prototypeAlias$$.pause=function($id$jscomp$68_receiver$jscomp$3$$){($id$jscomp$68_receiver$jscomp$3$$=this.getReceiver($id$jscomp$68_receiver$jscomp$3$$))&&$id$jscomp$68_receiver$jscomp$3$$.classList.add("gwd-pause-animation")};$JSCompiler_prototypeAlias$$.togglePlay=function($id$jscomp$69_receiver$jscomp$4$$){($id$jscomp$69_receiver$jscomp$4$$=this.getReceiver($id$jscomp$69_receiver$jscomp$4$$))&&$id$jscomp$69_receiver$jscomp$4$$.classList.toggle("gwd-pause-animation")};
$JSCompiler_prototypeAlias$$.gotoAndPlay=function($id$jscomp$70_receiver$jscomp$5$$,$label$jscomp$4$$){($id$jscomp$70_receiver$jscomp$5$$=this.getReceiver($id$jscomp$70_receiver$jscomp$5$$))&&$JSCompiler_StaticMethods_playLabelAnimation_$$($id$jscomp$70_receiver$jscomp$5$$,$label$jscomp$4$$)};
$JSCompiler_prototypeAlias$$.gotoAndPause=function($id$jscomp$71$$,$label$jscomp$5$$){var $$jscomp$this$jscomp$522$$=this,$receiver$jscomp$6$$=this.getReceiver($id$jscomp$71$$);$receiver$jscomp$6$$&&($JSCompiler_StaticMethods_playLabelAnimation_$$($receiver$jscomp$6$$,$label$jscomp$5$$),this.$ampdoc_$.win.setTimeout(function(){$$jscomp$this$jscomp$522$$.pause($id$jscomp$71$$)},40))};
$JSCompiler_prototypeAlias$$.gotoAndPlayNTimes=function($id$jscomp$72_receiver$jscomp$7$$,$label$jscomp$6$$,$maxCount$$,$counterName$jscomp$2_eventName$jscomp$6$$){if(0>=$maxCount$$)$user$$module$src$log$$().error("GWD","Invalid maxCount parameter: "+$maxCount$$);else if($counterName$jscomp$2_eventName$jscomp$6$$){if($id$jscomp$72_receiver$jscomp$7$$=this.getReceiver($id$jscomp$72_receiver$jscomp$7$$)){$counterName$jscomp$2_eventName$jscomp$6$$=$counterName$jscomp$2_eventName$jscomp$6$$+"_"+$label$jscomp$6$$;
var $currentCount$$=$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__&&$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__.hasOwnProperty($counterName$jscomp$2_eventName$jscomp$6$$)?$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$6$$]:0;$currentCount$$<$maxCount$$&&($JSCompiler_StaticMethods_playLabelAnimation_$$($id$jscomp$72_receiver$jscomp$7$$,$label$jscomp$6$$),$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__||($id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__=
{}),$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__.hasOwnProperty($counterName$jscomp$2_eventName$jscomp$6$$)||($id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$6$$]=0),$id$jscomp$72_receiver$jscomp$7$$.__AMP_GWD_GOTO_COUNTERS__[$counterName$jscomp$2_eventName$jscomp$6$$]=$currentCount$$+1)}}else $user$$module$src$log$$().error("GWD","Event name required but not specified.")};
$JSCompiler_prototypeAlias$$.getReceiver=function($id$jscomp$73$$){if("document.body"==$id$jscomp$73$$)return this.$ampdoc_$.getBody();var $receiver$jscomp$8$$=this.$ampdoc_$.getRootNode().getElementById($id$jscomp$73$$);if($receiver$jscomp$8$$&&$receiver$jscomp$8$$.classList)return $receiver$jscomp$8$$;$user$$module$src$log$$().error("GWD","Could not get receiver with id "+$id$jscomp$73$$+".");return null};
function $JSCompiler_StaticMethods_playLabelAnimation_$$($receiver$jscomp$9$$,$label$jscomp$7$$){$receiver$jscomp$9$$.classList.remove("gwd-pause-animation");var $currentLabel$$=$receiver$jscomp$9$$.getAttribute("data-gwd-label-animation");$currentLabel$$&&($receiver$jscomp$9$$.classList.remove($currentLabel$$),$receiver$jscomp$9$$.removeAttribute("data-gwd-label-animation"));$currentLabel$$==$label$jscomp$7$$&&($receiver$jscomp$9$$.offsetWidth=$receiver$jscomp$9$$.offsetWidth);$receiver$jscomp$9$$.classList.add($label$jscomp$7$$);
$receiver$jscomp$9$$.setAttribute("data-gwd-label-animation",$label$jscomp$7$$)}$JSCompiler_prototypeAlias$$.$onAnimationEndEvent_$=function($event$jscomp$102$$){var $userEventName$$=$event$jscomp$102$$.target.getAttribute("data-event-name");if($userEventName$$){var $timelineEvent$$=$createCustomEvent$$module$src$event_helper$$(this.$ampdoc_$.win,"gwd.timelineEvent",{eventName:$userEventName$$,sourceEvent:$event$jscomp$102$$});this.$ampdoc_$.getRootNode().dispatchEvent($timelineEvent$$)}};
$JSCompiler_prototypeAlias$$.dispose=function(){for(var $JSCompiler_i$jscomp$inline_1926$$=0;$JSCompiler_i$jscomp$inline_1926$$<$VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$.length;$JSCompiler_i$jscomp$inline_1926$$++)this.$ampdoc_$.getBody().removeEventListener($VENDOR_ANIMATIONEND_EVENTS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$[$JSCompiler_i$jscomp$inline_1926$$],this.B,!0)};var $ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$={play:["args.id"],pause:["args.id"],togglePlay:["args.id"],gotoAndPlay:["args.id","args.label"],gotoAndPause:["args.id","args.label"],gotoAndPlayNTimes:["args.id","args.label","args.N","event.eventName"],setCurrentPage:["args.index"]};
function $GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$($$jscomp$super$this$jscomp$45_element$jscomp$335$$){$$jscomp$super$this$jscomp$45_element$jscomp$335$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$45_element$jscomp$335$$)||this;$$jscomp$super$this$jscomp$45_element$jscomp$335$$.$timelineEventPrefix_$="";$$jscomp$super$this$jscomp$45_element$jscomp$335$$.$boundOnGwdTimelineEvent_$=$$jscomp$super$this$jscomp$45_element$jscomp$335$$.$onGwdTimelineEvent_$.bind($$jscomp$super$this$jscomp$45_element$jscomp$335$$);
return $$jscomp$super$this$jscomp$45_element$jscomp$335$$}$$jscomp$inherits$$($GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$,AMP.BaseElement);
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.buildCallback=function(){this.$timelineEventPrefix_$=this.element.getAttribute("timeline-event-prefix")||"";this.getAmpDoc().getRootNode().addEventListener("gwd.timelineEvent",this.$boundOnGwdTimelineEvent_$,!0);var $gwdPageDeck$$=this.getAmpDoc().getRootNode().getElementById("pagedeck");if($gwdPageDeck$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.id,"The amp-gwd-animation element must have an id.");
var $setCurrentPageAction$$=this.element.id+".setCurrentPage(index=event.index)",$JSCompiler_ampdoc$jscomp$inline_1928_handler$jscomp$46$$=this.getAmpDoc(),$JSCompiler_element$jscomp$inline_1929$$=$gwdPageDeck$$,$JSCompiler_actionStr$jscomp$inline_1930$$=$setCurrentPageAction$$,$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$;$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$=$JSCompiler_element$jscomp$inline_1929$$.getAttribute("on")||
"";var $JSCompiler_actionsStartIndex$jscomp$inline_1936_JSCompiler_eventActionsIndex$jscomp$inline_1935$$=$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$.indexOf("slideChange:");-1!=$JSCompiler_actionsStartIndex$jscomp$inline_1936_JSCompiler_eventActionsIndex$jscomp$inline_1935$$?($JSCompiler_actionsStartIndex$jscomp$inline_1936_JSCompiler_eventActionsIndex$jscomp$inline_1935$$+=12,$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$=
$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$.substr(0,$JSCompiler_actionsStartIndex$jscomp$inline_1936_JSCompiler_eventActionsIndex$jscomp$inline_1935$$)+$JSCompiler_actionStr$jscomp$inline_1930$$+","+$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$.substr($JSCompiler_actionsStartIndex$jscomp$inline_1936_JSCompiler_eventActionsIndex$jscomp$inline_1935$$)):($JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$&&
($JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$+=";"),$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$+="slideChange:"+$JSCompiler_actionStr$jscomp$inline_1930$$);$Services$$module$src$services$actionServiceForDoc$$($JSCompiler_ampdoc$jscomp$inline_1928_handler$jscomp$46$$).setActions($JSCompiler_element$jscomp$inline_1929$$,$JSCompiler_currentActionsStr$jscomp$inline_1933_JSCompiler_newActionsStr$jscomp$inline_1932$$)}var $JSCompiler_ampdoc$jscomp$inline_1928_handler$jscomp$46$$=
this.$actionHandler_$.bind(this),$name$jscomp$200$$;for($name$jscomp$200$$ in $ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$)this.registerAction($name$jscomp$200$$,$JSCompiler_ampdoc$jscomp$inline_1928_handler$jscomp$46$$)};
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.$actionHandler_$=function($invocation$jscomp$30$$){var $JSCompiler_gwdPageDeck$jscomp$inline_1940_JSCompiler_inline_result$jscomp$452$$;$JSCompiler_gwdPageDeck$jscomp$inline_1940_JSCompiler_inline_result$jscomp$452$$="setCurrentPage"==$invocation$jscomp$30$$.method?($JSCompiler_gwdPageDeck$jscomp$inline_1940_JSCompiler_inline_result$jscomp$452$$=this.getAmpDoc().getRootNode().getElementById("pagedeck"))&&$invocation$jscomp$30$$.source==
$JSCompiler_gwdPageDeck$jscomp$inline_1940_JSCompiler_inline_result$jscomp$452$$:!0;$JSCompiler_gwdPageDeck$jscomp$inline_1940_JSCompiler_inline_result$jscomp$452$$&&$JSCompiler_StaticMethods_executeInvocation_$$(this,$invocation$jscomp$30$$)};
function $JSCompiler_StaticMethods_executeInvocation_$$($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$,$invocation$jscomp$32$$){$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($getServiceForDoc$$module$src$service$$($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$.getAmpDoc(),"gwd"),"Cannot execute action because the GWD service is not registered.");var $argPaths$$=$ACTION_IMPL_ARGS$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$[$invocation$jscomp$32$$.method],
$invocationObj$$=Object.assign({},$invocation$jscomp$32$$),$actionArgs$$=$argPaths$$.map(function($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$){return $getValueForExpr$$module$src$json$$($invocationObj$$,$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$)});$JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$[$invocation$jscomp$32$$.method].apply($JSCompiler_StaticMethods_executeInvocation_$self_service$jscomp$24$$,$actionArgs$$)}
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.$onGwdTimelineEvent_$=function($event$jscomp$103$$){$Services$$module$src$services$actionServiceForDoc$$(this.getAmpDoc()).trigger(this.element,""+this.$timelineEventPrefix_$+$event$jscomp$103$$.detail.eventName,$event$jscomp$103$$.detail,100)};
$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$.prototype.detachedCallback=function(){this.getAmpDoc().getRootNode().removeEventListener("gwd.timelineEvent",this.$boundOnGwdTimelineEvent_$,!0);return!0};
(function($AMP$jscomp$50$$){$AMP$jscomp$50$$.registerServiceForDoc("gwd",$AmpGwdRuntimeService$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation_impl$$);$AMP$jscomp$50$$.registerElement("amp-gwd-animation",$GwdAnimation$$module$extensions$amp_gwd_animation$0_1$amp_gwd_animation$$,".i-amphtml-gwd-animation-disabled [class*=-animation],.i-amphtml-gwd-animation-disabled [class*=gwdanimation]{-webkit-animation:none!important;animation:none!important}\n/*# sourceURL=/extensions/amp-gwd-animation/0.1/amp-gwd-animation.css*/")})(self.AMP);})});
//# sourceMappingURL=extensions-amp-gwd-animation-0.1-amp-gwd-animation.js.map

