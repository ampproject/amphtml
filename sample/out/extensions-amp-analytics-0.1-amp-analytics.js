(self.AMP=self.AMP||[]).push({n:"extensions-amp-analytics-0.1-amp-analytics.js", v:"erwin", f:(function(){function $nativeIntersectionObserverSupported$$module$src$intersection_observer_polyfill$$($win$jscomp$136$$){return"IntersectionObserver"in $win$jscomp$136$$&&"IntersectionObserverEntry"in $win$jscomp$136$$&&"intersectionRatio"in $win$jscomp$136$$.IntersectionObserverEntry.prototype}var $VideoAnalyticsEvents$$module$src$video_interface$$={ENDED:"video-ended",PAUSE:"video-pause",PLAY:"video-play",SESSION:"video-session",SESSION_VISIBLE:"video-session-visible",SECONDS_PLAYED:"video-seconds-played"};
function $expandTemplate$$module$src$string$$($template$jscomp$1$$,$getter$$){for(var $opt_maxIterations$$=5,$maxIterations$$=$opt_maxIterations$$||1,$$jscomp$loop$193$$={},$i$jscomp$33$$=0;$i$jscomp$33$$<$maxIterations$$&&($$jscomp$loop$193$$.matches=0,$template$jscomp$1$$=$template$jscomp$1$$.replace(/\${([^}]*)}/g,function($template$jscomp$1$$){return function($opt_maxIterations$$,$maxIterations$$){$template$jscomp$1$$.matches++;return $getter$$($maxIterations$$)}}($$jscomp$loop$193$$)),$$jscomp$loop$193$$.matches);$$jscomp$loop$193$$=
{matches:$$jscomp$loop$193$$.matches},$i$jscomp$33$$++);return $template$jscomp$1$$}
var $SANDBOX_AVAILABLE_VARS$$module$extensions$amp_analytics$0_1$sandbox_vars_whitelist$$={RANDOM:!0,CANONICAL_URL:!0,CANONICAL_HOST:!0,CANONICAL_HOSTNAME:!0,CANONICAL_PATH:!0,AMPDOC_URL:!0,AMPDOC_HOST:!0,AMPDOC_HOSTNAME:!0,SOURCE_URL:!0,SOURCE_HOST:!0,SOURCE_HOSTNAME:!0,SOURCE_PATH:!0,TIMESTAMP:!0,TIMEZONE:!0,TIMEZONE_CODE:!0,VIEWPORT_HEIGHT:!0,VIEWPORT_WIDTH:!0,SCREEN_WIDTH:!0,SCREEN_HEIGHT:!0,AVAILABLE_SCREEN_HEIGHT:!0,AVAILABLE_SCREEN_WIDTH:!0,SCREEN_COLOR_DEPTH:!0,DOCUMENT_CHARSET:!0,BROWSER_LANGUAGE:!0,
AMP_VERSION:!0,BACKGROUND_STATE:!0,USER_AGENT:!0,FIRST_CONTENTFUL_PAINT:!0,FIRST_VIEWPORT_READY:!0,MAKE_BODY_VISIBLE:!0};function $findEngagedTimeBetween$$module$extensions$amp_analytics$0_1$activity_impl$$($activityEvent$$,$time$jscomp$21$$){var $engagementBonus$$=0;"active"===$activityEvent$$.type&&($engagementBonus$$=5);return Math.min($time$jscomp$21$$-$activityEvent$$.time,$engagementBonus$$)}function $ActivityHistory$$module$extensions$amp_analytics$0_1$activity_impl$$(){this.C=0;this.B=void 0}
$ActivityHistory$$module$extensions$amp_analytics$0_1$activity_impl$$.prototype.push=function($activityEvent$jscomp$1$$){this.B||(this.B=$activityEvent$jscomp$1$$);this.B.time<$activityEvent$jscomp$1$$.time&&(this.C+=$findEngagedTimeBetween$$module$extensions$amp_analytics$0_1$activity_impl$$(this.B,$activityEvent$jscomp$1$$.time),this.B=$activityEvent$jscomp$1$$)};
$ActivityHistory$$module$extensions$amp_analytics$0_1$activity_impl$$.prototype.getTotalEngagedTime=function($time$jscomp$22$$){var $totalEngagedTime$$=0;this.B&&($totalEngagedTime$$=this.C+$findEngagedTimeBetween$$module$extensions$amp_analytics$0_1$activity_impl$$(this.B,$time$jscomp$22$$));return $totalEngagedTime$$};var $ACTIVE_EVENT_TYPES$$module$extensions$amp_analytics$0_1$activity_impl$$=["mousedown","mouseup","mousemove","keydown","keyup"];
function $Activity$$module$extensions$amp_analytics$0_1$activity_impl$$($ampdoc$jscomp$108$$){this.ampdoc=$ampdoc$jscomp$108$$;this.K=this.$stopIgnore_$.bind(this);this.H=this.$handleActivity_$.bind(this);this.J=this.$handleVisibilityChange_$.bind(this);this.B={};this.C=[];this.F=this.D=!1;this.G=new $ActivityHistory$$module$extensions$amp_analytics$0_1$activity_impl$$;this.$viewer_$=$Services$$module$src$services$viewerForDoc$$(this.ampdoc);this.$viewport_$=$Services$$module$src$services$viewportForDoc$$(this.ampdoc);
this.$viewer_$.whenFirstVisible().then(this.$Activity$$module$extensions$amp_analytics$0_1$activity_impl_prototype$start_$.bind(this))}$JSCompiler_prototypeAlias$$=$Activity$$module$extensions$amp_analytics$0_1$activity_impl$$.prototype;
$JSCompiler_prototypeAlias$$.$Activity$$module$extensions$amp_analytics$0_1$activity_impl_prototype$start_$=function(){this.I=Date.now();this.$handleActivity_$();for(var $JSCompiler_i$jscomp$inline_1428$$=0;$JSCompiler_i$jscomp$inline_1428$$<$ACTIVE_EVENT_TYPES$$module$extensions$amp_analytics$0_1$activity_impl$$.length;$JSCompiler_i$jscomp$inline_1428$$++)this.C.push($listen$$module$src$event_helper$$(this.ampdoc.getRootNode(),$ACTIVE_EVENT_TYPES$$module$extensions$amp_analytics$0_1$activity_impl$$[$JSCompiler_i$jscomp$inline_1428$$],
this.H));this.C.push($JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$(this.$viewer_$,this.J));this.$viewport_$.onScroll(this.H)};
function $JSCompiler_StaticMethods_getTimeSinceStart_$$($JSCompiler_StaticMethods_getTimeSinceStart_$self_timeSinceStart$jscomp$2$$){$JSCompiler_StaticMethods_getTimeSinceStart_$self_timeSinceStart$jscomp$2$$=Date.now()-$JSCompiler_StaticMethods_getTimeSinceStart_$self_timeSinceStart$jscomp$2$$.I;return 0<$JSCompiler_StaticMethods_getTimeSinceStart_$self_timeSinceStart$jscomp$2$$?$JSCompiler_StaticMethods_getTimeSinceStart_$self_timeSinceStart$jscomp$2$$:0}
$JSCompiler_prototypeAlias$$.$stopIgnore_$=function(){this.F=this.D=!1};$JSCompiler_prototypeAlias$$.$handleActivity_$=function(){this.D||(this.D=!0,this.F=!1,$JSCompiler_StaticMethods_handleActivityEvent_$$(this,"active"))};
function $JSCompiler_StaticMethods_handleActivityEvent_$$($JSCompiler_StaticMethods_handleActivityEvent_$self$$,$type$jscomp$139$$){var $timeSinceStart$jscomp$3$$=$JSCompiler_StaticMethods_getTimeSinceStart_$$($JSCompiler_StaticMethods_handleActivityEvent_$self$$),$secondKey$$=Math.floor($timeSinceStart$jscomp$3$$/1E3),$timeToWait$$=1E3-$timeSinceStart$jscomp$3$$%1E3;setTimeout($JSCompiler_StaticMethods_handleActivityEvent_$self$$.K,$timeToWait$$);$JSCompiler_StaticMethods_handleActivityEvent_$self$$.G.push({type:$type$jscomp$139$$,
time:$secondKey$$})}$JSCompiler_prototypeAlias$$.$handleVisibilityChange_$=function(){$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$(this.$viewer_$)?this.$handleActivity_$():this.F||(this.F=!0,this.D=!1,$JSCompiler_StaticMethods_handleActivityEvent_$$(this,"inactive"))};
$JSCompiler_prototypeAlias$$.$unlisten_$=function(){for(var $i$jscomp$207$$=0;$i$jscomp$207$$<this.C.length;$i$jscomp$207$$++){var $unlistenFunc$$=this.C[$i$jscomp$207$$];"function"===typeof $unlistenFunc$$&&$unlistenFunc$$()}this.C=[]};$JSCompiler_prototypeAlias$$.getTotalEngagedTime=function(){var $secondsSinceStart$$=Math.floor($JSCompiler_StaticMethods_getTimeSinceStart_$$(this)/1E3);return this.G.getTotalEngagedTime($secondsSinceStart$$)};
$JSCompiler_prototypeAlias$$.getIncrementalEngagedTime=function($name$jscomp$173$$,$reset$jscomp$1$$){$reset$jscomp$1$$=void 0===$reset$jscomp$1$$?!0:$reset$jscomp$1$$;if(!this.B.hasOwnProperty($name$jscomp$173$$))return $reset$jscomp$1$$&&(this.B[$name$jscomp$173$$]=this.getTotalEngagedTime()),this.getTotalEngagedTime();var $currentIncrementalEngagedTime$$=this.B[$name$jscomp$173$$];if(!1===$reset$jscomp$1$$)return this.getTotalEngagedTime()-$currentIncrementalEngagedTime$$;this.B[$name$jscomp$173$$]=
this.getTotalEngagedTime();return this.B[$name$jscomp$173$$]-$currentIncrementalEngagedTime$$};var $VARIABLE_DATA_ATTRIBUTE_KEY$$module$extensions$amp_analytics$0_1$events$$=/^vars(.+)/;function $NO_UNLISTEN$$module$extensions$amp_analytics$0_1$events$$(){}
var $AnalyticsEventType$$module$extensions$amp_analytics$0_1$events$$={VISIBLE:"visible",CLICK:"click",TIMER:"timer",SCROLL:"scroll",HIDDEN:"hidden"},$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$=["ampdoc","embed"],$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$=Object.freeze({click:{name:"click",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer"]),klass:function($root$jscomp$24$$){return new $ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$24$$)}},
custom:{name:"custom",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer"]),klass:function($root$jscomp$25$$){return new $CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$25$$)}},"render-start":{name:"render-start",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer","visible"]),klass:function($root$jscomp$26$$){return new $SignalTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$26$$)}},
"ini-load":{name:"ini-load",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer","visible"]),klass:function($root$jscomp$27$$){return new $IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$27$$)}},timer:{name:"timer",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$,klass:function($root$jscomp$28$$){return new $TimerEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$28$$)}},
visible:{name:"visible",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer"]),klass:function($root$jscomp$29$$){return new $VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$29$$)}},hidden:{name:"visible",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer"]),klass:function($root$jscomp$30$$){return new $VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$30$$)}},
video:{name:"video",allowedFor:$ALLOWED_FOR_ALL_ROOT_TYPES$$module$extensions$amp_analytics$0_1$events$$.concat(["timer"]),klass:function($root$jscomp$31$$){return new $VideoEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$31$$)}}});
function $getTrackerKeyName$$module$extensions$amp_analytics$0_1$events$$($eventType$jscomp$27$$){return $startsWith$$module$src$string$$($eventType$jscomp$27$$,"video")?"video":$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$[$eventType$jscomp$27$$]||$isEnumValue$$module$src$types$$($AnalyticsEventType$$module$extensions$amp_analytics$0_1$events$$,$eventType$jscomp$27$$)?$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$.hasOwnProperty($eventType$jscomp$27$$)?$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$[$eventType$jscomp$27$$].name:
$eventType$jscomp$27$$:"custom"}
function $getTrackerTypesForParentType$$module$extensions$amp_analytics$0_1$events$$($parentType$$){var $filtered$$={};Object.keys($TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$).forEach(function($key$jscomp$89$$){$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$.hasOwnProperty($key$jscomp$89$$)&&-1!=$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$[$key$jscomp$89$$].allowedFor.indexOf($parentType$$)&&($filtered$$[$key$jscomp$89$$]=$TRACKER_TYPE$$module$extensions$amp_analytics$0_1$events$$[$key$jscomp$89$$].klass)},
this);return $filtered$$}function $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$112$$,$type$jscomp$140$$,$opt_vars$jscomp$4$$){this.target=$target$jscomp$112$$;this.type=$type$jscomp$140$$;this.vars=$opt_vars$jscomp$4$$||Object.create(null)}function $EventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$32$$){this.B=$root$jscomp$32$$}
function $CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$33$$){this.B=$root$jscomp$33$$;var $$jscomp$this$jscomp$317$$=this;this.F={};this.C={};this.D={};setTimeout(function(){$$jscomp$this$jscomp$317$$.C=void 0},1E4)}$$jscomp$inherits$$($CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);
$CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){this.D=this.C=void 0;for(var $k$jscomp$22$$ in this.F)this.F[$k$jscomp$22$$].removeAll()};
$CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$11$$,$eventType$jscomp$28$$,$config$jscomp$21$$,$listener$jscomp$55$$){var $$jscomp$this$jscomp$318$$=this,$selector$jscomp$19$$=$config$jscomp$21$$.selector;$selector$jscomp$19$$||($selector$jscomp$19$$=":root");var $selectionMethod$$=$config$jscomp$21$$.selectionMethod||null,$targetReady$$=this.B.getElement($context$jscomp$11$$,$selector$jscomp$19$$,$selectionMethod$$),$isSandboxEvent$$=$startsWith$$module$src$string$$($eventType$jscomp$28$$,
"sandbox-"),$buffer$jscomp$12$$=$isSandboxEvent$$?this.D&&this.D[$eventType$jscomp$28$$]:this.C&&this.C[$eventType$jscomp$28$$];if($buffer$jscomp$12$$){var $bufferLength$$=$buffer$jscomp$12$$.length;$targetReady$$.then(function($context$jscomp$11$$){setTimeout(function(){for(var $config$jscomp$21$$=0;$config$jscomp$21$$<$bufferLength$$;$config$jscomp$21$$++){var $selector$jscomp$19$$=$buffer$jscomp$12$$[$config$jscomp$21$$];$context$jscomp$11$$.contains($selector$jscomp$19$$.target)&&$listener$jscomp$55$$($selector$jscomp$19$$)}$isSandboxEvent$$&&
($$jscomp$this$jscomp$318$$.D[$eventType$jscomp$28$$]=void 0)},1)})}var $observables$$=this.F[$eventType$jscomp$28$$];$observables$$||($observables$$=new $Observable$$module$src$observable$$,this.F[$eventType$jscomp$28$$]=$observables$$);return this.F[$eventType$jscomp$28$$].add(function($context$jscomp$11$$){$targetReady$$.then(function($eventType$jscomp$28$$){$eventType$jscomp$28$$.contains($context$jscomp$11$$.target)&&$listener$jscomp$55$$($context$jscomp$11$$)})})};
$CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.trigger=function($event$jscomp$65$$){var $eventType$jscomp$29$$=$event$jscomp$65$$.type,$isSandboxEvent$jscomp$1$$=$startsWith$$module$src$string$$($eventType$jscomp$29$$,"sandbox-"),$observables$jscomp$1$$=this.F[$eventType$jscomp$29$$];if($observables$jscomp$1$$&&($observables$jscomp$1$$.fire($event$jscomp$65$$),$isSandboxEvent$jscomp$1$$))return;$isSandboxEvent$jscomp$1$$?(this.D[$eventType$jscomp$29$$]=this.D[$eventType$jscomp$29$$]||
[],this.D[$eventType$jscomp$29$$].push($event$jscomp$65$$)):this.C&&(this.C[$eventType$jscomp$29$$]=this.C[$eventType$jscomp$29$$]||[],this.C[$eventType$jscomp$29$$].push($event$jscomp$65$$))};
function $ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$34$$){this.B=$root$jscomp$34$$;this.C=new $Observable$$module$src$observable$$;this.D=this.C.fire.bind(this.C);this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$().addEventListener("click",this.D)}$$jscomp$inherits$$($ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);
$ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$().removeEventListener("click",this.D);this.C.removeAll()};
$ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$12$$,$eventType$jscomp$30_selector$jscomp$20$$,$config$jscomp$22_selectionMethod$jscomp$1$$,$listener$jscomp$56$$){$eventType$jscomp$30_selector$jscomp$20$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($config$jscomp$22_selectionMethod$jscomp$1$$.selector,"Missing required selector on click trigger");$config$jscomp$22_selectionMethod$jscomp$1$$=$config$jscomp$22_selectionMethod$jscomp$1$$.selectionMethod||
null;return this.C.add(this.B.createSelectiveListener(this.$handleClick_$.bind(this,$listener$jscomp$56$$),$context$jscomp$12$$.parentElement||$context$jscomp$12$$,$eventType$jscomp$30_selector$jscomp$20$$,$config$jscomp$22_selectionMethod$jscomp$1$$))};
$ClickEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.$handleClick_$=function($listener$jscomp$57$$,$target$jscomp$115$$){var $params$jscomp$20$$=$getDataParamsFromAttributes$$module$src$dom$$($target$jscomp$115$$,void 0,$VARIABLE_DATA_ATTRIBUTE_KEY$$module$extensions$amp_analytics$0_1$events$$);$listener$jscomp$57$$(new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$115$$,"click",$params$jscomp$20$$))};
function $SignalTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$35$$){this.B=$root$jscomp$35$$}$$jscomp$inherits$$($SignalTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);$SignalTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){};
$SignalTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$13$$,$eventType$jscomp$31$$,$config$jscomp$23$$,$listener$jscomp$58$$){var $$jscomp$this$jscomp$319$$=this,$target$jscomp$116$$,$signalsPromise$$,$selector$jscomp$21$$=$config$jscomp$23$$.selector||":root";":root"==$selector$jscomp$21$$||":host"==$selector$jscomp$21$$?($target$jscomp$116$$=this.B.getRootElement(),$signalsPromise$$=this.getRootSignal($eventType$jscomp$31$$)):$signalsPromise$$=this.B.getAmpElement($context$jscomp$13$$.parentElement||
$context$jscomp$13$$,$selector$jscomp$21$$,$config$jscomp$23$$.selectionMethod).then(function($context$jscomp$13$$){$target$jscomp$116$$=$context$jscomp$13$$;return $$jscomp$this$jscomp$319$$.getElementSignal($eventType$jscomp$31$$,$target$jscomp$116$$)});$signalsPromise$$.then(function(){$listener$jscomp$58$$(new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$116$$,$eventType$jscomp$31$$))});return $NO_UNLISTEN$$module$extensions$amp_analytics$0_1$events$$};
$SignalTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.getRootSignal=function($eventType$jscomp$32$$){return this.B.signals().whenSignal($eventType$jscomp$32$$)};$SignalTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.getElementSignal=function($eventType$jscomp$33$$,$element$jscomp$241$$){return"function"!=typeof $element$jscomp$241$$.signals?Promise.resolve():$element$jscomp$241$$.signals().whenSignal($eventType$jscomp$33$$)};
function $IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$36$$){this.B=$root$jscomp$36$$}$$jscomp$inherits$$($IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);$IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){};
$IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$14_promise$jscomp$22$$,$eventType$jscomp$34$$,$config$jscomp$24$$,$listener$jscomp$59$$){var $$jscomp$this$jscomp$320$$=this,$target$jscomp$117$$,$selector$jscomp$22$$=$config$jscomp$24$$.selector||":root";":root"==$selector$jscomp$22$$||":host"==$selector$jscomp$22$$?($target$jscomp$117$$=this.B.getRootElement(),$context$jscomp$14_promise$jscomp$22$$=this.getRootSignal()):$context$jscomp$14_promise$jscomp$22$$=
this.B.getAmpElement($context$jscomp$14_promise$jscomp$22$$.parentElement||$context$jscomp$14_promise$jscomp$22$$,$selector$jscomp$22$$,$config$jscomp$24$$.selectionMethod).then(function($context$jscomp$14_promise$jscomp$22$$){$target$jscomp$117$$=$context$jscomp$14_promise$jscomp$22$$;return $$jscomp$this$jscomp$320$$.getElementSignal("ini-load",$target$jscomp$117$$)});$context$jscomp$14_promise$jscomp$22$$.then(function(){$listener$jscomp$59$$(new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$117$$,
$eventType$jscomp$34$$))});return $NO_UNLISTEN$$module$extensions$amp_analytics$0_1$events$$};$IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.getRootSignal=function(){return this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$whenIniLoaded$()};
$IniLoadTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.getElementSignal=function($signals$jscomp$2_unusedEventType$jscomp$3$$,$element$jscomp$243$$){if("function"!=typeof $element$jscomp$243$$.signals)return Promise.resolve();$signals$jscomp$2_unusedEventType$jscomp$3$$=$element$jscomp$243$$.signals();return Promise.race([$signals$jscomp$2_unusedEventType$jscomp$3$$.whenSignal("ini-load"),$signals$jscomp$2_unusedEventType$jscomp$3$$.whenSignal("load-end")])};
function $TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$($timerSpec$$,$opt_startBuilder$$,$opt_stopBuilder$$){this.C=void 0;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("interval"in $timerSpec$$,"Timer interval specification required");this.K=Number($timerSpec$$.interval)||0;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(.5<=this.K,"Bad timer interval specification");this.M="maxTimerLength"in $timerSpec$$?Number($timerSpec$$.maxTimerLength):7200;
$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(0<this.M,"Bad maxTimerLength specification");this.R="maxTimerLength"in $timerSpec$$;this.O="immediate"in $timerSpec$$?!!$timerSpec$$.immediate:!0;this.D=this.B=this.J=null;this.F=$opt_startBuilder$$||null;this.I=$opt_stopBuilder$$||null;this.H=this.G=void 0}$TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$.prototype.init=function($startTimer$$){this.F?this.F&&(this.B=this.F()):$startTimer$$()};
$TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){this.D&&(this.D(),this.D=null);this.B&&(this.B(),this.B=null)};
$TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$.prototype.S=function($win$jscomp$260$$,$timerCallback$$,$timeoutCallback$$){if(!this.C&&(this.G=Date.now(),this.H=void 0,this.J=$timerCallback$$,this.C=$win$jscomp$260$$.setInterval(function(){$timerCallback$$()},1E3*this.K),(!this.I||this.I&&this.R)&&$win$jscomp$260$$.setTimeout(function(){$timeoutCallback$$()},1E3*this.M),this.B&&(this.B(),this.B=null),this.O&&$timerCallback$$(),this.I))try{this.D=this.I()}catch($JSCompiler_e$jscomp$inline_1445$$){throw this.dispose(),
$JSCompiler_e$jscomp$inline_1445$$;}};
function $JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$$($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$,$win$jscomp$261$$){$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.C&&($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.J(),$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.J=
null,$win$jscomp$261$$.clearInterval($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.C),$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.C=void 0,$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.H=void 0,$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.D&&
($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.D(),$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.D=null),$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.F&&($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.B=$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$self$$.F()))}
$TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$.prototype.P=function(){var $timerDuration$$=0;this.C&&($timerDuration$$=this.G?Date.now()-(this.H||this.G):0,this.H=Date.now());return{timerDuration:$timerDuration$$,timerStart:this.G||0}};function $TimerEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$37$$){this.B=$root$jscomp$37$$;this.C={};this.D=1}$$jscomp$inherits$$($TimerEventTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);
$JSCompiler_prototypeAlias$$=$TimerEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype;$JSCompiler_prototypeAlias$$.getTrackedTimerKeys=function(){return Object.keys(this.C)};$JSCompiler_prototypeAlias$$.dispose=function(){var $$jscomp$this$jscomp$321$$=this;this.getTrackedTimerKeys().forEach(function($timerId$$){$$jscomp$this$jscomp$321$$.$removeTracker_$($timerId$$)})};
$JSCompiler_prototypeAlias$$.add=function($context$jscomp$15$$,$eventType$jscomp$35$$,$config$jscomp$25_timerSpec$jscomp$1$$,$listener$jscomp$60$$){var $$jscomp$this$jscomp$322$$=this;$config$jscomp$25_timerSpec$jscomp$1$$=$config$jscomp$25_timerSpec$jscomp$1$$.timerSpec;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($config$jscomp$25_timerSpec$jscomp$1$$&&"object"==typeof $config$jscomp$25_timerSpec$jscomp$1$$,"Bad timer specification");var $timerStart$$="startSpec"in $config$jscomp$25_timerSpec$jscomp$1$$?
$config$jscomp$25_timerSpec$jscomp$1$$.startSpec:null;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!$timerStart$$||"object"==typeof $timerStart$$,"Bad timer start specification");var $timerStop$$="stopSpec"in $config$jscomp$25_timerSpec$jscomp$1$$?$config$jscomp$25_timerSpec$jscomp$1$$.stopSpec:null;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!$timerStart$$&&!$timerStop$$||"object"==typeof $timerStop$$,"Bad timer stop specification");var $timerId$jscomp$1$$=
++this.D,$startBuilder$$,$stopBuilder$$;if($timerStart$$){var $startTracker$$=$JSCompiler_StaticMethods_getTracker_$$(this,$timerStart$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($startTracker$$,"Cannot track timer start");$startBuilder$$=$startTracker$$.add.bind($startTracker$$,$context$jscomp$15$$,$timerStart$$.on,$timerStart$$,this.$handleTimerToggle_$.bind(this,$timerId$jscomp$1$$,$eventType$jscomp$35$$,$listener$jscomp$60$$))}if($timerStop$$){var $stopTracker$$=$JSCompiler_StaticMethods_getTracker_$$(this,
$timerStop$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($stopTracker$$,"Cannot track timer stop");$stopBuilder$$=$stopTracker$$.add.bind($stopTracker$$,$context$jscomp$15$$,$timerStop$$.on,$timerStop$$,this.$handleTimerToggle_$.bind(this,$timerId$jscomp$1$$,$eventType$jscomp$35$$,$listener$jscomp$60$$))}var $timerHandler$$=new $TimerEventHandler$$module$extensions$amp_analytics$0_1$events$$($config$jscomp$25_timerSpec$jscomp$1$$,$startBuilder$$,$stopBuilder$$);this.C[$timerId$jscomp$1$$]=
$timerHandler$$;$timerHandler$$.init(this.$startTimer_$.bind(this,$timerId$jscomp$1$$,$eventType$jscomp$35$$,$listener$jscomp$60$$));return function(){$$jscomp$this$jscomp$322$$.$removeTracker_$($timerId$jscomp$1$$)}};
function $JSCompiler_StaticMethods_getTracker_$$($JSCompiler_StaticMethods_getTracker_$self$$,$config$jscomp$26_eventType$jscomp$36$$){$config$jscomp$26_eventType$jscomp$36$$=$user$$module$src$log$$().assertString($config$jscomp$26_eventType$jscomp$36$$.on);var $trackerKey$$=$getTrackerKeyName$$module$extensions$amp_analytics$0_1$events$$($config$jscomp$26_eventType$jscomp$36$$);return $JSCompiler_StaticMethods_getTracker_$self$$.B.getTrackerForWhitelist($trackerKey$$,$getTrackerTypesForParentType$$module$extensions$amp_analytics$0_1$events$$("timer"))}
$JSCompiler_prototypeAlias$$.$handleTimerToggle_$=function($timerId$jscomp$2$$,$eventType$jscomp$37$$,$listener$jscomp$61$$){var $timerHandler$jscomp$1$$=this.C[$timerId$jscomp$2$$];$timerHandler$jscomp$1$$&&($timerHandler$jscomp$1$$.C?$JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$$(this.C[$timerId$jscomp$2$$],this.B.ampdoc.win):this.$startTimer_$($timerId$jscomp$2$$,$eventType$jscomp$37$$,$listener$jscomp$61$$))};
$JSCompiler_prototypeAlias$$.$startTimer_$=function($timerId$jscomp$3$$,$eventType$jscomp$38$$,$listener$jscomp$62$$){var $$jscomp$this$jscomp$323$$=this;this.C[$timerId$jscomp$3$$].S(this.B.ampdoc.win,function(){var $JSCompiler_inline_result$jscomp$381$$;$JSCompiler_inline_result$jscomp$381$$=new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($$jscomp$this$jscomp$323$$.B.getRootElement(),$eventType$jscomp$38$$,$$jscomp$this$jscomp$323$$.C[$timerId$jscomp$3$$].P());$listener$jscomp$62$$($JSCompiler_inline_result$jscomp$381$$)},
this.$removeTracker_$.bind(this,$timerId$jscomp$3$$))};$JSCompiler_prototypeAlias$$.$removeTracker_$=function($timerId$jscomp$6$$){this.C[$timerId$jscomp$6$$]&&($JSCompiler_StaticMethods_TimerEventHandler$$module$extensions$amp_analytics$0_1$events_prototype$stopTimer_$$(this.C[$timerId$jscomp$6$$],this.B.ampdoc.win),this.C[$timerId$jscomp$6$$].dispose(),delete this.C[$timerId$jscomp$6$$])};
function $VideoEventTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$38$$){this.B=$root$jscomp$38$$;var $$jscomp$this$jscomp$324$$=this;this.C=new $Observable$$module$src$observable$$;this.D=this.C.fire.bind(this.C);Object.keys($VideoAnalyticsEvents$$module$src$video_interface$$).forEach(function($root$jscomp$38$$){$$jscomp$this$jscomp$324$$.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$().addEventListener($VideoAnalyticsEvents$$module$src$video_interface$$[$root$jscomp$38$$],
$$jscomp$this$jscomp$324$$.D)})}$$jscomp$inherits$$($VideoEventTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);
$VideoEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){var $$jscomp$this$jscomp$325$$=this,$root$jscomp$39$$=this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$();Object.keys($VideoAnalyticsEvents$$module$src$video_interface$$).forEach(function($key$jscomp$91$$){$root$jscomp$39$$.removeEventListener($VideoAnalyticsEvents$$module$src$video_interface$$[$key$jscomp$91$$],$$jscomp$this$jscomp$325$$.D)});this.C=this.D=null};
$VideoEventTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$16$$,$eventType$jscomp$40$$,$config$jscomp$27$$,$listener$jscomp$63$$){var $videoSpec$$=$config$jscomp$27$$.videoSpec||{},$targetReady$jscomp$1$$=this.B.getElement($context$jscomp$16$$,$config$jscomp$27$$.selector||$videoSpec$$.selector,$config$jscomp$27$$.selectionMethod||null),$endSessionWhenInvisible$$=$videoSpec$$["end-session-when-invisible"],$excludeAutoplay$$=$videoSpec$$["exclude-autoplay"],
$interval$jscomp$6$$=$videoSpec$$.interval,$on$jscomp$7$$=$config$jscomp$27$$.on,$intervalCounter$$=0;return this.C.add(function($context$jscomp$16$$){var $eventType$jscomp$40$$=$context$jscomp$16$$.type,$config$jscomp$27$$="video-session-visible"===$eventType$jscomp$40$$,$videoSpec$$=$config$jscomp$27$$?"video-session":$eventType$jscomp$40$$,$event$jscomp$66$$=$context$jscomp$16$$.data;if($videoSpec$$===$on$jscomp$7$$)if("video-seconds-played"!==$videoSpec$$||$interval$jscomp$6$$){if("video-seconds-played"===
$videoSpec$$&&($intervalCounter$$++,$intervalCounter$$%$interval$jscomp$6$$))return;if(!$config$jscomp$27$$||$endSessionWhenInvisible$$)if(!$excludeAutoplay$$||"playing_auto"!==$event$jscomp$66$$.state){var $el$jscomp$27$$=$context$jscomp$16$$.target;$targetReady$jscomp$1$$.then(function($context$jscomp$16$$){$context$jscomp$16$$.contains($el$jscomp$27$$)&&$listener$jscomp$63$$(new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($context$jscomp$16$$,$videoSpec$$,$event$jscomp$66$$))})}}else $user$$module$src$log$$().error("analytics-events",
"video-seconds-played requires interval spec with non-zero value")})};function $VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$($root$jscomp$40$$){this.B=$root$jscomp$40$$;this.D={}}$$jscomp$inherits$$($VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$,$EventTracker$$module$extensions$amp_analytics$0_1$events$$);$VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.dispose=function(){};
$VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.add=function($context$jscomp$17$$,$eventType$jscomp$41$$,$config$jscomp$28$$,$listener$jscomp$64$$){var $$jscomp$this$jscomp$326$$=this,$visibilitySpec$$=$config$jscomp$28$$.visibilitySpec||{},$selector$jscomp$24$$=$config$jscomp$28$$.selector||$visibilitySpec$$.selector,$waitForSpec$$=$visibilitySpec$$.waitFor,$visibilityManager$$=this.B.getVisibilityManager(),$createReadyReportPromiseFunc$$=null;"hidden"==$eventType$jscomp$41$$&&
($createReadyReportPromiseFunc$$=this.F.bind(this));if(!$selector$jscomp$24$$||":root"==$selector$jscomp$24$$||":host"==$selector$jscomp$24$$)return $visibilityManager$$.listenRoot($visibilitySpec$$,$JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$$(this,$waitForSpec$$,$selector$jscomp$24$$),$createReadyReportPromiseFunc$$,this.C.bind(this,$eventType$jscomp$41$$,$listener$jscomp$64$$,this.B.getRootElement()));var $unlistenPromise$$=
this.B.getAmpElement($context$jscomp$17$$.parentElement||$context$jscomp$17$$,$selector$jscomp$24$$,$config$jscomp$28$$.selectionMethod||$visibilitySpec$$.selectionMethod).then(function($context$jscomp$17$$){return $visibilityManager$$.listenElement($context$jscomp$17$$,$visibilitySpec$$,$JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$$($$jscomp$this$jscomp$326$$,$waitForSpec$$,$selector$jscomp$24$$,$context$jscomp$17$$),$createReadyReportPromiseFunc$$,
$$jscomp$this$jscomp$326$$.C.bind($$jscomp$this$jscomp$326$$,$eventType$jscomp$41$$,$listener$jscomp$64$$,$context$jscomp$17$$))});return function(){$unlistenPromise$$.then(function($context$jscomp$17$$){$context$jscomp$17$$()})}};
$VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.F=function(){var $viewer$jscomp$35$$=this.B.getViewer();return $JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($viewer$jscomp$35$$)?new Promise(function($resolve$jscomp$50$$){$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($viewer$jscomp$35$$,function(){$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($viewer$jscomp$35$$)||
$resolve$jscomp$50$$()})}):Promise.resolve()};
function $JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$$($JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$self$$,$waitForSpec$jscomp$1$$,$selector$jscomp$25$$,$opt_element$jscomp$17$$){if(!$waitForSpec$jscomp$1$$)if($selector$jscomp$25$$)$waitForSpec$jscomp$1$$="ini-load";else return null;var $trackerWhitelist$$=$getTrackerTypesForParentType$$module$extensions$amp_analytics$0_1$events$$("visible");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("none"==
$waitForSpec$jscomp$1$$||!!$trackerWhitelist$$[$waitForSpec$jscomp$1$$],"waitFor value %s not supported",$waitForSpec$jscomp$1$$);var $waitForTracker$$=$JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$self$$.D[$waitForSpec$jscomp$1$$]||$JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$self$$.B.getTrackerForWhitelist($waitForSpec$jscomp$1$$,$trackerWhitelist$$);if($waitForTracker$$)$JSCompiler_StaticMethods_VisibilityTracker$$module$extensions$amp_analytics$0_1$events_prototype$getReadyPromise$self$$.D[$waitForSpec$jscomp$1$$]=
$waitForTracker$$;else return null;return $opt_element$jscomp$17$$?$waitForTracker$$.getElementSignal($waitForSpec$jscomp$1$$,$opt_element$jscomp$17$$):$waitForTracker$$.getRootSignal($waitForSpec$jscomp$1$$)}
$VisibilityTracker$$module$extensions$amp_analytics$0_1$events$$.prototype.C=function($eventType$jscomp$42$$,$listener$jscomp$65$$,$target$jscomp$119$$,$state$jscomp$41$$){var $attr$jscomp$13$$=$getDataParamsFromAttributes$$module$src$dom$$($target$jscomp$119$$,void 0,$VARIABLE_DATA_ATTRIBUTE_KEY$$module$extensions$amp_analytics$0_1$events$$),$key$jscomp$92$$;for($key$jscomp$92$$ in $attr$jscomp$13$$)$state$jscomp$41$$[$key$jscomp$92$$]=$attr$jscomp$13$$[$key$jscomp$92$$];$listener$jscomp$65$$(new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$119$$,
$eventType$jscomp$42$$,$state$jscomp$41$$))};function $IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue$$($win$jscomp$262$$,$frame$$){var $$jscomp$this$jscomp$327$$=this;this.G=$frame$$;this.C=!1;this.B=[];this.F=new $SubscriptionApi$$module$src$iframe_helper$$(this.G,"send-iframe-transport-events",!0,function(){$$jscomp$this$jscomp$327$$.H()})}$IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue$$.prototype.H=function(){this.C=!0;$JSCompiler_StaticMethods_flushQueue_$$(this)};
$IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue$$.prototype.D=function(){return this.B.length};
function $JSCompiler_StaticMethods_flushQueue_$$($JSCompiler_StaticMethods_flushQueue_$self$$){$JSCompiler_StaticMethods_flushQueue_$self$$.C&&$JSCompiler_StaticMethods_flushQueue_$self$$.D()&&($JSCompiler_StaticMethods_SubscriptionApi$$module$src$iframe_helper_prototype$send$$($JSCompiler_StaticMethods_flushQueue_$self$$.F,"iframe-transport-events",{events:$JSCompiler_StaticMethods_flushQueue_$self$$.B}),$JSCompiler_StaticMethods_flushQueue_$self$$.B=[])};function $getIframeTransportScriptUrl$$module$extensions$amp_analytics$0_1$iframe_transport$$(){var $opt_forceProdUrl$$;return $module$src$config$$.urls.thirdParty+"/$internalRuntimeVersion$/iframe-transport-client-v0.js"}
function $IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$$($ampWin$jscomp$1$$,$type$jscomp$142$$,$config$jscomp$29$$,$id$jscomp$49$$){this.B=$ampWin$jscomp$1$$;this.$type_$=$type$jscomp$142$$;this.C=$id$jscomp$49$$;this.D=$config$jscomp$29$$.iframe;this.F=0;this.processCrossDomainIframe()}$JSCompiler_prototypeAlias$$=$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$$.prototype;
$JSCompiler_prototypeAlias$$.detach=function(){var $JSCompiler_ampDoc$jscomp$inline_1463$$=this.B.document,$JSCompiler_type$jscomp$inline_1464$$=this.$type_$,$JSCompiler_frameData$jscomp$inline_1465$$=$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$[$JSCompiler_type$jscomp$inline_1464$$];--$JSCompiler_frameData$jscomp$inline_1465$$.usageCount||($JSCompiler_ampDoc$jscomp$inline_1463$$.body.removeChild($JSCompiler_frameData$jscomp$inline_1465$$.frame),delete $IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$[$JSCompiler_type$jscomp$inline_1464$$],
$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$[$JSCompiler_type$jscomp$inline_1464$$]&&($IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$[$JSCompiler_type$jscomp$inline_1464$$].disconnect(),$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$[$JSCompiler_type$jscomp$inline_1464$$]=null))};
$JSCompiler_prototypeAlias$$.processCrossDomainIframe=function(){var $frameData$$;$hasOwn$$module$src$utils$object$$($IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$,this.$type_$)?($frameData$$=$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$[this.$type_$],++$frameData$$.usageCount):($frameData$$=this.createCrossDomainIframe(),this.B.document.body.appendChild($frameData$$.frame),$JSCompiler_StaticMethods_createPerformanceObserver_$$(this))};
$JSCompiler_prototypeAlias$$.createCrossDomainIframe=function(){var $frameData$jscomp$1_sentinel$jscomp$7$$=String(++$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$nextId_$$),$frameName$$=JSON.stringify({scriptSrc:$getIframeTransportScriptUrl$$module$extensions$amp_analytics$0_1$iframe_transport$$(),sentinel:$frameData$jscomp$1_sentinel$jscomp$7$$,type:this.$type_$}),$frame$jscomp$1$$=$createElementWithAttributes$$module$src$dom$$(this.B.document,"iframe",{sandbox:"allow-scripts allow-same-origin",
name:$frameName$$,"data-amp-3p-sentinel":$frameData$jscomp$1_sentinel$jscomp$7$$});$frame$jscomp$1$$.sentinel=$frameData$jscomp$1_sentinel$jscomp$7$$;$setStyles$$module$src$style$$($frame$jscomp$1$$,{display:"none"});$frame$jscomp$1$$.src=this.D;$frameData$jscomp$1_sentinel$jscomp$7$$={frame:$frame$jscomp$1$$,usageCount:1,queue:new $IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue$$(0,$frame$jscomp$1$$)};return $IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$[this.$type_$]=
$frameData$jscomp$1_sentinel$jscomp$7$$};
function $JSCompiler_StaticMethods_createPerformanceObserver_$$($JSCompiler_StaticMethods_createPerformanceObserver_$self$$){$isLongTaskApiSupported$$module$src$service$jank_meter$$($JSCompiler_StaticMethods_createPerformanceObserver_$self$$.B)&&($IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$[$JSCompiler_StaticMethods_createPerformanceObserver_$self$$.$type_$]=new $JSCompiler_StaticMethods_createPerformanceObserver_$self$$.B.PerformanceObserver(function($entryList$jscomp$1$$){$entryList$jscomp$1$$&&$entryList$jscomp$1$$.getEntries().forEach(function($entryList$jscomp$1$$){$entryList$jscomp$1$$&&
"longtask"==$entryList$jscomp$1$$.entryType&&"cross-origin-descendant"==$entryList$jscomp$1$$.name&&$entryList$jscomp$1$$.B&&$entryList$jscomp$1$$.B.forEach(function($entryList$jscomp$1$$){$JSCompiler_StaticMethods_createPerformanceObserver_$self$$.D!=$entryList$jscomp$1$$.containerSrc||++$JSCompiler_StaticMethods_createPerformanceObserver_$self$$.F%5||$user$$module$src$log$$().error("amp-analytics.IframeTransport",'Long Task: Vendor: "'+$JSCompiler_StaticMethods_createPerformanceObserver_$self$$.$type_$+
'"')})})}),$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$[$JSCompiler_StaticMethods_createPerformanceObserver_$self$$.$type_$].observe({entryTypes:["longtask"]}))}
$JSCompiler_prototypeAlias$$.sendRequest=function($JSCompiler_event$jscomp$inline_1468_event$jscomp$68$$){var $JSCompiler_StaticMethods_IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue_prototype$enqueue$self$jscomp$inline_1467$$=$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$[this.$type_$].queue;$JSCompiler_event$jscomp$inline_1468_event$jscomp$68$$={creativeId:this.C,message:$JSCompiler_event$jscomp$inline_1468_event$jscomp$68$$};
$JSCompiler_StaticMethods_IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue_prototype$enqueue$self$jscomp$inline_1467$$.B.push($JSCompiler_event$jscomp$inline_1468_event$jscomp$68$$);100<=$JSCompiler_StaticMethods_IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue_prototype$enqueue$self$jscomp$inline_1467$$.D()&&($dev$$module$src$log$$().warn("amp-analytics.IframeTransportMessageQueue","Exceeded maximum size of queue for: "+
$JSCompiler_event$jscomp$inline_1468_event$jscomp$68$$.creativeId),$JSCompiler_StaticMethods_IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue_prototype$enqueue$self$jscomp$inline_1467$$.B.shift());$JSCompiler_StaticMethods_flushQueue_$$($JSCompiler_StaticMethods_IframeTransportMessageQueue$$module$extensions$amp_analytics$0_1$iframe_transport_message_queue_prototype$enqueue$self$jscomp$inline_1467$$)};$JSCompiler_prototypeAlias$$.getCreativeId=function(){return this.C};
var $IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$crossDomainIframes_$$={},$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$nextId_$$=0,$IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$performanceObservers_$$={};function $VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model$$($deferred$jscomp$23_spec$jscomp$11$$,$calcVisibility$$){var $$jscomp$this$jscomp$329$$=this;this.ga=$calcVisibility$$;this.C={visiblePercentageMin:Number($deferred$jscomp$23_spec$jscomp$11$$.visiblePercentageMin)/100||0,visiblePercentageMax:Number($deferred$jscomp$23_spec$jscomp$11$$.visiblePercentageMax)/100||1,totalTimeMin:Number($deferred$jscomp$23_spec$jscomp$11$$.totalTimeMin)||0,totalTimeMax:Number($deferred$jscomp$23_spec$jscomp$11$$.totalTimeMax)||
Infinity,continuousTimeMin:Number($deferred$jscomp$23_spec$jscomp$11$$.continuousTimeMin)||0,continuousTimeMax:Number($deferred$jscomp$23_spec$jscomp$11$$.continuousTimeMax)||Infinity};"0"===String($deferred$jscomp$23_spec$jscomp$11$$.visiblePercentageMax).trim()&&(this.C.visiblePercentageMax=0);this.fa=!0===$deferred$jscomp$23_spec$jscomp$11$$.repeat;this.H=new $Observable$$module$src$observable$$;$deferred$jscomp$23_spec$jscomp$11$$=new $Deferred$$module$src$utils$promise$$;this.S=$deferred$jscomp$23_spec$jscomp$11$$.promise;
this.I=$deferred$jscomp$23_spec$jscomp$11$$.resolve;this.S.then(function(){$$jscomp$this$jscomp$329$$.H.fire()});this.X=[];this.ha=Date.now();this.ba=this.$ready_$=!0;this.B=this.O=null;this.Y=this.J=!1;this.K=this.V=this.M=this.aa=this.R=this.P=this.Z=this.U=this.D=this.G=this.F=0;this.ea=!1;this.W=null}$JSCompiler_prototypeAlias$$=$VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model$$.prototype;
$JSCompiler_prototypeAlias$$.$reset_$=function(){var $$jscomp$this$jscomp$330$$=this,$deferred$jscomp$24$$=new $Deferred$$module$src$utils$promise$$;this.S=$deferred$jscomp$24$$.promise;this.I=$deferred$jscomp$24$$.resolve;this.S.then(function(){$$jscomp$this$jscomp$330$$.H.fire()});this.W=null;this.J=this.Y=!1;this.K=this.V=this.M=this.R=this.Z=this.U=this.P=this.D=this.G=this.F=0;this.ea=!1};$JSCompiler_prototypeAlias$$.maybeDispose=function(){this.fa||this.dispose()};
$JSCompiler_prototypeAlias$$.dispose=function(){this.B&&(clearTimeout(this.B),this.B=null);this.W&&(clearTimeout(this.W),this.W=null);this.X.forEach(function($unsubscribe$$){$unsubscribe$$()});this.X.length=0;this.I=null;this.H&&(this.H.removeAll(),this.H=null)};$JSCompiler_prototypeAlias$$.unsubscribe=function($handler$jscomp$39$$){this.X.push($handler$jscomp$39$$)};
$JSCompiler_prototypeAlias$$.onTriggerEvent=function($handler$jscomp$40$$){this.H&&this.H.add($handler$jscomp$40$$);this.S&&!this.I&&$handler$jscomp$40$$()};
function $JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$$($JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$self$$,$ready$jscomp$1$$){$JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$self$$.$ready_$=$ready$jscomp$1$$;$JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$self$$.update()}
$JSCompiler_prototypeAlias$$.setReportReady=function($callback$jscomp$121$$){this.ba=!1;this.O=$callback$jscomp$121$$};$JSCompiler_prototypeAlias$$.update=function(){this.$update_$(this.$ready_$?this.ga():0)};
$JSCompiler_prototypeAlias$$.$update_$=function($visibility$$){var $$jscomp$this$jscomp$331$$=this;if(this.ea)$JSCompiler_StaticMethods_isVisibilityMatch_$$(this,$visibility$$)||this.$reset_$();else if(this.I){var $conditionsMet$$=$JSCompiler_StaticMethods_updateCounters_$$(this,$visibility$$);if($conditionsMet$$)if(this.B&&(clearTimeout(this.B),this.B=null),this.ba)this.I(),this.I=null,this.fa&&(this.ea=!0,this.F=0);else{if(this.O){var $reportReadyPromise$$=this.O();this.O=null;$reportReadyPromise$$.then(function(){$$jscomp$this$jscomp$331$$.ba=
!0;$$jscomp$this$jscomp$331$$.update()})}}else if(this.J&&!this.B){var $timeToWait$jscomp$1$$=$JSCompiler_StaticMethods_computeTimeToWait_$$(this);0<$timeToWait$jscomp$1$$&&(this.B=setTimeout(function(){$$jscomp$this$jscomp$331$$.B=null;$$jscomp$this$jscomp$331$$.update()},$timeToWait$jscomp$1$$))}else!this.J&&this.B&&(clearTimeout(this.B),this.B=null)}};
function $JSCompiler_StaticMethods_isVisibilityMatch_$$($JSCompiler_StaticMethods_isVisibilityMatch_$self$$,$visibility$jscomp$1$$){return 1==$JSCompiler_StaticMethods_isVisibilityMatch_$self$$.C.visiblePercentageMin?1==$visibility$jscomp$1$$:$JSCompiler_StaticMethods_isVisibilityMatch_$self$$.C.visiblePercentageMax?$visibility$jscomp$1$$>$JSCompiler_StaticMethods_isVisibilityMatch_$self$$.C.visiblePercentageMin&&$visibility$jscomp$1$$<=$JSCompiler_StaticMethods_isVisibilityMatch_$self$$.C.visiblePercentageMax:
!$visibility$jscomp$1$$}
function $JSCompiler_StaticMethods_updateCounters_$$($JSCompiler_StaticMethods_updateCounters_$self$$,$visibility$jscomp$2$$){var $now$jscomp$24$$=Date.now();0<$visibility$jscomp$2$$&&($JSCompiler_StaticMethods_updateCounters_$self$$.U=$JSCompiler_StaticMethods_updateCounters_$self$$.U||$now$jscomp$24$$,$JSCompiler_StaticMethods_updateCounters_$self$$.Z=$now$jscomp$24$$,!$JSCompiler_StaticMethods_updateCounters_$self$$.aa&&300>$now$jscomp$24$$-$JSCompiler_StaticMethods_updateCounters_$self$$.ha&&($JSCompiler_StaticMethods_updateCounters_$self$$.aa=
$visibility$jscomp$2$$));var $prevMatchesVisibility$$=$JSCompiler_StaticMethods_updateCounters_$self$$.J,$timeSinceLastUpdate$$=$JSCompiler_StaticMethods_updateCounters_$self$$.K?$now$jscomp$24$$-$JSCompiler_StaticMethods_updateCounters_$self$$.K:0;$JSCompiler_StaticMethods_updateCounters_$self$$.J=$JSCompiler_StaticMethods_isVisibilityMatch_$$($JSCompiler_StaticMethods_updateCounters_$self$$,$visibility$jscomp$2$$);$JSCompiler_StaticMethods_updateCounters_$self$$.J?($JSCompiler_StaticMethods_updateCounters_$self$$.Y=
!0,$prevMatchesVisibility$$?($JSCompiler_StaticMethods_updateCounters_$self$$.D+=$timeSinceLastUpdate$$,$JSCompiler_StaticMethods_updateCounters_$self$$.F+=$timeSinceLastUpdate$$,$JSCompiler_StaticMethods_updateCounters_$self$$.G=Math.max($JSCompiler_StaticMethods_updateCounters_$self$$.G,$JSCompiler_StaticMethods_updateCounters_$self$$.F)):$JSCompiler_StaticMethods_updateCounters_$self$$.P=$JSCompiler_StaticMethods_updateCounters_$self$$.P||$now$jscomp$24$$,$JSCompiler_StaticMethods_updateCounters_$self$$.K=
$now$jscomp$24$$,$JSCompiler_StaticMethods_updateCounters_$self$$.M=0<$JSCompiler_StaticMethods_updateCounters_$self$$.M?Math.min($JSCompiler_StaticMethods_updateCounters_$self$$.M,$visibility$jscomp$2$$):$visibility$jscomp$2$$,$JSCompiler_StaticMethods_updateCounters_$self$$.V=Math.max($JSCompiler_StaticMethods_updateCounters_$self$$.V,$visibility$jscomp$2$$),$JSCompiler_StaticMethods_updateCounters_$self$$.R=$now$jscomp$24$$):$prevMatchesVisibility$$&&($JSCompiler_StaticMethods_updateCounters_$self$$.G=
Math.max($JSCompiler_StaticMethods_updateCounters_$self$$.G,$JSCompiler_StaticMethods_updateCounters_$self$$.F+$timeSinceLastUpdate$$),$JSCompiler_StaticMethods_updateCounters_$self$$.K=0,$JSCompiler_StaticMethods_updateCounters_$self$$.D+=$timeSinceLastUpdate$$,$JSCompiler_StaticMethods_updateCounters_$self$$.F=0,$JSCompiler_StaticMethods_updateCounters_$self$$.R=$now$jscomp$24$$);return $JSCompiler_StaticMethods_updateCounters_$self$$.Y&&$JSCompiler_StaticMethods_updateCounters_$self$$.D>=$JSCompiler_StaticMethods_updateCounters_$self$$.C.totalTimeMin&&
$JSCompiler_StaticMethods_updateCounters_$self$$.D<=$JSCompiler_StaticMethods_updateCounters_$self$$.C.totalTimeMax&&$JSCompiler_StaticMethods_updateCounters_$self$$.G>=$JSCompiler_StaticMethods_updateCounters_$self$$.C.continuousTimeMin&&$JSCompiler_StaticMethods_updateCounters_$self$$.G<=$JSCompiler_StaticMethods_updateCounters_$self$$.C.continuousTimeMax}
function $JSCompiler_StaticMethods_computeTimeToWait_$$($JSCompiler_StaticMethods_computeTimeToWait_$self$$){var $waitForContinuousTime$$=Math.max($JSCompiler_StaticMethods_computeTimeToWait_$self$$.C.continuousTimeMin-$JSCompiler_StaticMethods_computeTimeToWait_$self$$.F,0),$waitForTotalTime$$=Math.max($JSCompiler_StaticMethods_computeTimeToWait_$self$$.C.totalTimeMin-$JSCompiler_StaticMethods_computeTimeToWait_$self$$.D,0),$maxWaitTime$$=Math.max($waitForContinuousTime$$,$waitForTotalTime$$);return Math.min($maxWaitTime$$,
$waitForContinuousTime$$||Infinity,$waitForTotalTime$$||Infinity)}function $timeBase$$module$extensions$amp_analytics$0_1$visibility_model$$($time$jscomp$23$$,$baseTime$$){return $time$jscomp$23$$>=$baseTime$$?$time$jscomp$23$$-$baseTime$$:0};var $visibilityIdCounter$$module$extensions$amp_analytics$0_1$visibility_manager$$=1;function $getElementId$$module$extensions$amp_analytics$0_1$visibility_manager$$($element$jscomp$245$$){var $id$jscomp$50$$=$element$jscomp$245$$.__AMP_VIS_ID;$id$jscomp$50$$||($id$jscomp$50$$=++$visibilityIdCounter$$module$extensions$amp_analytics$0_1$visibility_manager$$,$element$jscomp$245$$.__AMP_VIS_ID=$id$jscomp$50$$);return $id$jscomp$50$$}
function $VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$($JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$,$ampdoc$jscomp$109$$){this.parent=$JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$;this.ampdoc=$ampdoc$jscomp$109$$;this.H=$Services$$module$src$services$resourcesForDoc$$($ampdoc$jscomp$109$$);this.F=0;this.B=[];this.$children_$=null;this.D=[];this.parent&&($JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$=
this.parent,$JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$.$children_$||($JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$.$children_$=[]),$JSCompiler_StaticMethods_addChild_$self$jscomp$inline_1470_parent$jscomp$32$$.$children_$.push(this))}
function $JSCompiler_StaticMethods_removeChild_$$($JSCompiler_StaticMethods_removeChild_$self$$,$child$jscomp$13_index$jscomp$76$$){$JSCompiler_StaticMethods_removeChild_$self$$.$children_$&&($child$jscomp$13_index$jscomp$76$$=$JSCompiler_StaticMethods_removeChild_$self$$.$children_$.indexOf($child$jscomp$13_index$jscomp$76$$),-1!=$child$jscomp$13_index$jscomp$76$$&&$JSCompiler_StaticMethods_removeChild_$self$$.$children_$.splice($child$jscomp$13_index$jscomp$76$$,1))}
$JSCompiler_prototypeAlias$$=$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$.prototype;
$JSCompiler_prototypeAlias$$.dispose=function(){this.setRootVisibility(0);for(var $i$136_i$jscomp$209$$=this.B.length-1;0<=$i$136_i$jscomp$209$$;$i$136_i$jscomp$209$$--)this.B[$i$136_i$jscomp$209$$].dispose();this.D.forEach(function($i$136_i$jscomp$209$$){$i$136_i$jscomp$209$$()});this.D.length=0;this.parent&&$JSCompiler_StaticMethods_removeChild_$$(this.parent,this);if(this.$children_$)for($i$136_i$jscomp$209$$=0;$i$136_i$jscomp$209$$<this.$children_$.length;$i$136_i$jscomp$209$$++)this.$children_$[$i$136_i$jscomp$209$$].dispose()};
$JSCompiler_prototypeAlias$$.unsubscribe=function($handler$jscomp$41$$){this.D.push($handler$jscomp$41$$)};$JSCompiler_prototypeAlias$$.getRootVisibility=function(){return this.parent?0<this.parent.getRootVisibility()?this.F:0:this.F};
$JSCompiler_prototypeAlias$$.setRootVisibility=function($i$jscomp$210_visibility$jscomp$3$$){this.F=$i$jscomp$210_visibility$jscomp$3$$;$JSCompiler_StaticMethods_updateModels_$$(this);if(this.$children_$)for($i$jscomp$210_visibility$jscomp$3$$=0;$i$jscomp$210_visibility$jscomp$3$$<this.$children_$.length;$i$jscomp$210_visibility$jscomp$3$$++)$JSCompiler_StaticMethods_updateModels_$$(this.$children_$[$i$jscomp$210_visibility$jscomp$3$$])};
function $JSCompiler_StaticMethods_updateModels_$$($JSCompiler_StaticMethods_updateModels_$self$$){for(var $i$jscomp$211$$=0;$i$jscomp$211$$<$JSCompiler_StaticMethods_updateModels_$self$$.B.length;$i$jscomp$211$$++)$JSCompiler_StaticMethods_updateModels_$self$$.B[$i$jscomp$211$$].update()}
$JSCompiler_prototypeAlias$$.listenRoot=function($spec$jscomp$12$$,$readyPromise$jscomp$2$$,$createReportPromiseFunc$$,$callback$jscomp$122$$){var $calcVisibility$jscomp$1$$=this.getRootVisibility.bind(this);return $JSCompiler_StaticMethods_createModelAndListen_$$(this,$calcVisibility$jscomp$1$$,$spec$jscomp$12$$,$readyPromise$jscomp$2$$,$createReportPromiseFunc$$,$callback$jscomp$122$$)};
$JSCompiler_prototypeAlias$$.listenElement=function($element$jscomp$246$$,$spec$jscomp$13$$,$readyPromise$jscomp$3$$,$createReportPromiseFunc$jscomp$1$$,$callback$jscomp$123$$){var $calcVisibility$jscomp$2$$=this.getElementVisibility.bind(this,$element$jscomp$246$$);return $JSCompiler_StaticMethods_createModelAndListen_$$(this,$calcVisibility$jscomp$2$$,$spec$jscomp$13$$,$readyPromise$jscomp$3$$,$createReportPromiseFunc$jscomp$1$$,$callback$jscomp$123$$,$element$jscomp$246$$)};
function $JSCompiler_StaticMethods_createModelAndListen_$$($JSCompiler_StaticMethods_createModelAndListen_$self$$,$calcVisibility$jscomp$3$$,$spec$jscomp$14$$,$readyPromise$jscomp$4$$,$createReportPromiseFunc$jscomp$2$$,$callback$jscomp$124$$,$opt_element$jscomp$18$$){if($spec$jscomp$14$$.visiblePercentageThresholds&&void 0==$spec$jscomp$14$$.visiblePercentageMin&&void 0==$spec$jscomp$14$$.visiblePercentageMax){var $unlisteners$jscomp$4$$=[],$ranges$jscomp$1$$=$spec$jscomp$14$$.visiblePercentageThresholds;
if(!$ranges$jscomp$1$$||!$isArray$$module$src$types$$($ranges$jscomp$1$$))return $user$$module$src$log$$().error("VISIBILITY-MANAGER","invalid visiblePercentageThresholds"),function(){};for(var $i$jscomp$212$$=0;$i$jscomp$212$$<$ranges$jscomp$1$$.length;$i$jscomp$212$$++){var $percents$$=$ranges$jscomp$1$$[$i$jscomp$212$$];if($isArray$$module$src$types$$($percents$$)&&2==$percents$$.length)if($isFiniteNumber$$module$src$types$$($percents$$[0])&&$isFiniteNumber$$module$src$types$$($percents$$[1])){var $min$jscomp$2_model$137$$=
Number($percents$$[0]),$max$jscomp$2$$=Number($percents$$[1]);if(0>$min$jscomp$2_model$137$$||100<$max$jscomp$2$$||$min$jscomp$2_model$137$$>$max$jscomp$2$$||$min$jscomp$2_model$137$$==$max$jscomp$2$$&&100!=$min$jscomp$2_model$137$$&&$max$jscomp$2$$)$user$$module$src$log$$().error("VISIBILITY-MANAGER","visiblePercentageThresholds entry invalid min/max value");else{var $newSpec$$=$spec$jscomp$14$$;$newSpec$$.visiblePercentageMin=$min$jscomp$2_model$137$$;$newSpec$$.visiblePercentageMax=$max$jscomp$2$$;
$min$jscomp$2_model$137$$=new $VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model$$($newSpec$$,$calcVisibility$jscomp$3$$);$unlisteners$jscomp$4$$.push($JSCompiler_StaticMethods_listen_$$($JSCompiler_StaticMethods_createModelAndListen_$self$$,$min$jscomp$2_model$137$$,$readyPromise$jscomp$4$$,$createReportPromiseFunc$jscomp$2$$,$callback$jscomp$124$$,$opt_element$jscomp$18$$))}}else $user$$module$src$log$$().error("VISIBILITY-MANAGER","visiblePercentageThresholds entry is not valid number");
else $user$$module$src$log$$().error("VISIBILITY-MANAGER","visiblePercentageThresholds entry length is not 2")}return function(){$unlisteners$jscomp$4$$.forEach(function($JSCompiler_StaticMethods_createModelAndListen_$self$$){return $JSCompiler_StaticMethods_createModelAndListen_$self$$()})}}var $model$$=new $VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model$$($spec$jscomp$14$$,$calcVisibility$jscomp$3$$);return $JSCompiler_StaticMethods_listen_$$($JSCompiler_StaticMethods_createModelAndListen_$self$$,
$model$$,$readyPromise$jscomp$4$$,$createReportPromiseFunc$jscomp$2$$,$callback$jscomp$124$$,$opt_element$jscomp$18$$)}
function $JSCompiler_StaticMethods_listen_$$($JSCompiler_StaticMethods_listen_$self$$,$model$jscomp$1$$,$readyPromise$jscomp$5$$,$createReportPromiseFunc$jscomp$3$$,$callback$jscomp$125$$,$opt_element$jscomp$19$$){$readyPromise$jscomp$5$$&&($JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$$($model$jscomp$1$$,!1),$readyPromise$jscomp$5$$.then(function(){$JSCompiler_StaticMethods_VisibilityModel$$module$extensions$amp_analytics$0_1$visibility_model_prototype$setReady$$($model$jscomp$1$$,!0)}));
$createReportPromiseFunc$jscomp$3$$&&$model$jscomp$1$$.setReportReady($createReportPromiseFunc$jscomp$3$$);$model$jscomp$1$$.onTriggerEvent(function(){var $readyPromise$jscomp$5$$=$JSCompiler_StaticMethods_listen_$self$$.$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager_prototype$getStartTime$(),$createReportPromiseFunc$jscomp$3$$={firstSeenTime:$timeBase$$module$extensions$amp_analytics$0_1$visibility_model$$($model$jscomp$1$$.U,$readyPromise$jscomp$5$$),lastSeenTime:$timeBase$$module$extensions$amp_analytics$0_1$visibility_model$$($model$jscomp$1$$.Z,
$readyPromise$jscomp$5$$),lastVisibleTime:$timeBase$$module$extensions$amp_analytics$0_1$visibility_model$$($model$jscomp$1$$.R,$readyPromise$jscomp$5$$),firstVisibleTime:$timeBase$$module$extensions$amp_analytics$0_1$visibility_model$$($model$jscomp$1$$.P,$readyPromise$jscomp$5$$),maxContinuousVisibleTime:$model$jscomp$1$$.G,totalVisibleTime:$model$jscomp$1$$.D,loadTimeVisibility:100*$model$jscomp$1$$.aa||0,minVisiblePercentage:100*$model$jscomp$1$$.M,maxVisiblePercentage:100*$model$jscomp$1$$.V};
$createReportPromiseFunc$jscomp$3$$.backgrounded=$JSCompiler_StaticMethods_listen_$self$$.isBackgrounded()?1:0;$createReportPromiseFunc$jscomp$3$$.backgroundedAtStart=$JSCompiler_StaticMethods_listen_$self$$.isBackgroundedAtStart()?1:0;$createReportPromiseFunc$jscomp$3$$.totalTime=Date.now()-$readyPromise$jscomp$5$$;if($opt_element$jscomp$19$$){var $readyPromise$jscomp$5$$=($readyPromise$jscomp$5$$=$JSCompiler_StaticMethods_listen_$self$$.H.getResourceForElementOptional($opt_element$jscomp$19$$))?
$readyPromise$jscomp$5$$.getLayoutBox():$Services$$module$src$services$viewportForDoc$$($JSCompiler_StaticMethods_listen_$self$$.ampdoc).getLayoutRect($opt_element$jscomp$19$$),$intersectionRatio$jscomp$3$$=$JSCompiler_StaticMethods_listen_$self$$.getElementVisibility($opt_element$jscomp$19$$),$intersectionRect$jscomp$2$$=$JSCompiler_StaticMethods_listen_$self$$.getElementIntersectionRect($opt_element$jscomp$19$$);Object.assign($createReportPromiseFunc$jscomp$3$$,{intersectionRatio:$intersectionRatio$jscomp$3$$,
intersectionRect:JSON.stringify($intersectionRect$jscomp$2$$)})}else $readyPromise$jscomp$5$$=$JSCompiler_StaticMethods_listen_$self$$.getRootLayoutBox();$model$jscomp$1$$.maybeDispose();$readyPromise$jscomp$5$$&&Object.assign($createReportPromiseFunc$jscomp$3$$,{elementX:$readyPromise$jscomp$5$$.left,elementY:$readyPromise$jscomp$5$$.top,elementWidth:$readyPromise$jscomp$5$$.width,elementHeight:$readyPromise$jscomp$5$$.height});$callback$jscomp$125$$($createReportPromiseFunc$jscomp$3$$)});$JSCompiler_StaticMethods_listen_$self$$.B.push($model$jscomp$1$$);
$model$jscomp$1$$.unsubscribe(function(){var $readyPromise$jscomp$5$$=$JSCompiler_StaticMethods_listen_$self$$.B.indexOf($model$jscomp$1$$);-1!=$readyPromise$jscomp$5$$&&$JSCompiler_StaticMethods_listen_$self$$.B.splice($readyPromise$jscomp$5$$,1)});$opt_element$jscomp$19$$&&$model$jscomp$1$$.unsubscribe($JSCompiler_StaticMethods_listen_$self$$.observe($opt_element$jscomp$19$$,function(){return $model$jscomp$1$$.update()}));$model$jscomp$1$$.update();return function(){$model$jscomp$1$$.dispose()}}
function $VisibilityManagerForDoc$$module$extensions$amp_analytics$0_1$visibility_manager$$($ampdoc$jscomp$110_root$jscomp$41$$){$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$.call(this,null,$ampdoc$jscomp$110_root$jscomp$41$$);var $$jscomp$this$jscomp$333$$=this;this.$viewer_$=$Services$$module$src$services$viewerForDoc$$($ampdoc$jscomp$110_root$jscomp$41$$);this.$viewport_$=$Services$$module$src$services$viewportForDoc$$($ampdoc$jscomp$110_root$jscomp$41$$);this.G=
!$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$(this.$viewer_$);this.I=this.isBackgrounded();this.C=$map$$module$src$utils$object$$();this.$intersectionObserver_$=null;if("inabox"==$getMode$$module$src$mode$$(this.ampdoc.win).runtime){$ampdoc$jscomp$110_root$jscomp$41$$=this.ampdoc.getRootNode();var $rootElement$$=$ampdoc$jscomp$110_root$jscomp$41$$.documentElement||$ampdoc$jscomp$110_root$jscomp$41$$.body||$ampdoc$jscomp$110_root$jscomp$41$$;this.unsubscribe(this.observe($rootElement$$,
this.setRootVisibility.bind(this)))}else this.setRootVisibility($JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$(this.$viewer_$)?1:0),this.unsubscribe($JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$(this.$viewer_$,function(){var $ampdoc$jscomp$110_root$jscomp$41$$=$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($$jscomp$this$jscomp$333$$.$viewer_$);$ampdoc$jscomp$110_root$jscomp$41$$||
($$jscomp$this$jscomp$333$$.G=!0);$$jscomp$this$jscomp$333$$.setRootVisibility($ampdoc$jscomp$110_root$jscomp$41$$?1:0)}))}$$jscomp$inherits$$($VisibilityManagerForDoc$$module$extensions$amp_analytics$0_1$visibility_manager$$,$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$);$JSCompiler_prototypeAlias$$=$VisibilityManagerForDoc$$module$extensions$amp_analytics$0_1$visibility_manager$$.prototype;
$JSCompiler_prototypeAlias$$.dispose=function(){$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$.prototype.dispose.call(this);this.$intersectionObserver_$&&(this.$intersectionObserver_$.disconnect(),this.$intersectionObserver_$=null)};$JSCompiler_prototypeAlias$$.$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager_prototype$getStartTime$=function(){return this.$viewer_$.getFirstVisibleTime()};$JSCompiler_prototypeAlias$$.isBackgrounded=function(){return this.G};
$JSCompiler_prototypeAlias$$.isBackgroundedAtStart=function(){return this.I};$JSCompiler_prototypeAlias$$.getRootLayoutBox=function(){var $root$jscomp$42$$=this.ampdoc.getRootNode();return this.$viewport_$.getLayoutRect($root$jscomp$42$$.documentElement||$root$jscomp$42$$.body||$root$jscomp$42$$)};
$JSCompiler_prototypeAlias$$.observe=function($element$jscomp$247$$,$listener$jscomp$66$$){var $$jscomp$this$jscomp$334$$=this;$JSCompiler_StaticMethods_polyfillAmpElementIfNeeded_$$(this,$element$jscomp$247$$);var $id$jscomp$51$$=$getElementId$$module$extensions$amp_analytics$0_1$visibility_manager$$($element$jscomp$247$$),$trackedElement$$=this.C[$id$jscomp$51$$];$trackedElement$$?0<$trackedElement$$.intersectionRatio&&$listener$jscomp$66$$($trackedElement$$.intersectionRatio):($trackedElement$$=
{element:$element$jscomp$247$$,intersectionRatio:0,intersectionRect:null,listeners:[]},this.C[$id$jscomp$51$$]=$trackedElement$$);$trackedElement$$.listeners.push($listener$jscomp$66$$);this.$intersectionObserver_$||(this.$intersectionObserver_$=$JSCompiler_StaticMethods_createIntersectionObserver_$$(this));this.$intersectionObserver_$.observe($element$jscomp$247$$);return function(){var $trackedElement$$=$$jscomp$this$jscomp$334$$.C[$id$jscomp$51$$];if($trackedElement$$){var $index$jscomp$78$$=$trackedElement$$.listeners.indexOf($listener$jscomp$66$$);
-1!=$index$jscomp$78$$&&$trackedElement$$.listeners.splice($index$jscomp$78$$,1);$trackedElement$$.listeners.length||($$jscomp$this$jscomp$334$$.$intersectionObserver_$.unobserve($element$jscomp$247$$),delete $$jscomp$this$jscomp$334$$.C[$id$jscomp$51$$])}}};
$JSCompiler_prototypeAlias$$.getElementVisibility=function($element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$){if(!this.getRootVisibility())return 0;$element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$=$getElementId$$module$extensions$amp_analytics$0_1$visibility_manager$$($element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$);return($element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$=this.C[$element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$])&&$element$jscomp$248_id$jscomp$52_trackedElement$jscomp$2$$.intersectionRatio||
0};
$JSCompiler_prototypeAlias$$.getElementIntersectionRect=function($element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$){if(0>=this.getElementVisibility($element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$))return null;$element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$=$getElementId$$module$extensions$amp_analytics$0_1$visibility_manager$$($element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$);return($element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$=this.C[$element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$])?$element$jscomp$249_id$jscomp$53_trackedElement$jscomp$3$$.intersectionRect:
null};
function $JSCompiler_StaticMethods_createIntersectionObserver_$$($JSCompiler_StaticMethods_createIntersectionObserver_$self$$){function $ticker$$(){$JSCompiler_StaticMethods_IntersectionObserverPolyfill$$module$src$intersection_observer_polyfill_prototype$tick$$($intersectionObserverPolyfill$$,$JSCompiler_StaticMethods_createIntersectionObserver_$self$$.$viewport_$.getRect())}var $win$jscomp$263$$=$JSCompiler_StaticMethods_createIntersectionObserver_$self$$.ampdoc.win;if($nativeIntersectionObserverSupported$$module$src$intersection_observer_polyfill$$($win$jscomp$263$$))return new $win$jscomp$263$$.IntersectionObserver($JSCompiler_StaticMethods_createIntersectionObserver_$self$$.$onIntersectionChanges_$.bind($JSCompiler_StaticMethods_createIntersectionObserver_$self$$),{threshold:$DEFAULT_THRESHOLD$$module$src$intersection_observer_polyfill$$});
var $intersectionObserverPolyfill$$=new $IntersectionObserverPolyfill$$module$src$intersection_observer_polyfill$$($JSCompiler_StaticMethods_createIntersectionObserver_$self$$.$onIntersectionChanges_$.bind($JSCompiler_StaticMethods_createIntersectionObserver_$self$$),{threshold:$DEFAULT_THRESHOLD$$module$src$intersection_observer_polyfill$$});$JSCompiler_StaticMethods_createIntersectionObserver_$self$$.unsubscribe($JSCompiler_StaticMethods_createIntersectionObserver_$self$$.$viewport_$.onScroll($ticker$$));
$JSCompiler_StaticMethods_createIntersectionObserver_$self$$.unsubscribe($JSCompiler_StaticMethods_createIntersectionObserver_$self$$.$viewport_$.onChanged($ticker$$));setTimeout($ticker$$);return $intersectionObserverPolyfill$$}
function $JSCompiler_StaticMethods_polyfillAmpElementIfNeeded_$$($JSCompiler_StaticMethods_polyfillAmpElementIfNeeded_$self$$,$element$jscomp$250$$){$nativeIntersectionObserverSupported$$module$src$intersection_observer_polyfill$$($JSCompiler_StaticMethods_polyfillAmpElementIfNeeded_$self$$.ampdoc.win)||"function"==typeof $element$jscomp$250$$.getLayoutBox||($element$jscomp$250$$.getLayoutBox=function(){return $JSCompiler_StaticMethods_polyfillAmpElementIfNeeded_$self$$.$viewport_$.getLayoutRect($element$jscomp$250$$)},
$element$jscomp$250$$.getOwner=function(){return null})}
$JSCompiler_prototypeAlias$$.$onIntersectionChanges_$=function($entries$jscomp$3$$){var $$jscomp$this$jscomp$337$$=this;$entries$jscomp$3$$.forEach(function($entries$jscomp$3$$){var $JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$=$entries$jscomp$3$$.intersectionRect,$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$=$layoutRectLtwh$$module$src$layout_rect$$(Number($JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$.left),Number($JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$.top),
Number($JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$.width),Number($JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$.height)),$JSCompiler_intersectionRatio$jscomp$inline_1480$$=$entries$jscomp$3$$.intersectionRatio,$JSCompiler_intersectionRatio$jscomp$inline_1480$$=Math.min(Math.max($JSCompiler_intersectionRatio$jscomp$inline_1480$$,0),1);$entries$jscomp$3$$=$getElementId$$module$extensions$amp_analytics$0_1$visibility_manager$$($entries$jscomp$3$$.target);
if($entries$jscomp$3$$=$$jscomp$this$jscomp$337$$.C[$entries$jscomp$3$$])for($entries$jscomp$3$$.intersectionRatio=$JSCompiler_intersectionRatio$jscomp$inline_1480$$,$entries$jscomp$3$$.intersectionRect=$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$,$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$=0;$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$<$entries$jscomp$3$$.listeners.length;$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$++)$entries$jscomp$3$$.listeners[$JSCompiler_id$jscomp$inline_1482_JSCompiler_trackedElement$jscomp$inline_1483_change$jscomp$5$$]($JSCompiler_intersectionRatio$jscomp$inline_1480$$)})};
function $VisibilityManagerForEmbed$$module$extensions$amp_analytics$0_1$visibility_manager$$($parent$jscomp$33$$,$embed$jscomp$2$$){$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$.call(this,$parent$jscomp$33$$,$parent$jscomp$33$$.ampdoc);this.C=$embed$jscomp$2$$;this.G=this.parent.isBackgrounded();this.unsubscribe(this.parent.observe($embed$jscomp$2$$.host,this.setRootVisibility.bind(this)))}
$$jscomp$inherits$$($VisibilityManagerForEmbed$$module$extensions$amp_analytics$0_1$visibility_manager$$,$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager$$);$JSCompiler_prototypeAlias$$=$VisibilityManagerForEmbed$$module$extensions$amp_analytics$0_1$visibility_manager$$.prototype;$JSCompiler_prototypeAlias$$.$VisibilityManager$$module$extensions$amp_analytics$0_1$visibility_manager_prototype$getStartTime$=function(){return this.C.D};
$JSCompiler_prototypeAlias$$.isBackgrounded=function(){return this.parent.isBackgrounded()};$JSCompiler_prototypeAlias$$.isBackgroundedAtStart=function(){return this.G};$JSCompiler_prototypeAlias$$.getRootLayoutBox=function(){var $rootElement$jscomp$2$$=this.C.iframe;return $Services$$module$src$services$viewportForDoc$$(this.ampdoc).getLayoutRect($rootElement$jscomp$2$$)};
$JSCompiler_prototypeAlias$$.observe=function($element$jscomp$251$$,$listener$jscomp$67$$){return this.parent.observe($element$jscomp$251$$,$listener$jscomp$67$$)};$JSCompiler_prototypeAlias$$.getElementVisibility=function($element$jscomp$252$$){return this.getRootVisibility()?this.parent.getElementVisibility($element$jscomp$252$$):0};
$JSCompiler_prototypeAlias$$.getElementIntersectionRect=function($element$jscomp$253$$){return this.getRootVisibility()?this.parent.getElementIntersectionRect($element$jscomp$253$$):null};function $AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$($ampdoc$jscomp$111$$,$parent$jscomp$34$$){this.ampdoc=$ampdoc$jscomp$111$$;this.parent=$parent$jscomp$34$$;this.B=$map$$module$src$utils$object$$();this.D=null}$JSCompiler_prototypeAlias$$=$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$.prototype;$JSCompiler_prototypeAlias$$.dispose=function(){for(var $k$jscomp$23$$ in this.B)this.B[$k$jscomp$23$$].dispose(),delete this.B[$k$jscomp$23$$];this.D&&this.D.dispose()};
$JSCompiler_prototypeAlias$$.getViewer=function(){return $Services$$module$src$services$viewerForDoc$$(this.ampdoc)};$JSCompiler_prototypeAlias$$.getRootElement=function(){var $root$jscomp$43$$=this.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$();return $root$jscomp$43$$.documentElement||$root$jscomp$43$$.body||$root$jscomp$43$$};$JSCompiler_prototypeAlias$$.contains=function($node$jscomp$46$$){return this.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$().contains($node$jscomp$46$$)};
$JSCompiler_prototypeAlias$$.getTrackerForWhitelist=function($name$jscomp$174$$,$whitelist$jscomp$10$$){var $trackerProfile$$=$whitelist$jscomp$10$$[$name$jscomp$174$$];return $trackerProfile$$?this.getTracker($name$jscomp$174$$,$trackerProfile$$):null};$JSCompiler_prototypeAlias$$.getTracker=function($name$jscomp$175$$,$klass$jscomp$2$$){var $tracker$$=this.B[$name$jscomp$175$$];$tracker$$||($tracker$$=new $klass$jscomp$2$$(this),this.B[$name$jscomp$175$$]=$tracker$$);return $tracker$$};
$JSCompiler_prototypeAlias$$.getTrackerOptional=function($name$jscomp$176$$){return this.B[$name$jscomp$176$$]||null};
$JSCompiler_prototypeAlias$$.getElement=function($context$jscomp$18$$,$selector$jscomp$26$$,$selectionMethod$jscomp$6$$){$selectionMethod$jscomp$6$$=void 0===$selectionMethod$jscomp$6$$?null:$selectionMethod$jscomp$6$$;var $$jscomp$this$jscomp$338$$=this;return":root"==$selector$jscomp$26$$?$tryResolve$$module$src$utils$promise$$(function(){return $$jscomp$this$jscomp$338$$.getRootElement()}):":host"==$selector$jscomp$26$$?new Promise(function($context$jscomp$18$$){$context$jscomp$18$$($user$$module$src$log$$().assertElement($$jscomp$this$jscomp$338$$.getHostElement(),
'Element "'+$selector$jscomp$26$$+'" not found'))}):this.ampdoc.whenReady().then(function(){var $found$jscomp$1$$,$result$jscomp$28$$=null;try{$found$jscomp$1$$="scope"==$selectionMethod$jscomp$6$$?$scopedQuerySelector$$module$src$dom$$($context$jscomp$18$$,$selector$jscomp$26$$):"closest"==$selectionMethod$jscomp$6$$?$closestBySelector$$module$src$dom$$($context$jscomp$18$$,$selector$jscomp$26$$):$$jscomp$this$jscomp$338$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$().querySelector($selector$jscomp$26$$)}catch($e$jscomp$130$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!1,
"Invalid query selector "+$selector$jscomp$26$$)}$found$jscomp$1$$&&$$jscomp$this$jscomp$338$$.contains($found$jscomp$1$$)&&($result$jscomp$28$$=$found$jscomp$1$$);return $user$$module$src$log$$().assertElement($result$jscomp$28$$,'Element "'+$selector$jscomp$26$$+'" not found')})};
$JSCompiler_prototypeAlias$$.getAmpElement=function($context$jscomp$19$$,$selector$jscomp$27$$,$selectionMethod$jscomp$7$$){return this.getElement($context$jscomp$19$$,$selector$jscomp$27$$,$selectionMethod$jscomp$7$$).then(function($context$jscomp$19$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($context$jscomp$19$$.classList.contains("i-amphtml-element"),'Element "%s" is required to be an AMP element',$selector$jscomp$27$$);return $context$jscomp$19$$})};
$JSCompiler_prototypeAlias$$.createSelectiveListener=function($listener$jscomp$68$$,$context$jscomp$20$$,$selector$jscomp$28$$,$selectionMethod$jscomp$8$$){$selectionMethod$jscomp$8$$=void 0===$selectionMethod$jscomp$8$$?null:$selectionMethod$jscomp$8$$;var $$jscomp$this$jscomp$339$$=this;return function($event$jscomp$69$$){if(":host"!=$selector$jscomp$28$$)for(var $rootElement$jscomp$3$$=$$jscomp$this$jscomp$339$$.getRootElement(),$isSelectAny$$="*"==$selector$jscomp$28$$,$isSelectRoot$$=":root"==
$selector$jscomp$28$$,$target$jscomp$121$$=$event$jscomp$69$$.target;$target$jscomp$121$$&&$$jscomp$this$jscomp$339$$.contains($target$jscomp$121$$)&&("scope"!=$selectionMethod$jscomp$8$$||$isSelectRoot$$||$context$jscomp$20$$.contains($target$jscomp$121$$));){if("closest"!=$selectionMethod$jscomp$8$$||$target$jscomp$121$$.contains($context$jscomp$20$$)){var $JSCompiler_temp$jscomp$385$$;if(!($JSCompiler_temp$jscomp$385$$=$isSelectAny$$||$isSelectRoot$$&&$target$jscomp$121$$==$rootElement$jscomp$3$$)){var $JSCompiler_selector$jscomp$inline_1487$$=
$selector$jscomp$28$$;try{$JSCompiler_temp$jscomp$385$$=$matches$$module$src$dom$$($target$jscomp$121$$,$JSCompiler_selector$jscomp$inline_1487$$)}catch($JSCompiler_e$jscomp$inline_1488$$){$user$$module$src$log$$().error("amp-analytics","Bad query selector.",$JSCompiler_selector$jscomp$inline_1487$$,$JSCompiler_e$jscomp$inline_1488$$),$JSCompiler_temp$jscomp$385$$=!1}}if($JSCompiler_temp$jscomp$385$$){$listener$jscomp$68$$($target$jscomp$121$$,$event$jscomp$69$$);break}}$target$jscomp$121$$=$target$jscomp$121$$.parentElement}}};
$JSCompiler_prototypeAlias$$.getVisibilityManager=function(){this.D||(this.D=this.createVisibilityManager());return this.D};function $AmpdocAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$($ampdoc$jscomp$112$$){$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$.call(this,$ampdoc$jscomp$112$$,null)}$$jscomp$inherits$$($AmpdocAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$,$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$);
$JSCompiler_prototypeAlias$$=$AmpdocAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$.prototype;$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getType$=function(){return"ampdoc"};$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$=function(){return this.ampdoc.getRootNode()};$JSCompiler_prototypeAlias$$.getHostElement=function(){return null};
$JSCompiler_prototypeAlias$$.signals=function(){return this.ampdoc.signals()};$JSCompiler_prototypeAlias$$.getElementById=function($id$jscomp$55$$){return this.ampdoc.getElementById($id$jscomp$55$$)};
$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$whenIniLoaded$=function(){var $rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$=$Services$$module$src$services$viewportForDoc$$(this.ampdoc);"inabox"==$getMode$$module$src$mode$$(this.ampdoc.win).runtime?$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$=$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$.getLayoutRect(this.getRootElement()):($rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$=
$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$.getSize(),$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$=$layoutRectLtwh$$module$src$layout_rect$$(0,0,$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$.width,$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$.height));return $whenContentIniLoad$$module$src$friendly_iframe_embed$$(this.ampdoc,this.ampdoc.win,$rect$jscomp$12_size$jscomp$20_viewport$jscomp$13$$)};$JSCompiler_prototypeAlias$$.createVisibilityManager=function(){return new $VisibilityManagerForDoc$$module$extensions$amp_analytics$0_1$visibility_manager$$(this.ampdoc)};
function $EmbedAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$($ampdoc$jscomp$113$$,$embed$jscomp$3$$,$parent$jscomp$35$$){$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$.call(this,$ampdoc$jscomp$113$$,$parent$jscomp$35$$);this.C=$embed$jscomp$3$$}$$jscomp$inherits$$($EmbedAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$,$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$);$JSCompiler_prototypeAlias$$=$EmbedAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$.prototype;
$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getType$=function(){return"embed"};$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getRoot$=function(){return this.C.win.document};$JSCompiler_prototypeAlias$$.getHostElement=function(){return this.C.iframe};$JSCompiler_prototypeAlias$$.signals=function(){return this.C.signals()};$JSCompiler_prototypeAlias$$.getElementById=function($id$jscomp$56$$){return this.C.win.document.getElementById($id$jscomp$56$$)};
$JSCompiler_prototypeAlias$$.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$whenIniLoaded$=function(){return this.C.B.whenSignal("ini-load")};$JSCompiler_prototypeAlias$$.createVisibilityManager=function(){return new $VisibilityManagerForEmbed$$module$extensions$amp_analytics$0_1$visibility_manager$$(this.parent.getVisibilityManager(),this.C)};var $ALLOWED_IN_EMBED$$module$extensions$amp_analytics$0_1$instrumentation$$=["visible","click","timer","hidden"];function $InstrumentationService$$module$extensions$amp_analytics$0_1$instrumentation$$($ampdoc$jscomp$114$$){this.ampdoc=$ampdoc$jscomp$114$$;this.B=new $AmpdocAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$(this.ampdoc);this.$viewport_$=$Services$$module$src$services$viewportForDoc$$(this.ampdoc);this.D=!1;this.C=new $Observable$$module$src$observable$$}
$JSCompiler_prototypeAlias$$=$InstrumentationService$$module$extensions$amp_analytics$0_1$instrumentation$$.prototype;$JSCompiler_prototypeAlias$$.dispose=function(){this.B.dispose()};$JSCompiler_prototypeAlias$$.getAnalyticsRoot=function($context$jscomp$21$$){return $JSCompiler_StaticMethods_findRoot_$$(this,$context$jscomp$21$$)};
$JSCompiler_prototypeAlias$$.createAnalyticsGroup=function($analyticsElement$jscomp$1$$){var $root$jscomp$44$$=$JSCompiler_StaticMethods_findRoot_$$(this,$analyticsElement$jscomp$1$$);return new $AnalyticsGroup$$module$extensions$amp_analytics$0_1$instrumentation$$($root$jscomp$44$$,$analyticsElement$jscomp$1$$,this)};
$JSCompiler_prototypeAlias$$.triggerEventForTarget=function($target$jscomp$122$$,$event$jscomp$70_eventType$jscomp$43$$,$opt_vars$jscomp$5$$){$event$jscomp$70_eventType$jscomp$43$$=new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($target$jscomp$122$$,$event$jscomp$70_eventType$jscomp$43$$,$opt_vars$jscomp$5$$);$JSCompiler_StaticMethods_findRoot_$$(this,$target$jscomp$122$$).getTracker("custom",$CustomEventTracker$$module$extensions$amp_analytics$0_1$events$$).trigger($event$jscomp$70_eventType$jscomp$43$$)};
function $JSCompiler_StaticMethods_findRoot_$$($JSCompiler_StaticMethods_findRoot_$self$$,$context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$){if($context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$=$getParentWindowFrameElement$$module$src$service$$($context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$,$JSCompiler_StaticMethods_findRoot_$self$$.ampdoc.win))if($context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$=$context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$.__AMP_EMBED__){var $embedNotNull$$=$context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$;
return $JSCompiler_StaticMethods_getOrCreateRoot_$$($context$jscomp$22_embed$jscomp$4_frame$jscomp$2$$,function(){return new $EmbedAnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root$$($JSCompiler_StaticMethods_findRoot_$self$$.ampdoc,$embedNotNull$$,$JSCompiler_StaticMethods_findRoot_$self$$.B)})}return $JSCompiler_StaticMethods_findRoot_$self$$.B}
function $JSCompiler_StaticMethods_getOrCreateRoot_$$($holder$jscomp$24$$,$factory$jscomp$5$$){var $root$jscomp$46$$=$holder$jscomp$24$$.__AMP_AN_ROOT;$root$jscomp$46$$||($root$jscomp$46$$=$factory$jscomp$5$$(),$holder$jscomp$24$$.__AMP_AN_ROOT=$root$jscomp$46$$);return $root$jscomp$46$$}$JSCompiler_prototypeAlias$$.$onScroll_$=function($e$jscomp$132$$){this.C.fire($e$jscomp$132$$)};
function $JSCompiler_StaticMethods_registerScrollTrigger_$$($JSCompiler_StaticMethods_registerScrollTrigger_$self$$,$config$jscomp$31$$,$listener$jscomp$70$$){if(Array.isArray($config$jscomp$31$$.verticalBoundaries)||Array.isArray($config$jscomp$31$$.horizontalBoundaries)){$JSCompiler_StaticMethods_registerScrollTrigger_$self$$.D||($JSCompiler_StaticMethods_registerScrollTrigger_$self$$.D=!0,$JSCompiler_StaticMethods_registerScrollTrigger_$self$$.$viewport_$.onChanged($JSCompiler_StaticMethods_registerScrollTrigger_$self$$.$onScroll_$.bind($JSCompiler_StaticMethods_registerScrollTrigger_$self$$)));
var $triggerScrollEvents$$=function($config$jscomp$31$$,$triggerScrollEvents$$,$boundsV$$){if($triggerScrollEvents$$)for(var $boundsH$$ in $config$jscomp$31$$)if($config$jscomp$31$$.hasOwnProperty($boundsH$$)){var $bounds$$=parseInt($boundsH$$,10);$bounds$$>$triggerScrollEvents$$||$config$jscomp$31$$[$bounds$$]||($config$jscomp$31$$[$bounds$$]=!0,$bounds$$=Object.create(null),$bounds$$[$boundsV$$]=$boundsH$$,$bounds$$=new $AnalyticsEvent$$module$extensions$amp_analytics$0_1$events$$($JSCompiler_StaticMethods_registerScrollTrigger_$self$$.B.getRootElement(),
"scroll",$bounds$$),$listener$jscomp$70$$($bounds$$))}},$boundsV$$=$JSCompiler_StaticMethods_normalizeBoundaries_$$($config$jscomp$31$$.verticalBoundaries),$boundsH$$=$JSCompiler_StaticMethods_normalizeBoundaries_$$($config$jscomp$31$$.horizontalBoundaries);$JSCompiler_StaticMethods_registerScrollTrigger_$self$$.C.add(function($config$jscomp$31$$){$triggerScrollEvents$$($boundsV$$,100*($config$jscomp$31$$.top+$config$jscomp$31$$.height)/$JSCompiler_StaticMethods_registerScrollTrigger_$self$$.$viewport_$.getScrollHeight(),
"verticalScrollBoundary");$triggerScrollEvents$$($boundsH$$,100*($config$jscomp$31$$.left+$config$jscomp$31$$.width)/$JSCompiler_StaticMethods_registerScrollTrigger_$self$$.$viewport_$.getScrollWidth(),"horizontalScrollBoundary")})}else $user$$module$src$log$$().error("Analytics.Instrumentation","Boundaries are required for the scroll trigger to work.")}
function $JSCompiler_StaticMethods_normalizeBoundaries_$$($bounds$jscomp$1$$){var $result$jscomp$29$$={};if(!$bounds$jscomp$1$$||!Array.isArray($bounds$jscomp$1$$))return $result$jscomp$29$$;for(var $b$jscomp$13$$=0;$b$jscomp$13$$<$bounds$jscomp$1$$.length;$b$jscomp$13$$++){var $bound$jscomp$5$$=$bounds$jscomp$1$$[$b$jscomp$13$$];if("number"!==typeof $bound$jscomp$5$$||!isFinite($bound$jscomp$5$$)){$user$$module$src$log$$().error("Analytics.Instrumentation","Scroll trigger boundaries must be finite.");
break}$bound$jscomp$5$$=Math.min(5*Math.round($bound$jscomp$5$$/5),100);$result$jscomp$29$$[$bound$jscomp$5$$]=!1}return $result$jscomp$29$$}function $AnalyticsGroup$$module$extensions$amp_analytics$0_1$instrumentation$$($root$jscomp$47$$,$analyticsElement$jscomp$3$$,$service$jscomp$22$$){this.B=$root$jscomp$47$$;this.D=$analyticsElement$jscomp$3$$;this.$service_$=$service$jscomp$22$$;this.C=[]}$AnalyticsGroup$$module$extensions$amp_analytics$0_1$instrumentation$$.prototype.dispose=function(){this.C.forEach(function($listener$jscomp$71$$){$listener$jscomp$71$$()})};
$AnalyticsGroup$$module$extensions$amp_analytics$0_1$instrumentation$$.prototype.addTrigger=function($JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$,$handler$jscomp$42$$){var $JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$=$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.on,$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$=$getTrackerKeyName$$module$extensions$amp_analytics$0_1$events$$($JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$),
$trackerWhitelist$jscomp$1$$=$getTrackerTypesForParentType$$module$extensions$amp_analytics$0_1$events$$(this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getType$());this.F($JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$)?($JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$=this.$service_$,$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$=$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.on,
this.D.ownerDocument.defaultView==$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$.ampdoc.win||$ALLOWED_IN_EMBED$$module$extensions$amp_analytics$0_1$instrumentation$$.includes($JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$))?"scroll"===$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$&&($JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.scrollSpec?($JSCompiler_StaticMethods_registerScrollTrigger_$$($JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$,
$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.scrollSpec,$handler$jscomp$42$$),$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$=$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$.$viewport_$.getSize(),$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$.$onScroll_$({top:$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$.$viewport_$.getScrollTop(),
left:$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$.$viewport_$.getScrollLeft(),width:$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.width,height:$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$.height,relayoutAll:!1,velocity:0})):$user$$module$src$log$$().error("Analytics.Instrumentation","Missing scrollSpec on scroll trigger.")):$user$$module$src$log$$().error("Analytics.Instrumentation",'Trigger type "'+
$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$+'" is not allowed in the embed.'):($JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$=this.B.getTrackerForWhitelist($JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$,$trackerWhitelist$jscomp$1$$),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!!$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$,'Trigger type "%s" is not allowed in the %s',
$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$,this.B.$AnalyticsRoot$$module$extensions$amp_analytics$0_1$analytics_root_prototype$getType$()),$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$=$JSCompiler_eventType$jscomp$inline_1498_tracker$jscomp$2_trackerKey$jscomp$1$$.add(this.D,$JSCompiler_StaticMethods_addListenerDepr_$self$jscomp$inline_1494_eventType$jscomp$45$$,$JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$,
$handler$jscomp$42$$),this.C.push($JSCompiler_size$jscomp$inline_1499_config$jscomp$32_unlisten$jscomp$12$$))};$AnalyticsGroup$$module$extensions$amp_analytics$0_1$instrumentation$$.prototype.F=function($triggerType$jscomp$3$$){return"scroll"==$triggerType$jscomp$3$$};var $BatchingPluginFunctions$$module$extensions$amp_analytics$0_1$batching_plugins$$={_ping_:$ping$$module$extensions$amp_analytics$0_1$batching_plugins$$};function $ping$$module$extensions$amp_analytics$0_1$batching_plugins$$(){throw Error("batchPlugin _ping_ is for testing only");};var $VARIABLE_ARGS_REGEXP$$module$extensions$amp_analytics$0_1$variables$$=/^(?:([^\s]*)(\([^)]*\))|[^]+)$/;function $ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$($vars$jscomp$12$$,$opt_iterations$$,$opt_noEncode$$){this.vars=$vars$jscomp$12$$;this.iterations=void 0===$opt_iterations$$?2:$opt_iterations$$;this.D=!!$opt_noEncode$$;this.B={}}$ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$.prototype.C=function($str$jscomp$21$$){this.B[$str$jscomp$21$$]=!0};
function $substrMacro$$module$extensions$amp_analytics$0_1$variables$$($str$jscomp$22$$,$s$jscomp$32_start$jscomp$12$$,$opt_l$$){$s$jscomp$32_start$jscomp$12$$=Number($s$jscomp$32_start$jscomp$12$$);var $length$jscomp$32$$=$str$jscomp$22$$.length;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isFiniteNumber$$module$src$types$$($s$jscomp$32_start$jscomp$12$$),"Start index "+$s$jscomp$32_start$jscomp$12$$+"in substr macro should be a number");$opt_l$$&&($length$jscomp$32$$=Number($opt_l$$),
$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isFiniteNumber$$module$src$types$$($length$jscomp$32$$),"Length "+$length$jscomp$32$$+" in substr macro should be a number"));return $str$jscomp$22$$.substr($s$jscomp$32_start$jscomp$12$$,$length$jscomp$32$$)}
function $defaultMacro$$module$extensions$amp_analytics$0_1$variables$$($value$jscomp$131$$,$defaultValue$jscomp$5$$){return $value$jscomp$131$$&&$value$jscomp$131$$.length?$value$jscomp$131$$:$user$$module$src$log$$().assertString($defaultValue$jscomp$5$$)}
function $replaceMacro$$module$extensions$amp_analytics$0_1$variables$$($string$jscomp$13$$,$matchPattern$$,$opt_newSubStr$$){$matchPattern$$||$user$$module$src$log$$().warn("Analytics.Variables","REPLACE macro must have two or more arguments");$opt_newSubStr$$||($opt_newSubStr$$="");return $string$jscomp$13$$.replace(new RegExp($matchPattern$$,"g"),$opt_newSubStr$$)}
function $VariableService$$module$extensions$amp_analytics$0_1$variables$$($window$jscomp$25$$){this.C=$window$jscomp$25$$;this.B={};this.B.DEFAULT=$defaultMacro$$module$extensions$amp_analytics$0_1$variables$$;this.B.SUBSTR=$substrMacro$$module$extensions$amp_analytics$0_1$variables$$;$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,"TRIM",function($window$jscomp$25$$){return $window$jscomp$25$$.trim()});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,
"JSON",function($window$jscomp$25$$){return JSON.stringify($window$jscomp$25$$)});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,"TOLOWERCASE",function($window$jscomp$25$$){return $window$jscomp$25$$.toLowerCase()});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,"TOUPPERCASE",function($window$jscomp$25$$){return $window$jscomp$25$$.toUpperCase()});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,
"NOT",function($window$jscomp$25$$){return String(!$window$jscomp$25$$)});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,"BASE64",function($window$jscomp$25$$){return btoa($window$jscomp$25$$)});$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,"HASH",this.G.bind(this));$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$(this,
"IF",function($window$jscomp$25$$,$thenValue$$,$elseValue$$){return $window$jscomp$25$$?$thenValue$$:$elseValue$$});this.B.REPLACE=$replaceMacro$$module$extensions$amp_analytics$0_1$variables$$}$VariableService$$module$extensions$amp_analytics$0_1$variables$$.prototype.F=function(){var $isV2ExpansionOn$$=this.C&&$isExperimentOn$$module$src$experiments$$(this.C,"url-replacement-v2");return $isV2ExpansionOn$$?this.B:{}};
function $JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$$($JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$self$$,$name$jscomp$177$$,$macro$jscomp$1$$){$JSCompiler_StaticMethods_VariableService$$module$extensions$amp_analytics$0_1$variables_prototype$register_$self$$.B[$name$jscomp$177$$]=$macro$jscomp$1$$}
$VariableService$$module$extensions$amp_analytics$0_1$variables$$.prototype.expandTemplate=function($template$jscomp$6$$,$options$jscomp$22$$){var $$jscomp$this$jscomp$342$$=this;if(0>$options$jscomp$22$$.iterations)return $user$$module$src$log$$().error("Analytics.Variables","Maximum depth reached while expanding variables. Please ensure that the variables are not recursive."),Promise.resolve($template$jscomp$6$$);var $replacementPromises$$=[],$replacement$jscomp$4$$=$template$jscomp$6$$.replace(/\${([^}]*)}/g,
function($template$jscomp$6$$,$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$){if(!$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$)return Promise.resolve("");$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$=$JSCompiler_StaticMethods_getNameArgs_$$($$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$);var $match$jscomp$21$$=$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$.name,$argList$jscomp$4$$=$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$.argList;
if($options$jscomp$22$$.B[$match$jscomp$21$$])return $template$jscomp$6$$;$$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$=null!=$options$jscomp$22$$.vars[$match$jscomp$21$$]?$options$jscomp$22$$.vars[$match$jscomp$21$$]:"";var $p$jscomp$22$$;"string"==typeof $$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$?$p$jscomp$22$$=$$jscomp$this$jscomp$342$$.expandTemplate($$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$,new $ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$($options$jscomp$22$$.vars,
$options$jscomp$22$$.iterations-1,!0)):$p$jscomp$22$$=Promise.resolve($$jscomp$destructuring$var240_key$jscomp$93_raw$jscomp$1$$);$p$jscomp$22$$=$p$jscomp$22$$.then(function($template$jscomp$6$$){var $replacementPromises$$=$options$jscomp$22$$.D?$template$jscomp$6$$:$$jscomp$this$jscomp$342$$.D($match$jscomp$21$$,$template$jscomp$6$$);return $replacementPromises$$?$replacementPromises$$+$argList$jscomp$4$$:$replacementPromises$$}).then(function($options$jscomp$22$$){$replacement$jscomp$4$$=$replacement$jscomp$4$$.replace($template$jscomp$6$$,
$options$jscomp$22$$)});$replacementPromises$$.push($p$jscomp$22$$);return $template$jscomp$6$$});return Promise.all($replacementPromises$$).then(function(){return $replacement$jscomp$4$$})};
function $JSCompiler_StaticMethods_getNameArgs_$$($key$jscomp$94$$){if(!$key$jscomp$94$$)return{name:"",argList:""};var $match$jscomp$22$$=$key$jscomp$94$$.match($VARIABLE_ARGS_REGEXP$$module$extensions$amp_analytics$0_1$variables$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($match$jscomp$22$$,"Variable with invalid format found: "+$key$jscomp$94$$);return{name:$match$jscomp$22$$[1]||$match$jscomp$22$$[0],argList:$match$jscomp$22$$[2]||""}}
$VariableService$$module$extensions$amp_analytics$0_1$variables$$.prototype.D=function($$jscomp$destructuring$var241_unusedName$jscomp$2$$,$argList$jscomp$5_raw$jscomp$2$$){if(null==$argList$jscomp$5_raw$jscomp$2$$)return"";if($isArray$$module$src$types$$($argList$jscomp$5_raw$jscomp$2$$))return $argList$jscomp$5_raw$jscomp$2$$.map(this.D.bind(this,$$jscomp$destructuring$var241_unusedName$jscomp$2$$)).join(",");$$jscomp$destructuring$var241_unusedName$jscomp$2$$=$JSCompiler_StaticMethods_getNameArgs_$$(String($argList$jscomp$5_raw$jscomp$2$$));
$argList$jscomp$5_raw$jscomp$2$$=$$jscomp$destructuring$var241_unusedName$jscomp$2$$.argList;return encodeURIComponent($$jscomp$destructuring$var241_unusedName$jscomp$2$$.name)+$argList$jscomp$5_raw$jscomp$2$$};$VariableService$$module$extensions$amp_analytics$0_1$variables$$.prototype.G=function($value$jscomp$139$$){return $Services$$module$src$services$cryptoFor$$(this.C).sha384Base64($value$jscomp$139$$)};
function $variableServiceFor$$module$extensions$amp_analytics$0_1$variables$$($win$jscomp$266$$){return $getService$$module$src$service$$($win$jscomp$266$$,"amp-analytics-variables")};function $RequestHandler$$module$extensions$amp_analytics$0_1$requests$$($ampAnalyticsElement$$,$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$,$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$,$handler$jscomp$43$$,$isSandbox$$){this.win=$ampAnalyticsElement$$.getAmpDoc().win;this.X=$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$.baseUrl;this.B=$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$.batchInterval;this.S=Number($JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$.reportWindow)||
null;this.J=null;this.F=$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$.batchPlugin;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.F?this.B:!0,"Invalid request: batchPlugin cannot be set on non-batched request");this.M=this.F?$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($BatchingPluginFunctions$$module$extensions$amp_analytics$0_1$batching_plugins$$[this.F],"Invalid request: unsupported batch plugin "+this.F):null;this.$variableService_$=$variableServiceFor$$module$extensions$amp_analytics$0_1$variables$$(this.win);
this.U=$Services$$module$src$services$urlReplacementsForDoc$$($ampAnalyticsElement$$);this.H=this.G=null;this.O=[];this.K=[];this.Y=$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$;this.W=$handler$jscomp$43$$;this.V=$isSandbox$$?$SANDBOX_AVAILABLE_VARS$$module$extensions$amp_analytics$0_1$sandbox_vars_whitelist$$:void 0;this.I=this.C=null;this.R=!0;this.P=null;this.D=0;$JSCompiler_StaticMethods_initReportWindow_$$(this);if(this.B){this.B=$isArray$$module$src$types$$(this.B)?this.B:[this.B];
for($JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$=0;$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$<this.B.length;$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$++)$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$=this.B[$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$],$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isFiniteNumber$$module$src$types$$($JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$),"Invalid batchInterval value: "+this.B+
"interval must be a number"),$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$=1E3*Number($JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(200<=$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$,"Invalid batchInterval value: "+this.B+", interval value must be greater than 200ms."),this.B[$JSCompiler_i$jscomp$inline_1514_request$jscomp$12$$]=$JSCompiler_interval$jscomp$inline_1515_preconnect$jscomp$3$$;
this.J=0;$JSCompiler_StaticMethods_refreshBatchInterval_$$(this)}}
function $JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$,$configParams$$,$trigger$$,$expansionOption$$,$dynamicBindings$$){var $isImportant$$=$trigger$$.important,$isImmediate$$=!0===$trigger$$.important||!$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.B;if($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.R||
$isImportant$$){$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.D++;$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.P=$trigger$$;var $triggerParams$$=$trigger$$.extraUrlParams,$macros$jscomp$3$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.$variableService_$.F(),$bindings$$=Object.assign({},$dynamicBindings$$,$macros$jscomp$3$$);
$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.G||($expansionOption$$.C("extraUrlParams"),$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.H=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.$variableService_$.expandTemplate($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.X,
$expansionOption$$),$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.G=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.H.then(function($configParams$$){return $JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.U.expandUrlAsync($configParams$$,$bindings$$,$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.V)}));
var $extraUrlParamsPromise$$=$JSCompiler_StaticMethods_expandExtraUrlParams_$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$,$configParams$$,$triggerParams$$,$expansionOption$$).then(function($configParams$$){var $trigger$$=$configParams$$,$expansionOption$$=[],$dynamicBindings$$;for($dynamicBindings$$ in $trigger$$){var $isImportant$$=$trigger$$[$dynamicBindings$$];null!=$isImportant$$&&($isImportant$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.$variableService_$.D($dynamicBindings$$,
$isImportant$$),$expansionOption$$.push(encodeURIComponent($dynamicBindings$$)+"="+$isImportant$$))}var $isImmediate$$=$expansionOption$$.join("&");return $JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.U.expandUrlAsync($isImmediate$$,$bindings$$,$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.V)});if($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.M){var $batchSegment$$=
$dict$$module$src$utils$object$$({trigger:$trigger$$.on,timestamp:$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.win.Date.now(),extraUrlParams:null});$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.K.push($extraUrlParamsPromise$$.then(function($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$){$batchSegment$$.extraUrlParams=
$parseQueryString_$$module$src$url_parse_query_string$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$);return $batchSegment$$}))}$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.O.push($extraUrlParamsPromise$$);$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$.D&&$isImmediate$$&&$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$self$$)}}
$RequestHandler$$module$extensions$amp_analytics$0_1$requests$$.prototype.dispose=function(){this.$reset_$();this.C&&(this.win.clearTimeout(this.C),this.C=null);this.I&&(this.win.clearTimeout(this.I),this.I=null)};
function $JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$){var $extraUrlParamsPromise$jscomp$1$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.O,$baseUrlTemplatePromise$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.H,
$baseUrlPromise$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.G,$batchSegmentsPromise$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.K,$lastTrigger$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.P;$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.$reset_$();
$baseUrlTemplatePromise$$.then(function($baseUrlTemplatePromise$$){$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.Y.url($baseUrlTemplatePromise$$,!0);$baseUrlPromise$$.then(function($baseUrlTemplatePromise$$){var $baseUrlPromise$$;$baseUrlPromise$$=$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.M?$JSCompiler_StaticMethods_constructBatchSegments_$$($JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$,
$baseUrlTemplatePromise$$,$batchSegmentsPromise$$):$JSCompiler_StaticMethods_constructExtraUrlParamStrs_$$($baseUrlTemplatePromise$$,$extraUrlParamsPromise$jscomp$1$$);$baseUrlPromise$$.then(function($extraUrlParamsPromise$jscomp$1$$){$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$self$$.W($extraUrlParamsPromise$jscomp$1$$,$lastTrigger$$)})})})}
function $JSCompiler_StaticMethods_constructExtraUrlParamStrs_$$($baseUrl$jscomp$11$$,$extraUrlParamStrsPromise$$){return Promise.all($extraUrlParamStrsPromise$$).then(function($extraUrlParamStrsPromise$$){$filterSplice$$module$src$utils$array$$($extraUrlParamStrsPromise$$,function($baseUrl$jscomp$11$$){return!!$baseUrl$jscomp$11$$});var $paramStrs$$=$extraUrlParamStrsPromise$$.join("&");return 0<=$baseUrl$jscomp$11$$.indexOf("${extraUrlParams}")?$baseUrl$jscomp$11$$.replace("${extraUrlParams}",$paramStrs$$):
$appendEncodedParamStringToUrl$$module$src$url$$($baseUrl$jscomp$11$$,$paramStrs$$)})}
function $JSCompiler_StaticMethods_constructBatchSegments_$$($JSCompiler_StaticMethods_constructBatchSegments_$self$$,$baseUrl$jscomp$12$$,$batchSegmentsPromise$jscomp$1$$){return Promise.all($batchSegmentsPromise$jscomp$1$$).then(function($batchSegmentsPromise$jscomp$1$$){try{return $JSCompiler_StaticMethods_constructBatchSegments_$self$$.M($baseUrl$jscomp$12$$,$batchSegmentsPromise$jscomp$1$$)}catch($e$jscomp$134$$){return $dev$$module$src$log$$().error("AMP-ANALYTICS","Error: batchPlugin function "+
$JSCompiler_StaticMethods_constructBatchSegments_$self$$.F,$e$jscomp$134$$),""}})}$RequestHandler$$module$extensions$amp_analytics$0_1$requests$$.prototype.$reset_$=function(){this.D=0;this.H=this.G=null;this.O=[];this.K=[];this.P=null};
function $JSCompiler_StaticMethods_expandExtraUrlParams_$$($JSCompiler_StaticMethods_expandExtraUrlParams_$self$$,$$jscomp$loop$202_configParams$jscomp$1$$,$triggerParams$jscomp$1$$,$expansionOption$jscomp$1_option$jscomp$4$$){var $requestPromises$$=[],$params$jscomp$21$$=$map$$module$src$utils$object$$();$expansionOption$jscomp$1_option$jscomp$4$$=new $ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$($expansionOption$jscomp$1_option$jscomp$4$$.vars,$expansionOption$jscomp$1_option$jscomp$4$$.iterations,
!0);if($$jscomp$loop$202_configParams$jscomp$1$$||$triggerParams$jscomp$1$$){Object.assign($params$jscomp$21$$,$$jscomp$loop$202_configParams$jscomp$1$$,$triggerParams$jscomp$1$$);$$jscomp$loop$202_configParams$jscomp$1$$={};for(var $k$jscomp$24$$ in $params$jscomp$21$$)$$jscomp$loop$202_configParams$jscomp$1$$.k=$k$jscomp$24$$,"string"==typeof $params$jscomp$21$$[$$jscomp$loop$202_configParams$jscomp$1$$.k]&&$requestPromises$$.push($JSCompiler_StaticMethods_expandExtraUrlParams_$self$$.$variableService_$.expandTemplate($params$jscomp$21$$[$$jscomp$loop$202_configParams$jscomp$1$$.k],
$expansionOption$jscomp$1_option$jscomp$4$$).then(function($JSCompiler_StaticMethods_expandExtraUrlParams_$self$$){return function($$jscomp$loop$202_configParams$jscomp$1$$){$params$jscomp$21$$[$JSCompiler_StaticMethods_expandExtraUrlParams_$self$$.k]=$$jscomp$loop$202_configParams$jscomp$1$$}}($$jscomp$loop$202_configParams$jscomp$1$$))),$$jscomp$loop$202_configParams$jscomp$1$$={k:$$jscomp$loop$202_configParams$jscomp$1$$.k}}return Promise.all($requestPromises$$).then(function(){return $params$jscomp$21$$})}
function $JSCompiler_StaticMethods_initReportWindow_$$($JSCompiler_StaticMethods_initReportWindow_$self$$){$JSCompiler_StaticMethods_initReportWindow_$self$$.S&&($JSCompiler_StaticMethods_initReportWindow_$self$$.I=$JSCompiler_StaticMethods_initReportWindow_$self$$.win.setTimeout(function(){$JSCompiler_StaticMethods_initReportWindow_$self$$.D&&$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$$($JSCompiler_StaticMethods_initReportWindow_$self$$);
$JSCompiler_StaticMethods_initReportWindow_$self$$.R=!1;$JSCompiler_StaticMethods_initReportWindow_$self$$.C&&($JSCompiler_StaticMethods_initReportWindow_$self$$.win.clearTimeout($JSCompiler_StaticMethods_initReportWindow_$self$$.C),$JSCompiler_StaticMethods_initReportWindow_$self$$.C=null)},1E3*$JSCompiler_StaticMethods_initReportWindow_$self$$.S))}
function $JSCompiler_StaticMethods_refreshBatchInterval_$$($JSCompiler_StaticMethods_refreshBatchInterval_$self$$){var $interval$jscomp$8$$=$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.J<$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.B.length?$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.B[$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.J++]:$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.B[$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.B.length-1];
$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.C=$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.win.setTimeout(function(){$JSCompiler_StaticMethods_refreshBatchInterval_$self$$.D&&$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$fire_$$($JSCompiler_StaticMethods_refreshBatchInterval_$self$$);$JSCompiler_StaticMethods_refreshBatchInterval_$$($JSCompiler_StaticMethods_refreshBatchInterval_$self$$)},$interval$jscomp$8$$)}
function $expandConfigRequest$$module$extensions$amp_analytics$0_1$requests$$($config$jscomp$33$$){if(!$config$jscomp$33$$.requests)return $config$jscomp$33$$;for(var $k$jscomp$26$$ in $config$jscomp$33$$.requests)if($hasOwn$$module$src$utils$object$$($config$jscomp$33$$.requests,$k$jscomp$26$$)){var $JSCompiler_temp_const$jscomp$389$$=$config$jscomp$33$$.requests,$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$;$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$=
$config$jscomp$33$$.requests[$k$jscomp$26$$];$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$=$isObject$$module$src$types$$($JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$)?$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$:{baseUrl:$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$};$JSCompiler_temp_const$jscomp$389$$[$k$jscomp$26$$]=$JSCompiler_inline_result$jscomp$390_JSCompiler_request$jscomp$inline_1533$$}return $config$jscomp$33$$}
;function $yieldThread$$module$extensions$amp_analytics$0_1$resource_timing$$($fn$jscomp$23$$){return new Promise(function($resolve$jscomp$52$$){setTimeout(function(){return $resolve$jscomp$52$$($fn$jscomp$23$$())})})}
function $validateResourceTimingSpec$$module$extensions$amp_analytics$0_1$resource_timing$$($spec$jscomp$16$$){return $isObject$$module$src$types$$($spec$jscomp$16$$.resources)?$spec$jscomp$16$$.encoding&&$spec$jscomp$16$$.encoding.entry&&$spec$jscomp$16$$.encoding.delim?2>$spec$jscomp$16$$.encoding.base||36<$spec$jscomp$16$$.encoding.base?($user$$module$src$log$$().warn("ANALYTICS","resource timing variables only supports bases between 2 and 36"),!1):null!=$spec$jscomp$16$$.responseAfter&&"number"!=
typeof $spec$jscomp$16$$.responseAfter?($user$$module$src$log$$().warn("ANALYTICS",'resourceTimingSpec["responseAfter"] must be a number'),!1):!0:($user$$module$src$log$$().warn("ANALYTICS","resourceTimingSpec is missing or has incomplete encoding options"),!1):($user$$module$src$log$$().warn("ANALYTICS",'resourceTimingSpec missing "resources" field'),!1)}
function $nameForEntry$$module$extensions$amp_analytics$0_1$resource_timing$$($entry$jscomp$25_i$jscomp$215$$,$resourcesByHost$$){var $url$jscomp$147$$=$parseUrlDeprecated$$module$src$url$$($entry$jscomp$25_i$jscomp$215$$.name);for($entry$jscomp$25_i$jscomp$215$$=0;$entry$jscomp$25_i$jscomp$215$$<$resourcesByHost$$.length;++$entry$jscomp$25_i$jscomp$215$$){var $$jscomp$destructuring$var243_resources$jscomp$4$$=$resourcesByHost$$[$entry$jscomp$25_i$jscomp$215$$],$hostPattern$$=$$jscomp$destructuring$var243_resources$jscomp$4$$.hostPattern,
$$jscomp$destructuring$var243_resources$jscomp$4$$=$$jscomp$destructuring$var243_resources$jscomp$4$$.resources;if($hostPattern$$.test($url$jscomp$147$$.host)){var $index$jscomp$79$$=$findIndex$$module$src$utils$array$$($$jscomp$destructuring$var243_resources$jscomp$4$$,function($entry$jscomp$25_i$jscomp$215$$){return $entry$jscomp$25_i$jscomp$215$$.pathPattern.test($url$jscomp$147$$.pathname)&&$entry$jscomp$25_i$jscomp$215$$.queryPattern.test($url$jscomp$147$$.search)});if(-1!=$index$jscomp$79$$)return $$jscomp$destructuring$var243_resources$jscomp$4$$[$index$jscomp$79$$].name}}return null}
function $groupSpecsByHost$$module$extensions$amp_analytics$0_1$resource_timing$$($resourceDefs$$){var $byHost$$={},$name$jscomp$181$$;for($name$jscomp$181$$ in $resourceDefs$$){var $host$jscomp$4$$=$resourceDefs$$[$name$jscomp$181$$].host||"",$pattern$jscomp$3$$={name:$name$jscomp$181$$,pathPattern:new RegExp($resourceDefs$$[$name$jscomp$181$$].path||""),queryPattern:new RegExp($resourceDefs$$[$name$jscomp$181$$].query||"")};$byHost$$[$host$jscomp$4$$]?$byHost$$[$host$jscomp$4$$].resources.push($pattern$jscomp$3$$):
$byHost$$[$host$jscomp$4$$]={hostPattern:new RegExp($host$jscomp$4$$),resources:[$pattern$jscomp$3$$]}}var $byHostArray$$=[],$host$138$$;for($host$138$$ in $byHost$$)$byHostArray$$.push($byHost$$[$host$138$$]);return $byHostArray$$}
function $filterEntries$$module$extensions$amp_analytics$0_1$resource_timing$$($entries$jscomp$4$$,$resourceDefs$jscomp$1$$){var $byHost$jscomp$1$$=$groupSpecsByHost$$module$extensions$amp_analytics$0_1$resource_timing$$($resourceDefs$jscomp$1$$),$results$jscomp$5$$=[];$entries$jscomp$4$$.forEach(function($entries$jscomp$4$$){var $resourceDefs$jscomp$1$$=$nameForEntry$$module$extensions$amp_analytics$0_1$resource_timing$$($entries$jscomp$4$$,$byHost$jscomp$1$$);$resourceDefs$jscomp$1$$&&$results$jscomp$5$$.push({entry:$entries$jscomp$4$$,
name:$resourceDefs$jscomp$1$$})});return $results$jscomp$5$$}
function $serialize$$module$extensions$amp_analytics$0_1$resource_timing$$($entries$jscomp$5_promises$jscomp$11$$,$resourceTimingSpec$$,$win$jscomp$268$$){function $format$jscomp$15$$($entries$jscomp$5_promises$jscomp$11$$,$resourceTimingSpec$$){$resourceTimingSpec$$=void 0===$resourceTimingSpec$$?0:$resourceTimingSpec$$;return Math.round($entries$jscomp$5_promises$jscomp$11$$-$resourceTimingSpec$$).toString($encoding$jscomp$2$$.base||10)}var $resources$jscomp$5$$=$resourceTimingSpec$$.resources,
$encoding$jscomp$2$$=$resourceTimingSpec$$.encoding,$variableService$$=$variableServiceFor$$module$extensions$amp_analytics$0_1$variables$$($win$jscomp$268$$);$entries$jscomp$5_promises$jscomp$11$$=$filterEntries$$module$extensions$amp_analytics$0_1$resource_timing$$($entries$jscomp$5_promises$jscomp$11$$,$resources$jscomp$5$$).map(function($entries$jscomp$5_promises$jscomp$11$$){var $resourceTimingSpec$$=$entries$jscomp$5_promises$jscomp$11$$.entry;$entries$jscomp$5_promises$jscomp$11$$={key:$entries$jscomp$5_promises$jscomp$11$$.name,
startTime:$format$jscomp$15$$($resourceTimingSpec$$.startTime),redirectTime:$format$jscomp$15$$($resourceTimingSpec$$.redirectEnd,$resourceTimingSpec$$.redirectStart),domainLookupTime:$format$jscomp$15$$($resourceTimingSpec$$.domainLookupEnd,$resourceTimingSpec$$.domainLookupStart),tcpConnectTime:$format$jscomp$15$$($resourceTimingSpec$$.connectEnd,$resourceTimingSpec$$.connectStart),serverResponseTime:$format$jscomp$15$$($resourceTimingSpec$$.responseStart,$resourceTimingSpec$$.requestStart),networkTransferTime:$format$jscomp$15$$($resourceTimingSpec$$.responseEnd,
$resourceTimingSpec$$.responseStart),transferSize:$format$jscomp$15$$($resourceTimingSpec$$.transferSize||0),encodedBodySize:$format$jscomp$15$$($resourceTimingSpec$$.encodedBodySize||0),decodedBodySize:$format$jscomp$15$$($resourceTimingSpec$$.decodedBodySize||0),duration:$format$jscomp$15$$($resourceTimingSpec$$.duration),initiatorType:$resourceTimingSpec$$.initiatorType};return new $ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$($entries$jscomp$5_promises$jscomp$11$$,1)}).map(function($entries$jscomp$5_promises$jscomp$11$$){return $variableService$$.expandTemplate($encoding$jscomp$2$$.entry,
$entries$jscomp$5_promises$jscomp$11$$)});return Promise.all($entries$jscomp$5_promises$jscomp$11$$).then(function($entries$jscomp$5_promises$jscomp$11$$){return $entries$jscomp$5_promises$jscomp$11$$.join($encoding$jscomp$2$$.delim)})}
function $serializeResourceTiming$$module$extensions$amp_analytics$0_1$resource_timing$$($win$jscomp$269$$,$resourceTimingSpec$jscomp$1$$){if($resourceTimingSpec$jscomp$1$$.done||!$win$jscomp$269$$.performance||!$win$jscomp$269$$.performance.now||!$win$jscomp$269$$.performance.getEntriesByType||!$validateResourceTimingSpec$$module$extensions$amp_analytics$0_1$resource_timing$$($resourceTimingSpec$jscomp$1$$))return $resourceTimingSpec$jscomp$1$$.done=!0,Promise.resolve("");var $entries$jscomp$6$$=
$win$jscomp$269$$.performance.getEntriesByType("resource");150<=$entries$jscomp$6$$.length&&($resourceTimingSpec$jscomp$1$$.done=!0);var $responseAfter$$=$resourceTimingSpec$jscomp$1$$.responseAfter||0;$resourceTimingSpec$jscomp$1$$.responseAfter=Math.max($responseAfter$$,$win$jscomp$269$$.performance.now());$entries$jscomp$6$$=$entries$jscomp$6$$.filter(function($win$jscomp$269$$){return $win$jscomp$269$$.startTime+$win$jscomp$269$$.duration>=$responseAfter$$});return $entries$jscomp$6$$.length?
$yieldThread$$module$extensions$amp_analytics$0_1$resource_timing$$(function(){return $serialize$$module$extensions$amp_analytics$0_1$resource_timing$$($entries$jscomp$6$$,$resourceTimingSpec$jscomp$1$$,$win$jscomp$269$$)}):Promise.resolve("")};function $Transport$$module$extensions$amp_analytics$0_1$transport$sendRequestUsingImage$$($request$jscomp$15$$,$suppressWarnings$jscomp$1$$){var $image$jscomp$6$$=new Image;$image$jscomp$6$$.src=$request$jscomp$15$$;$image$jscomp$6$$.width=1;$image$jscomp$6$$.height=1;$loadPromise$$module$src$event_helper$$($image$jscomp$6$$).then(function(){}).catch(function(){$suppressWarnings$jscomp$1$$||$user$$module$src$log$$().warn("amp-analytics.Transport","Response unparseable or failed to send image request",
$request$jscomp$15$$)})}
function $Transport$$module$extensions$amp_analytics$0_1$transport$sendRequestUsingXhr$$($win$jscomp$272_xhr$jscomp$8$$,$request$jscomp$17$$){if(!$win$jscomp$272_xhr$jscomp$8$$.XMLHttpRequest)return!1;$win$jscomp$272_xhr$jscomp$8$$=new $win$jscomp$272_xhr$jscomp$8$$.XMLHttpRequest;if(!("withCredentials"in $win$jscomp$272_xhr$jscomp$8$$))return!1;$win$jscomp$272_xhr$jscomp$8$$.open("POST",$request$jscomp$17$$,!0);$win$jscomp$272_xhr$jscomp$8$$.withCredentials=!0;$win$jscomp$272_xhr$jscomp$8$$.setRequestHeader("Content-Type","text/plain");
$win$jscomp$272_xhr$jscomp$8$$.onreadystatechange=function(){};$win$jscomp$272_xhr$jscomp$8$$.send("");return!0}
function $sendRequestUsingIframe$$module$extensions$amp_analytics$0_1$transport$$($win$jscomp$273$$,$request$jscomp$18$$){$assertHttpsUrl$$module$src$url$$($request$jscomp$18$$,"amp-analytics request");var $iframe$jscomp$28$$=$win$jscomp$273$$.document.createElement("iframe");$setStyle$$module$src$style$$($iframe$jscomp$28$$,"display","none");$iframe$jscomp$28$$.onload=$iframe$jscomp$28$$.onerror=function(){$Services$$module$src$services$timerFor$$($win$jscomp$273$$).delay(function(){$removeElement$$module$src$dom$$($iframe$jscomp$28$$)},
5E3)};$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($parseUrlDeprecated$$module$src$url$$($request$jscomp$18$$).origin!=$parseUrlDeprecated$$module$src$url$$($win$jscomp$273$$.location.href).origin,"Origin of iframe request must not be equal to the document origin. See https://github.com/ampproject/ amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.");$iframe$jscomp$28$$.setAttribute("amp-analytics","");$iframe$jscomp$28$$.setAttribute("sandbox","allow-scripts allow-same-origin");
$iframe$jscomp$28$$.src=$request$jscomp$18$$;$win$jscomp$273$$.document.body.appendChild($iframe$jscomp$28$$)};var $ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$={"default":{transport:{beacon:!0,xhrpost:!0,image:!0},vars:{accessReaderId:"ACCESS_READER_ID",adNavTiming:"AD_NAV_TIMING",adNavType:"AD_NAV_TYPE",adRedirectCount:"AD_NAV_REDIRECT_COUNT",ampdocHost:"AMPDOC_HOST",ampdocHostname:"AMPDOC_HOSTNAME",ampdocUrl:"AMPDOC_URL",ampGeo:"AMP_GEO",ampState:"AMP_STATE",ampVersion:"AMP_VERSION",ancestorOrigin:"ANCESTOR_ORIGIN",authdata:"AUTHDATA",availableScreenHeight:"AVAILABLE_SCREEN_HEIGHT",availableScreenWidth:"AVAILABLE_SCREEN_WIDTH",
backgroundState:"BACKGROUND_STATE",browserLanguage:"BROWSER_LANGUAGE",canonicalHost:"CANONICAL_HOST",canonicalHostname:"CANONICAL_HOSTNAME",canonicalPath:"CANONICAL_PATH",canonicalUrl:"CANONICAL_URL",clientId:"CLIENT_ID",contentLoadTime:"CONTENT_LOAD_TIME",counter:"COUNTER",documentCharset:"DOCUMENT_CHARSET",documentReferrer:"DOCUMENT_REFERRER",domainLookupTime:"DOMAIN_LOOKUP_TIME",domInteractiveTime:"DOM_INTERACTIVE_TIME",externalReferrer:"EXTERNAL_REFERRER",firstContentfulPaint:"FIRST_CONTENTFUL_PAINT",
firstViewportReady:"FIRST_VIEWPORT_READY",fragmentParam:"FRAGMENT_PARAM",makeBodyVisible:"MAKE_BODY_VISIBLE",htmlAttr:"HTML_ATTR",incrementalEngagedTime:"INCREMENTAL_ENGAGED_TIME",navRedirectCount:"NAV_REDIRECT_COUNT",navTiming:"NAV_TIMING",navType:"NAV_TYPE",pageDownloadTime:"PAGE_DOWNLOAD_TIME",pageLoadTime:"PAGE_LOAD_TIME",pageViewId:"PAGE_VIEW_ID",queryParam:"QUERY_PARAM",random:"RANDOM",redirectTime:"REDIRECT_TIME",screenColorDepth:"SCREEN_COLOR_DEPTH",screenHeight:"SCREEN_HEIGHT",screenWidth:"SCREEN_WIDTH",
scrollHeight:"SCROLL_HEIGHT",scrollLeft:"SCROLL_LEFT",scrollTop:"SCROLL_TOP",scrollWidth:"SCROLL_WIDTH",serverResponseTime:"SERVER_RESPONSE_TIME",sourceUrl:"SOURCE_URL",sourceHost:"SOURCE_HOST",sourceHostname:"SOURCE_HOSTNAME",sourcePath:"SOURCE_PATH",tcpConnectTime:"TCP_CONNECT_TIME",timestamp:"TIMESTAMP",timezone:"TIMEZONE",timezoneCode:"TIMEZONE_CODE",title:"TITLE",totalEngagedTime:"TOTAL_ENGAGED_TIME",userAgent:"USER_AGENT",viewer:"VIEWER",viewportHeight:"VIEWPORT_HEIGHT",viewportWidth:"VIEWPORT_WIDTH"}},
acquialift:{vars:{decisionApiUrl:"us-east-1-decisionapi.lift.acquia.com",accountId:"xxxxxxxx",siteId:"xxxxxxxx"},transport:{beacon:!0,xhrpost:!0,image:!1},requests:{base:"https://${decisionApiUrl}/capture?account_id=${accountId}&site_id=${siteId}",basicCapture:"${base}&ident=${clientId(tc_ptid)}&identsrc=amp&es=Amp&url=${canonicalUrl}&rurl=${documentReferrer}&cttl=${title}",pageview:"${basicCapture}&en=Content View",click:"${basicCapture}&en=Click-Through"},triggers:{defaultPageview:{on:"visible",
request:"pageview"}}},afsanalytics:{vars:{server:"www",websiteid:"xxxxxxxx",event:"click",clicklabel:"clicked from AMP page"},transport:{beacon:!1,xhrpost:!1,image:!0},requests:{host:"//${server}.afsanalytics.com",base:"${host}/cgi_bin/",pageview:"${base}connect.cgi?usr=${websiteid}Pauto&js=1&amp=1&title=${title}&url=${canonicalUrl}&refer=${documentReferrer}&resolution=${screenWidth}x${screenHeight}&color=${screenColorDepth}&Tips=${random}",click:"${base}click.cgi?usr=${websiteid}&event=${event}&exit=${clicklabel}"},
triggers:{defaultPageview:{on:"visible",request:"pageview"}}},alexametrics:{requests:{base:"https://${ampAtrkHost}/atrk.gif?account=${atrk_acct}&domain=${domain}",pageview:"${base}&jsv=amp-${ampVersion}&frame_height=${viewportHeight}&frame_width=${viewportWidth}&title=${title}&time=${timestamp}&time_zone_offset=${timezone}&screen_params=${screenWidth}x${screenHeight}x${screenColorDepth}&ref_url=${documentReferrer}&host_url=${sourceUrl}&random_number=${random}&user_cookie=${clientId(__auc)}&user_cookie_flag=0&user_lang=${browserLanguage}&amp_doc_url=${ampdocUrl}"},
vars:{atrk_acct:"",domain:"",ampAtrkHost:"certify-amp.alexametrics.com"},triggers:{trackPageview:{on:"visible",request:"pageview"}},transport:{xhrpost:!1,beacon:!1,image:!0}},atinternet:{transport:{beacon:!1,xhrpost:!1,image:!0},requests:{base:"https://${log}${domain}/hit.xiti?s=${site}&ts=${timestamp}&r=${screenWidth}x${screenHeight}x${screenColorDepth}&re=${availableScreenWidth}x${availableScreenHeight}",suffix:"&medium=amp&${extraUrlParams}&ref=${documentReferrer}",pageview:"${base}&p=${title}&s2=${level2}${suffix}",
click:"${base}&pclick=${title}&s2click=${level2}&p=${label}&s2=${level2Click}&type=click&click=${type}${suffix}"}},umenganalytics:{vars:{siteid:"",initial_view_time:"",eventName:"",eventProps:""},requests:{base:"https://b.cnzz.com/utrack?&_siteid=${siteid}&_distinct_id=${clientId(umeng_amp_id)}&_t=${timestamp}&_s=google&_b=web&_r=${externalReferrer}&_h=${screenHeight}&_w=${screenWidth}&_ivt=${initial_view_time}",pageview:"${base}&_ename=$w_page_view&_eprops=${eventProps}",event:"${base}&_ename=${eventName}&_eprops=${eventProps}"},
triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},baiduanalytics:{requests:{host:"https://hm.baidu.com",base:"${host}/hm.gif?si=${token}&nv=0&st=4&v=pixel-1.0&rnd=${timestamp}",pageview:"${base}&et=0",event:"${base}&ep=${category}*${action}*${label}*${value}&et=4&api=8_0"},transport:{beacon:!1,xhrpost:!1,image:!0}},burt:{vars:{trackingKey:"ignore",category:"",subCategory:""},requests:{host:"//${trackingKey}.c.richmetrics.com/",base:"${host}imglog?e=${trackingKey}&pi=${trackingKey}|${pageViewId}|${canonicalPath}|${clientId(burt-amp-user-id)}&ui=${clientId(burt-amp-user-id)}&v=amp&ts=${timestamp}&sn=${requestCount}&",
pageview:"${base}type=page&ca=${category}&sc=${subCategory}&ln=${browserLanguage}&lr=${documentReferrer}&eu=${sourceUrl}&tz=${timezone}&pd=${scrollWidth}x${scrollHeight}&sd=${screenWidth}x${screenHeight}&wd=${availableScreenWidth}x${availableScreenHeight}&ws=${scrollLeft}x${scrollTop}",pageping:"${base}type=pageping"},triggers:{pageview:{on:"visible",request:"pageview"},pageping:{on:"timer",timerSpec:{interval:15,maxTimerLength:1200},request:"pageping"}},transport:{beacon:!1,xhrpost:!1,image:!0}},
byside:{vars:{webcareZone:"webcare",webcareId:"",channel:"",fid:"",lang:"pt"},requests:{host:"//${webcareZone}.byside.com/",base:"${host}BWA${webcareId}/amp/",pageview:"${base}pixel.php",event:"${base}signal.php?event_id=${eventId}&event_label=${eventLabel}&fields=${fields}"},extraUrlParams:{webcare_id:"${webcareId}",bwch:"${channel}",lang:"${lang}",fid:"${fid}",bwit:"A",tuid:"${clientId(byside_webcare_tuid)}",suid:"",puid:"${pageViewId}p${timestamp}",referrer:"${documentReferrer}",page:"${sourceUrl}",
amppage:"${ampdocUrl}",bwpt:"${title}",bres:"${viewportWidth}x${viewportHeight}",res:"${screenWidth}x${screenHeight}",v:"v20171116a",ampv:"${ampVersion}",viewer:"${viewer}",ua:"${userAgent}",r:"${random}"},triggers:{pageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},chartbeat:{requests:{host:"https://ping.chartbeat.net",basePrefix:"/ping?h=${domain}&p=${canonicalPath}&u=${clientId(_cb)}&d=${canonicalHost}&g=${uid}&g0=${sections}&g1=${authors}&g2=${zone}&g3=${sponsorName}&g4=${contentType}&c=120&x=${scrollTop}&y=${scrollHeight}&j=${decayTime}&R=1&W=0&I=0&E=${totalEngagedTime}&r=${documentReferrer}&t=${pageViewId}${clientId(_cb)}&b=${pageLoadTime}&i=${title}&T=${timestamp}&tz=${timezone}&C=2",
baseSuffix:"&_",interval:"${host}${basePrefix}${baseSuffix}",anchorClick:"${host}${basePrefix}${baseSuffix}"},triggers:{trackInterval:{on:"timer",timerSpec:{interval:15,maxTimerLength:7200},request:"interval",vars:{decayTime:30}},trackAnchorClick:{on:"click",selector:"a",request:"anchorClick",vars:{decayTime:30}}},transport:{beacon:!1,xhrpost:!1,image:!0}},clicky:{vars:{site_id:""},requests:{base:"https://in.getclicky.com/in.php?site_id=${site_id}",baseSuffix:"&mime=${contentType}&x=${random}",pageview:"${base}&res=${screenWidth}x${screenHeight}&lang=${browserLanguage}&secure=1&type=pageview&href=${canonicalPath}&title=${title}${baseSuffix}",
interval:"${base}&type=ping${baseSuffix}"},triggers:{defaultPageview:{on:"visible",request:"pageview"},interval:{on:"timer",timerSpec:{interval:60,maxTimerLength:600},request:"interval"}},transport:{beacon:!1,xhrpost:!1,image:!0}},colanalytics:{requests:{host:"https://ase.clmbtech.com",base:"${host}/message",pageview:"${base}?cid=${id}&val_101=${id}&val_101=${canonicalPath}&ch=${canonicalHost}&uuid=${uid}&au=${authors}&zo=${zone}&sn=${sponsorName}&ct=${contentType}&st=${scrollTop}&sh=${scrollHeight}&dct=${decayTime}&tet=${totalEngagedTime}&dr=${documentReferrer}&plt=${pageLoadTime}&val_108=${title}&val_120=3"},
triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},comscore:{vars:{c2:"1000001"},requests:{host:"https://sb.scorecardresearch.com",base:"${host}/b?",pageview:"${base}c1=2&c2=${c2}&cs_pv=${pageViewId}&c12=${clientId(comScore)}&rn=${random}&c8=${title}&c7=${canonicalUrl}&c9=${documentReferrer}&cs_c7amp=${ampdocUrl}"},triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},cxense:{requests:{host:"https://scomcluster.cxense.com",
base:"${host}/Repo/rep.gif",pageview:"${base}?ver=1&typ=pgv&sid=${siteId}&ckp=${clientId(cX_P)}&loc=${sourceUrl}&rnd=${random}&ref=${documentReferrer}&ltm=${timestamp}&wsz=${screenWidth}x${screenHeight}&bln=${browserLanguage}&chs=${documentCharset}&col=${screenColorDepth}&tzo=${timezone}&cp_cx_channel=amp"},triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},dynatrace:{requests:{endpoint:"${protocol}://${tenant}${separator}${environment}:${port}/ampbf/${tenantpath}",
pageview:"${endpoint}?type=js&flavor=amp&v=1&a=1%7C1%7C_load_%7C_load_%7C-%7C${navTiming(navigationStart)}%7C${navTiming(domContentLoadedEventEnd)}%7C0%2C2%7C2%7C_onload_%7C_load_%7C-%7C${navTiming(domContentLoadedEventStart)}%7C${navTiming(domContentLoadedEventEnd)}%7C0&fId=${pageViewId}&vID=${clientId(rxVisitor)}&referer=${sourceUrl}&title=${title}&sw=${screenWidth}&sh=${screenHeight}&w=${viewportWidth}&h=${viewportHeight}&nt=a${navType}b${navTiming(navigationStart)}c${navTiming(navigationStart,redirectStart)}d${navTiming(navigationStart,redirectEnd)}e${navTiming(navigationStart,fetchStart)}f${navTiming(navigationStart,domainLookupStart)}g${navTiming(navigationStart,domainLookupEnd)}h${navTiming(navigationStart,connectStart)}i${navTiming(navigationStart,connectEnd)}j${navTiming(navigationStart,secureConnectionStart)}k${navTiming(navigationStart,requestStart)}l${navTiming(navigationStart,responseStart)}m${navTiming(navigationStart,responseEnd)}n${navTiming(navigationStart,domLoading)}o${navTiming(navigationStart,domInteractive)}p${navTiming(navigationStart,domContentLoadedEventStart)}q${navTiming(navigationStart,domContentLoadedEventEnd)}r${navTiming(navigationStart,domComplete)}s${navTiming(navigationStart,loadEventStart)}t${navTiming(navigationStart,loadEventEnd)}&app=${app}&time=${timestamp}"},
triggers:{trackPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0},vars:{app:"ampapp",protocol:"https",tenant:"",environment:"live.dynatrace.com",port:"443",separator:"."}},euleriananalytics:{vars:{analyticsHost:"",documentLocation:"SOURCE_URL"},requests:{base:"https://${analyticsHost}",basePrefix:"-/${random}?euid-amp=${clientId(etuix)}&url=${documentLocation}&",pageview:"${base}/col2/${basePrefix}rf=${documentReferrer}&sd=${screenWidth}x${screenHeight}&sd=${screenColorDepth}&elg=${browserLanguage}",
action:"${base}/action/${basePrefix}eact=${actionCode}&actr=${actionRef}",user:"${base}/uparam/${basePrefix}euk${userParamKey}=${userParamVal}"},transport:{beacon:!1,xhrpost:!1,image:!0}},facebookpixel:{vars:{pixelId:"PIXEL-ID"},requests:{host:"https://www.facebook.com",base:"${host}/tr?noscript=1",pageview:"${base}&ev=PageView&id=${pixelId}",event:"${base}&ev=${eventName}&id=${pixelId}&cd[content_name]=${content_name}",eventViewContent:"${base}&ev=ViewContent&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_type]=${content_type}&cd[content_ids]=${content_ids}",
eventSearch:"${base}&ev=Search&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_category]=${content_category}&cd[content_ids]=${content_ids}&cd[search_string]=${search_string}",eventAddToCart:"${base}&ev=AddToCart&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_type]=${content_type}&cd[content_ids]=${content_ids}",eventAddToWishlist:"${base}&ev=AddToWishlist&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_category]=${content_category}&cd[content_ids]=${content_ids}",
eventInitiateCheckout:"${base}&ev=InitiateCheckout&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_category]=${content_category}&cd[num_items]=${num_items}&cd[content_ids]=${content_ids}",eventAddPaymentInfo:"${base}&ev=AddPaymentInfo&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_category]=${content_category}&cd[content_ids]=${content_ids}",eventPurchase:"${base}&ev=Purchase&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_type]=${content_type}&cd[content_ids]=${content_ids}&cd[num_items]=${num_items}",
eventLead:"${base}&ev=Lead&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[content_category]=${content_category}",eventCompleteRegistration:"${base}&ev=CompleteRegistration&id=${pixelId}&cd[value]=${value}&cd[currency]=${currency}&cd[content_name]=${content_name}&cd[status]=${status}"},triggers:{trackPageview:{on:"visible",request:"pageview"}}},gemius:{requests:{base:"https://${prefix}.hit.gemius.pl/_${timestamp}/redot.gif?l=91&id=${identifier}&screen=${screenWidth}x${screenHeight}&window=${viewportWidth}x${viewportHeight}&fr=1&href=${sourceUrl}&ref=${documentReferrer}&extra=gemamp%3D1%7Campid%3D${clientId(gemius)}%7C${extraparams}",
pageview:"${base}&et=view&hsrc=1",event:"${base}&et=action&hsrc=3"},triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},googleadwords:{requests:{conversion_prefix:"https://www.googleadservices.com/pagead/conversion/",remarketing_prefix:"https://googleads.g.doubleclick.net/pagead/viewthroughconversion/",common_params:"${googleConversionId}/?cv=amp2&label=${googleConversionLabel}&random=${random}&url=${sourceUrl}&ref=${documentReferrer}&fst=${pageViewId}&num=${counter(googleadwords)}&fmt=3&async=1&u_h=${screenHeight}&u_w=${screenWidth}&u_ah=${availableScreenHeight}&u_aw=${availableScreenWidth}&u_cd=${screenColorDepth}&u_tz=${timezone}&tiba=${title}&guid=ON&script=0",
conversion_params:"value=${googleConversionValue}&currency_code=${googleConversionCurrency}&bg=${googleConversionColor}&hl=${googleConversionLanguage}",conversion:"${conversion_prefix}${common_params}&${conversion_params}",remarketing:"${remarketing_prefix}${common_params}"},transport:{beacon:!1,xhrpost:!1,image:!0}},googleanalytics:{vars:{eventValue:"0",documentLocation:"SOURCE_URL",clientId:"CLIENT_ID(AMP_ECID_GOOGLE,,_ga)",dataSource:"AMP",anonymizeIP:"aip",errorParam:"${errorName}-${errorMessage}"},
requests:{host:"https://www.google-analytics.com",basePrefix:"v=1&_v=a1&ds=${dataSource}&${anonymizeIP}&_s=${requestCount}&dt=${title}&sr=${screenWidth}x${screenHeight}&_utmht=${timestamp}&cid=${clientId}&tid=${account}&dl=${documentLocation}&dr=${externalReferrer}&sd=${screenColorDepth}&ul=${browserLanguage}&de=${documentCharset}",baseSuffix:"&a=${pageViewId}&z=${random}",pageview:"${host}/r/collect?${basePrefix}&t=pageview&jid=${random}&_r=1${baseSuffix}",event:"${host}/collect?${basePrefix}&t=event&jid=&ec=${eventCategory}&ea=${eventAction}&el=${eventLabel}&ev=${eventValue}${baseSuffix}",
social:"${host}/collect?${basePrefix}&t=social&jid=&sa=${socialAction}&sn=${socialNetwork}&st=${socialTarget}${baseSuffix}",timing:"${host}/collect?${basePrefix}&t=${timingRequestType}&jid=&plt=${pageLoadTime}&dns=${domainLookupTime}&tcp=${tcpConnectTime}&rrt=${redirectTime}&srt=${serverResponseTime}&pdt=${pageDownloadTime}&clt=${contentLoadTime}&dit=${domInteractiveTime}${baseSuffix}",error:"${host}/collect?${basePrefix}&t=exception&exd=${errorParam}${baseSuffix}"},triggers:{performanceTiming:{on:"visible",
request:"timing",sampleSpec:{sampleOn:"${clientId}",threshold:1},vars:{timingRequestType:"timing"}},adwordsTiming:{on:"visible",request:"timing",enabled:"${queryParam(gclid)}",vars:{timingRequestType:"adtiming"}}},extraUrlParamsReplaceMap:{dimension:"cd",metric:"cm"},optout:"_gaUserPrefs.ioo"},"googleanalytics-alpha":{vars:{eventValue:"0",documentLocation:"SOURCE_URL",clientId:"CLIENT_ID(AMP_ECID_GOOGLE,,_ga)",dataSource:"AMP",anonymizeIP:"aip",errorParam:"${errorName}-${errorMessage}"},requests:{host:"https://www.google-analytics.com",
basePrefix:"v=1&_v=a1&ds=${dataSource}&${anonymizeIP}&_s=${requestCount}&dt=${title}&sr=${screenWidth}x${screenHeight}&_utmht=${timestamp}&cid=${clientId}&tid=${account}&dl=${documentLocation}&dr=${externalReferrer}&sd=${screenColorDepth}&ul=${browserLanguage}&de=${documentCharset}",baseSuffix:"&a=${pageViewId}&z=${random}",pageview:"${host}/r/collect?${basePrefix}&t=pageview&jid=${random}&_r=1${baseSuffix}",event:"${host}/collect?${basePrefix}&t=event&jid=&ec=${eventCategory}&ea=${eventAction}&el=${eventLabel}&ev=${eventValue}${baseSuffix}",
social:"${host}/collect?${basePrefix}&t=social&jid=&sa=${socialAction}&sn=${socialNetwork}&st=${socialTarget}${baseSuffix}",timing:"${host}/collect?${basePrefix}&t=${timingRequestType}&jid=&plt=${pageLoadTime}&dns=${domainLookupTime}&tcp=${tcpConnectTime}&rrt=${redirectTime}&srt=${serverResponseTime}&pdt=${pageDownloadTime}&clt=${contentLoadTime}&dit=${domInteractiveTime}${baseSuffix}",error:"${host}/collect?${basePrefix}&t=exception&exd=${errorParam}${baseSuffix}"},triggers:{performanceTiming:{on:"visible",
request:"timing",sampleSpec:{sampleOn:"${clientId}",threshold:1},vars:{timingRequestType:"timing"}},adwordsTiming:{on:"visible",request:"timing",enabled:"${queryParam(gclid)}",vars:{timingRequestType:"adtiming"}}},extraUrlParamsReplaceMap:{dimension:"cd",metric:"cm"},optout:"_gaUserPrefs.ioo"},krux:{requests:{beaconHost:"https://beacon.krxd.net",timing:"t_navigation_type=0&t_dns=${domainLookupTime}&t_tcp=${tcpConnectTime}&t_http_request=${serverResponseTime}&t_http_response=${pageDownloadTime}&t_content_ready=${contentLoadTime}&t_window_load=${pageLoadTime}&t_redirect=${redirectTime}",
common:"source=amp&confid=${confid}&_kpid=${pubid}&_kcp_s=${site}&_kcp_sc=${section}&_kcp_ssc=${subsection}&_kcp_d=${canonicalHost}&_kpref_=${documentReferrer}&_kua_kx_amp_client_id=${clientId(_kuid_)}&_kua_kx_lang=${browserLanguage}&_kua_kx_tech_browser_language=${browserLanguage}&_kua_kx_tz=${timezone}",pageview:"${beaconHost}/pixel.gif?${common}&${timing}",event:"${beaconHost}/event.gif?${common}&${timing}&pageview=false"},transport:{beacon:!1,xhrpost:!1,image:!0},extraUrlParamsReplaceMap:{"user.":"_kua_",
"page.":"_kpa_"}},lotame:{requests:{pageview:"https://bcp.crwdcntrl.net/amp?c=${account}&pv=y"},triggers:{"track pageview":{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},mediametrie:{requests:{host:"https://prof.estat.com/m/web",pageview:"${host}/${serial}?c=${level1}&dom=${ampdocUrl}&enc=${documentCharset}&l3=${level3}&l4=${level4}&n=${random}&p=${level2}&r=${documentReferrer}&sch=${screenHeight}&scw=${screenWidth}&tn=amp&v=1&vh=${availableScreenHeight}&vw=${availableScreenWidth}"},
triggers:{trackPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},mediarithmics:{vars:{domain:"events.mediarithmics.com",url:"SOURCE_URL",event_name:"$page_view",referrer:"DOCUMENT_REFERRER"},requests:{host:"https://${domain}",pageview:"${host}/v1/visits/pixel?$site_token=${site_token}&$url=${url}&$ev=${event_name}&$referrer=${referrer}"},triggers:{trackPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},mediator:{requests:{host:"//collector.mediator.media/script/${mediator_id}/amp/",
renderstart:"${host}init/?url=${canonicalUrl}",prefix:"${host}register/?url=${canonicalUrl}&ref=${documentReferrer}&",suffix:"vh=${viewportHeight}&sh=${scrollHeight}&st=${scrollTop}",pageview:"${prefix}e=v",timer:"${prefix}e=t&${suffix}",s0:"${prefix}e=s0",s1:"${prefix}e=s1",s2:"${prefix}e=s2",s3:"${prefix}e=s3"},vars:{mediator_id:""},triggers:{renderStart:{on:"render-start",request:"renderstart"},trackPageview:{on:"visible",request:"pageview"},scrollPing0:{on:"scroll",scrollSpec:{verticalBoundaries:[5]},
request:"s0"},scrollPing1:{on:"scroll",scrollSpec:{verticalBoundaries:[35]},request:"s1"},scrollPing2:{on:"scroll",scrollSpec:{verticalBoundaries:[65]},request:"s2"},scrollPing3:{on:"scroll",scrollSpec:{verticalBoundaries:[95]},request:"s3"},pageTimer:{on:"timer",timerSpec:{interval:5,maxTimerLength:600,immediate:!1},request:"timer"}}},metrika:{transport:{beacon:!0,xhrpost:!0,image:!1},requests:{pageview:"${_watch}?browser-info=${_brInfo}&${_siteInfo}&${_suffix}",notBounce:"${_watch}?browser-info=ar%3A1%3Anb%3A1%3A${_brInfo}&${_suffix}",
externalLink:"${_watch}?browser-info=ln%3A1%3A${_brInfo}&${_suffix}",reachGoal:"${_watch}?browser-info=ar%3A1%3A${_brInfo}&${_siteInfo}&${_goalSuffix}",_domain:"https://mc.yandex.ru",_watch:"${_domain}/watch/${counterId}",_suffix:"page-url=${sourceUrl}&page-ref=${documentReferrer}",_goalSuffix:"page-url=goal%3A%2F%2F${sourceHost}%2F${goalId}&page-ref=${sourceUrl}",_techInfo:"amp%3A1%3Az%3A${timezone}%3Ai%3A${timestamp}%3Arn%3A${random}%3Ala%3A${browserLanguage}%3Aen%3A${documentCharset}%3Arqn%3A${requestCount}%3As%3A${screenWidth}x${screenHeight}x${screenColorDepth}%3Aw%3A${availableScreenWidth}x${availableScreenHeight}%3Ads%3A${_timings}%3Auid%3A${clientId(_ym_uid)}%3Apvid%3A${pageViewId}",
_timings:"${domainLookupTime}%2C${tcpConnectTime}%2C${serverResponseTime}%2C${pageDownloadTime}%2C${redirectTime}%2C${navTiming(redirectStart,redirectEnd)}%2C${navRedirectCount}%2C${navTiming(domLoading,domInteractive)}%2C${navTiming(domContentLoadedEventStart,domContentLoadedEventEnd)}%2C${navTiming(navigationStart,domComplete)}%2C${pageLoadTime}%2C${navTiming(loadEventStart,loadEventEnd)}%2C${contentLoadTime}",_brInfo:"${_techInfo}%3A${_title}",_title:"t%3A${title}",_siteInfo:"site-info=${yaParams}"},
triggers:{pageview:{on:"visible",request:"pageview"}}},mobify:{vars:{projectSlug:"mobify-project-id",templateName:"page-type"},requests:{_host:"https://engagement-collector.mobify.net",_dimensions:"%22platform%22%3a%22AMP%22%2c%22client_id%22%3a%22${clientId(sandy-client-id)}%22%2c%22title%22%3a%22${title}%22%2c%22location%22%3a%22${sourceUrl}%22%2c%22page%22%3a%22${sourcePath}%22%2c%22src_location%22%3a%22${ampdocUrl}%22%2c%22referrer%22%3a%22${documentReferrer}%22%2c%22templateName%22%3a%22${templateName}%22",
_basePrefix:"${_host}/s.gif?slug=${projectSlug}&timestamp_local=${timestamp}&channel=web&dimensions=%7b${_dimensions}%7d",ampstart:"${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c%22action%22%3a%22ampStart%22%2c%22value%22%3a${navTiming(navigationStart,domLoading)}%7d",pageview:"${_basePrefix}&data=%7b%22action%22%3a%22pageview%22%7d",pageload:"${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c%22action%22%3a%22load%22%2c%22value%22%3a${pageLoadTime}%7d",pagedcl:"${_basePrefix}&data=%7b%22category%22%3a%22timing%22%2c%22action%22%3a%22DOMContentLoaded%22%2c%22value%22%3a${contentLoadTime}%7d"},
triggers:{triggerName:{on:"visible",request:["ampstart","pageload","pagedcl"]},pageview:{on:"ini-load",request:"pageview"}},transport:{beacon:!0,xhrpost:!1,image:!0}},mparticle:{vars:{eventType:"Unknown",debug:!1,amp_clientId:"CLIENT_ID(mparticle_amp_id)"},requests:{host:"https://pixels.mparticle.com",endpointPath:"/v1/${apiKey}/Pixel",baseParams:"et=${eventType}&amp_id=${amp_clientId}&attrs_k=${eventAttributes_Keys}&attrs_v=${eventAttributes_Values}&ua_k=${userAttributes_Keys}&ua_v=${userAttributes_Values}&ui_t=${userIdentities_Types}&ui_v=${userIdentities_Values}&flags_k=${customFlags_Keys}&flags_v=${customFlags_Values}&ct=${timestamp}&dbg=${debug}&lc=${location}&av=${appVersion}",
pageview:"${host}${endpointPath}?dt=ScreenView&n=${canonicalPath}&hn=${ampdocUrl}&ttl=${title}&${baseParams}",event:"${host}${endpointPath}?dt=AppEvent&n=${eventName}&${baseParams}"},transport:{beacon:!1,xhrpost:!1,image:!0}},newrelic:{requests:{pageview:"https://${beacon}/amp?appId=${appId}&licenseKey=${licenseKey}&ampUrl=${ampdocUrl}&canonicalUrl=${canonicalUrl}&timeToDomContentLoadedEventEnd=${navTiming(domContentLoadedEventEnd)}&timeToDomInteractive=${navTiming(domInteractive)}&timeToDomComplete=${navTiming(domComplete)}&timeToDomLoading=${navTiming(domLoading)}&timeToResponseStart=${navTiming(responseStart)}&timeToResponseEnd=${navTiming(responseEnd)}&timeToLoadEventStart=${navTiming(loadEventStart)}&timeToLoadEventEnd=${navTiming(loadEventEnd)}&timeToConnectStart=${navTiming(connectStart)}&timeToConnectEnd=${navTiming(connectEnd)}&timeToFetchStart=${navTiming(fetchStart)}&timeToRequestStart=${navTiming(requestStart)}&timeToUnloadEventStart=${navTiming(unloadEventStart)}&timeToUnloadEventEnd=${navTiming(unloadEventEnd)}&timeToDomainLookupStart=${navTiming(domainLookupStart)}&timeToDomainLookupEnd=${navTiming(domainLookupEnd)}&timeToRedirectStart=${navTiming(redirectStart)}&timeToRedirectEnd=${navTiming(redirectEnd)}&timeToSecureConnection=${navTiming(secureConnectionStart)}&timestamp=${timestamp}&ampVersion=${ampVersion}&pageLoadTime=${pageLoadTime}"},
vars:{beacon:"bam.nr-data.net",appId:[],licenseKey:""},triggers:{trackPageview:{on:"ini-load",request:"pageview"}}},nielsen:{vars:{sessionId:"CLIENT_ID(imrworldwide)",prefix:""},requests:{session:"https://${prefix}uaid-linkage.imrworldwide.com/cgi-bin/gn?prd=session&c13=asid,P${apid}&sessionId=${sessionId}_${pageViewId}&pingtype=4&enc=false&c61=createtm,${timestamp}&rnd=${random}",cloudapi:"https://${prefix}cloudapi.imrworldwide.com/nmapi/v2/${apid}/${sessionId}_${pageViewId}/a?b=%7B%22devInfo%22%3A%7B%22devId%22%3A%22${sessionId}_${pageViewId}%22%2C%22apn%22%3A%22${apn}%22%2C%22apv%22%3A%22${apv}%22%2C%22apid%22%3A%22${apid}%22%7D%2C%22metadata%22%3A%7B%22static%22%3A%7B%22type%22%3A%22static%22%2C%22section%22%3A%22${section}%22%2C%22assetid%22%3A%22${pageViewId}%22%2C%22segA%22%3A%22${segA}%22%2C%22segB%22%3A%22${segB}%22%2C%22segC%22%3A%22${segC}%22%2C%22adModel%22%3A%220%22%2C%22dataSrc%22%3A%22cms%22%7D%2C%22content%22%3A%7B%7D%2C%22ad%22%3A%7B%7D%7D%2C%22event%22%3A%22playhead%22%2C%22position%22%3A%22${timestamp}%22%2C%22data%22%3A%7B%22hidden%22%3A%22${backgroundState}%22%2C%22blur%22%3A%22${backgroundState}%22%2C%22position%22%3A%22${timestamp}%22%7D%2C%22type%22%3A%22static%22%2C%22utc%22%3A%22${timestamp}%22%2C%22index%22%3A%22${requestCount}%22%7D"},
triggers:{visible:{on:"visible",request:["session","cloudapi"]},hidden:{on:"hidden",request:"cloudapi"},duration:{on:"timer",timerSpec:{interval:10,maxTimerLength:86400,immediate:!1},request:"cloudapi"}},transport:{beacon:!1,xhrpost:!1,image:!0}},"nielsen-marketing-cloud":{transport:{beacon:!1,xhrpost:!1,image:!0},vars:{pubId:"",siteId:""},requests:{host:"loadeu.exelator.com",pathPrefix:"load/",trackurl:"https://${host}/${pathPrefix}?p=${pubId}&g=${siteId}&j=0"},triggers:{defaultPageview:{on:"visible",
request:"trackurl"}}},oewadirect:{transport:{beacon:!1,xhrpost:!1,image:!0},requests:{pageview:"https://${s}.oewabox.at/j0=,,,r=${canonicalUrl};+,amp=1+cp=${cp}+ssl=1+hn=${canonicalHost};;;?lt=${pageViewId}&x=${screenWidth}x${screenHeight}x24&c=CLIENT_ID(oewa)"},triggers:{pageview:{on:"visible",request:"pageview"}}},oewa:{transport:{beacon:!1,xhrpost:!1,image:!0},requests:{pageview:"${url}?s=${s}&amp=1&cp=${cp}&host=${canonicalHost}&path=${canonicalPath}"},triggers:{pageview:{on:"visible",request:"pageview"}}},
parsely:{requests:{host:"https://srv.pixel.parsely.com",basePrefix:"${host}/plogger/?rand=${timestamp}&idsite=${apikey}&url=${ampdocUrl}&urlref=${documentReferrer}&screen=${screenWidth}x${screenHeight}%7C${availableScreenWidth}x${availableScreenHeight}%7C${screenColorDepth}&title=${title}&date=${timestamp}&ampid=${clientId(_parsely_visitor)}",pageview:"${basePrefix}&action=pageview",heartbeat:"${basePrefix}&action=heartbeat&tt=${totalEngagedTime}&inc=${incrementalEngagedTime(parsely-js)}"},triggers:{defaultPageview:{on:"visible",
request:"pageview"},defaultHeartbeat:{on:"timer",enabled:"${incrementalEngagedTime(parsely-js,false)}",timerSpec:{interval:10,maxTimerLength:7200},request:"heartbeat"}},transport:{beacon:!1,xhrpost:!1,image:!0}},piano:{requests:{host:"https://api-v3.tinypass.com",basePrefix:"/api/v3",baseSuffix:"&pageview_id=${pageViewId}&rand=${random}&amp_client_id=${clientId}&aid=${aid}",pageview:"${host}${basePrefix}/page/track?url=${canonicalUrl}&referer=${documentReferrer}&content_created=${contentCreated}&content_author=${contentAuthor}&content_section=${contentSection}&timezone_offset=${timezone}&tags=${tags}&amp_url=${ampdocUrl}&screen=${screenWidth}x${screenHeight}${baseSuffix}"}},
quantcast:{vars:{labels:""},requests:{host:"https://pixel.quantserve.com/pixel",pageview:"${host};r=${random};a=${pcode};labels=${labels};fpan=;fpa=${clientId(__qca)};ns=0;ce=1;cm=;je=0;sr=${screenWidth}x${screenHeight}x${screenColorDepth};enc=n;et=${timestamp};ref=${documentReferrer};url=${canonicalUrl}"},triggers:{defaultPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},adobeanalytics:{transport:{xhrpost:!1,beacon:!1,image:!0},vars:{pageName:"TITLE",host:"",
reportSuites:"",linkType:"o",linkUrl:"",linkName:""},requests:{requestPath:"/b/ss/${reportSuites}/0/amp-1.0/s${random}",basePrefix:"vid=z${clientId(adobe_amp_id)}&ndh=0&ce=${documentCharset}&pageName=${pageName}&g=${ampdocUrl}&r=${documentReferrer}&bh=${availableScreenHeight}&bw=${availableScreenWidth}&c=${screenColorDepth}&j=amp&s=${screenWidth}x${screenHeight}",pageview:"https://${host}${requestPath}?${basePrefix}",click:"https://${host}${requestPath}?${basePrefix}&pe=lnk_${linkType}&pev1=${linkUrl}&pev2=${linkName}"}},
adobeanalytics_nativeConfig:{triggers:{pageLoad:{on:"visible",request:"iframeMessage"}}},infonline:{vars:{sv:"ke",ap:"1"},transport:{beacon:!1,xhrpost:!1,image:!0},requests:{pageview:"${url}?st=${st}&sv=${sv}&ap=${ap}&co=${co}&cp=${cp}&host=${canonicalHost}&path=${canonicalPath}"},triggers:{pageview:{on:"visible",request:"pageview"}}},simplereach:{vars:{pid:"",published_at:"",authors:[],channels:[],tags:[]},requests:{host:"https://edge.simplereach.com",baseParams:"amp=true&pid=${pid}&title=${title}&url=${canonicalUrl}&date=${published_at}&authors=${authors}&channels=${categories}&tags=${tags}&referrer=${documentReferrer}&page_url=${sourceUrl}&user_id=${clientId(sr_amp_id)}&domain=${canonicalHost}&article_id=${article_id}&ignore_metadata=${ignore_metadata}",
visible:"${host}/n?${baseParams}",timer:"${host}/t?${baseParams}&t=5000&e=5000"},triggers:{visible:{on:"visible",request:"visible"},timer:{on:"timer",timerSpec:{interval:5,maxTimerLength:1200},request:"timer"}}},segment:{transport:{beacon:!1,xhrpost:!1,image:!0},vars:{anonymousId:"CLIENT_ID(segment_amp_id)"},requests:{host:"https://api.segment.io/v1/pixel",base:"?writeKey=${writeKey}&context.library.name=amp&anonymousId=${anonymousId}&context.locale=${browserLanguage}&context.page.path=${canonicalPath}&context.page.url=${canonicalUrl}&context.page.referrer=${documentReferrer}&context.page.title=${title}&context.screen.width=${screenWidth}&context.screen.height=${screenHeight}",
page:"${host}/page${base}&name=${name}",track:"${host}/track${base}&event=${event}"},triggers:{page:{on:"visible",request:"page"}}},shinystat:{transport:{beacon:!1,xhrpost:!1,image:!0},requests:{base:"https://amp.shinystat.com/cgi-bin/shinyamp.cgi",commpar:"AMP=1&RM=${random}&USER=${account}&PAG=${page}&HR=${canonicalUrl}&REFER=${documentReferrer}&RES=${screenWidth}X${screenHeight}&COLOR=${screenColorDepth}&CID=${clientId(AMP_CID)}&PAGID=${pageViewId}&TITL=${title}&RQC=${requestCount}",pagepar:"&VIE=${viewer}&PLT=${pageLoadTime}",
eventpar:"&SSXL=1",linkpar:"&LINK=${outboundLink}",pageview:"${base}?${commpar}${pagepar}",event:"${base}?${commpar}${eventpar}",link:"${base}?${commpar}${linkpar}"},triggers:{pageview:{on:"visible",request:"pageview"}}},snowplow:{vars:{duid:"CLIENT_ID(_sp_id)"},requests:{aaVersion:"amp-0.2",basePrefix:"https://${collectorHost}/i?url=${canonicalUrl}&page=${title}&res=${screenWidth}x${screenHeight}&stm=${timestamp}&tz=${timezone}&aid=${appId}&p=web&tv=${aaVersion}&cd=${screenColorDepth}&cs=${documentCharset}&duid=${duid}&lang=${browserLanguage}&refr=${documentReferrer}&stm=${timezone}&vp=${viewportWidth}x${viewportHeight}",
pageView:"${basePrefix}&e=pv",structEvent:"${basePrefix}&e=se&se_ca=${structEventCategory}&se_ac=${structEventAction}&se_la=${structEventLabel}&se_pr=${structEventProperty}&se_va=${structEventValue}"},transport:{beacon:!1,xhrpost:!1,image:!0}},top100:{vars:{pid:"",rid:"PAGE_VIEW_ID",ruid:"CLIENT_ID(ruid)",version:"1.0.0"},requests:{host:"https://kraken.rambler.ru",base:"${host}/cnt/?pid=${pid}&rid=${rid}&v=${version}&rn=${random}&ruid=${ruid}&ct=amp",pageview:"${base}&et=pv${_pageData}${_screenData}",
_screenData:"&sr=${screenWidth}x${screenHeight}&cd=${screenColorDepth}-bit&bs=${scrollWidth}x${scrollHeight}",_pageData:"&pt=${title}&rf=${documentReferrer}&en=${documentCharset}&la=${browserLanguage}&tz=${timezone}"},triggers:{trackPageview:{on:"visible",request:"pageview"}},transport:{beacon:!1,xhrpost:!1,image:!0}},treasuredata:{vars:{host:"in.treasuredata.com",writeKey:"",database:"",table:"events"},requests:{base:"https://${host}/postback/v3/event/${database}",baseParams:"td_write_key=${writeKey}&td_global_id=td_global_id&td_client_id=CLIENT_ID(_td)&td_charset=DOCUMENT_CHARSET&td_language=BROWSER_LANGUAGE&td_color=SCREEN_COLOR_DEPTH&td_screen=${screenWidth}x${scrollHeight}&td_viewport=${availableScreenWidth}x${availableScreenHeight}&td_title=TITLE&td_url=SOURCE_URL&td_user_agent=USER_AGENT&td_host=SOURCE_HOST&td_path=SOURCE_PATH&td_referrer=DOCUMENT_REFERRER&td_ip=td_ip",
pageview:"${base}/${table}?${baseParams}",event:"${base}/${table}?${baseParams}"}},webtrekk:{requests:{trackURL:"https://${trackDomain}/${trackId}/wt",parameterPrefix:"?p=432,${contentId},1,${screenWidth}x${screenHeight},${screenColorDepth},1,${timestamp},${documentReferrer},${viewportWidth}x${viewportHeight},0&tz=${timezone}&eid=${clientId(amp-wt3-eid)}&la=${browserLanguage}",parameterSuffix:"&pu=${sourceUrl}",pageParameter:"&cp1=${pageParameter1}&cp2=${pageParameter2}&cp3=${pageParameter3}&cp4=${pageParameter4}&cp5=${pageParameter5}&cp6=${pageParameter6}&cp7=${pageParameter7}&cp8=${pageParameter8}&cp9=${pageParameter9}&cp10=${pageParameter10}",
pageCategories:"&cg1=${pageCategory1}&cg2=${pageCategory2}&cg3=${pageCategory3}&cg4=${pageCategory4}&cg5=${pageCategory5}&cg6=${pageCategory6}&cg7=${pageCategory7}&cg8=${pageCategory8}&cg9=${pageCategory9}&cg10=${pageCategory10}",pageview:"${trackURL}${parameterPrefix}${pageParameter}${pageCategories}${parameterSuffix}",actionParameter:"&ck1=${actionParameter1}&ck2=${actionParameter2}&ck3=${actionParameter3}&ck4=${actionParameter4}&ck5=${actionParameter5}",event:"${trackURL}${parameterPrefix}&ct=${actionName}${actionParameter}${parameterSuffix}"},
transport:{beacon:!1,xhrpost:!1,image:!0}},webtrekk_v2:{vars:{actionName:"webtrekk_ignore",contentId:"${title}",mediaName:"${id}",everId:"${clientId(amp-wt3-eid)}"},requests:{trackURL:"https://${trackDomain}/${trackId}/wt",basePrefix:"?p=440,${contentId},1,${screenWidth}x${screenHeight},${screenColorDepth},1,",baseSuffix:",${documentReferrer},${viewportWidth}x${viewportHeight},0&tz=${timezone}&eid=${everId}&la=${browserLanguage}",parameterPrefix:"${basePrefix}${timestamp}${baseSuffix}",parameterSuffix:"&pu=${sourceUrl}&eor=1",
pageview:"${trackURL}${parameterPrefix}&${extraUrlParams}&cp570=${pageLoadTime}${parameterSuffix}",event:"${trackURL}${parameterPrefix}&ct=${actionName}&${extraUrlParams}${parameterSuffix}",scroll:"${trackURL}${parameterPrefix}&ct=${actionName}&ck540=${verticalScrollBoundary}${parameterSuffix}",mediaPrefix:"${trackURL}${basePrefix}${baseSuffix}&mi=${mediaName}",mediaSuffix:"&mt1=${currentTime}&mt2=${duration}&${extraUrlParams}${parameterSuffix}&x=${playedTotal}",mediaPlay:"${mediaPrefix}&mk=play${mediaSuffix}",
mediaPause:"${mediaPrefix}&mk=pause${mediaSuffix}",mediaPosition:"${mediaPrefix}&mk=pos${mediaSuffix}",mediaEnded:"${mediaPrefix}&mk=eof${mediaSuffix}"},extraUrlParamsReplaceMap:{pageParameter:"cp",contentGroup:"cg",actionParameter:"ck",sessionParameter:"cs",ecommerceParameter:"cb",urmCategory:"uc",campaignParameter:"cc",mediaCategory:"mg"},transport:{beacon:!1,xhrpost:!1,image:!0}},mpulse:{requests:{onvisible:"https://${beacon_url}?h.d=${h.d}&h.key=${h.key}&h.t=${h.t}&h.cr=${h.cr}&rt.start=navigation&rt.si=${clientId(amp_mpulse)}&rt.ss=${timestamp}&rt.end=${timestamp}&t_resp=${navTiming(navigationStart,responseStart)}&t_page=${navTiming(responseStart,loadEventStart)}&t_done=${navTiming(navigationStart,loadEventStart)}&nt_nav_type=${navType}&nt_red_cnt=${navRedirectCount}&nt_nav_st=${navTiming(navigationStart)}&nt_red_st=${navTiming(redirectStart)}&nt_red_end=${navTiming(redirectEnd)}&nt_fet_st=${navTiming(fetchStart)}&nt_dns_st=${navTiming(domainLookupStart)}&nt_dns_end=${navTiming(domainLookupEnd)}&nt_con_st=${navTiming(connectStart)}&nt_ssl_st=${navTiming(secureConnectionStart)}&nt_con_end=${navTiming(connectEnd)}&nt_req_st=${navTiming(requestStart)}&nt_res_st=${navTiming(responseStart)}&nt_unload_st=${navTiming(unloadEventStart)}&nt_unload_end=${navTiming(unloadEventEnd)}&nt_domloading=${navTiming(domLoading)}&nt_res_end=${navTiming(responseEnd)}&nt_domint=${navTiming(domInteractive)}&nt_domcontloaded_st=${navTiming(domContentLoadedEventStart)}&nt_domcontloaded_end=${navTiming(domContentLoadedEventEnd)}&nt_domcomp=${navTiming(domComplete)}&nt_load_st=${navTiming(loadEventStart)}&nt_load_end=${navTiming(loadEventEnd)}&v=1&http.initiator=amp&u=${sourceUrl}&amp.u=${ampdocUrl}&r2=${documentReferrer}&scr.xy=${screenWidth}x${screenHeight}"},
triggers:{onvisible:{on:"visible",request:"onvisible"}},transport:{beacon:!1,xhrpost:!1,image:!0},extraUrlParamsReplaceMap:{ab_test:"h.ab",page_group:"h.pg","custom_dimension.":"cdim.","custom_metric.":"cmet."}},linkpulse:{vars:{id:"",pageUrl:"CANONICAL_URL",title:"TITLE",section:"",channel:"amp",type:"",host:"pp.lp4.io",empty:""},requests:{base:"https://${host}",pageview:"${base}/p?i=${id}&r=${documentReferrer}&p=${pageUrl}&s=${section}&t=${type}&c=${channel}&mt=${title}&_t=amp&_r=${random}",pageload:"${base}/pl?i=${id}&ct=${domInteractiveTime}&rt=${pageDownloadTime}&pt=${pageLoadTime}&p=${pageUrl}&c=${channel}&t=${type}&s=${section}&_t=amp&_r=${random}",
ping:"${base}/u?i=${id}&u=${clientId(_lp4_u)}&p=${pageUrl}&uActive=true&isPing=yes&c=${channel}&t=${type}&s=${section}&_t=amp&_r=${random}"},triggers:{pageview:{on:"visible",request:"pageview"},pageload:{on:"visible",request:"pageload"},ping:{on:"timer",timerSpec:{interval:30,maxTimerLength:7200},request:"ping"}},transport:{beacon:!1,xhrpost:!1,image:!0}},rakam:{vars:{deviceId:"CLIENT_ID(rakam_device_id)"},requests:{base:"?api.api_key=${writeKey}&prop._platform=amp&prop._device_id=${deviceId}&prop.locale=${browserLanguage}&prop.path=${canonicalPath}&prop.url=${canonicalUrl}&prop.color_depth=${screenColorDepth}&prop._referrer=${documentReferrer}&prop.title=${title}&prop.timezone=${timezone}&prop._time=${timestamp}&prop.resolution=${screenWidth} \u00d7 ${screenHeight}",
pageview:"https://${apiEndpoint}/event/pixel${base}&collection=${pageViewName}",custom:"https://${apiEndpoint}/event/pixel${base}&collection=${collection}"}},ibeatanalytics:{requests:{host:"https://ibeat.indiatimes.com",base:"https://ibeat.indiatimes.com/iBeat/pageTrendlogAmp.html",pageview:"${base}?&h=${h}&d=${h}&url=${url}&k=${key}&ts=${time}&ch=${channel}&sid=${uid}&at=${agentType}&ref=${documentReferrer}&aid=${aid}&loc=1&ct=1&cat=${cat}&scat=${scat}&ac=1&tg=${tags}&ctids=${catIds}&pts=${pagePublishTime}&auth=${author}&pos=${position}&iBeatField=${ibeatFields}&cid=${clientId(MSCSAuthDetails)}"},
triggers:{defaultPageview:{on:"visible",request:"pageview"}}},topmailru:{transport:{beacon:!1,xhrpost:!1,image:!0},vars:{url:"${sourceUrl}",referrer:"${documentReferrer}"},requests:{pageView:"${_domain}/counter?${_basicMessage};title=${title}",reachGoal:"${_domain}/tracker?${_basicMessage};title=${title};e=RG%3A${value}%2F${goal}",sendEvent:"${_domain}/tracker?${_basicMessage};e=CE%3A${value}%2F${category}%3B${action}%3B${label}",_domain:"https://top-fwz1.mail.ru",_basicMessage:"js=13;id=${id};u=${url};r=${referrer};s=${screenWidth}*${screenHeight};vp=${viewportWidth}*${viewportHeight};st=${start};gender=${gender};age=${age};pid=${pid};userid=${userid};device=${device};params=${params};_=${random}"},
triggers:{pageView:{on:"visible",request:"pageView"}}}};$ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$.infonline.triggers.pageview.iframePing=!0;$ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$.adobeanalytics_nativeConfig.triggers.pageLoad.iframePing=!0;$ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$.oewa.triggers.pageview.iframePing=!0;Object.assign($ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$,$ANALYTICS_IFRAME_TRANSPORT_CONFIG$$module$extensions$amp_analytics$0_1$iframe_transport_vendors$$);var $WHITELIST_EVENT_IN_SANDBOX$$module$extensions$amp_analytics$0_1$amp_analytics$$=["visible","hidden"];
function $AmpAnalytics$$module$extensions$amp_analytics$0_1$amp_analytics$$($$jscomp$super$this$jscomp$13_element$jscomp$256$$){$$jscomp$super$this$jscomp$13_element$jscomp$256$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$13_element$jscomp$256$$)||this;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$predefinedConfig_$=$ANALYTICS_CONFIG$$module$extensions$amp_analytics$0_1$vendors$$;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$consentPromise_$=Promise.resolve();$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$consentNotificationId_$=
null;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$isSandbox_$=!1;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$requests_$={};$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$config_$={};$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$remoteConfig_$={};$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$instrumentation_$=null;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$analyticsGroup_$=null;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$variableService_$=$variableServiceFor$$module$extensions$amp_analytics$0_1$variables$$($$jscomp$super$this$jscomp$13_element$jscomp$256$$.win);
$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$cryptoService_$=$Services$$module$src$services$cryptoFor$$($$jscomp$super$this$jscomp$13_element$jscomp$256$$.win);$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$iniPromise_$=null;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$iframeTransport_$=null;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$isInabox_$="inabox"==$getMode$$module$src$mode$$($$jscomp$super$this$jscomp$13_element$jscomp$256$$.win).runtime;$$jscomp$super$this$jscomp$13_element$jscomp$256$$.$maxResourceTimingReportingTime_$=
Date.now()+6E4;return $$jscomp$super$this$jscomp$13_element$jscomp$256$$}$$jscomp$inherits$$($AmpAnalytics$$module$extensions$amp_analytics$0_1$amp_analytics$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpAnalytics$$module$extensions$amp_analytics$0_1$amp_analytics$$.prototype;$JSCompiler_prototypeAlias$$.getLayoutPriority=function(){return this.$isInabox_$?0:1};$JSCompiler_prototypeAlias$$.isAlwaysFixed=function(){return!0};$JSCompiler_prototypeAlias$$.isLayoutSupported=function(){return!0};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$348$$=this;this.$isSandbox_$=this.element.hasAttribute("sandbox");this.element.setAttribute("aria-hidden","true");this.$consentNotificationId_$=this.element.getAttribute("data-consent-notification-id");null!=this.$consentNotificationId_$&&(this.$consentPromise_$=$Services$$module$src$services$userNotificationManagerForDoc$$(this.element).then(function($service$jscomp$23$$){return $service$jscomp$23$$.get($$jscomp$this$jscomp$348$$.$consentNotificationId_$)}));
"immediate"==this.element.getAttribute("trigger")&&$JSCompiler_StaticMethods_ensureInitialized_$$(this)};$JSCompiler_prototypeAlias$$.layoutCallback=function(){return $JSCompiler_StaticMethods_ensureInitialized_$$(this)};$JSCompiler_prototypeAlias$$.detachedCallback=function(){this.$analyticsGroup_$&&(this.$analyticsGroup_$.dispose(),this.$analyticsGroup_$=null);for(var $i$jscomp$216$$=0;$i$jscomp$216$$<this.$requests_$.length;$i$jscomp$216$$++)this.$requests_$[$i$jscomp$216$$].dispose(),delete this.$requests_$[$i$jscomp$216$$]};
$JSCompiler_prototypeAlias$$.resumeCallback=function(){this.$config_$.transport&&this.$config_$.transport.iframe&&$JSCompiler_StaticMethods_initIframeTransport_$$(this)};$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){if($JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($Services$$module$src$services$viewerForDoc$$(this.getAmpDoc())))return!1;this.$iframeTransport_$&&(this.$iframeTransport_$.detach(),this.$iframeTransport_$=null);return AMP.BaseElement.prototype.unlayoutCallback.call(this)};
function $JSCompiler_StaticMethods_ensureInitialized_$$($JSCompiler_StaticMethods_ensureInitialized_$self$$){if($JSCompiler_StaticMethods_ensureInitialized_$self$$.$iniPromise_$)return $JSCompiler_StaticMethods_ensureInitialized_$self$$.$iniPromise_$;$toggle$$module$src$style$$($JSCompiler_StaticMethods_ensureInitialized_$self$$.element,!1);$JSCompiler_StaticMethods_ensureInitialized_$self$$.$iniPromise_$=$Services$$module$src$services$viewerForDoc$$($JSCompiler_StaticMethods_ensureInitialized_$self$$.getAmpDoc()).whenFirstVisible().then(function(){return $Services$$module$src$services$timerFor$$($JSCompiler_StaticMethods_ensureInitialized_$self$$.win).promise(1)}).then(function(){return $JSCompiler_StaticMethods_ensureInitialized_$self$$.$consentPromise_$}).then($JSCompiler_StaticMethods_ensureInitialized_$self$$.$fetchRemoteConfig_$.bind($JSCompiler_StaticMethods_ensureInitialized_$self$$)).then(function(){return $getServicePromiseForDoc$$module$src$service$$($JSCompiler_StaticMethods_ensureInitialized_$self$$.getAmpDoc(),
"amp-analytics-instrumentation")}).then(function($instrumentation$$){$JSCompiler_StaticMethods_ensureInitialized_$self$$.$instrumentation_$=$instrumentation$$}).then($JSCompiler_StaticMethods_ensureInitialized_$self$$.$processConfigs_$.bind($JSCompiler_StaticMethods_ensureInitialized_$self$$)).then($JSCompiler_StaticMethods_ensureInitialized_$self$$.$registerTriggers_$.bind($JSCompiler_StaticMethods_ensureInitialized_$self$$));return $JSCompiler_StaticMethods_ensureInitialized_$self$$.$iniPromise_$}
$JSCompiler_prototypeAlias$$.$registerTriggers_$=function(){var $$jscomp$this$jscomp$350$$=this;if($JSCompiler_StaticMethods_hasOptedOut_$$(this))return this.$getName_$(),Promise.resolve();$JSCompiler_StaticMethods_generateRequests_$$(this);if(!this.$config_$.triggers){var $TAG$139_promises$jscomp$12$$=this.$getName_$();this.user().error($TAG$139_promises$jscomp$12$$,"No triggers were found in the config. No analytics data will be sent.");return Promise.resolve()}$JSCompiler_StaticMethods_processExtraUrlParams_$$(this,
this.$config_$.extraUrlParams,this.$config_$.extraUrlParamsReplaceMap);this.$analyticsGroup_$=this.$instrumentation_$.createAnalyticsGroup(this.element);this.$config_$.transport&&this.$config_$.transport.iframe&&$JSCompiler_StaticMethods_initIframeTransport_$$(this);var $TAG$139_promises$jscomp$12$$=[],$$jscomp$loop$203$$={},$k$jscomp$27$$;for($k$jscomp$27$$ in this.$config_$.triggers){if($hasOwn$$module$src$utils$object$$(this.$config_$.triggers,$k$jscomp$27$$)){$$jscomp$loop$203$$.trigger=this.$config_$.triggers[$k$jscomp$27$$];
$$jscomp$loop$203$$.expansionOptions=$JSCompiler_StaticMethods_expansionOptions_$$(this,{},$$jscomp$loop$203$$.trigger,void 0,!0);var $TAG$140$$=this.$getName_$();if(!$$jscomp$loop$203$$.trigger){this.user().error($TAG$140$$,"Trigger should be an object: ",$k$jscomp$27$$);continue}if(!$$jscomp$loop$203$$.trigger.on||!$$jscomp$loop$203$$.trigger.request){this.user().error($TAG$140$$,'"on" and "request" attributes are required for data to be collected.');continue}if(this.$isSandbox_$){var $eventType$jscomp$46$$=
$$jscomp$loop$203$$.trigger.on;if($isEnumValue$$module$src$types$$($AnalyticsEventType$$module$extensions$amp_analytics$0_1$events$$,$eventType$jscomp$46$$)&&!$WHITELIST_EVENT_IN_SANDBOX$$module$extensions$amp_analytics$0_1$amp_analytics$$.includes($eventType$jscomp$46$$)){this.user().error($TAG$140$$,$eventType$jscomp$46$$+"is not supported for amp-analytics in scope");continue}}$JSCompiler_StaticMethods_processExtraUrlParams_$$(this,$$jscomp$loop$203$$.trigger.extraUrlParams,this.$config_$.extraUrlParamsReplaceMap);
$TAG$139_promises$jscomp$12$$.push($JSCompiler_StaticMethods_isSampledIn_$$(this,$$jscomp$loop$203$$.trigger).then(function($TAG$139_promises$jscomp$12$$){return function($$jscomp$loop$203$$){if($$jscomp$loop$203$$)if($$jscomp$this$jscomp$350$$.$isSandbox_$)$$jscomp$this$jscomp$350$$.element.parentElement&&($TAG$139_promises$jscomp$12$$.trigger.selector=$$jscomp$this$jscomp$350$$.element.parentElement.tagName,$TAG$139_promises$jscomp$12$$.trigger.selectionMethod="closest",$JSCompiler_StaticMethods_addTriggerNoInline_$$($$jscomp$this$jscomp$350$$,
$TAG$139_promises$jscomp$12$$.trigger));else{if($TAG$139_promises$jscomp$12$$.trigger.selector)return $$jscomp$this$jscomp$350$$.$variableService_$.expandTemplate($TAG$139_promises$jscomp$12$$.trigger.selector,$TAG$139_promises$jscomp$12$$.expansionOptions).then(function($$jscomp$loop$203$$){$TAG$139_promises$jscomp$12$$.trigger.selector=$$jscomp$loop$203$$;$JSCompiler_StaticMethods_addTriggerNoInline_$$($$jscomp$this$jscomp$350$$,$TAG$139_promises$jscomp$12$$.trigger)});$JSCompiler_StaticMethods_addTriggerNoInline_$$($$jscomp$this$jscomp$350$$,
$TAG$139_promises$jscomp$12$$.trigger)}}}($$jscomp$loop$203$$)))}$$jscomp$loop$203$$={trigger:$$jscomp$loop$203$$.trigger,expansionOptions:$$jscomp$loop$203$$.expansionOptions}}return Promise.all($TAG$139_promises$jscomp$12$$)};
function $JSCompiler_StaticMethods_initIframeTransport_$$($JSCompiler_StaticMethods_initIframeTransport_$self$$){if(!$JSCompiler_StaticMethods_initIframeTransport_$self$$.$iframeTransport_$){$JSCompiler_StaticMethods_initIframeTransport_$self$$.preload($getIframeTransportScriptUrl$$module$extensions$amp_analytics$0_1$iframe_transport$$($JSCompiler_StaticMethods_initIframeTransport_$self$$.getAmpDoc().win),"script");var $ampAdResourceId$$=$JSCompiler_StaticMethods_initIframeTransport_$self$$.assertAmpAdResourceId();
$JSCompiler_StaticMethods_initIframeTransport_$self$$.$iframeTransport_$=new $IframeTransport$$module$extensions$amp_analytics$0_1$iframe_transport$$($JSCompiler_StaticMethods_initIframeTransport_$self$$.$isInabox_$?$JSCompiler_StaticMethods_initIframeTransport_$self$$.win:$JSCompiler_StaticMethods_initIframeTransport_$self$$.getAmpDoc().win,$JSCompiler_StaticMethods_initIframeTransport_$self$$.element.getAttribute("type"),$JSCompiler_StaticMethods_initIframeTransport_$self$$.$config_$.transport,
$ampAdResourceId$$)}}$JSCompiler_prototypeAlias$$.preload=function($url$jscomp$148$$,$opt_preloadAs$jscomp$2$$){this.preconnect.preload($url$jscomp$148$$,$opt_preloadAs$jscomp$2$$)};$JSCompiler_prototypeAlias$$.assertAmpAdResourceId=function(){return $user$$module$src$log$$().assertString($getAmpAdResourceId$$module$src$ad_helper$$(this.element,$getTopWindow$$module$src$service$$(this.win)),this.$getName_$()+": No friendly amp-ad ancestor element was found for amp-analytics tag with iframe transport.")};
function $JSCompiler_StaticMethods_addTriggerNoInline_$$($JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$,$config$jscomp$34$$){try{$JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$.$analyticsGroup_$.addTrigger($config$jscomp$34$$,$JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$.$handleEvent_$.bind($JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$,$config$jscomp$34$$))}catch($e$jscomp$136$$){$JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$=
$JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$.$getName_$(),$rethrowAsync$$module$src$log$$($JSCompiler_StaticMethods_addTriggerNoInline_$self_TAG$jscomp$5$$,'Failed to process trigger "'+$config$jscomp$34$$.on+'"',$e$jscomp$136$$)}}
function $JSCompiler_StaticMethods_processExtraUrlParams_$$($JSCompiler_StaticMethods_processExtraUrlParams_$self$$,$TAG$jscomp$6_params$jscomp$23$$,$replaceMap$$){if($TAG$jscomp$6_params$jscomp$23$$&&$replaceMap$$){var $count$jscomp$12$$=0,$replaceMapKey$$;for($replaceMapKey$$ in $replaceMap$$){if(16<++$count$jscomp$12$$){$TAG$jscomp$6_params$jscomp$23$$=$JSCompiler_StaticMethods_processExtraUrlParams_$self$$.$getName_$();$JSCompiler_StaticMethods_processExtraUrlParams_$self$$.user().error($TAG$jscomp$6_params$jscomp$23$$,
"More than 16 extraUrlParamsReplaceMap rules aren't allowed; Skipping the rest");break}for(var $extraUrlParamsKey$$ in $TAG$jscomp$6_params$jscomp$23$$){var $newkey$$=$extraUrlParamsKey$$.replace($replaceMapKey$$,$replaceMap$$[$replaceMapKey$$]);if($extraUrlParamsKey$$!=$newkey$$){var $value$jscomp$141$$=$TAG$jscomp$6_params$jscomp$23$$[$extraUrlParamsKey$$];delete $TAG$jscomp$6_params$jscomp$23$$[$extraUrlParamsKey$$];$TAG$jscomp$6_params$jscomp$23$$[$newkey$$]=$value$jscomp$141$$}}}}}
$JSCompiler_prototypeAlias$$.$processConfigs_$=function(){var $$jscomp$this$jscomp$351$$=this,$configRewriterUrl$$=($JSCompiler_StaticMethods_getTypeConfig_$$(this).configRewriter||{}).url,$config$jscomp$35$$=$dict$$module$src$utils$object$$({}),$inlineConfig$$=this.getInlineConfigNoInline();$JSCompiler_StaticMethods_validateTransport_$$(this,$inlineConfig$$);$JSCompiler_StaticMethods_mergeObjects_$$(this,$inlineConfig$$,$config$jscomp$35$$);$JSCompiler_StaticMethods_mergeObjects_$$(this,this.$remoteConfig_$,
$config$jscomp$35$$);if(!$configRewriterUrl$$||this.$isSandbox_$)return this.$config_$=$JSCompiler_StaticMethods_mergeConfigs_$$(this,$config$jscomp$35$$),Promise.resolve();$assertHttpsUrl$$module$src$url$$($configRewriterUrl$$,this.element);var $TAG$jscomp$7$$=this.$getName_$(),$fetchConfig$$={method:"POST",body:$config$jscomp$35$$,requireAmpResponseSourceOrigin:!1};this.element.hasAttribute("data-credentials")&&($fetchConfig$$.credentials=this.element.getAttribute("data-credentials"));var $ampdoc$jscomp$115$$=
this.getAmpDoc();return $Services$$module$src$services$urlReplacementsForDoc$$(this.element).expandUrlAsync($configRewriterUrl$$).then(function($$jscomp$this$jscomp$351$$){return $Services$$module$src$services$xhrFor$$($ampdoc$jscomp$115$$.win).fetchJson($$jscomp$this$jscomp$351$$,$fetchConfig$$)}).then(function($$jscomp$this$jscomp$351$$){return $$jscomp$this$jscomp$351$$.json()}).then(function($configRewriterUrl$$){$$jscomp$this$jscomp$351$$.$config_$=$JSCompiler_StaticMethods_mergeConfigs_$$($$jscomp$this$jscomp$351$$,
$configRewriterUrl$$)},function($config$jscomp$35$$){$$jscomp$this$jscomp$351$$.user().error($TAG$jscomp$7$$,"Error rewriting configuration: ",$configRewriterUrl$$,$config$jscomp$35$$)})};
$JSCompiler_prototypeAlias$$.$fetchRemoteConfig_$=function(){var $$jscomp$this$jscomp$352$$=this,$remoteConfigUrl$$=this.element.getAttribute("config");if(!$remoteConfigUrl$$||this.$isSandbox_$)return Promise.resolve();$assertHttpsUrl$$module$src$url$$($remoteConfigUrl$$,this.element);var $TAG$jscomp$8$$=this.$getName_$(),$fetchConfig$jscomp$1$$={requireAmpResponseSourceOrigin:!1};this.element.hasAttribute("data-credentials")&&($fetchConfig$jscomp$1$$.credentials=this.element.getAttribute("data-credentials"));
var $ampdoc$jscomp$116$$=this.getAmpDoc();return $Services$$module$src$services$urlReplacementsForDoc$$(this.element).expandUrlAsync($remoteConfigUrl$$).then(function($$jscomp$this$jscomp$352$$){$remoteConfigUrl$$=$$jscomp$this$jscomp$352$$;return $Services$$module$src$services$xhrFor$$($ampdoc$jscomp$116$$.win).fetchJson($remoteConfigUrl$$,$fetchConfig$jscomp$1$$)}).then(function($$jscomp$this$jscomp$352$$){return $$jscomp$this$jscomp$352$$.json()}).then(function($remoteConfigUrl$$){$$jscomp$this$jscomp$352$$.$remoteConfig_$=
$remoteConfigUrl$$},function($fetchConfig$jscomp$1$$){$$jscomp$this$jscomp$352$$.user().error($TAG$jscomp$8$$,"Error loading remote config: ",$remoteConfigUrl$$,$fetchConfig$jscomp$1$$)})};
function $JSCompiler_StaticMethods_mergeConfigs_$$($JSCompiler_StaticMethods_mergeConfigs_$self$$,$rewrittenConfig$$){var $config$jscomp$36$$=$dict$$module$src$utils$object$$({vars:{requestCount:0}}),$defaultConfig$$=$JSCompiler_StaticMethods_mergeConfigs_$self$$.$predefinedConfig_$["default"]||{};$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeConfigs_$self$$,$expandConfigRequest$$module$extensions$amp_analytics$0_1$requests$$($defaultConfig$$),$config$jscomp$36$$);$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeConfigs_$self$$,
$expandConfigRequest$$module$extensions$amp_analytics$0_1$requests$$($JSCompiler_StaticMethods_getTypeConfig_$$($JSCompiler_StaticMethods_mergeConfigs_$self$$)),$config$jscomp$36$$,!0);$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeConfigs_$self$$,$expandConfigRequest$$module$extensions$amp_analytics$0_1$requests$$($rewrittenConfig$$),$config$jscomp$36$$);return $config$jscomp$36$$}
function $JSCompiler_StaticMethods_getTypeConfig_$$($JSCompiler_StaticMethods_getTypeConfig_$self$$){var $type$jscomp$147$$=$JSCompiler_StaticMethods_getTypeConfig_$self$$.element.getAttribute("type");if("googleanalytics-alpha"==$type$jscomp$147$$){var $TAG$jscomp$9$$=$JSCompiler_StaticMethods_getTypeConfig_$self$$.$getName_$();$user$$module$src$log$$().warn($TAG$jscomp$9$$,'"googleanalytics-alpha" configuration is not planned to be supported long-term. Avoid use of this value for amp-analytics config attribute unless you plan to migrate before deprecation')}return $JSCompiler_StaticMethods_getTypeConfig_$self$$.$predefinedConfig_$[$type$jscomp$147$$]||
{}}
function $JSCompiler_StaticMethods_validateTransport_$$($JSCompiler_StaticMethods_validateTransport_$self$$,$inlineConfig$jscomp$1$$){var $TAG$jscomp$10_type$jscomp$148$$=$JSCompiler_StaticMethods_validateTransport_$self$$.element.getAttribute("type");$JSCompiler_StaticMethods_validateTransport_$self$$.$predefinedConfig_$[$TAG$jscomp$10_type$jscomp$148$$]&&($inlineConfig$jscomp$1$$.transport||$JSCompiler_StaticMethods_validateTransport_$self$$.$remoteConfig_$.transport)&&($TAG$jscomp$10_type$jscomp$148$$=$JSCompiler_StaticMethods_validateTransport_$self$$.$getName_$(),
$JSCompiler_StaticMethods_validateTransport_$self$$.user().error($TAG$jscomp$10_type$jscomp$148$$,"Inline or remote config should not overwrite vendor transport settings"));$inlineConfig$jscomp$1$$.transport&&$inlineConfig$jscomp$1$$.transport.iframe&&($JSCompiler_StaticMethods_validateTransport_$self$$.user().error("amp-analytics","Inline configs are not allowed to specify transport iframe"),$inlineConfig$jscomp$1$$.transport.iframe=void 0);$JSCompiler_StaticMethods_validateTransport_$self$$.$remoteConfig_$.transport&&
$JSCompiler_StaticMethods_validateTransport_$self$$.$remoteConfig_$.transport.iframe&&($JSCompiler_StaticMethods_validateTransport_$self$$.user().error("amp-analytics","Remote configs are not allowed to specify transport iframe"),$JSCompiler_StaticMethods_validateTransport_$self$$.$remoteConfig_$.transport.iframe=void 0)}
$JSCompiler_prototypeAlias$$.getInlineConfigNoInline=function(){if(this.element.CONFIG)return this.element.CONFIG;var $inlineConfig$jscomp$2$$={},$TAG$jscomp$11$$=this.$getName_$();try{var $children$jscomp$3$$=this.element.children;1==$children$jscomp$3$$.length?$isJsonScriptTag$$module$src$dom$$($children$jscomp$3$$[0])?$inlineConfig$jscomp$2$$=$parseJson$$module$src$json$$($children$jscomp$3$$[0].textContent):this.user().error($TAG$jscomp$11$$,'The analytics config should be put in a <script> tag with type="application/json"'):
1<$children$jscomp$3$$.length&&this.user().error($TAG$jscomp$11$$,"The tag should contain only one <script> child.")}catch($er$$){this.user().error($TAG$jscomp$11$$,"Analytics config could not be parsed. Is it in a valid JSON format?",$er$$)}return $inlineConfig$jscomp$2$$};
function $JSCompiler_StaticMethods_hasOptedOut_$$($JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$){if(!$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$.$config_$.optout)return!1;var $props$jscomp$6$$=$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$.$config_$.optout.split(".");$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$=$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$.win;for(var $i$jscomp$217$$=0;$i$jscomp$217$$<$props$jscomp$6$$.length;$i$jscomp$217$$++){if(!$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$)return!1;
$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$=$JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$[$props$jscomp$6$$[$i$jscomp$217$$]]}return $JSCompiler_StaticMethods_hasOptedOut_$self_k$jscomp$28$$()}
function $JSCompiler_StaticMethods_generateRequests_$$($JSCompiler_StaticMethods_generateRequests_$self$$){if(!$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$||!$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests){var $TAG$jscomp$12_k$142$$=$JSCompiler_StaticMethods_generateRequests_$self$$.$getName_$();$JSCompiler_StaticMethods_generateRequests_$self$$.user().error($TAG$jscomp$12_k$142$$,"No request strings defined. Analytics data will not be sent from this page.")}else if($JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests){for(var $k$jscomp$29_requests$jscomp$2$$ in $JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests)$hasOwn$$module$src$utils$object$$($JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests,
$k$jscomp$29_requests$jscomp$2$$)&&!$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$k$jscomp$29_requests$jscomp$2$$].baseUrl&&($JSCompiler_StaticMethods_generateRequests_$self$$.user().error("amp-analytics","request must have a baseUrl"),delete $JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$k$jscomp$29_requests$jscomp$2$$]);for(var $k$141$$ in $JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests)$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$k$141$$].baseUrl=
$expandTemplate$$module$src$string$$($JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$k$141$$].baseUrl,function($TAG$jscomp$12_k$142$$){var $k$jscomp$29_requests$jscomp$2$$=$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$TAG$jscomp$12_k$142$$];return $k$jscomp$29_requests$jscomp$2$$&&$k$jscomp$29_requests$jscomp$2$$.baseUrl||"${"+$TAG$jscomp$12_k$142$$+"}"});$k$jscomp$29_requests$jscomp$2$$={};for($TAG$jscomp$12_k$142$$ in $JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests)$hasOwn$$module$src$utils$object$$($JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests,
$TAG$jscomp$12_k$142$$)&&($k$jscomp$29_requests$jscomp$2$$[$TAG$jscomp$12_k$142$$]=new $RequestHandler$$module$extensions$amp_analytics$0_1$requests$$($JSCompiler_StaticMethods_generateRequests_$self$$.element,$JSCompiler_StaticMethods_generateRequests_$self$$.$config_$.requests[$TAG$jscomp$12_k$142$$],$JSCompiler_StaticMethods_generateRequests_$self$$.preconnect,$JSCompiler_StaticMethods_generateRequests_$self$$.$sendRequest_$.bind($JSCompiler_StaticMethods_generateRequests_$self$$),$JSCompiler_StaticMethods_generateRequests_$self$$.$isSandbox_$));
$JSCompiler_StaticMethods_generateRequests_$self$$.$requests_$=$k$jscomp$29_requests$jscomp$2$$}}
$JSCompiler_prototypeAlias$$.$handleEvent_$=function($trigger$jscomp$1$$,$event$jscomp$71$$){for(var $requests$jscomp$3$$=$isArray$$module$src$types$$($trigger$jscomp$1$$.request)?$trigger$jscomp$1$$.request:[$trigger$jscomp$1$$.request],$r$jscomp$24$$=0;$r$jscomp$24$$<$requests$jscomp$3$$.length;$r$jscomp$24$$++)$JSCompiler_StaticMethods_handleRequestForEvent_$$(this,$requests$jscomp$3$$[$r$jscomp$24$$],$trigger$jscomp$1$$,$event$jscomp$71$$)};
function $JSCompiler_StaticMethods_handleRequestForEvent_$$($JSCompiler_StaticMethods_handleRequestForEvent_$self$$,$TAG$144_requestName$jscomp$2$$,$trigger$jscomp$2$$,$event$jscomp$72$$){if(!$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.element.ownerDocument.defaultView){var $TAG$jscomp$13$$=$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$getName_$();$dev$$module$src$log$$().warn($TAG$jscomp$13$$,"request against destroyed embed: ",$trigger$jscomp$2$$.on)}var $request$jscomp$21$$=
$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$requests_$[$TAG$144_requestName$jscomp$2$$];$request$jscomp$21$$?$JSCompiler_StaticMethods_checkTriggerEnabled_$$($JSCompiler_StaticMethods_handleRequestForEvent_$self$$,$trigger$jscomp$2$$,$event$jscomp$72$$).then(function($TAG$144_requestName$jscomp$2$$){if($TAG$144_requestName$jscomp$2$$){$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$config_$.vars.requestCount++;var $TAG$jscomp$13$$=$JSCompiler_StaticMethods_expansionOptions_$$($JSCompiler_StaticMethods_handleRequestForEvent_$self$$,
$event$jscomp$72$$,$trigger$jscomp$2$$),$enabled$$={},$JSCompiler_resourceTimingSpec$jscomp$inline_3016$$=$trigger$jscomp$2$$.resourceTimingSpec;$JSCompiler_resourceTimingSpec$jscomp$inline_3016$$&&!$JSCompiler_resourceTimingSpec$jscomp$inline_3016$$.done&&Date.now()<$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$maxResourceTimingReportingTime_$&&($enabled$$.RESOURCE_TIMING=$serializeResourceTiming$$module$extensions$amp_analytics$0_1$resource_timing$$($JSCompiler_StaticMethods_handleRequestForEvent_$self$$.win,
$JSCompiler_resourceTimingSpec$jscomp$inline_3016$$),$TAG$jscomp$13$$.vars.resourceTiming="RESOURCE_TIMING");$JSCompiler_StaticMethods_RequestHandler$$module$extensions$amp_analytics$0_1$requests_prototype$send$$($request$jscomp$21$$,$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$config_$.extraUrlParams,$trigger$jscomp$2$$,$TAG$jscomp$13$$,$enabled$$)}}):($TAG$144_requestName$jscomp$2$$=$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.$getName_$(),$JSCompiler_StaticMethods_handleRequestForEvent_$self$$.user().error($TAG$144_requestName$jscomp$2$$,
"Ignoring event. Request string not found: ",$trigger$jscomp$2$$.request))}
function $JSCompiler_StaticMethods_isSampledIn_$$($JSCompiler_StaticMethods_isSampledIn_$self$$,$expansionOptions$jscomp$2_trigger$jscomp$5$$){var $spec$jscomp$17$$=$expansionOptions$jscomp$2_trigger$jscomp$5$$.sampleSpec,$resolve$jscomp$53$$=Promise.resolve(!0),$TAG$jscomp$14$$=$JSCompiler_StaticMethods_isSampledIn_$self$$.$getName_$();if(!$spec$jscomp$17$$)return $resolve$jscomp$53$$;var $sampleOn$$=$spec$jscomp$17$$.sampleOn;if(!$sampleOn$$)return $JSCompiler_StaticMethods_isSampledIn_$self$$.user().error($TAG$jscomp$14$$,
"Invalid sampleOn value."),$resolve$jscomp$53$$;var $threshold$jscomp$4$$=parseFloat($spec$jscomp$17$$.threshold);if(0<=$threshold$jscomp$4$$&&100>=$threshold$jscomp$4$$)return $expansionOptions$jscomp$2_trigger$jscomp$5$$=$JSCompiler_StaticMethods_expansionOptions_$$($JSCompiler_StaticMethods_isSampledIn_$self$$,{},$expansionOptions$jscomp$2_trigger$jscomp$5$$),$JSCompiler_StaticMethods_expandTemplateWithUrlParams_$$($JSCompiler_StaticMethods_isSampledIn_$self$$,$sampleOn$$,$expansionOptions$jscomp$2_trigger$jscomp$5$$).then(function($expansionOptions$jscomp$2_trigger$jscomp$5$$){return $JSCompiler_StaticMethods_isSampledIn_$self$$.$cryptoService_$.uniform($expansionOptions$jscomp$2_trigger$jscomp$5$$)}).then(function($JSCompiler_StaticMethods_isSampledIn_$self$$){return 100*
$JSCompiler_StaticMethods_isSampledIn_$self$$<$threshold$jscomp$4$$});$user$$module$src$log$$().error($TAG$jscomp$14$$,"Invalid threshold for sampling.");return $resolve$jscomp$53$$}
function $JSCompiler_StaticMethods_checkTriggerEnabled_$$($JSCompiler_StaticMethods_checkTriggerEnabled_$self$$,$trigger$jscomp$6$$,$event$jscomp$74_expansionOptions$jscomp$3$$){$event$jscomp$74_expansionOptions$jscomp$3$$=$JSCompiler_StaticMethods_expansionOptions_$$($JSCompiler_StaticMethods_checkTriggerEnabled_$self$$,$event$jscomp$74_expansionOptions$jscomp$3$$,$trigger$jscomp$6$$);var $enabledOnTagLevel$$=$JSCompiler_StaticMethods_checkSpecEnabled_$$($JSCompiler_StaticMethods_checkTriggerEnabled_$self$$,
$JSCompiler_StaticMethods_checkTriggerEnabled_$self$$.$config_$.enabled,$event$jscomp$74_expansionOptions$jscomp$3$$),$enabledOnTriggerLevel$$=$JSCompiler_StaticMethods_checkSpecEnabled_$$($JSCompiler_StaticMethods_checkTriggerEnabled_$self$$,$trigger$jscomp$6$$.enabled,$event$jscomp$74_expansionOptions$jscomp$3$$);return Promise.all([$enabledOnTagLevel$$,$enabledOnTriggerLevel$$]).then(function($JSCompiler_StaticMethods_checkTriggerEnabled_$self$$){return $JSCompiler_StaticMethods_checkTriggerEnabled_$self$$[0]&&
$JSCompiler_StaticMethods_checkTriggerEnabled_$self$$[1]})}
function $JSCompiler_StaticMethods_checkSpecEnabled_$$($JSCompiler_StaticMethods_checkSpecEnabled_$self$$,$spec$jscomp$18$$,$expansionOptions$jscomp$4$$){return void 0===$spec$jscomp$18$$?Promise.resolve(!0):$JSCompiler_StaticMethods_expandTemplateWithUrlParams_$$($JSCompiler_StaticMethods_checkSpecEnabled_$self$$,$spec$jscomp$18$$,$expansionOptions$jscomp$4$$).then(function($JSCompiler_StaticMethods_checkSpecEnabled_$self$$){return""!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$&&"0"!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$&&
"false"!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$&&"null"!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$&&"NaN"!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$&&"undefined"!==$JSCompiler_StaticMethods_checkSpecEnabled_$self$$})}
function $JSCompiler_StaticMethods_expandTemplateWithUrlParams_$$($JSCompiler_StaticMethods_expandTemplateWithUrlParams_$self$$,$spec$jscomp$19$$,$expansionOptions$jscomp$5$$){return $JSCompiler_StaticMethods_expandTemplateWithUrlParams_$self$$.$variableService_$.expandTemplate($spec$jscomp$19$$,$expansionOptions$jscomp$5$$).then(function($spec$jscomp$19$$){return $Services$$module$src$services$urlReplacementsForDoc$$($JSCompiler_StaticMethods_expandTemplateWithUrlParams_$self$$.element).expandUrlAsync($spec$jscomp$19$$)})}
$JSCompiler_prototypeAlias$$.$sendRequest_$=function($TAG$jscomp$15_request$jscomp$23$$,$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$){if($TAG$jscomp$15_request$jscomp$23$$)if($JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$.iframePing)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("visible"==$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$.on,"iframePing is only available on page view requests."),$sendRequestUsingIframe$$module$extensions$amp_analytics$0_1$transport$$(this.win,
$TAG$jscomp$15_request$jscomp$23$$);else if(this.$config_$.transport&&this.$config_$.transport.iframe)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.$iframeTransport_$,"iframe transport was inadvertently deleted"),this.$iframeTransport_$.sendRequest($TAG$jscomp$15_request$jscomp$23$$);else{var $JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$=this.win;$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$=this.$config_$.transport||{};$assertHttpsUrl$$module$src$url$$($TAG$jscomp$15_request$jscomp$23$$,
"amp-analytics request");$checkCorsUrl$$module$src$url$$($TAG$jscomp$15_request$jscomp$23$$);$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$.beacon&&$JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$.navigator.sendBeacon&&$JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$.navigator.sendBeacon($TAG$jscomp$15_request$jscomp$23$$,"")||$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$.xhrpost&&$Transport$$module$extensions$amp_analytics$0_1$transport$sendRequestUsingXhr$$($JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$,
$TAG$jscomp$15_request$jscomp$23$$)||(($JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$=$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$.image)?$Transport$$module$extensions$amp_analytics$0_1$transport$sendRequestUsingImage$$($TAG$jscomp$15_request$jscomp$23$$,"object"==typeof $JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$&&$JSCompiler_image$jscomp$inline_1550_JSCompiler_win$jscomp$inline_1547$$.suppressWarnings):$user$$module$src$log$$().warn("amp-analytics.Transport",
"Failed to send request",$TAG$jscomp$15_request$jscomp$23$$,$JSCompiler_transportOptions$jscomp$inline_1549_trigger$jscomp$7$$))}else $TAG$jscomp$15_request$jscomp$23$$=this.$getName_$(),this.user().error($TAG$jscomp$15_request$jscomp$23$$,"Request not sent. Contents empty.")};$JSCompiler_prototypeAlias$$.$getName_$=function(){return"AmpAnalytics "+(this.element.getAttribute("id")||"<unknown id>")};
function $JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeObjects_$self$$,$from$jscomp$3$$,$to$jscomp$2$$,$opt_predefinedConfig$$){null!==$to$jscomp$2$$&&$to$jscomp$2$$||($to$jscomp$2$$={});$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($opt_predefinedConfig$$||!$from$jscomp$3$$||!$from$jscomp$3$$.optout||"_gaUserPrefs.ioo"==$from$jscomp$3$$.optout,"optout property is only available to vendor config.");for(var $property$jscomp$15$$ in $from$jscomp$3$$)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($opt_predefinedConfig$$||
"iframePing"!=$property$jscomp$15$$,"iframePing config is only available to vendor config."),$hasOwn$$module$src$utils$object$$($from$jscomp$3$$,$property$jscomp$15$$)&&($isArray$$module$src$types$$($from$jscomp$3$$[$property$jscomp$15$$])?($isArray$$module$src$types$$($to$jscomp$2$$[$property$jscomp$15$$])||($to$jscomp$2$$[$property$jscomp$15$$]=[]),$to$jscomp$2$$[$property$jscomp$15$$]=$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeObjects_$self$$,$from$jscomp$3$$[$property$jscomp$15$$],
$to$jscomp$2$$[$property$jscomp$15$$],$opt_predefinedConfig$$)):$isObject$$module$src$types$$($from$jscomp$3$$[$property$jscomp$15$$])?($isObject$$module$src$types$$($to$jscomp$2$$[$property$jscomp$15$$])||($to$jscomp$2$$[$property$jscomp$15$$]={}),$to$jscomp$2$$[$property$jscomp$15$$]=$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_mergeObjects_$self$$,$from$jscomp$3$$[$property$jscomp$15$$],$to$jscomp$2$$[$property$jscomp$15$$],$opt_predefinedConfig$$)):$to$jscomp$2$$[$property$jscomp$15$$]=
$from$jscomp$3$$[$property$jscomp$15$$]);return $to$jscomp$2$$}
function $JSCompiler_StaticMethods_expansionOptions_$$($JSCompiler_StaticMethods_expansionOptions_$self$$,$source1$$,$source2$$,$opt_iterations$jscomp$1$$,$opt_noEncode$jscomp$1$$){var $vars$jscomp$15$$=$map$$module$src$utils$object$$();$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_expansionOptions_$self$$,$JSCompiler_StaticMethods_expansionOptions_$self$$.$config_$.vars,$vars$jscomp$15$$);$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_expansionOptions_$self$$,$source2$$.vars,
$vars$jscomp$15$$);$JSCompiler_StaticMethods_mergeObjects_$$($JSCompiler_StaticMethods_expansionOptions_$self$$,$source1$$.vars,$vars$jscomp$15$$);return new $ExpansionOptions$$module$extensions$amp_analytics$0_1$variables$$($vars$jscomp$15$$,$opt_iterations$jscomp$1$$,$opt_noEncode$jscomp$1$$)}
(function($AMP$jscomp$17$$){$AMP$jscomp$17$$.registerServiceForDoc("amp-analytics-instrumentation",$InstrumentationService$$module$extensions$amp_analytics$0_1$instrumentation$$);$AMP$jscomp$17$$.registerServiceForDoc("activity",$Activity$$module$extensions$amp_analytics$0_1$activity_impl$$);$registerServiceBuilder$$module$src$service$$($AMP$jscomp$17$$.win,"amp-analytics-variables",$VariableService$$module$extensions$amp_analytics$0_1$variables$$);$AMP$jscomp$17$$.registerElement("amp-analytics",
$AmpAnalytics$$module$extensions$amp_analytics$0_1$amp_analytics$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-analytics-0.1-amp-analytics.js.map

