{
"version":3,
"file":"/./sample/out/extensions-amp-position-observer-0.1-amp-position-observer.js",
"lineCount":26,
"mappings":"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",
"sources":["/extensions/amp-position-observer/0.1/amp-position-observer.js","/src/service/position-observer/position-observer-impl.js","/src/service.js","/src/log.js","/src/service/position-observer/position-observer-worker.js","/src/event-helper.js","/src/action-constants.js","/src/layout-rect.js","/src/layout.js"],
"names":["constructor","AmpVisibilityObserver","element","action_","isVisible_","positionObserver_","topRatio_","bottomRatio_","topMarginExpr_","bottomMarginExpr_","resolvedTopMargin_","resolvedBottomMargin_","viewportRect_","targetId_","initialViewportHeight_","scrollProgress_","$jscomp.inherits","buildCallback","Services$$module$src$services.viewerForDoc","viewer","getAmpDoc","whenFirstVisible","then","init_","bind","parseAttributes_","Services$$module$src$services.actionServiceForDoc","maybeInstallPositionObserver_","installPositionObserverServiceForDoc","getServiceForDoc","whenReady","scene","discoverScene_","user","assertElement","getElementById","parentNode","getBody","win","document","documentElement","observe","HIGH","positionChanged_","triggerScroll_","event","createCustomEvent","percent","trigger","name","LOW","entry","wasVisible","prevViewportHeight","height","adjustForSmallViewportResize_","viewportRect","viewportHeightChangeDelta","resizeOffset","RESIZE_THRESHOLD","Math","abs","layoutRectLtwh","left","top","width","recalculateMargins_","validateAndResolveMargin_","adjViewportRect","rect","applyMargins_","relPos","positionRect","layoutRectsRelativePos","updateVisibility_","relativePos","BOTTOM","triggerExit_","triggerEnter_","updateScrollProgress_","topOffset","adjustedViewportRect","INSIDE","ratioToUse","TOP","offset","bottom","ratios","getAttribute","topBottom","trim","split","validateAndResolveRatio_","margins","val","assertLength","parseLength","unit","getLengthUnits","num","getLengthNumeral","assert","parseFloat","AMP","registerElement","TAG"]
}
