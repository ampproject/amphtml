(self.AMP=self.AMP||[]).push({n:"extensions-amp-ooyala-player-0.1-amp-ooyala-player.js", v:"erwin", f:(function(){function $AmpOoyalaPlayer$$module$extensions$amp_ooyala_player$0_1$amp_ooyala_player$$($$jscomp$super$this$jscomp$65_element$jscomp$392$$){$$jscomp$super$this$jscomp$65_element$jscomp$392$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$65_element$jscomp$392$$)||this;$$jscomp$super$this$jscomp$65_element$jscomp$392$$.$iframe_$=null;$$jscomp$super$this$jscomp$65_element$jscomp$392$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$65_element$jscomp$392$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$65_element$jscomp$392$$.$unlistenMessage_$=
null;return $$jscomp$super$this$jscomp$65_element$jscomp$392$$}$$jscomp$inherits$$($AmpOoyalaPlayer$$module$extensions$amp_ooyala_player$0_1$amp_ooyala_player$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpOoyalaPlayer$$module$extensions$amp_ooyala_player$0_1$amp_ooyala_player$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$21$$){this.preconnect.url("https://player.ooyala.com",$opt_onLayout$jscomp$21$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $deferred$jscomp$43$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$43$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$43$$.resolve;$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$630$$=this,$embedCode$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-embedcode"),"The data-embedcode attribute is required for <amp-ooyala-player> %s",this.element),$pCode$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-pcode"),"The data-pcode attribute is required for <amp-ooyala-player> %s",this.element),$iframe$jscomp$60_playerId$jscomp$1$$=
$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-playerid"),"The data-playerid attribute is required for <amp-ooyala-player> %s",this.element),$loaded$jscomp$4_src$jscomp$56$$="https://player.ooyala.com/iframe.html?platform=html5-priority",$playerVersion$$=this.element.getAttribute("data-playerversion")||"";if("v4"==$playerVersion$$.toLowerCase()){var $loaded$jscomp$4_src$jscomp$56$$="https://player.ooyala.com/static/v4/sandbox/amp_iframe/skin-plugin/amp_iframe.html?pcode="+
encodeURIComponent($pCode$$),$configUrl$jscomp$1$$=this.element.getAttribute("data-config");$configUrl$jscomp$1$$&&($loaded$jscomp$4_src$jscomp$56$$+="&options[skin.config]="+encodeURIComponent($configUrl$jscomp$1$$))}$loaded$jscomp$4_src$jscomp$56$$+="&ec="+encodeURIComponent($embedCode$$)+"&pbid="+encodeURIComponent($iframe$jscomp$60_playerId$jscomp$1$$);$iframe$jscomp$60_playerId$jscomp$1$$=this.element.ownerDocument.createElement("iframe");this.applyFillContent($iframe$jscomp$60_playerId$jscomp$1$$,
!0);$iframe$jscomp$60_playerId$jscomp$1$$.setAttribute("frameborder","0");$iframe$jscomp$60_playerId$jscomp$1$$.setAttribute("allowfullscreen","true");$iframe$jscomp$60_playerId$jscomp$1$$.src=$loaded$jscomp$4_src$jscomp$56$$;this.$iframe_$=$iframe$jscomp$60_playerId$jscomp$1$$;this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",function($embedCode$$){$embedCode$$=$isObject$$module$src$types$$($embedCode$$.data)?$embedCode$$.data:$tryParseJson$$module$src$json$$($embedCode$$.data);
void 0!==$embedCode$$&&("playing"==$embedCode$$.data?$$jscomp$this$jscomp$630$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING):"paused"==$embedCode$$.data?$$jscomp$this$jscomp$630$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE):"muted"==$embedCode$$.data?$$jscomp$this$jscomp$630$$.element.dispatchCustomEvent("mute"):"unmuted"==$embedCode$$.data&&$$jscomp$this$jscomp$630$$.element.dispatchCustomEvent("unmute"))});this.element.appendChild(this.$iframe_$);
$loaded$jscomp$4_src$jscomp$56$$=this.loadPromise(this.$iframe_$).then(function(){$$jscomp$this$jscomp$630$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)});this.$playerReadyResolver_$($loaded$jscomp$4_src$jscomp$56$$);return $loaded$jscomp$4_src$jscomp$56$$};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$44$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$44$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$44$$.resolve;return!0};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$69$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$69$$)};
$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$12$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$12$$})};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$iframe_$&&this.pause()};
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$6$$){var $$jscomp$this$jscomp$631$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$631$$.$iframe_$&&$$jscomp$this$jscomp$631$$.$iframe_$.contentWindow&&$$jscomp$this$jscomp$631$$.$iframe_$.contentWindow.postMessage($command$jscomp$6$$,"*")})};$JSCompiler_prototypeAlias$$.play=function(){this.$sendCommand_$("play")};$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("pause")};
$JSCompiler_prototypeAlias$$.mute=function(){this.$sendCommand_$("mute")};$JSCompiler_prototypeAlias$$.unmute=function(){this.$sendCommand_$("unmute")};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};$JSCompiler_prototypeAlias$$.showControls=function(){};$JSCompiler_prototypeAlias$$.hideControls=function(){};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.fullscreenExit=function(){this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.isFullscreen=function(){return this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};
$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$70$$){$AMP$jscomp$70$$.registerElement("amp-ooyala-player",$AmpOoyalaPlayer$$module$extensions$amp_ooyala_player$0_1$amp_ooyala_player$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-ooyala-player-0.1-amp-ooyala-player.js.map

