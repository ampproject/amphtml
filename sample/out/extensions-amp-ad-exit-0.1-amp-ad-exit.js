(self.AMP=self.AMP||[]).push({n:"extensions-amp-ad-exit-0.1-amp-ad-exit.js", v:"erwin", f:(function(){function $listen$$module$src$3p_frame_messaging$$($element$jscomp$44$$,$listener$jscomp$47$$){return $internalListenImplementation$$module$src$event_helper_listen$$($element$jscomp$44$$,"message",$listener$jscomp$47$$,void 0)}function $Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$($name$jscomp$155$$,$type$jscomp$135$$){this.name=$name$jscomp$155$$;this.type=$type$jscomp$135$$}$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$.prototype.filter=function(){};
$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$.prototype.onLayoutMeasure=function(){};function $ClickLocationFilter$$module$extensions$amp_ad_exit$0_1$filters$click_location$$($name$jscomp$156$$,$spec$jscomp$4$$,$adExitElement$$){$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$.call(this,$name$jscomp$156$$,$spec$jscomp$4$$.type);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("clickLocation"==$spec$jscomp$4$$.type&&("undefined"===typeof $spec$jscomp$4$$.left||"number"===typeof $spec$jscomp$4$$.left)&&("undefined"===typeof $spec$jscomp$4$$.right||"number"===
typeof $spec$jscomp$4$$.right)&&("undefined"===typeof $spec$jscomp$4$$.top||"number"===typeof $spec$jscomp$4$$.top)&&("undefined"===typeof $spec$jscomp$4$$.bottom||"number"===typeof $spec$jscomp$4$$.bottom)&&("undefined"===typeof $spec$jscomp$4$$.relativeTo||"string"===typeof $spec$jscomp$4$$.relativeTo),"Invaid ClickLocation spec");this.G=$spec$jscomp$4$$.left||0;this.H=$spec$jscomp$4$$.right||0;this.I=$spec$jscomp$4$$.top||0;this.F=$spec$jscomp$4$$.bottom||0;this.C=$spec$jscomp$4$$.relativeTo;this.D=
$adExitElement$$;this.B={}}$$jscomp$inherits$$($ClickLocationFilter$$module$extensions$amp_ad_exit$0_1$filters$click_location$$,$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$);$ClickLocationFilter$$module$extensions$amp_ad_exit$0_1$filters$click_location$$.prototype.filter=function($event$jscomp$54$$){return $event$jscomp$54$$.clientX>=this.B.left&&$event$jscomp$54$$.clientX<=this.B.right&&$event$jscomp$54$$.clientY>=this.B.top&&$event$jscomp$54$$.clientY<=this.B.bottom?!0:!1};
$ClickLocationFilter$$module$extensions$amp_ad_exit$0_1$filters$click_location$$.prototype.onLayoutMeasure=function(){var $$jscomp$this$jscomp$265$$=this;this.D.getVsync().measure(function(){var $rect$jscomp$10_win$jscomp$246$$=$$jscomp$this$jscomp$265$$.D.win;if($$jscomp$this$jscomp$265$$.C){var $relativeElement$$=$rect$jscomp$10_win$jscomp$246$$.document.querySelector($$jscomp$this$jscomp$265$$.C);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($relativeElement$$,"relativeTo element "+
$$jscomp$this$jscomp$265$$.C+" not found.");$rect$jscomp$10_win$jscomp$246$$=$relativeElement$$.getBoundingClientRect();$$jscomp$this$jscomp$265$$.B.left=$rect$jscomp$10_win$jscomp$246$$.left;$$jscomp$this$jscomp$265$$.B.top=$rect$jscomp$10_win$jscomp$246$$.top;$$jscomp$this$jscomp$265$$.B.bottom=$rect$jscomp$10_win$jscomp$246$$.bottom;$$jscomp$this$jscomp$265$$.B.right=$rect$jscomp$10_win$jscomp$246$$.right}else $$jscomp$this$jscomp$265$$.B.left=0,$$jscomp$this$jscomp$265$$.B.top=0,$$jscomp$this$jscomp$265$$.B.bottom=
$rect$jscomp$10_win$jscomp$246$$.innerHeight,$$jscomp$this$jscomp$265$$.B.right=$rect$jscomp$10_win$jscomp$246$$.innerWidth;$$jscomp$this$jscomp$265$$.B.left+=$$jscomp$this$jscomp$265$$.G;$$jscomp$this$jscomp$265$$.B.top+=$$jscomp$this$jscomp$265$$.I;$$jscomp$this$jscomp$265$$.B.right-=$$jscomp$this$jscomp$265$$.H;$$jscomp$this$jscomp$265$$.B.bottom-=$$jscomp$this$jscomp$265$$.F})};function $ClickDelayFilter$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$($name$jscomp$157$$,$spec$jscomp$6$$,$win$jscomp$247$$){$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$.call(this,$name$jscomp$157$$,$spec$jscomp$6$$.type);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("clickDelay"==$spec$jscomp$6$$.type&&"number"==typeof $spec$jscomp$6$$.delay&&0<$spec$jscomp$6$$.delay,"Invalid ClickDelay spec");this.spec=$spec$jscomp$6$$;this.B=Date.now();$spec$jscomp$6$$.startTimingEvent&&
($win$jscomp$247$$.performance&&$win$jscomp$247$$.performance.timing?void 0==$win$jscomp$247$$.performance.timing[$spec$jscomp$6$$.startTimingEvent]?$dev$$module$src$log$$().warn("amp-ad-exit","Invalid performance timing event type "+$spec$jscomp$6$$.startTimingEvent+", falling back to now"):this.B=$win$jscomp$247$$.performance.timing[$spec$jscomp$6$$.startTimingEvent]:$dev$$module$src$log$$().warn("amp-ad-exit","Browser does not support performance timing, falling back to now"))}
$$jscomp$inherits$$($ClickDelayFilter$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$,$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$);$ClickDelayFilter$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$.prototype.filter=function(){return Date.now()-this.B>=this.spec.delay};function $makeClickDelaySpec$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$($startTimingEvent$$){return{type:"clickDelay",delay:1E3,startTimingEvent:$startTimingEvent$$}};function $InactiveElementFilter$$module$extensions$amp_ad_exit$0_1$filters$inactive_element$$($name$jscomp$158$$,$spec$jscomp$7$$){$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$.call(this,$name$jscomp$158$$,$spec$jscomp$7$$.type);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("inactiveElement"==$spec$jscomp$7$$.type&&"string"==typeof $spec$jscomp$7$$.selector,"Invalid InactiveElementspec");this.B=$spec$jscomp$7$$.selector}
$$jscomp$inherits$$($InactiveElementFilter$$module$extensions$amp_ad_exit$0_1$filters$inactive_element$$,$Filter$$module$extensions$amp_ad_exit$0_1$filters$filter$$);$InactiveElementFilter$$module$extensions$amp_ad_exit$0_1$filters$inactive_element$$.prototype.filter=function($event$jscomp$55$$){return!$matches$$module$src$dom$$($event$jscomp$55$$.target,this.B)};function $createFilter$$module$extensions$amp_ad_exit$0_1$filters$factory$$($name$jscomp$159$$,$spec$jscomp$9$$,$adExitInstance$$){switch($spec$jscomp$9$$.type){case "clickDelay":return new $ClickDelayFilter$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$($name$jscomp$159$$,$spec$jscomp$9$$,$adExitInstance$$.win);case "clickLocation":return new $ClickLocationFilter$$module$extensions$amp_ad_exit$0_1$filters$click_location$$($name$jscomp$159$$,$spec$jscomp$9$$,$adExitInstance$$);case "inactiveElement":return new $InactiveElementFilter$$module$extensions$amp_ad_exit$0_1$filters$inactive_element$$($name$jscomp$159$$,
$spec$jscomp$9$$)}};function $assertConfig$$module$extensions$amp_ad_exit$0_1$config$$($config$jscomp$10$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("object"==typeof $config$jscomp$10$$);if($config$jscomp$10$$.filters){var $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$=$config$jscomp$10$$.filters,$JSCompiler_validFilters$jscomp$inline_1285$$=["clickDelay","clickLocation","inactiveElement"],$JSCompiler_name$jscomp$inline_1286$$;for($JSCompiler_name$jscomp$inline_1286$$ in $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("object"==
typeof $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$[$JSCompiler_name$jscomp$inline_1286$$],"Filter specification '%s' is malformed",$JSCompiler_name$jscomp$inline_1286$$),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(-1!=$JSCompiler_validFilters$jscomp$inline_1285$$.indexOf($JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$[$JSCompiler_name$jscomp$inline_1286$$].type),"Supported filters: "+$JSCompiler_validFilters$jscomp$inline_1285$$.join(", "))}else $config$jscomp$10$$.filters=
{};if($config$jscomp$10$$.transport){var $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$=$config$jscomp$10$$.transport,$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$;for($JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$ in $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("beacon"==$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$||
"image"==$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$,"Unknown transport option: '"+$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$+"'"),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("boolean"==typeof $JSCompiler_filters$jscomp$inline_1284_JSCompiler_transport$jscomp$inline_1288$$[$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$])}else $config$jscomp$10$$.transport={};$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$=
$config$jscomp$10$$.targets;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("object"==typeof $JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$,"'targets' must be an object");for(var $JSCompiler_target$jscomp$inline_1293$$ in $JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$)$assertTarget$$module$extensions$amp_ad_exit$0_1$config$$($JSCompiler_target$jscomp$inline_1293$$,$JSCompiler_t$jscomp$inline_1289_JSCompiler_targets$jscomp$inline_1291$$[$JSCompiler_target$jscomp$inline_1293$$],
$config$jscomp$10$$);return $config$jscomp$10$$}
function $assertTarget$$module$extensions$amp_ad_exit$0_1$config$$($name$jscomp$161_pattern$jscomp$2$$,$target$jscomp$108$$,$config$jscomp$12$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("string"==typeof $target$jscomp$108$$.finalUrl,"finalUrl of target '%s' must be a string",$name$jscomp$161_pattern$jscomp$2$$);$target$jscomp$108$$.filters&&$target$jscomp$108$$.filters.forEach(function($name$jscomp$161_pattern$jscomp$2$$){$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($config$jscomp$12$$.filters[$name$jscomp$161_pattern$jscomp$2$$],"filter '%s' not defined",
$name$jscomp$161_pattern$jscomp$2$$)});if($target$jscomp$108$$.vars){$name$jscomp$161_pattern$jscomp$2$$=/^_[a-zA-Z0-9_-]+$/;for(var $variable$jscomp$2$$ in $target$jscomp$108$$.vars)$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($name$jscomp$161_pattern$jscomp$2$$.test($variable$jscomp$2$$),"'%s' must match the pattern '%s'",$variable$jscomp$2$$,$name$jscomp$161_pattern$jscomp$2$$)}}
function $assertVendor$$module$extensions$amp_ad_exit$0_1$config$$($vendor$jscomp$5$$){return $user$$module$src$log$$().assertString($ANALYTICS_IFRAME_TRANSPORT_CONFIG$$module$extensions$amp_analytics$0_1$iframe_transport_vendors$$[$vendor$jscomp$5$$]&&$ANALYTICS_IFRAME_TRANSPORT_CONFIG$$module$extensions$amp_analytics$0_1$iframe_transport_vendors$$[$vendor$jscomp$5$$].transport&&$ANALYTICS_IFRAME_TRANSPORT_CONFIG$$module$extensions$amp_analytics$0_1$iframe_transport_vendors$$[$vendor$jscomp$5$$].transport.iframe,
"Unknown or invalid vendor "+$vendor$jscomp$5$$+", note that vendor must use transport: iframe")};function $AmpAdExit$$module$extensions$amp_ad_exit$0_1$amp_ad_exit$$($$jscomp$super$this$jscomp$6_element$jscomp$222$$){$$jscomp$super$this$jscomp$6_element$jscomp$222$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$6_element$jscomp$222$$)||this;$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$targets_$={};$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$defaultFilters_$=[];$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$transport_$={beacon:!0,image:!0};$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$userFilters_$=
{};$$jscomp$super$this$jscomp$6_element$jscomp$222$$.registerAction("exit",$$jscomp$super$this$jscomp$6_element$jscomp$222$$.exit.bind($$jscomp$super$this$jscomp$6_element$jscomp$222$$));$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$vendorResponses_$={};$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$unlisten_$=null;$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$ampAdResourceId_$=null;$$jscomp$super$this$jscomp$6_element$jscomp$222$$.$expectedOriginToVendor_$={};return $$jscomp$super$this$jscomp$6_element$jscomp$222$$}
$$jscomp$inherits$$($AmpAdExit$$module$extensions$amp_ad_exit$0_1$amp_ad_exit$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpAdExit$$module$extensions$amp_ad_exit$0_1$amp_ad_exit$$.prototype;
$JSCompiler_prototypeAlias$$.exit=function($event$jscomp$56_invocation$jscomp$18$$){var $args$jscomp$22$$=$event$jscomp$56_invocation$jscomp$18$$.args;$event$jscomp$56_invocation$jscomp$18$$=$event$jscomp$56_invocation$jscomp$18$$.event;var $$jscomp$this$jscomp$266$$=this,$target$jscomp$109$$=this.$targets_$[$args$jscomp$22$$.target];$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($target$jscomp$109$$,"Exit target not found: '"+$args$jscomp$22$$.target+"'");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($event$jscomp$56_invocation$jscomp$18$$,
"Unexpected null event");if($JSCompiler_StaticMethods_filter_$$(this.$defaultFilters_$,$event$jscomp$56_invocation$jscomp$18$$)&&$JSCompiler_StaticMethods_filter_$$($target$jscomp$109$$.filters,$event$jscomp$56_invocation$jscomp$18$$)){$event$jscomp$56_invocation$jscomp$18$$.preventDefault();var $substituteVariables$$=$JSCompiler_StaticMethods_getUrlVariableRewriter_$$(this,$args$jscomp$22$$,$event$jscomp$56_invocation$jscomp$18$$,$target$jscomp$109$$);$target$jscomp$109$$.trackingUrls&&$target$jscomp$109$$.trackingUrls.map($substituteVariables$$).forEach(function($event$jscomp$56_invocation$jscomp$18$$){$$jscomp$this$jscomp$266$$.$transport_$.beacon&&
$$jscomp$this$jscomp$266$$.win.navigator.sendBeacon&&$$jscomp$this$jscomp$266$$.win.navigator.sendBeacon($event$jscomp$56_invocation$jscomp$18$$,"")||!$$jscomp$this$jscomp$266$$.$transport_$.image||($$jscomp$this$jscomp$266$$.win.document.createElement("img").src=$event$jscomp$56_invocation$jscomp$18$$)});$openWindowDialog$$module$src$dom$$(this.win,$substituteVariables$$($target$jscomp$109$$.finalUrl),"_blank")}};
function $JSCompiler_StaticMethods_getUrlVariableRewriter_$$($JSCompiler_StaticMethods_getUrlVariableRewriter_$self$$,$args$jscomp$23$$,$event$jscomp$57$$,$target$jscomp$110$$){var $substitutionFunctions$$={CLICK_X:function(){return $event$jscomp$57$$.clientX},CLICK_Y:function(){return $event$jscomp$57$$.clientY}},$replacements$$=$Services$$module$src$services$urlReplacementsForDoc$$($JSCompiler_StaticMethods_getUrlVariableRewriter_$self$$.getAmpDoc()),$whitelist$jscomp$6$$={RANDOM:!0,CLICK_X:!0,
CLICK_Y:!0};if($target$jscomp$110$$.vars){var $$jscomp$loop$201$$={},$customVarName$$;for($customVarName$$ in $target$jscomp$110$$.vars)$$jscomp$loop$201$$.customVarName=$customVarName$$,"_"==$$jscomp$loop$201$$.customVarName[0]&&($$jscomp$loop$201$$.customVar=$target$jscomp$110$$.vars[$$jscomp$loop$201$$.customVarName],$$jscomp$loop$201$$.customVar&&($substitutionFunctions$$[$$jscomp$loop$201$$.customVarName]=function($event$jscomp$57$$){return function(){if($event$jscomp$57$$.customVar.iframeTransportSignal){var $target$jscomp$110$$=
$replacements$$.expandStringSync($event$jscomp$57$$.customVar.iframeTransportSignal,{IFRAME_TRANSPORT_SIGNAL:function($args$jscomp$23$$,$event$jscomp$57$$){if(!$args$jscomp$23$$||!$event$jscomp$57$$)return"";var $target$jscomp$110$$=$JSCompiler_StaticMethods_getUrlVariableRewriter_$self$$.$vendorResponses_$[$args$jscomp$23$$];if($target$jscomp$110$$&&$event$jscomp$57$$ in $target$jscomp$110$$)return $target$jscomp$110$$[$event$jscomp$57$$]}});if($event$jscomp$57$$.customVar.iframeTransportSignal==
"IFRAME_TRANSPORT_SIGNAL"+$target$jscomp$110$$)$dev$$module$src$log$$().error("amp-ad-exit","Invalid IFRAME_TRANSPORT_SIGNAL format:"+$target$jscomp$110$$+" (perhaps there is a space after a comma?)");else if(""!=$target$jscomp$110$$)return $target$jscomp$110$$}return $event$jscomp$57$$.customVarName in $args$jscomp$23$$?$args$jscomp$23$$[$event$jscomp$57$$.customVarName]:$event$jscomp$57$$.customVar.defaultValue}}($$jscomp$loop$201$$),$whitelist$jscomp$6$$[$$jscomp$loop$201$$.customVarName]=!0,$$jscomp$loop$201$$=
{customVar:$$jscomp$loop$201$$.customVar,customVarName:$$jscomp$loop$201$$.customVarName}))}return function($JSCompiler_StaticMethods_getUrlVariableRewriter_$self$$){return $replacements$$.expandUrlSync($JSCompiler_StaticMethods_getUrlVariableRewriter_$self$$,$substitutionFunctions$$,void 0,$whitelist$jscomp$6$$)}}
function $JSCompiler_StaticMethods_filter_$$($filters$jscomp$1$$,$event$jscomp$58$$){return $filters$jscomp$1$$.every(function($filters$jscomp$1$$){var $filter$jscomp$4$$=$filters$jscomp$1$$.filter($event$jscomp$58$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-exit","Filter '"+$filters$jscomp$1$$.name+"': "+($filter$jscomp$4$$?"pass":"fail"));return $filter$jscomp$4$$})}
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$268$$=this;this.element.setAttribute("aria-hidden","true");this.$defaultFilters_$.push($createFilter$$module$extensions$amp_ad_exit$0_1$filters$factory$$("minDelay",$makeClickDelaySpec$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$(),this));this.$defaultFilters_$.push($createFilter$$module$extensions$amp_ad_exit$0_1$filters$factory$$("carouselBtns",{type:"inactiveElement",selector:".amp-carousel-button"},this));
var $child$jscomp$10_children$jscomp$2$$=this.element.children;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(1==$child$jscomp$10_children$jscomp$2$$.length,"The tag should contain exactly one <script> child.");$child$jscomp$10_children$jscomp$2$$=$child$jscomp$10_children$jscomp$2$$[0];$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isJsonScriptTag$$module$src$dom$$($child$jscomp$10_children$jscomp$2$$),'The amp-ad-exit config should be inside a <script> tag with type="application/json"');
try{var $config$jscomp$13$$=$assertConfig$$module$extensions$amp_ad_exit$0_1$config$$($parseJson$$module$src$json$$($child$jscomp$10_children$jscomp$2$$.textContent)),$defaultClickStartTimingEvent$$;$isObject$$module$src$types$$($config$jscomp$13$$.options)&&"string"===typeof $config$jscomp$13$$.options.startTimingEvent&&($defaultClickStartTimingEvent$$=$config$jscomp$13$$.options.startTimingEvent,this.$defaultFilters_$.splice(0,1,$createFilter$$module$extensions$amp_ad_exit$0_1$filters$factory$$("minDelay",
$makeClickDelaySpec$$module$extensions$amp_ad_exit$0_1$filters$click_delay$$($config$jscomp$13$$.options.startTimingEvent),this)));for(var $name$jscomp$162$$ in $config$jscomp$13$$.filters){var $spec$jscomp$10$$=$config$jscomp$13$$.filters[$name$jscomp$162$$];"clickDelay"==$spec$jscomp$10$$.type&&($spec$jscomp$10$$.startTimingEvent=$spec$jscomp$10$$.startTimingEvent||$defaultClickStartTimingEvent$$);this.$userFilters_$[$name$jscomp$162$$]=$createFilter$$module$extensions$amp_ad_exit$0_1$filters$factory$$($name$jscomp$162$$,
$spec$jscomp$10$$,this)}for(var $name$132$$ in $config$jscomp$13$$.targets){var $target$jscomp$111$$=$config$jscomp$13$$.targets[$name$132$$];this.$targets_$[$name$132$$]={finalUrl:$target$jscomp$111$$.finalUrl,trackingUrls:$target$jscomp$111$$.trackingUrls||[],vars:$target$jscomp$111$$.vars||{},filters:($target$jscomp$111$$.filters||[]).map(function($child$jscomp$10_children$jscomp$2$$){return $$jscomp$this$jscomp$268$$.$userFilters_$[$child$jscomp$10_children$jscomp$2$$]}).filter(function($$jscomp$this$jscomp$268$$){return $$jscomp$this$jscomp$268$$})};
for(var $customVar$$ in $target$jscomp$111$$.vars)if($target$jscomp$111$$.vars[$customVar$$].iframeTransportSignal){var $matches$jscomp$7$$=$target$jscomp$111$$.vars[$customVar$$].iframeTransportSignal.match(/IFRAME_TRANSPORT_SIGNAL\(([^,]+)/);if($matches$jscomp$7$$&&!(2>$matches$jscomp$7$$.length)){var $vendor$jscomp$7$$=$matches$jscomp$7$$[1],$origin$jscomp$18$$=$parseUrlDeprecated$$module$src$url$$($assertVendor$$module$extensions$amp_ad_exit$0_1$config$$($vendor$jscomp$7$$)).origin;this.$expectedOriginToVendor_$[$origin$jscomp$18$$]=
this.$expectedOriginToVendor_$[$origin$jscomp$18$$]||$vendor$jscomp$7$$}}}this.$transport_$.beacon=!1!==$config$jscomp$13$$.transport.beacon;this.$transport_$.image=!1!==$config$jscomp$13$$.transport.image}catch($e$jscomp$124$$){throw this.user().error("amp-ad-exit","Invalid JSON config",$e$jscomp$124$$),$e$jscomp$124$$;}$JSCompiler_StaticMethods_init3pResponseListener_$$(this)};$JSCompiler_prototypeAlias$$.resumeCallback=function(){$JSCompiler_StaticMethods_init3pResponseListener_$$(this)};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$unlisten_$&&(this.$unlisten_$(),this.$unlisten_$=null);return AMP.BaseElement.prototype.unlayoutCallback.call(this)};
function $JSCompiler_StaticMethods_init3pResponseListener_$$($JSCompiler_StaticMethods_init3pResponseListener_$self$$){"inabox"!=$getMode$$module$src$mode$$().runtime&&($JSCompiler_StaticMethods_init3pResponseListener_$self$$.$ampAdResourceId_$=$JSCompiler_StaticMethods_init3pResponseListener_$self$$.$ampAdResourceId_$||$getAmpAdResourceId$$module$src$ad_helper$$($JSCompiler_StaticMethods_init3pResponseListener_$self$$.element,$JSCompiler_StaticMethods_init3pResponseListener_$self$$.win.top),$JSCompiler_StaticMethods_init3pResponseListener_$self$$.$ampAdResourceId_$?
$JSCompiler_StaticMethods_init3pResponseListener_$self$$.$unlisten_$=$listen$$module$src$3p_frame_messaging$$($JSCompiler_StaticMethods_init3pResponseListener_$self$$.getAmpDoc().win,function($JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$){if($JSCompiler_StaticMethods_init3pResponseListener_$self$$.$expectedOriginToVendor_$[$JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$.origin]){var $responseMsg$$=$deserializeMessage$$module$src$3p_frame_messaging$$($JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$.data);
if($responseMsg$$&&"iframe-transport-response"==$responseMsg$$.type){var $JSCompiler_responseMessage$jscomp$inline_1299$$=$responseMsg$$;$JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$=$JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$.origin;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($JSCompiler_responseMessage$jscomp$inline_1299$$.message,"Received empty response from 3p analytics frame");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($JSCompiler_responseMessage$jscomp$inline_1299$$.creativeId,
"Received malformed message from 3p analytics frame: creativeId missing");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($JSCompiler_responseMessage$jscomp$inline_1299$$.vendor,"Received malformed message from 3p analytics frame: vendor missing");var $JSCompiler_vendorURL$jscomp$inline_1301$$=$parseUrlDeprecated$$module$src$url$$($assertVendor$$module$extensions$amp_ad_exit$0_1$config$$($JSCompiler_responseMessage$jscomp$inline_1299$$.vendor));$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($JSCompiler_vendorURL$jscomp$inline_1301$$&&
$JSCompiler_vendorURL$jscomp$inline_1301$$.origin==$JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$,"Invalid origin for vendor "+($JSCompiler_responseMessage$jscomp$inline_1299$$.vendor+": "+$JSCompiler_eventOrigin$jscomp$inline_1300_event$jscomp$59$$));$responseMsg$$.creativeId==$JSCompiler_StaticMethods_init3pResponseListener_$self$$.$ampAdResourceId_$&&($JSCompiler_StaticMethods_init3pResponseListener_$self$$.$vendorResponses_$[$responseMsg$$.vendor]=$responseMsg$$.message)}}}):$user$$module$src$log$$().warn("amp-ad-exit",
"No friendly parent amp-ad element was found for amp-ad-exit; not in inabox case."))}$JSCompiler_prototypeAlias$$.isLayoutSupported=function(){return!0};$JSCompiler_prototypeAlias$$.onLayoutMeasure=function(){for(var $name$jscomp$163$$ in this.$userFilters_$)this.$userFilters_$[$name$jscomp$163$$].onLayoutMeasure()};(function($AMP$jscomp$7$$){$AMP$jscomp$7$$.registerElement("amp-ad-exit",$AmpAdExit$$module$extensions$amp_ad_exit$0_1$amp_ad_exit$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-ad-exit-0.1-amp-ad-exit.js.map

