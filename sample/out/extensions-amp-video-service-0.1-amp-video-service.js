(self.AMP=self.AMP||[]).push({n:"extensions-amp-video-service-0.1-amp-video-service.js", v:"erwin", f:(function(){function $VideoService$$module$extensions$amp_video_service$0_1$amp_video_service$$($ampdoc$jscomp$176$$){var $$jscomp$this$jscomp$807$$=this,$win$jscomp$357$$=$ampdoc$jscomp$176$$.win;this.$ampdoc_$=$ampdoc$jscomp$176$$;this.$timer_$=$Services$$module$src$services$timerFor$$($win$jscomp$357$$);this.B=null;this.C=function(){$$jscomp$this$jscomp$807$$.B.fire();$$jscomp$this$jscomp$807$$.$timer_$.delay($$jscomp$this$jscomp$807$$.C,1E3)}}$JSCompiler_prototypeAlias$$=$VideoService$$module$extensions$amp_video_service$0_1$amp_video_service$$.prototype;
$JSCompiler_prototypeAlias$$.register=function($JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$){var $element$jscomp$444$$=$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$.element;if(this.getEntryOrNull($element$jscomp$444$$))return this.getEntryOrNull($element$jscomp$444$$);if(!$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$.supportsPlatform())return null;$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$=new $VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service$$(this.$ampdoc_$,
this,$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$);$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$.install();return $element$jscomp$444$$.__AMP_VIDEO_ENTRY__=$JSCompiler_entry$jscomp$inline_2484_video$jscomp$56$$};$JSCompiler_prototypeAlias$$.getEntryOrNull=function($element$jscomp$445$$){return $element$jscomp$445$$.__AMP_VIDEO_ENTRY__};
$JSCompiler_prototypeAlias$$.onTick=function($handler$jscomp$52$$){this.B=this.B||new $Observable$$module$src$observable$$;this.B.add($handler$jscomp$52$$);1==this.B.getHandlerCount()&&(this.B.fire(),this.$timer_$.delay(this.C,1E3))};$JSCompiler_prototypeAlias$$.$VideoService$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$getAnalyticsDetails$=function(){$warnUnimplemented$$module$extensions$amp_video_service$0_1$amp_video_service$$("Video analytics");return Promise.resolve()};
$JSCompiler_prototypeAlias$$.$VideoService$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$delegateAutoplay$=function(){$warnUnimplemented$$module$extensions$amp_video_service$0_1$amp_video_service$$("Autoplay delegation")};function $VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service$$($ampdoc$jscomp$177$$,$videoService$$,$video$jscomp$57$$){this.$ampdoc_$=$ampdoc$jscomp$177$$;this.$service_$=$videoService$$;this.$video_$=$video$jscomp$57$$;this.B=!1}
$VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service$$.prototype.C=function($handler$jscomp$53$$){var $$jscomp$this$jscomp$808$$=this;this.$service_$.onTick(function(){$$jscomp$this$jscomp$808$$.B&&$handler$jscomp$53$$()})};
$VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service$$.prototype.install=function(){var $$jscomp$this$jscomp$809$$=this,$element$jscomp$447$$=this.$video_$.element,$signals$jscomp$5$$=$element$jscomp$447$$.signals();$element$jscomp$447$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.REGISTERED);$signals$jscomp$5$$.signal($VideoEvents$$module$src$video_interface$$.REGISTERED);$element$jscomp$447$$.G().then(function(){var $element$jscomp$447$$=$$jscomp$this$jscomp$809$$.$video_$.element;
$JSCompiler_StaticMethods_VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$registerCommonActions_$$($$jscomp$this$jscomp$809$$);$JSCompiler_StaticMethods_addEventHandlers_$$($$jscomp$this$jscomp$809$$);$element$jscomp$447$$.classList.add("i-amphtml-video-interface")});$signals$jscomp$5$$.whenSignal("load-start").then(function(){$JSCompiler_StaticMethods_triggerTimeUpdate_$$($$jscomp$this$jscomp$809$$)})};
function $JSCompiler_StaticMethods_addEventHandlers_$$($JSCompiler_StaticMethods_addEventHandlers_$self$$){var $element$jscomp$449$$=$JSCompiler_StaticMethods_addEventHandlers_$self$$.$video_$.element;$listen$$module$src$event_helper$$($element$jscomp$449$$,$VideoEvents$$module$src$video_interface$$.PAUSE,function(){$JSCompiler_StaticMethods_addEventHandlers_$self$$.B=!1});$listen$$module$src$event_helper$$($element$jscomp$449$$,$VideoEvents$$module$src$video_interface$$.PLAYING,function(){$JSCompiler_StaticMethods_addEventHandlers_$self$$.B=
!0})}
function $JSCompiler_StaticMethods_VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$registerCommonActions_$$($JSCompiler_StaticMethods_VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$registerCommonActions_$self$$){var $video$jscomp$59$$=$JSCompiler_StaticMethods_VideoEntry$$module$extensions$amp_video_service$0_1$amp_video_service_prototype$registerCommonActions_$self$$.$video_$;$video$jscomp$59$$.registerAction("play",function(){return $video$jscomp$59$$.play(!1)},1);
$video$jscomp$59$$.registerAction("pause",function(){return $video$jscomp$59$$.pause()},1);$video$jscomp$59$$.registerAction("mute",function(){return $video$jscomp$59$$.mute()},1);$video$jscomp$59$$.registerAction("unmute",function(){return $video$jscomp$59$$.unmute()},1);$video$jscomp$59$$.registerAction("fullscreen",function(){return $video$jscomp$59$$.fullscreenEnter()},1)}
function $JSCompiler_StaticMethods_triggerTimeUpdate_$$($JSCompiler_StaticMethods_triggerTimeUpdate_$self$$){$JSCompiler_StaticMethods_triggerTimeUpdate_$self$$.C(function(){var $element$jscomp$450_video$jscomp$60$$=$JSCompiler_StaticMethods_triggerTimeUpdate_$self$$.$video_$,$event$jscomp$162_time$jscomp$34$$=$element$jscomp$450_video$jscomp$60$$.getCurrentTime(),$duration$jscomp$21$$=$element$jscomp$450_video$jscomp$60$$.getDuration();if($isFiniteNumber$$module$src$types$$($event$jscomp$162_time$jscomp$34$$)&&
$isFiniteNumber$$module$src$types$$($duration$jscomp$21$$)&&!(0>=$duration$jscomp$21$$)){var $win$jscomp$358$$=$JSCompiler_StaticMethods_triggerTimeUpdate_$self$$.$ampdoc_$.win,$element$jscomp$450_video$jscomp$60$$=$JSCompiler_StaticMethods_triggerTimeUpdate_$self$$.$video_$.element,$actions$jscomp$3$$=$Services$$module$src$services$actionServiceForDoc$$($JSCompiler_StaticMethods_triggerTimeUpdate_$self$$.$ampdoc_$),$event$jscomp$162_time$jscomp$34$$=$createCustomEvent$$module$src$event_helper$$($win$jscomp$358$$,
"amp-video-service.timeUpdate",{time:$event$jscomp$162_time$jscomp$34$$,percent:$event$jscomp$162_time$jscomp$34$$/$duration$jscomp$21$$});$actions$jscomp$3$$.trigger($element$jscomp$450_video$jscomp$60$$,"timeUpdate",$event$jscomp$162_time$jscomp$34$$,1)}})}function $warnUnimplemented$$module$extensions$amp_video_service$0_1$amp_video_service$$($feature$jscomp$6$$){$dev$$module$src$log$$().warn("amp-video-service",$feature$jscomp$6$$+" unimplemented.")}
(function($AMP$jscomp$90$$){$AMP$jscomp$90$$.registerServiceForDoc("video-service",$VideoService$$module$extensions$amp_video_service$0_1$amp_video_service$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-video-service-0.1-amp-video-service.js.map

