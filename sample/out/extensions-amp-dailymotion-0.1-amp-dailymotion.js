(self.AMP=self.AMP||[]).push({n:"extensions-amp-dailymotion-0.1-amp-dailymotion.js", v:"erwin", f:(function(){function $AmpDailymotion$$module$extensions$amp_dailymotion$0_1$amp_dailymotion$$($$jscomp$super$this$jscomp$33_element$jscomp$299$$){$$jscomp$super$this$jscomp$33_element$jscomp$299$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$33_element$jscomp$299$$)||this;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$playerState_$="unstarted";$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$videoid_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$iframe_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$muted_$=
!1;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$hasAutoplay_$=!1;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$unlistenMessage_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$startedBufferingPromise_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$startedBufferingResolver_$=null;$$jscomp$super$this$jscomp$33_element$jscomp$299$$.$isFullscreen_$=
!1;return $$jscomp$super$this$jscomp$33_element$jscomp$299$$}$$jscomp$inherits$$($AmpDailymotion$$module$extensions$amp_dailymotion$0_1$amp_dailymotion$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpDailymotion$$module$extensions$amp_dailymotion$0_1$amp_dailymotion$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$10$$){this.preconnect.url("https://www.dailymotion.com",$opt_onLayout$jscomp$10$$);this.preconnect.url("https://static1.dmcdn.net",$opt_onLayout$jscomp$10$$)};
$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$43$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$43$$)};$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$8$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$8$$})};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$videoid_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-videoid"),"The data-videoid attribute is required for <amp-dailymotion> %s",this.element);$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this);var $readyDeferred$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=
$readyDeferred$$.promise;this.$playerReadyResolver_$=$readyDeferred$$.resolve;var $bufferingDeferred$$=new $Deferred$$module$src$utils$promise$$;this.$startedBufferingPromise_$=$bufferingDeferred$$.promise;this.$startedBufferingResolver_$=$bufferingDeferred$$.resolve};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $iframe$jscomp$37$$=this.element.ownerDocument.createElement("iframe");$iframe$jscomp$37$$.setAttribute("frameborder","0");$iframe$jscomp$37$$.setAttribute("allowfullscreen","true");$iframe$jscomp$37$$.src=this.$getIframeSrc_$();this.applyFillContent($iframe$jscomp$37$$);this.element.appendChild($iframe$jscomp$37$$);this.$iframe_$=$iframe$jscomp$37$$;this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",this.$handleEvents_$.bind(this));
this.$hasAutoplay_$=this.element.hasAttribute("autoplay");return this.loadPromise(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.$handleEvents_$=function($data$jscomp$103_event$jscomp$86$$){if("https://www.dailymotion.com"==$data$jscomp$103_event$jscomp$86$$.origin&&$data$jscomp$103_event$jscomp$86$$.source==this.$iframe_$.contentWindow&&$data$jscomp$103_event$jscomp$86$$.data&&$data$jscomp$103_event$jscomp$86$$.type&&"message"==$data$jscomp$103_event$jscomp$86$$.type&&($data$jscomp$103_event$jscomp$86$$=$parseQueryString_$$module$src$url_parse_query_string$$($data$jscomp$103_event$jscomp$86$$.data),
void 0!==$data$jscomp$103_event$jscomp$86$$))switch($data$jscomp$103_event$jscomp$86$$.event){case "apiready":this.$playerReadyResolver_$(!0);this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD);break;case "end":this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.ENDED);case "pause":this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE);this.$playerState_$="pause";break;case "play":this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING);
this.$playerState_$="play";break;case "volumechange":if("unstarted"==this.$playerState_$||this.$muted_$!=(0==$data$jscomp$103_event$jscomp$86$$.volume||"true"==$data$jscomp$103_event$jscomp$86$$.muted))(this.$muted_$=0==$data$jscomp$103_event$jscomp$86$$.volume||"true"==$data$jscomp$103_event$jscomp$86$$.muted)?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.MUTED):this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.UNMUTED);break;case "progress":this.$startedBufferingResolver_$(!0);
break;case "fullscreenchange":this.$isFullscreen_$="true"==$data$jscomp$103_event$jscomp$86$$.fullscreen}};
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$2$$,$opt_args$jscomp$9$$){var $$jscomp$this$jscomp$477$$=this;this.$playerReadyPromise_$.then(function(){if($$jscomp$this$jscomp$477$$.$iframe_$&&$$jscomp$this$jscomp$477$$.$iframe_$.contentWindow){var $message$jscomp$53$$=JSON.stringify($dict$$module$src$utils$object$$({command:$command$jscomp$2$$,parameters:$opt_args$jscomp$9$$||[]}));$$jscomp$this$jscomp$477$$.$iframe_$.contentWindow.postMessage($message$jscomp$53$$,"https://www.dailymotion.com")}})};
$JSCompiler_prototypeAlias$$.$getIframeSrc_$=function(){var $$jscomp$this$jscomp$478$$=this,$iframeSrc$$="https://www.dailymotion.com/embed/video/"+encodeURIComponent(this.$videoid_$||"")+"?api=1&html=1&app=amp",$explicitParamsAttributes$$="mute endscreen-enable sharing-enable start ui-highlight ui-logo info".split(" ");$explicitParamsAttributes$$.forEach(function($explicitParamsAttributes$$){var $implicitParams$$=$$jscomp$this$jscomp$478$$.element.getAttribute("data-"+$explicitParamsAttributes$$);
$implicitParams$$&&($iframeSrc$$=$addParamToUrl$$module$src$url$$($iframeSrc$$,$explicitParamsAttributes$$,$implicitParams$$))});var $implicitParams$$=$getDataParamsFromAttributes$$module$src$dom$$(this.element);return $iframeSrc$$=$addParamsToUrl$$module$src$url$$($iframeSrc$$,$implicitParams$$)};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.pause()};
$JSCompiler_prototypeAlias$$.play=function($isAutoplay$$){var $$jscomp$this$jscomp$479$$=this;this.$sendCommand_$("play");$isAutoplay$$&&"pause"!=this.$playerState_$&&this.$startedBufferingPromise_$.then(function(){$$jscomp$this$jscomp$479$$.$sendCommand_$("play")})};$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("pause")};
$JSCompiler_prototypeAlias$$.mute=function(){var $$jscomp$this$jscomp$480$$=this;this.$sendCommand_$("muted",[!0]);this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$480$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.MUTED);$$jscomp$this$jscomp$480$$.$muted_$=!0})};
$JSCompiler_prototypeAlias$$.unmute=function(){var $$jscomp$this$jscomp$481$$=this;this.$sendCommand_$("muted",[!1]);this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$481$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.UNMUTED);$$jscomp$this$jscomp$481$$.$muted_$=!1})};$JSCompiler_prototypeAlias$$.showControls=function(){this.$sendCommand_$("controls",[!0])};$JSCompiler_prototypeAlias$$.hideControls=function(){this.$sendCommand_$("controls",[!1])};
$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){var $platform$jscomp$10$$=$Services$$module$src$services$platformFor$$(this.win);$platform$jscomp$10$$.isSafari()||$platform$jscomp$10$$.isIos()?this.$sendCommand_$("fullscreen",[!0]):this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.fullscreenExit=function(){var $platform$jscomp$11$$=$Services$$module$src$services$platformFor$$(this.win);$platform$jscomp$11$$.isSafari()||$platform$jscomp$11$$.isIos()?this.$sendCommand_$("fullscreen",[!1]):this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.isFullscreen=function(){var $platform$jscomp$12$$=$Services$$module$src$services$platformFor$$(this.win);return $platform$jscomp$12$$.isSafari()||$platform$jscomp$12$$.isIos()?this.$isFullscreen_$:this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};
$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$34$$){$AMP$jscomp$34$$.registerElement("amp-dailymotion",$AmpDailymotion$$module$extensions$amp_dailymotion$0_1$amp_dailymotion$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-dailymotion-0.1-amp-dailymotion.js.map

