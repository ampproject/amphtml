(self.AMP=self.AMP||[]).push({n:"extensions-amp-video-0.1-amp-video.js", v:"erwin", f:(function(){var $ATTRS_TO_PROPAGATE_ON_BUILD$$module$extensions$amp_video$0_1$amp_video$$="aria-describedby aria-label aria-labelledby controls crossorigin disableremoteplayback poster controlsList".split(" "),$ATTRS_TO_PROPAGATE_ON_LAYOUT$$module$extensions$amp_video$0_1$amp_video$$=["loop","preload"],$ATTRS_TO_PROPAGATE$$module$extensions$amp_video$0_1$amp_video$$=$ATTRS_TO_PROPAGATE_ON_BUILD$$module$extensions$amp_video$0_1$amp_video$$.concat($ATTRS_TO_PROPAGATE_ON_LAYOUT$$module$extensions$amp_video$0_1$amp_video$$);
function $AmpVideo$$module$extensions$amp_video$0_1$amp_video$$($element$jscomp$451$$){var $$jscomp$super$this$jscomp$86$$;$$jscomp$super$this$jscomp$86$$=AMP.BaseElement.call(this,$element$jscomp$451$$)||this;$$jscomp$super$this$jscomp$86$$.$video_$=null;$$jscomp$super$this$jscomp$86$$.$muted_$=!1;$$jscomp$super$this$jscomp$86$$.$isPrerenderAllowed_$=!1;$$jscomp$super$this$jscomp$86$$.$metadata_$=$EMPTY_METADATA$$module$src$mediasession_helper$$;$$jscomp$super$this$jscomp$86$$.$unlisteners_$=[];
$$jscomp$super$this$jscomp$86$$.$getUrlService_$=$once$$module$src$utils$function$$(function(){return $Services$$module$src$services$urlForDoc$$($$jscomp$super$this$jscomp$86$$.element)});return $$jscomp$super$this$jscomp$86$$}$$jscomp$inherits$$($AmpVideo$$module$extensions$amp_video$0_1$amp_video$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpVideo$$module$extensions$amp_video$0_1$amp_video$$.prototype;
$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$26$$){var $JSCompiler_videoSrc$jscomp$inline_2497$$=this.element.getAttribute("src");if(!$JSCompiler_videoSrc$jscomp$inline_2497$$){var $JSCompiler_source$jscomp$inline_2498$$=$elementByTag$$module$src$dom$$(this.element,"source");$JSCompiler_source$jscomp$inline_2498$$&&($JSCompiler_videoSrc$jscomp$inline_2497$$=$JSCompiler_source$jscomp$inline_2498$$.getAttribute("src"))}var $videoSrc$$=$JSCompiler_videoSrc$jscomp$inline_2497$$;
$videoSrc$$&&(this.$getUrlService_$().assertHttpsUrl($videoSrc$$,this.element),this.preconnect.url($videoSrc$$,$opt_onLayout$jscomp$26$$))};$JSCompiler_prototypeAlias$$.prerenderAllowed=function(){return this.$isPrerenderAllowed_$};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$84$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$84$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $element$jscomp$452$$=this.element;this.$video_$=$element$jscomp$452$$.ownerDocument.createElement("video");var $poster$jscomp$4$$=$element$jscomp$452$$.getAttribute("poster");!$poster$jscomp$4$$&&$getMode$$module$src$mode$$().development&&console.error('No "poster" attribute has been provided for amp-video.');var $JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$;a:{var $JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$=
this.element;$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$=$toArray$$module$src$types$$($childElementsByTag$$module$src$dom$$($JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$,"source"));$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$.push($JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$);for($JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$=
0;$JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$<$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$.length;$JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$++)if($JSCompiler_StaticMethods_isCachedByCDN_$$(this,$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$[$JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$])){$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$=
!0;break a}$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$=!1}this.$isPrerenderAllowed_$=$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$;this.$video_$.setAttribute("playsinline","");this.$video_$.setAttribute("webkit-playsinline","");this.$video_$.setAttribute("preload","none");this.propagateAttributes($ATTRS_TO_PROPAGATE_ON_BUILD$$module$extensions$amp_video$0_1$amp_video$$,this.$video_$,!0);this.$installEventHandlers_$();
this.applyFillContent(this.$video_$,!0);$element$jscomp$452$$.appendChild(this.$video_$);$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$=$element$jscomp$452$$.getAttribute("artist");var $JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$=$element$jscomp$452$$.getAttribute("title"),$album$jscomp$1$$=$element$jscomp$452$$.getAttribute("album"),$artwork$jscomp$2$$=$element$jscomp$452$$.getAttribute("artwork");this.$metadata_$=
{title:$JSCompiler_element$jscomp$inline_2501_i$183$jscomp$inline_2503_title$jscomp$20$$||"",artist:$JSCompiler_inline_result$jscomp$531_JSCompiler_sources$jscomp$inline_2502_artist$jscomp$1$$||"",album:$album$jscomp$1$$||"",artwork:[{src:$artwork$jscomp$2$$||$poster$jscomp$4$$||""}]};$installVideoManagerForDoc$$module$src$service$video_manager_impl$$($element$jscomp$452$$);$Services$$module$src$services$videoManagerForDoc$$($element$jscomp$452$$).register(this)};
$JSCompiler_prototypeAlias$$.mutatedAttributesCallback=function($mutations$jscomp$9$$){if(this.$video_$){var $artist$jscomp$2_element$jscomp$453$$=this.element;$mutations$jscomp$9$$.src&&(this.$getUrlService_$().assertHttpsUrl($artist$jscomp$2_element$jscomp$453$$.getAttribute("src"),$artist$jscomp$2_element$jscomp$453$$),this.propagateAttributes(["src"],this.$video_$));var $album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$=$ATTRS_TO_PROPAGATE$$module$extensions$amp_video$0_1$amp_video$$.filter(function($artist$jscomp$2_element$jscomp$453$$){return void 0!==
$mutations$jscomp$9$$[$artist$jscomp$2_element$jscomp$453$$]});this.propagateAttributes($album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$,this.$video_$,!0);$mutations$jscomp$9$$.src&&$artist$jscomp$2_element$jscomp$453$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.RELOAD);if($mutations$jscomp$9$$.artwork||$mutations$jscomp$9$$.poster){var $album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$=$artist$jscomp$2_element$jscomp$453$$.getAttribute("artwork"),
$poster$jscomp$5$$=$artist$jscomp$2_element$jscomp$453$$.getAttribute("poster");this.$metadata_$.artwork=[{src:$album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$||$poster$jscomp$5$$||""}]}$mutations$jscomp$9$$.album&&($album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$=$artist$jscomp$2_element$jscomp$453$$.getAttribute("album"),this.$metadata_$.album=$album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$||"");$mutations$jscomp$9$$.title&&($album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$=
$artist$jscomp$2_element$jscomp$453$$.getAttribute("title"),this.$metadata_$.title=$album$jscomp$2_artwork$jscomp$3_attrs$jscomp$7_title$jscomp$21$$||"");$mutations$jscomp$9$$.artist&&($artist$jscomp$2_element$jscomp$453$$=$artist$jscomp$2_element$jscomp$453$$.getAttribute("artist"),this.$metadata_$.artist=$artist$jscomp$2_element$jscomp$453$$||"")}};
$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$13$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$13$$})};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$813$$=this;this.$video_$=this.$video_$;if(!this.$video_$.play)return this.toggleFallback(!0),Promise.resolve();var $viewer$jscomp$47$$=$Services$$module$src$services$viewerForDoc$$(this.getAmpDoc());this.propagateAttributes($ATTRS_TO_PROPAGATE_ON_LAYOUT$$module$extensions$amp_video$0_1$amp_video$$,this.$video_$,!0);$JSCompiler_StaticMethods_propagateCachedSources_$$(this);"prerender"==$viewer$jscomp$47$$.B?(this.element.hasAttribute("preload")||
this.$video_$.setAttribute("preload","auto"),$viewer$jscomp$47$$.whenFirstVisible().then(function(){$JSCompiler_StaticMethods_propagateLayoutChildren_$$($$jscomp$this$jscomp$813$$)})):$JSCompiler_StaticMethods_propagateLayoutChildren_$$(this);return this.loadPromise(this.$video_$).then(function(){$$jscomp$this$jscomp$813$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)})};
function $JSCompiler_StaticMethods_propagateCachedSources_$$($JSCompiler_StaticMethods_propagateCachedSources_$self$$){var $sources$jscomp$9$$=$toArray$$module$src$types$$($childElementsByTag$$module$src$dom$$($JSCompiler_StaticMethods_propagateCachedSources_$self$$.element,"source"));if($JSCompiler_StaticMethods_propagateCachedSources_$self$$.element.hasAttribute("src")&&$JSCompiler_StaticMethods_isCachedByCDN_$$($JSCompiler_StaticMethods_propagateCachedSources_$self$$,$JSCompiler_StaticMethods_propagateCachedSources_$self$$.element)){var $src$jscomp$61$$=
$JSCompiler_StaticMethods_propagateCachedSources_$self$$.element.getAttribute("src"),$type$jscomp$166$$=$JSCompiler_StaticMethods_propagateCachedSources_$self$$.element.getAttribute("type"),$srcSource$$=$JSCompiler_StaticMethods_createSourceElement_$$($JSCompiler_StaticMethods_propagateCachedSources_$self$$,$src$jscomp$61$$,$type$jscomp$166$$),$ampOrigSrc$$=$JSCompiler_StaticMethods_propagateCachedSources_$self$$.element.getAttribute("amp-orig-src");$srcSource$$.setAttribute("amp-orig-src",$ampOrigSrc$$);
$sources$jscomp$9$$.unshift($srcSource$$)}$sources$jscomp$9$$.forEach(function($sources$jscomp$9$$){$JSCompiler_StaticMethods_isCachedByCDN_$$($JSCompiler_StaticMethods_propagateCachedSources_$self$$,$sources$jscomp$9$$)&&$JSCompiler_StaticMethods_propagateCachedSources_$self$$.$video_$.appendChild($sources$jscomp$9$$)})}
function $JSCompiler_StaticMethods_propagateLayoutChildren_$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$){var $sources$jscomp$10$$=$toArray$$module$src$types$$($childElementsByTag$$module$src$dom$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.element,"source")),$element$jscomp$454$$=$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.element,$urlService$jscomp$5$$=$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$getUrlService_$();$element$jscomp$454$$.hasAttribute("src")&&
!$JSCompiler_StaticMethods_isCachedByCDN_$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$,$element$jscomp$454$$)&&($urlService$jscomp$5$$.assertHttpsUrl($element$jscomp$454$$.getAttribute("src"),$element$jscomp$454$$),$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.propagateAttributes(["src"],$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$video_$));$sources$jscomp$10$$.forEach(function($sources$jscomp$10$$){$JSCompiler_StaticMethods_isCachedByCDN_$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$,
$sources$jscomp$10$$);$urlService$jscomp$5$$.assertHttpsUrl($sources$jscomp$10$$.getAttribute("src"),$sources$jscomp$10$$);$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$video_$.appendChild($sources$jscomp$10$$)});$toArray$$module$src$types$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$video_$.querySelectorAll("[amp-orig-src]")).forEach(function($sources$jscomp$10$$){var $element$jscomp$454$$=$sources$jscomp$10$$.getAttribute("amp-orig-src"),$urlService$jscomp$5$$=$sources$jscomp$10$$.getAttribute("type"),
$tracks$$=$JSCompiler_StaticMethods_createSourceElement_$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$,$element$jscomp$454$$,$urlService$jscomp$5$$);$insertAfterOrAtStart$$module$src$dom$$($JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$video_$,$tracks$$,$sources$jscomp$10$$)});var $tracks$$=$toArray$$module$src$types$$($childElementsByTag$$module$src$dom$$($element$jscomp$454$$,"track"));$tracks$$.forEach(function($sources$jscomp$10$$){$JSCompiler_StaticMethods_propagateLayoutChildren_$self$$.$video_$.appendChild($sources$jscomp$10$$)})}
function $JSCompiler_StaticMethods_isCachedByCDN_$$($JSCompiler_StaticMethods_isCachedByCDN_$self$$,$element$jscomp$455$$){var $src$jscomp$62$$=$element$jscomp$455$$.getAttribute("src"),$hasOrigSrcAttr$$=$element$jscomp$455$$.hasAttribute("amp-orig-src");return $hasOrigSrcAttr$$&&$JSCompiler_StaticMethods_isCachedByCDN_$self$$.$getUrlService_$().isProxyOrigin($src$jscomp$62$$)}
function $JSCompiler_StaticMethods_createSourceElement_$$($JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$,$src$jscomp$63$$,$type$jscomp$167$$){var $element$jscomp$456$$=$JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$.element;$JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$.$getUrlService_$().assertHttpsUrl($src$jscomp$63$$,$element$jscomp$456$$);$JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$=$element$jscomp$456$$.ownerDocument.createElement("source");
$JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$.setAttribute("src",$src$jscomp$63$$);$type$jscomp$167$$&&$JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$.setAttribute("type",$type$jscomp$167$$);return $JSCompiler_StaticMethods_createSourceElement_$self_source$jscomp$46$$}
$JSCompiler_prototypeAlias$$.$installEventHandlers_$=function(){var $$jscomp$this$jscomp$816$$=this,$video$jscomp$61$$=this.$video_$;this.$unlisteners_$.push(this.forwardEvents([$VideoEvents$$module$src$video_interface$$.PLAYING,$VideoEvents$$module$src$video_interface$$.PAUSE,$VideoEvents$$module$src$video_interface$$.ENDED],$video$jscomp$61$$));this.$unlisteners_$.push($listen$$module$src$event_helper$$($video$jscomp$61$$,"volumechange",function(){$$jscomp$this$jscomp$816$$.$muted_$!=$$jscomp$this$jscomp$816$$.$video_$.muted&&
($$jscomp$this$jscomp$816$$.$muted_$=$$jscomp$this$jscomp$816$$.$video_$.muted,$$jscomp$this$jscomp$816$$.element.dispatchCustomEvent($$jscomp$this$jscomp$816$$.$muted_$?$VideoEvents$$module$src$video_interface$$.MUTED:$VideoEvents$$module$src$video_interface$$.UNMUTED))}))};$JSCompiler_prototypeAlias$$.resetOnDomChange=function(){for(this.$video_$=$childElementByTag$$module$src$dom$$(this.element,"video");this.$unlisteners_$.length;)this.$unlisteners_$.pop().call();this.$installEventHandlers_$()};
$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$video_$&&this.$video_$.pause()};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!!this.$video_$.play};$JSCompiler_prototypeAlias$$.isInteractive=function(){return this.element.hasAttribute("controls")};$JSCompiler_prototypeAlias$$.play=function(){var $ret$jscomp$1$$=this.$video_$.play();$ret$jscomp$1$$&&$ret$jscomp$1$$.catch&&$ret$jscomp$1$$.catch(function(){})};$JSCompiler_prototypeAlias$$.pause=function(){this.$video_$.pause()};
$JSCompiler_prototypeAlias$$.mute=function(){this.$video_$.muted=!0};$JSCompiler_prototypeAlias$$.unmute=function(){this.$video_$.muted=!1};$JSCompiler_prototypeAlias$$.showControls=function(){this.$video_$.controls=!0};$JSCompiler_prototypeAlias$$.hideControls=function(){this.$video_$.controls=!1};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){$fullscreenEnter$$module$src$dom$$(this.$video_$)};$JSCompiler_prototypeAlias$$.fullscreenExit=function(){$fullscreenExit$$module$src$dom$$(this.$video_$)};
$JSCompiler_prototypeAlias$$.isFullscreen=function(){return $isFullscreenElement$$module$src$dom$$(this.$video_$)};$JSCompiler_prototypeAlias$$.getMetadata=function(){return this.$metadata_$};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return this.$video_$.currentTime};$JSCompiler_prototypeAlias$$.getDuration=function(){return this.$video_$.duration};
$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){for(var $played$jscomp$1$$=this.$video_$.played,$length$jscomp$34$$=$played$jscomp$1$$.length,$ranges$jscomp$4$$=[],$i$184$$=0;$i$184$$<$length$jscomp$34$$;$i$184$$++)$ranges$jscomp$4$$.push([$played$jscomp$1$$.start($i$184$$),$played$jscomp$1$$.end($i$184$$)]);return $ranges$jscomp$4$$};(function($AMP$jscomp$91$$){$AMP$jscomp$91$$.registerElement("amp-video",$AmpVideo$$module$extensions$amp_video$0_1$amp_video$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-video-0.1-amp-video.js.map

