(self.AMP=self.AMP||[]).push({n:"extensions-amp-bodymovin-animation-0.1-amp-bodymovin-animation.js", v:"erwin", f:(function(){function $AmpBodymovinAnimation$$module$extensions$amp_bodymovin_animation$0_1$amp_bodymovin_animation$$($$jscomp$super$this$jscomp$22_element$jscomp$285$$){$$jscomp$super$this$jscomp$22_element$jscomp$285$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$22_element$jscomp$285$$)||this;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$ampdoc_$=$getAmpdoc$$module$src$service$$($$jscomp$super$this$jscomp$22_element$jscomp$285$$.element);$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$iframe_$=
null;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$loop_$=null;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$autoplay_$=null;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$22_element$jscomp$285$$.$unlistenMessage_$=null;return $$jscomp$super$this$jscomp$22_element$jscomp$285$$}
$$jscomp$inherits$$($AmpBodymovinAnimation$$module$extensions$amp_bodymovin_animation$0_1$amp_bodymovin_animation$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpBodymovinAnimation$$module$extensions$amp_bodymovin_animation$0_1$amp_bodymovin_animation$$.prototype;$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$35$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$35$$)};
$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$8$$){$preloadBootstrap$$module$src$3p_frame$$(this.win,this.preconnect);this.preconnect.url("https://cdnjs.cloudflare.com/ajax/libs/bodymovin/4.13.0/bodymovin_light.min.js",$opt_onLayout$jscomp$8$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$428$$=this;this.$loop_$=this.element.getAttribute("loop")||"true";this.$autoplay_$=!this.element.hasAttribute("noautoplay");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.hasAttribute("src"),"The src attribute must be specified for <amp-bodymovin-animation>");$assertHttpsUrl$$module$src$url$$(this.element.getAttribute("src"),this.element);var $deferred$jscomp$25$$=new $Deferred$$module$src$utils$promise$$;
this.$playerReadyPromise_$=$deferred$jscomp$25$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$25$$.resolve;this.registerAction("play",function(){$$jscomp$this$jscomp$428$$.$play_$()},1);this.registerAction("pause",function(){$$jscomp$this$jscomp$428$$.$pause_$()},1);this.registerAction("stop",function(){$$jscomp$this$jscomp$428$$.$sendCommand_$("stop")},1);this.registerAction("seekTo",function($deferred$jscomp$25$$){if($deferred$jscomp$25$$=$deferred$jscomp$25$$.args){var $JSCompiler_percent$jscomp$inline_1819_args$jscomp$38_invocation$jscomp$23$$=
parseFloat($deferred$jscomp$25$$&&$deferred$jscomp$25$$.time);$isFiniteNumber$$module$src$types$$($JSCompiler_percent$jscomp$inline_1819_args$jscomp$38_invocation$jscomp$23$$)&&$$jscomp$this$jscomp$428$$.$sendCommand_$("seekTo","time",$JSCompiler_percent$jscomp$inline_1819_args$jscomp$38_invocation$jscomp$23$$);$deferred$jscomp$25$$=parseFloat($deferred$jscomp$25$$&&$deferred$jscomp$25$$.percent);$isFiniteNumber$$module$src$types$$($deferred$jscomp$25$$)&&$$jscomp$this$jscomp$428$$.$sendCommand_$("seekTo",
"percent",$clamp$$module$src$utils$math$$($deferred$jscomp$25$$,0,1))}},1)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$429$$=this,$animData$$=$batchFetchJsonFor$$module$src$batched_json$$(this.$ampdoc_$,this.element);return $animData$$.then(function($animData$$){var $data$jscomp$99$$=$getIframe$$module$src$3p_frame$$($$jscomp$this$jscomp$429$$.win,$$jscomp$this$jscomp$429$$.element,"bodymovinanimation",{loop:$$jscomp$this$jscomp$429$$.$loop_$,autoplay:$$jscomp$this$jscomp$429$$.$autoplay_$,animationData:$animData$$});return $Services$$module$src$services$vsyncFor$$($$jscomp$this$jscomp$429$$.win).mutatePromise(function(){$$jscomp$this$jscomp$429$$.applyFillContent($data$jscomp$99$$);
$$jscomp$this$jscomp$429$$.$unlistenMessage_$=$listen$$module$src$event_helper$$($$jscomp$this$jscomp$429$$.win,"message",$$jscomp$this$jscomp$429$$.$handleBodymovinMessages_$.bind($$jscomp$this$jscomp$429$$));$$jscomp$this$jscomp$429$$.element.appendChild($data$jscomp$99$$);$$jscomp$this$jscomp$429$$.$iframe_$=$data$jscomp$99$$}).then(function(){return $$jscomp$this$jscomp$429$$.$playerReadyPromise_$})})};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$26$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$26$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$26$$.resolve;return!0};
$JSCompiler_prototypeAlias$$.$handleBodymovinMessages_$=function($event$jscomp$79_eventData$jscomp$2$$){this.$iframe_$&&$event$jscomp$79_eventData$jscomp$2$$.source!=this.$iframe_$.contentWindow||!$event$jscomp$79_eventData$jscomp$2$$.data||!$isObject$$module$src$types$$($event$jscomp$79_eventData$jscomp$2$$.data)&&!$startsWith$$module$src$string$$($event$jscomp$79_eventData$jscomp$2$$.data,"{")||($event$jscomp$79_eventData$jscomp$2$$=$isObject$$module$src$types$$($event$jscomp$79_eventData$jscomp$2$$.data)?
$event$jscomp$79_eventData$jscomp$2$$.data:$parseJson$$module$src$json$$($event$jscomp$79_eventData$jscomp$2$$.data),void 0!==$event$jscomp$79_eventData$jscomp$2$$&&"ready"==$event$jscomp$79_eventData$jscomp$2$$.action&&this.$playerReadyResolver_$())};
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($action$jscomp$14$$,$opt_valueType$$,$opt_value$jscomp$11$$){var $$jscomp$this$jscomp$430$$=this;this.$playerReadyPromise_$.then(function(){if($$jscomp$this$jscomp$430$$.$iframe_$&&$$jscomp$this$jscomp$430$$.$iframe_$.contentWindow){var $message$jscomp$51$$=JSON.stringify($dict$$module$src$utils$object$$({action:$action$jscomp$14$$,valueType:$opt_valueType$$||"",value:$opt_value$jscomp$11$$||""}));$$jscomp$this$jscomp$430$$.$iframe_$.contentWindow.postMessage($message$jscomp$51$$,
"*")}})};$JSCompiler_prototypeAlias$$.$play_$=function(){this.$sendCommand_$("play")};$JSCompiler_prototypeAlias$$.$pause_$=function(){this.$sendCommand_$("pause")};(function($AMP$jscomp$26$$){$AMP$jscomp$26$$.registerElement("amp-bodymovin-animation",$AmpBodymovinAnimation$$module$extensions$amp_bodymovin_animation$0_1$amp_bodymovin_animation$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-bodymovin-animation-0.1-amp-bodymovin-animation.js.map

