(self.AMP=self.AMP||[]).push({n:"extensions-amp-image-viewer-0.1-amp-image-viewer.js", v:"erwin", f:(function(){function $PinchRecognizer$$module$src$gesture_recognizers$$($manager$jscomp$8$$){$GestureRecognizer$$module$src$gesture$$.call(this,"pinch",$manager$jscomp$8$$);this.D=!1;this.C=this.B=this.R=this.J=this.V=this.X=this.W=this.U=this.S=this.P=this.M=this.O=this.K=this.I=this.G=this.H=this.F=0}$$jscomp$inherits$$($PinchRecognizer$$module$src$gesture_recognizers$$,$GestureRecognizer$$module$src$gesture$$);$JSCompiler_prototypeAlias$$=$PinchRecognizer$$module$src$gesture_recognizers$$.prototype;
$JSCompiler_prototypeAlias$$.onTouchStart=function($e$jscomp$42_touches$jscomp$10$$){return($e$jscomp$42_touches$jscomp$10$$=$e$jscomp$42_touches$jscomp$10$$.touches)&&1==$e$jscomp$42_touches$jscomp$10$$.length?!0:$e$jscomp$42_touches$jscomp$10$$&&2==$e$jscomp$42_touches$jscomp$10$$.length?(this.V=Date.now(),this.F=$e$jscomp$42_touches$jscomp$10$$[0].clientX,this.H=$e$jscomp$42_touches$jscomp$10$$[0].clientY,this.G=$e$jscomp$42_touches$jscomp$10$$[1].clientX,this.I=$e$jscomp$42_touches$jscomp$10$$[1].clientY,
!0):!1};
$JSCompiler_prototypeAlias$$.onTouchMove=function($e$jscomp$43$$){var $touches$jscomp$11$$=$e$jscomp$43$$.touches;if($touches$jscomp$11$$&&1==$touches$jscomp$11$$.length)return!0;if($touches$jscomp$11$$&&2==$touches$jscomp$11$$.length){this.K=$touches$jscomp$11$$[0].clientX;this.O=$touches$jscomp$11$$[0].clientY;this.M=$touches$jscomp$11$$[1].clientX;this.P=$touches$jscomp$11$$[1].clientY;if(this.D)$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$$(this,!1,
!1,$e$jscomp$43$$);else{var $dx1$$=this.K-this.F,$dy1$$=this.O-this.H,$dx2$$=this.M-this.G,$dy2$$=this.P-this.I;if(0>=$dx1$$*$dx2$$&&0>=$dy1$$*$dy2$$)(4<=Math.abs($dx1$$-$dx2$$)||4<=Math.abs($dy1$$-$dy2$$))&&this.signalReady(0);else if(10<=Math.abs($dx1$$+$dx2$$)||10<=Math.abs($dy1$$+$dy2$$))return!1}return!0}return!1};
$JSCompiler_prototypeAlias$$.onTouchEnd=function($e$jscomp$44$$){this.D&&(this.D=!1,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$$(this,!1,!0,$e$jscomp$44$$),this.signalEnd())};$JSCompiler_prototypeAlias$$.acceptStart=function(){this.D=!0;this.R=this.V;this.U=this.S=0;this.W=.5*(this.F+this.G);this.X=.5*(this.H+this.I);$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$$(this,!0,!1,null)};
$JSCompiler_prototypeAlias$$.acceptCancel=function(){this.D=!1};
function $JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$$($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$,$first$jscomp$5$$,$last$jscomp$2$$,$event$jscomp$20$$){$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.J=Date.now();var $JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.J-
$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.R,$deltaX$$=Math.abs($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.K-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.F-($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.M-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.G)),
$deltaY$$=Math.abs($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.O-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.H-($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.P-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.I));if(!$last$jscomp$2$$&&4<$JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$||
$last$jscomp$2$$&&16<$JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$)$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B=$calcVelocity$$module$src$motion$$($deltaX$$-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.S,$JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B),
$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C=$calcVelocity$$module$src$motion$$($deltaY$$-$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.U,$JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C),$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B=
1E-4<Math.abs($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B)?$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B:0,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C=1E-4<Math.abs($JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C)?$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C:
0,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.S=$deltaX$$,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.U=$deltaY$$,$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.R=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.J;var $JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$=
$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.F,$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.G,$JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.H,$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$=
$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.I,$startSq$$=($JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$-$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$)*($JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$-$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$)+($JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$-$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$)*
($JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$-$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$),$JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.K,$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.M,$JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$=
$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.O,$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$=$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.P,$lastSq$$=($JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$-$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$)*($JSCompiler_x1$jscomp$inline_1972_JSCompiler_x1$jscomp$inline_1977_deltaTime$jscomp$2$$-
$JSCompiler_x2$jscomp$inline_1973_JSCompiler_x2$jscomp$inline_1978$$)+($JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$-$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$)*($JSCompiler_y1$jscomp$inline_1974_JSCompiler_y1$jscomp$inline_1979$$-$JSCompiler_y2$jscomp$inline_1975_JSCompiler_y2$jscomp$inline_1980$$);$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.signalEmit({first:$first$jscomp$5$$,last:$last$jscomp$2$$,
time:$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.J,centerClientX:$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.W,centerClientY:$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.X,dir:Math.sign($lastSq$$-$startSq$$),deltaX:.5*$deltaX$$,deltaY:.5*$deltaY$$,velocityX:.5*$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.B,
velocityY:.5*$JSCompiler_StaticMethods_PinchRecognizer$$module$src$gesture_recognizers_prototype$emit_$self$$.C},$event$jscomp$20$$)};var $PAN_ZOOM_CURVE_$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$=$bezierCurve$$module$src$curve$$(.4,0,.2,1.4),$ARIA_ATTRIBUTES$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$=["aria-label","aria-describedby","aria-labelledby"],$ELIGIBLE_TAGS$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$={"amp-img":!0,"amp-anim":!0};
function $AmpImageViewer$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$($$jscomp$super$this$jscomp$50_element$jscomp$348$$){$$jscomp$super$this$jscomp$50_element$jscomp$348$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$50_element$jscomp$348$$)||this;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$image_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$srcset_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$sourceWidth_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$sourceHeight_$=
0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$elementBox_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$imageBox_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$unlistenOnSwipePan_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$scale_$=1;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$startScale_$=1;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$maxSeenScale_$=1;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$minScale_$=1;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$maxScale_$=
2;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$startX_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$startY_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$posX_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$posY_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$minX_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$minY_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$maxX_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$maxY_$=0;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$gestures_$=
null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$motion_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$sourceAmpImage_$=null;$$jscomp$super$this$jscomp$50_element$jscomp$348$$.$loadPromise_$=null;return $$jscomp$super$this$jscomp$50_element$jscomp$348$$}$$jscomp$inherits$$($AmpImageViewer$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpImageViewer$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$.prototype;
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.element.classList.add("i-amphtml-image-viewer");var $children$jscomp$12$$=this.getRealChildren();$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(1==$children$jscomp$12$$.length,"amp-image-viewer should have its target element\n   as the one and only child");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($ELIGIBLE_TAGS$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$[$children$jscomp$12$$[0].tagName.toLowerCase()],
$children$jscomp$12$$[0].tagName+" is not supported by <amp-image-viewer>");this.$sourceAmpImage_$=$children$jscomp$12$$[0];this.setAsOwner(this.$sourceAmpImage_$)};$JSCompiler_prototypeAlias$$.onLayoutMeasure=function(){var $$jscomp$this$jscomp$543$$=this;this.$loadPromise_$&&this.$loadPromise_$.then(function(){return $JSCompiler_StaticMethods_resetImageDimensions_$$($$jscomp$this$jscomp$543$$)})};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$544$$=this;if(this.$loadPromise_$)return this.$loadPromise_$;this.scheduleLayout(this.$sourceAmpImage_$);return this.$loadPromise_$=this.$sourceAmpImage_$.signals().whenSignal("load-end").then(function(){return $$jscomp$this$jscomp$544$$.$init_$()}).then(function(){return $JSCompiler_StaticMethods_resetImageDimensions_$$($$jscomp$this$jscomp$544$$)}).then(function(){return $$jscomp$this$jscomp$544$$.$setupGestures_$()})};
$JSCompiler_prototypeAlias$$.pauseCallback=function(){var $$jscomp$this$jscomp$545$$=this;this.$loadPromise_$&&this.$loadPromise_$.then(function(){$JSCompiler_StaticMethods_resetImageDimensions_$$($$jscomp$this$jscomp$545$$);$$jscomp$this$jscomp$545$$.$gestures_$&&($$jscomp$this$jscomp$545$$.$gestures_$.cleanup(),$$jscomp$this$jscomp$545$$.$gestures_$=null)})};
$JSCompiler_prototypeAlias$$.resumeCallback=function(){var $$jscomp$this$jscomp$546$$=this;this.$sourceAmpImage_$&&this.scheduleLayout(this.$sourceAmpImage_$);this.$loadPromise_$&&this.$loadPromise_$.then(function(){$$jscomp$this$jscomp$546$$.$gestures_$||$$jscomp$this$jscomp$546$$.$setupGestures_$()})};$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$gestures_$&&(this.$gestures_$.cleanup(),this.$gestures_$=null);this.$loadPromise_$=null;return!0};
$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$57$$){return"fill"==$layout$jscomp$57$$};$JSCompiler_prototypeAlias$$.isRelayoutNeeded=function(){return!0};$JSCompiler_prototypeAlias$$.getImageBox=function(){return this.$imageBox_$};$JSCompiler_prototypeAlias$$.getImage=function(){return this.$image_$};
$JSCompiler_prototypeAlias$$.getImageBoxWithOffset=function(){if(0==this.$posX_$&&0==this.$posY_$||!this.$imageBox_$)return this.$imageBox_$;var $expansionScale$$=(this.$scale_$-1)/2;return $moveLayoutRect$$module$src$layout_rect$$($expandLayoutRect$$module$src$layout_rect$$(this.$imageBox_$,$expansionScale$$,$expansionScale$$),this.$posX_$,this.$posY_$)};
$JSCompiler_prototypeAlias$$.$setSourceDimensions_$=function($ampImg$jscomp$1$$){var $$jscomp$this$jscomp$547$$=this,$img$jscomp$4$$=$elementByTag$$module$src$dom$$($ampImg$jscomp$1$$,"img");this.measureElement(function(){$img$jscomp$4$$?($$jscomp$this$jscomp$547$$.$sourceWidth_$=$img$jscomp$4$$.naturalWidth||$ampImg$jscomp$1$$.offsetWidth,$$jscomp$this$jscomp$547$$.$sourceHeight_$=$img$jscomp$4$$.naturalHeight||$ampImg$jscomp$1$$.offsetHeight):($$jscomp$this$jscomp$547$$.$sourceWidth_$=$ampImg$jscomp$1$$.offsetWidth,
$$jscomp$this$jscomp$547$$.$sourceHeight_$=$ampImg$jscomp$1$$.offsetHeight)})};
$JSCompiler_prototypeAlias$$.$init_$=function(){var $$jscomp$this$jscomp$548$$=this;if(this.$image_$)return Promise.resolve();this.$image_$=this.element.ownerDocument.createElement("img");this.$image_$.classList.add("i-amphtml-image-viewer-image");var $ampImg$jscomp$2$$=this.$sourceAmpImage_$;this.$setSourceDimensions_$($ampImg$jscomp$2$$);this.$srcset_$=$srcsetFromElement$$module$src$srcset$$($ampImg$jscomp$2$$);return this.mutateElement(function(){$setStyles$$module$src$style$$($$jscomp$this$jscomp$548$$.$image_$,{top:0,
left:0,width:0,height:0});$toggle$$module$src$style$$($ampImg$jscomp$2$$,!1);$$jscomp$this$jscomp$548$$.element.appendChild($$jscomp$this$jscomp$548$$.$image_$);return $ampImg$jscomp$2$$.getImpl().then(function($ampImg$jscomp$2$$){$ampImg$jscomp$2$$.propagateAttributes($ARIA_ATTRIBUTES$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$,$$jscomp$this$jscomp$548$$.$image_$)})})};
$JSCompiler_prototypeAlias$$.$measure_$=function(){this.$elementBox_$=$layoutRectFromDomRect$$module$src$layout_rect$$(this.element.getBoundingClientRect());var $sourceAspectRatio$jscomp$1$$=this.$sourceWidth_$/this.$sourceHeight_$,$height$jscomp$47$$=Math.min(this.$elementBox_$.width/$sourceAspectRatio$jscomp$1$$,this.$elementBox_$.height),$width$jscomp$51$$=Math.min(this.$elementBox_$.height*$sourceAspectRatio$jscomp$1$$,this.$elementBox_$.width);16>=Math.abs($width$jscomp$51$$-this.$sourceWidth_$)&&
Math.abs(16>=$height$jscomp$47$$-this.$sourceHeight_$)&&($width$jscomp$51$$=this.$sourceWidth_$,$height$jscomp$47$$=this.$sourceHeight_$);this.$imageBox_$=$layoutRectLtwh$$module$src$layout_rect$$(Math.round((this.$elementBox_$.width-$width$jscomp$51$$)/2),Math.round((this.$elementBox_$.height-$height$jscomp$47$$)/2),Math.round($width$jscomp$51$$),Math.round($height$jscomp$47$$));var $elementBoxRatio$$=this.$elementBox_$.width/this.$elementBox_$.height;this.$maxScale_$=Math.max(2,Math.max($elementBoxRatio$$/
$sourceAspectRatio$jscomp$1$$,$sourceAspectRatio$jscomp$1$$/$elementBoxRatio$$));this.$startScale_$=this.$scale_$=1;this.$startY_$=this.$posY_$=this.$startX_$=this.$posX_$=0;this.$updatePanZoomBounds_$(this.$scale_$)};
function $JSCompiler_StaticMethods_resetImageDimensions_$$($JSCompiler_StaticMethods_resetImageDimensions_$self$$){return $JSCompiler_StaticMethods_resetImageDimensions_$self$$.measureElement(function(){return $JSCompiler_StaticMethods_resetImageDimensions_$self$$.$measure_$()}).then(function(){var $image$jscomp$8$$=$JSCompiler_StaticMethods_resetImageDimensions_$self$$.$image_$;return $JSCompiler_StaticMethods_resetImageDimensions_$self$$.mutateElement(function(){$setStyles$$module$src$style$$($image$jscomp$8$$,
{top:$px$$module$src$style$$($JSCompiler_StaticMethods_resetImageDimensions_$self$$.$imageBox_$.top),left:$px$$module$src$style$$($JSCompiler_StaticMethods_resetImageDimensions_$self$$.$imageBox_$.left),width:$px$$module$src$style$$($JSCompiler_StaticMethods_resetImageDimensions_$self$$.$imageBox_$.width),height:$px$$module$src$style$$($JSCompiler_StaticMethods_resetImageDimensions_$self$$.$imageBox_$.height)});$JSCompiler_StaticMethods_resetImageDimensions_$self$$.$updatePanZoom_$()},$image$jscomp$8$$)}).then(function(){return $JSCompiler_StaticMethods_resetImageDimensions_$self$$.$updateSrc_$()})}
$JSCompiler_prototypeAlias$$.$updateSrc_$=function(){var $$jscomp$this$jscomp$550$$=this;if(!this.$srcset_$)return Promise.resolve();this.$maxSeenScale_$=Math.max(this.$maxSeenScale_$,this.$scale_$);var $src$jscomp$44$$=this.$srcset_$.select(Math.max(this.$imageBox_$.width*this.$maxSeenScale_$,this.$sourceWidth_$),this.getDpr());return $src$jscomp$44$$==this.$image_$.getAttribute("src")?Promise.resolve():this.mutateElement(function(){$$jscomp$this$jscomp$550$$.$image_$.setAttribute("src",$src$jscomp$44$$)},
this.$image_$)};
$JSCompiler_prototypeAlias$$.$setupGestures_$=function(){var $$jscomp$this$jscomp$551$$=this;this.$gestures_$=$Gestures$$module$src$gesture$get$$(this.element,!0);this.$gestures_$.onPointerDown(function(){$$jscomp$this$jscomp$551$$.$motion_$&&($$jscomp$this$jscomp$551$$.$motion_$.halt(),event.preventDefault())});this.$gestures_$.onGesture($DoubletapRecognizer$$module$src$gesture_recognizers$$,function($e$jscomp$244$$){event.preventDefault();$$jscomp$this$jscomp$551$$.$onZoom_$(1==$$jscomp$this$jscomp$551$$.$scale_$?
$$jscomp$this$jscomp$551$$.$maxScale_$:$$jscomp$this$jscomp$551$$.$minScale_$,$$jscomp$this$jscomp$551$$.$elementBox_$.width/2-$e$jscomp$244$$.data.clientX,$$jscomp$this$jscomp$551$$.$elementBox_$.height/2-$e$jscomp$244$$.data.clientY,!0).then(function(){return $$jscomp$this$jscomp$551$$.$onZoomRelease_$()})});this.$gestures_$.onGesture($TapzoomRecognizer$$module$src$gesture_recognizers$$,function($e$jscomp$245$$){event.preventDefault();var $JSCompiler_deltaX$jscomp$inline_1989$$=$e$jscomp$245$$.data.deltaX,
$JSCompiler_deltaY$jscomp$inline_1990$$=$e$jscomp$245$$.data.deltaY;$JSCompiler_StaticMethods_zoomToPoint_$$($$jscomp$this$jscomp$551$$,$e$jscomp$245$$.data.centerClientX,$e$jscomp$245$$.data.centerClientY,$JSCompiler_deltaX$jscomp$inline_1989$$,$JSCompiler_deltaY$jscomp$inline_1990$$,Math.abs($JSCompiler_deltaY$jscomp$inline_1990$$)>Math.abs($JSCompiler_deltaX$jscomp$inline_1989$$)?Math.sign($JSCompiler_deltaY$jscomp$inline_1990$$):Math.sign(-$JSCompiler_deltaX$jscomp$inline_1989$$));$e$jscomp$245$$.data.last&&
$JSCompiler_StaticMethods_onTapZoomRelease_$$($$jscomp$this$jscomp$551$$,$e$jscomp$245$$.data.centerClientX,$e$jscomp$245$$.data.centerClientY,$e$jscomp$245$$.data.deltaX,$e$jscomp$245$$.data.deltaY,$e$jscomp$245$$.data.velocityY,$e$jscomp$245$$.data.velocityY)});this.$gestures_$.onGesture($PinchRecognizer$$module$src$gesture_recognizers$$,function($e$jscomp$246$$){event.preventDefault();$JSCompiler_StaticMethods_zoomToPoint_$$($$jscomp$this$jscomp$551$$,$e$jscomp$246$$.data.centerClientX,$e$jscomp$246$$.data.centerClientY,
$e$jscomp$246$$.data.deltaX,$e$jscomp$246$$.data.deltaY,$e$jscomp$246$$.data.dir);$e$jscomp$246$$.data.last&&$$jscomp$this$jscomp$551$$.$onZoomRelease_$()})};
function $JSCompiler_StaticMethods_registerPanningGesture_$$($JSCompiler_StaticMethods_registerPanningGesture_$self$$){$JSCompiler_StaticMethods_registerPanningGesture_$self$$.$unlistenOnSwipePan_$=$JSCompiler_StaticMethods_registerPanningGesture_$self$$.$gestures_$.onGesture($SwipeXYRecognizer$$module$src$gesture_recognizers$$,function($e$jscomp$247$$){event.preventDefault();$JSCompiler_StaticMethods_registerPanningGesture_$self$$.$onMove_$($e$jscomp$247$$.data.deltaX,$e$jscomp$247$$.data.deltaY,
!1);$e$jscomp$247$$.data.last&&$JSCompiler_StaticMethods_registerPanningGesture_$self$$.$onMoveRelease_$($e$jscomp$247$$.data.velocityX,$e$jscomp$247$$.data.velocityY)})}$JSCompiler_prototypeAlias$$.$boundValue_$=function($v$jscomp$24$$,$min$jscomp$5$$,$max$jscomp$5$$,$extent$jscomp$1$$){return Math.max($min$jscomp$5$$-$extent$jscomp$1$$,Math.min($max$jscomp$5$$+$extent$jscomp$1$$,$v$jscomp$24$$))};
$JSCompiler_prototypeAlias$$.$boundScale_$=function($s$jscomp$40$$,$allowExtent$jscomp$3$$){return this.$boundValue_$($s$jscomp$40$$,this.$minScale_$,this.$maxScale_$,$allowExtent$jscomp$3$$?.25:0)};$JSCompiler_prototypeAlias$$.$boundX_$=function($x$jscomp$106$$,$allowExtent$jscomp$4$$){return this.$boundValue_$($x$jscomp$106$$,this.$minX_$,this.$maxX_$,$allowExtent$jscomp$4$$&&1<this.$scale_$?.25*this.$elementBox_$.width:0)};
$JSCompiler_prototypeAlias$$.$boundY_$=function($y$jscomp$77$$,$allowExtent$jscomp$5$$){return this.$boundValue_$($y$jscomp$77$$,this.$minY_$,this.$maxY_$,$allowExtent$jscomp$5$$?.25*this.$elementBox_$.height:0)};
$JSCompiler_prototypeAlias$$.$updatePanZoomBounds_$=function($dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$){var $dh$jscomp$2_maxY$jscomp$2$$,$minY$jscomp$1$$;$dh$jscomp$2_maxY$jscomp$2$$=this.$elementBox_$.height-this.$imageBox_$.height*$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$;0<=$dh$jscomp$2_maxY$jscomp$2$$?$minY$jscomp$1$$=$dh$jscomp$2_maxY$jscomp$2$$=0:($minY$jscomp$1$$=$dh$jscomp$2_maxY$jscomp$2$$/2,$dh$jscomp$2_maxY$jscomp$2$$=-$minY$jscomp$1$$);var $minX$jscomp$1$$;$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$=
this.$elementBox_$.width-this.$imageBox_$.width*$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$;0<=$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$?$minX$jscomp$1$$=$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$=0:($minX$jscomp$1$$=$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$/2,$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$=-$minX$jscomp$1$$);this.$minX_$=$minX$jscomp$1$$;this.$minY_$=$minY$jscomp$1$$;this.$maxX_$=$dw$jscomp$2_maxX$jscomp$1_scale$jscomp$12$$;this.$maxY_$=$dh$jscomp$2_maxY$jscomp$2$$};
$JSCompiler_prototypeAlias$$.$updatePanZoom_$=function(){$setStyles$$module$src$style$$(this.$image_$,{transform:$translate$$module$src$style$$(this.$posX_$,this.$posY_$)+" "+$scale$$module$src$style$$(this.$scale_$)})};
$JSCompiler_prototypeAlias$$.$onMove_$=function($deltaX$jscomp$7_newPosX$jscomp$5$$,$deltaY$jscomp$8_newPosY$jscomp$5$$,$animate$jscomp$7$$){$deltaX$jscomp$7_newPosX$jscomp$5$$=this.$boundX_$(this.$startX_$+$deltaX$jscomp$7_newPosX$jscomp$5$$,!1);$deltaY$jscomp$8_newPosY$jscomp$5$$=this.$boundY_$(this.$startY_$+$deltaY$jscomp$8_newPosY$jscomp$5$$,!1);this.$set_$(this.$scale_$,$deltaX$jscomp$7_newPosX$jscomp$5$$,$deltaY$jscomp$8_newPosY$jscomp$5$$,$animate$jscomp$7$$)};
$JSCompiler_prototypeAlias$$.$onMoveRelease_$=function($veloX$jscomp$4$$,$veloY$jscomp$4$$){var $$jscomp$this$jscomp$553$$=this;this.$motion_$=$continueMotion$$module$src$motion$$(this.$image_$,this.$posX_$,this.$posY_$,$veloX$jscomp$4$$,$veloY$jscomp$4$$,function($veloX$jscomp$4$$,$veloY$jscomp$4$$){$veloX$jscomp$4$$=$$jscomp$this$jscomp$553$$.$boundX_$($veloX$jscomp$4$$,!1);$veloY$jscomp$4$$=$$jscomp$this$jscomp$553$$.$boundY_$($veloY$jscomp$4$$,!1);if(1>Math.abs($veloX$jscomp$4$$-$$jscomp$this$jscomp$553$$.$posX_$)&&
1>Math.abs($veloY$jscomp$4$$-$$jscomp$this$jscomp$553$$.$posY_$))return!1;$$jscomp$this$jscomp$553$$.$set_$($$jscomp$this$jscomp$553$$.$scale_$,$veloX$jscomp$4$$,$veloY$jscomp$4$$,!1);return!0});$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$thenAlways$$(this.$motion_$,function(){$$jscomp$this$jscomp$553$$.$motion_$=null;return $$jscomp$this$jscomp$553$$.$release_$()})};
function $JSCompiler_StaticMethods_zoomToPoint_$$($JSCompiler_StaticMethods_zoomToPoint_$self$$,$centerClientX$jscomp$4$$,$centerClientY$jscomp$4_deltaCenterY$jscomp$1$$,$deltaCenterX$jscomp$1_deltaX$jscomp$10$$,$deltaY$jscomp$11_dist$jscomp$2$$,$dir$jscomp$10_newScale$jscomp$6$$){$dir$jscomp$10_newScale$jscomp$6$$&&($deltaY$jscomp$11_dist$jscomp$2$$=Math.sqrt($deltaCenterX$jscomp$1_deltaX$jscomp$10$$*$deltaCenterX$jscomp$1_deltaX$jscomp$10$$+$deltaY$jscomp$11_dist$jscomp$2$$*$deltaY$jscomp$11_dist$jscomp$2$$),
$dir$jscomp$10_newScale$jscomp$6$$=$JSCompiler_StaticMethods_zoomToPoint_$self$$.$startScale_$*(1+$dir$jscomp$10_newScale$jscomp$6$$*$deltaY$jscomp$11_dist$jscomp$2$$/100),$deltaCenterX$jscomp$1_deltaX$jscomp$10$$=$JSCompiler_StaticMethods_zoomToPoint_$self$$.$elementBox_$.width/2-$centerClientX$jscomp$4$$,$centerClientY$jscomp$4_deltaCenterY$jscomp$1$$=$JSCompiler_StaticMethods_zoomToPoint_$self$$.$elementBox_$.height/2-$centerClientY$jscomp$4_deltaCenterY$jscomp$1$$,$deltaCenterX$jscomp$1_deltaX$jscomp$10$$=
Math.min($deltaCenterX$jscomp$1_deltaX$jscomp$10$$,$deltaY$jscomp$11_dist$jscomp$2$$/100*$deltaCenterX$jscomp$1_deltaX$jscomp$10$$),$deltaY$jscomp$11_dist$jscomp$2$$=Math.min($centerClientY$jscomp$4_deltaCenterY$jscomp$1$$,$deltaY$jscomp$11_dist$jscomp$2$$/100*$centerClientY$jscomp$4_deltaCenterY$jscomp$1$$),$JSCompiler_StaticMethods_zoomToPoint_$self$$.$onZoom_$($dir$jscomp$10_newScale$jscomp$6$$,$deltaCenterX$jscomp$1_deltaX$jscomp$10$$,$deltaY$jscomp$11_dist$jscomp$2$$,!1))}
$JSCompiler_prototypeAlias$$.$onZoom_$=function($newScale$jscomp$7_scale$jscomp$13$$,$deltaX$jscomp$11_newPosX$jscomp$7$$,$deltaY$jscomp$12_newPosY$jscomp$7$$,$animate$jscomp$8$$){$newScale$jscomp$7_scale$jscomp$13$$=this.$boundScale_$($newScale$jscomp$7_scale$jscomp$13$$,!0);if($newScale$jscomp$7_scale$jscomp$13$$!=this.$scale_$)return this.$updatePanZoomBounds_$($newScale$jscomp$7_scale$jscomp$13$$),$deltaX$jscomp$11_newPosX$jscomp$7$$=this.$boundX_$(this.$startX_$+$deltaX$jscomp$11_newPosX$jscomp$7$$*
$newScale$jscomp$7_scale$jscomp$13$$,!1),$deltaY$jscomp$12_newPosY$jscomp$7$$=this.$boundY_$(this.$startY_$+$deltaY$jscomp$12_newPosY$jscomp$7$$*$newScale$jscomp$7_scale$jscomp$13$$,!1),this.$set_$($newScale$jscomp$7_scale$jscomp$13$$,$deltaX$jscomp$11_newPosX$jscomp$7$$,$deltaY$jscomp$12_newPosY$jscomp$7$$,$animate$jscomp$8$$)};
function $JSCompiler_StaticMethods_onTapZoomRelease_$$($JSCompiler_StaticMethods_onTapZoomRelease_$self$$,$centerClientX$jscomp$5$$,$centerClientY$jscomp$5$$,$deltaX$jscomp$12$$,$deltaY$jscomp$13$$,$veloX$jscomp$5$$,$veloY$jscomp$5$$){($veloX$jscomp$5$$||$veloY$jscomp$5$$?$JSCompiler_StaticMethods_Motion$$module$src$motion_prototype$thenAlways$$($continueMotion$$module$src$motion$$($JSCompiler_StaticMethods_onTapZoomRelease_$self$$.$image_$,$deltaX$jscomp$12$$,$deltaY$jscomp$13$$,$veloX$jscomp$5$$,
$veloY$jscomp$5$$,function($deltaX$jscomp$12$$,$deltaY$jscomp$13$$){$JSCompiler_StaticMethods_zoomToPoint_$$($JSCompiler_StaticMethods_onTapZoomRelease_$self$$,$centerClientX$jscomp$5$$,$centerClientY$jscomp$5$$,$deltaX$jscomp$12$$,$deltaY$jscomp$13$$,Math.abs($deltaY$jscomp$13$$)>Math.abs($deltaX$jscomp$12$$)?Math.sign($deltaY$jscomp$13$$):Math.sign(-$deltaX$jscomp$12$$));return!0})):Promise.resolve()).then(function(){$JSCompiler_StaticMethods_onTapZoomRelease_$self$$.$onZoomRelease_$()})}
$JSCompiler_prototypeAlias$$.$onZoomRelease_$=function(){var $$jscomp$this$jscomp$555$$=this,$relayout$jscomp$1$$=this.$scale_$>this.$startScale_$;return this.$release_$().then(function(){$relayout$jscomp$1$$&&$$jscomp$this$jscomp$555$$.$updateSrc_$();1>=$$jscomp$this$jscomp$555$$.$scale_$?$$jscomp$this$jscomp$555$$.$unlistenOnSwipePan_$&&($$jscomp$this$jscomp$555$$.$unlistenOnSwipePan_$(),$$jscomp$this$jscomp$555$$.$unlistenOnSwipePan_$=null,$$jscomp$this$jscomp$555$$.$gestures_$.removeGesture($SwipeXYRecognizer$$module$src$gesture_recognizers$$)):
$JSCompiler_StaticMethods_registerPanningGesture_$$($$jscomp$this$jscomp$555$$)})};
$JSCompiler_prototypeAlias$$.$set_$=function($newScale$jscomp$8$$,$newPosX$jscomp$8$$,$newPosY$jscomp$8$$,$animate$jscomp$9$$){var $$jscomp$this$jscomp$556$$=this,$ds$jscomp$1$$=$newScale$jscomp$8$$-this.$scale_$,$dist$jscomp$3_dx$jscomp$12$$=$newPosX$jscomp$8$$-this.$posX_$,$dur$jscomp$3_dy$jscomp$13$$=$newPosY$jscomp$8$$-this.$posY_$,$dist$jscomp$3_dx$jscomp$12$$=Math.sqrt($dist$jscomp$3_dx$jscomp$12$$*$dist$jscomp$3_dx$jscomp$12$$+$dur$jscomp$3_dy$jscomp$13$$*$dur$jscomp$3_dy$jscomp$13$$),$dur$jscomp$3_dy$jscomp$13$$=
0;$animate$jscomp$9$$&&($dur$jscomp$3_dy$jscomp$13$$=Math.min(250,Math.max(2.5*$dist$jscomp$3_dx$jscomp$12$$,250*Math.abs($ds$jscomp$1$$))));var $promise$jscomp$32$$;if(16<$dur$jscomp$3_dy$jscomp$13$$&&$animate$jscomp$9$$){var $scaleFunc$jscomp$1$$=$numeric$$module$src$transition$$(this.$scale_$,$newScale$jscomp$8$$),$xFunc$jscomp$1$$=$numeric$$module$src$transition$$(this.$posX_$,$newPosX$jscomp$8$$),$yFunc$jscomp$1$$=$numeric$$module$src$transition$$(this.$posY_$,$newPosY$jscomp$8$$);$promise$jscomp$32$$=
$JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($Animation$$module$src$animation$animate$$(this.$image_$,function($newScale$jscomp$8$$){$$jscomp$this$jscomp$556$$.$scale_$=$scaleFunc$jscomp$1$$($newScale$jscomp$8$$);$$jscomp$this$jscomp$556$$.$posX_$=$xFunc$jscomp$1$$($newScale$jscomp$8$$);$$jscomp$this$jscomp$556$$.$posY_$=$yFunc$jscomp$1$$($newScale$jscomp$8$$);$$jscomp$this$jscomp$556$$.$updatePanZoom_$()},$dur$jscomp$3_dy$jscomp$13$$,$PAN_ZOOM_CURVE_$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$),
function(){$$jscomp$this$jscomp$556$$.$scale_$=$newScale$jscomp$8$$;$$jscomp$this$jscomp$556$$.$posX_$=$newPosX$jscomp$8$$;$$jscomp$this$jscomp$556$$.$posY_$=$newPosY$jscomp$8$$;$$jscomp$this$jscomp$556$$.$updatePanZoom_$()})}else this.$scale_$=$newScale$jscomp$8$$,this.$posX_$=$newPosX$jscomp$8$$,this.$posY_$=$newPosY$jscomp$8$$,this.$updatePanZoom_$(),$animate$jscomp$9$$?$promise$jscomp$32$$=Promise.resolve():$promise$jscomp$32$$=void 0;return $promise$jscomp$32$$};
$JSCompiler_prototypeAlias$$.$release_$=function(){var $$jscomp$this$jscomp$557$$=this,$newScale$jscomp$9$$=this.$boundScale_$(this.$scale_$,!1);$newScale$jscomp$9$$!=this.$scale_$&&this.$updatePanZoomBounds_$($newScale$jscomp$9$$);var $newPosX$jscomp$9$$=this.$boundX_$(this.$posX_$/this.$scale_$*$newScale$jscomp$9$$,!1),$newPosY$jscomp$9$$=this.$boundY_$(this.$posY_$/this.$scale_$*$newScale$jscomp$9$$,!1);return this.$set_$($newScale$jscomp$9$$,$newPosX$jscomp$9$$,$newPosY$jscomp$9$$,!0).then(function(){$$jscomp$this$jscomp$557$$.$startScale_$=
$$jscomp$this$jscomp$557$$.$scale_$;$$jscomp$this$jscomp$557$$.$startX_$=$$jscomp$this$jscomp$557$$.$posX_$;$$jscomp$this$jscomp$557$$.$startY_$=$$jscomp$this$jscomp$557$$.$posY_$})};(function($AMP$jscomp$55$$){$AMP$jscomp$55$$.registerElement("amp-image-viewer",$AmpImageViewer$$module$extensions$amp_image_viewer$0_1$amp_image_viewer$$,".i-amphtml-image-viewer-image{position:absolute}.i-amphtml-image-viewer{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden;-webkit-transform:translateZ(0);transform:translateZ(0)}\n/*# sourceURL=/extensions/amp-image-viewer/0.1/amp-image-viewer.css*/")})(self.AMP);})});
//# sourceMappingURL=extensions-amp-image-viewer-0.1-amp-image-viewer.js.map

