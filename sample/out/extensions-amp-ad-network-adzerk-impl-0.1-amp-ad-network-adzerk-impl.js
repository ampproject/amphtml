(self.AMP=self.AMP||[]).push({n:"extensions-amp-ad-network-adzerk-impl-0.1-amp-ad-network-adzerk-impl.js", v:"erwin", f:(function(){var $TEMPLATE_CORS_CONFIG$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$={mode:"cors",method:"GET",ampCors:!1,credentials:"omit"};function $AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$($win$jscomp$248$$){this.C=$win$jscomp$248$$;this.B=new $LruCache$$module$src$utils$lru_cache$$(5)}
function $JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$$($templateUrl$$){var $JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$self$$=$ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$,$proxyUrl$$=$JSCompiler_StaticMethods_getTemplateProxyUrl_$$($templateUrl$$),$templatePromise$$=$JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$self$$.B.get($proxyUrl$$);
$templatePromise$$||($templatePromise$$=$Services$$module$src$services$xhrFor$$($JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$self$$.C).fetchText($proxyUrl$$,$TEMPLATE_CORS_CONFIG$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$).then(function($templateUrl$$){return $templateUrl$$.text()}),$JSCompiler_StaticMethods_LruCache$$module$src$utils$lru_cache_prototype$put$$($JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$self$$.B,
$proxyUrl$$,$templatePromise$$));return $templatePromise$$}$AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$.prototype.render=function($templateValues$$,$element$jscomp$225$$){return $Services$$module$src$services$templatesFor$$(this.C).findAndRenderTemplate($element$jscomp$225$$,$templateValues$$)};
$AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$.prototype.D=function($element$jscomp$226$$,$analyticsValue$$){$analyticsValue$$=$isArray$$module$src$types$$($analyticsValue$$)?$analyticsValue$$:[$analyticsValue$$];for(var $i$jscomp$196$$=0;$i$jscomp$196$$<$analyticsValue$$.length;$i$jscomp$196$$++){var $config$jscomp$14$$=$analyticsValue$$[$i$jscomp$196$$],$analyticsEle$$=$element$jscomp$226$$.ownerDocument.createElement("amp-analytics");$config$jscomp$14$$.remote&&$analyticsEle$$.setAttribute("config",
$config$jscomp$14$$.remote);$config$jscomp$14$$.type&&$analyticsEle$$.setAttribute("type",$config$jscomp$14$$.type);if($config$jscomp$14$$.inline){var $scriptElem$jscomp$2$$=$createElementWithAttributes$$module$src$dom$$($element$jscomp$226$$.ownerDocument,"script",$dict$$module$src$utils$object$$({type:"application/json"}));$scriptElem$jscomp$2$$.textContent=JSON.stringify($config$jscomp$14$$.inline);$analyticsEle$$.appendChild($scriptElem$jscomp$2$$)}$element$jscomp$226$$.appendChild($analyticsEle$$)}};
function $JSCompiler_StaticMethods_getTemplateProxyUrl_$$($url$jscomp$120$$){var $cdnUrlSuffix$$=$module$src$config$$.urls.cdn.slice(8),$loc$jscomp$3$$=$parseUrlDeprecated$$module$src$url$$($url$jscomp$120$$);return 0<$loc$jscomp$3$$.origin.indexOf($cdnUrlSuffix$$)?$url$jscomp$120$$:"https://"+$loc$jscomp$3$$.hostname.replace(/-/g,"--").replace(/\./g,"-")+"."+$cdnUrlSuffix$$+"/ad/s/"+$loc$jscomp$3$$.hostname+$loc$jscomp$3$$.pathname};var $ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$;
function $AmpAdNetworkAdzerkImpl$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$($$jscomp$super$this$jscomp$8_element$jscomp$227$$){$$jscomp$super$this$jscomp$8_element$jscomp$227$$=$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.call(this,$$jscomp$super$this$jscomp$8_element$jscomp$227$$)||this;$$jscomp$super$this$jscomp$8_element$jscomp$227$$.$creativeMetadata_$=null;$$jscomp$super$this$jscomp$8_element$jscomp$227$$.$ampCreativeJson_$=null;$ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$=
$ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$||new $AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper$$($$jscomp$super$this$jscomp$8_element$jscomp$227$$.win);return $$jscomp$super$this$jscomp$8_element$jscomp$227$$}$$jscomp$inherits$$($AmpAdNetworkAdzerkImpl$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$,$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$);$JSCompiler_prototypeAlias$$=$AmpAdNetworkAdzerkImpl$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$.prototype;
$JSCompiler_prototypeAlias$$.isValidElement=function(){return!!this.getAdUrl()};$JSCompiler_prototypeAlias$$.getSigningServiceNames=function(){return[]};$JSCompiler_prototypeAlias$$.getAdUrl=function(){var $data$jscomp$78$$=this.element.getAttribute("data-r");return"https://engine.adzerk.net/amp?r="+encodeURIComponent($data$jscomp$78$$)};
$JSCompiler_prototypeAlias$$.maybeValidateAmpCreative=function($bytes$jscomp$9$$,$headers$jscomp$5$$){var $$jscomp$this$jscomp$273$$=this;if("amp-mustache"!==$headers$jscomp$5$$.get("AMP-template-amp-creative"))return Promise.resolve(null);var $checkStillCurrent$jscomp$5$$=this.verifyStillCurrent();return $tryResolve$$module$src$utils$promise$$(function(){return $utf8Decode$$module$src$utils$bytes$$($bytes$jscomp$9$$)}).then(function($bytes$jscomp$9$$){$checkStillCurrent$jscomp$5$$();$$jscomp$this$jscomp$273$$.$ampCreativeJson_$=
$tryParseJson$$module$src$json$$($bytes$jscomp$9$$)||{};return $JSCompiler_StaticMethods_AmpAdTemplateHelper$$module$extensions$amp_a4a$0_1$amp_ad_template_helper_prototype$fetch$$($$jscomp$this$jscomp$273$$.$ampCreativeJson_$.templateUrl).then(function($bytes$jscomp$9$$){return $utf8Encode$$module$src$utils$bytes$$($$jscomp$this$jscomp$273$$.parseMetadataFromCreative($bytes$jscomp$9$$))}).catch(function($bytes$jscomp$9$$){$dev$$module$src$log$$().warn("amp-ad-network-adzerk-impl","Error fetching/expanding template",
$$jscomp$this$jscomp$273$$.$ampCreativeJson_$,$bytes$jscomp$9$$);$$jscomp$this$jscomp$273$$.forceCollapse();return Promise.reject("NO-CONTENT-RESPONSE")})})};$JSCompiler_prototypeAlias$$.parseMetadataFromCreative=function($creative$jscomp$5$$){var $minifiedCreative$$=$creative$jscomp$5$$.replace(/<script async.+?<\/script>/g,"");this.$creativeMetadata_$={minifiedCreative:$minifiedCreative$$,customElementExtensions:[],extensions:[]};return $minifiedCreative$$};
$JSCompiler_prototypeAlias$$.getAmpAdMetadata=function(){this.$creativeMetadata_$||(this.$creativeMetadata_$={});this.$creativeMetadata_$.customElementExtensions||(this.$creativeMetadata_$.customElementExtensions=[]);if(this.$ampCreativeJson_$.analytics){var $JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$=this.$creativeMetadata_$.customElementExtensions;0>$JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$.indexOf("amp-analytics")&&$JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$.push("amp-analytics")}$JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$=
this.$creativeMetadata_$.customElementExtensions;0>$JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$.indexOf("amp-mustache")&&$JSCompiler_array$jscomp$inline_1303_JSCompiler_array$jscomp$inline_1306$$.push("amp-mustache");return this.$creativeMetadata_$};
$JSCompiler_prototypeAlias$$.onCreativeRender=function(){var $$jscomp$this$jscomp$274$$=this;this.$ampCreativeJson_$&&this.$ampCreativeJson_$.data&&$ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$.render(this.$ampCreativeJson_$.data,this.iframe.contentWindow.document.body).then(function($renderedElement$$){$$jscomp$this$jscomp$274$$.$ampCreativeJson_$.analytics&&$ampAdTemplateHelper$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$.D($renderedElement$$,
$$jscomp$this$jscomp$274$$.$ampCreativeJson_$.analytics);$$jscomp$this$jscomp$274$$.iframe.contentWindow.document.body.innerHTML=$renderedElement$$.innerHTML})};(function($AMP$jscomp$9$$){$AMP$jscomp$9$$.registerElement("amp-ad-network-adzerk-impl",$AmpAdNetworkAdzerkImpl$$module$extensions$amp_ad_network_adzerk_impl$0_1$amp_ad_network_adzerk_impl$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-ad-network-adzerk-impl-0.1-amp-ad-network-adzerk-impl.js.map

