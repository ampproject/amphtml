(self.AMP=self.AMP||[]).push({n:"extensions-amp-ad-network-doubleclick-impl-0.1-amp-ad-network-doubleclick-impl.js", v:"erwin", f:(function(){function $validateDimensions$$module$ads$google$utils$$($width$jscomp$28$$,$height$jscomp$24$$,$widthCond$$,$heightCond$$,$errorBuilder$$){var $badParams$jscomp$3$$=[];$widthCond$$($width$jscomp$28$$)&&$badParams$jscomp$3$$.push({dim:"width",val:$width$jscomp$28$$});$heightCond$$($height$jscomp$24$$)&&$badParams$jscomp$3$$.push({dim:"height",val:$height$jscomp$24$$});$badParams$jscomp$3$$.length&&$user$$module$src$log$$().warn("AMP-AD",$errorBuilder$$($badParams$jscomp$3$$));return!$badParams$jscomp$3$$.length}
function $getMultiSizeDimensions$$module$ads$google$utils$$($multiSizeDataStr$$,$primaryWidth$$,$primaryHeight$$,$multiSizeValidation$$,$isFluid$jscomp$1$$){$isFluid$jscomp$1$$=void 0===$isFluid$jscomp$1$$?!1:$isFluid$jscomp$1$$;for(var $dimensions$jscomp$1$$=[],$arrayOfSizeStrs$$=$multiSizeDataStr$$.split(","),$$jscomp$loop$198$$={},$i$jscomp$183$$=0;$i$jscomp$183$$<$arrayOfSizeStrs$$.length;$$jscomp$loop$198$$={minWidth:$$jscomp$loop$198$$.minWidth,minHeight:$$jscomp$loop$198$$.minHeight},$i$jscomp$183$$++){var $sizeStr$jscomp$1_width$jscomp$27$$=
$arrayOfSizeStrs$$[$i$jscomp$183$$],$height$jscomp$23_size$jscomp$16$$=$sizeStr$jscomp$1_width$jscomp$27$$.split("x");if(2!=$height$jscomp$23_size$jscomp$16$$.length)$user$$module$src$log$$().error("AMP-AD","Invalid multi-size data format '"+$sizeStr$jscomp$1_width$jscomp$27$$+"'.");else if($sizeStr$jscomp$1_width$jscomp$27$$=Number($height$jscomp$23_size$jscomp$16$$[0]),$height$jscomp$23_size$jscomp$16$$=Number($height$jscomp$23_size$jscomp$16$$[1]),$validateDimensions$$module$ads$google$utils$$($sizeStr$jscomp$1_width$jscomp$27$$,
$height$jscomp$23_size$jscomp$16$$,function($multiSizeDataStr$$){return isNaN($multiSizeDataStr$$)||0>=$multiSizeDataStr$$},function($multiSizeDataStr$$){return isNaN($multiSizeDataStr$$)||0>=$multiSizeDataStr$$},function($multiSizeDataStr$$){return $multiSizeDataStr$$.map(function($multiSizeDataStr$$){return"Invalid "+$multiSizeDataStr$$.dim+" of "+$multiSizeDataStr$$.val+" given for secondary size."}).join(" ")})&&($isFluid$jscomp$1$$||$validateDimensions$$module$ads$google$utils$$($sizeStr$jscomp$1_width$jscomp$27$$,
$height$jscomp$23_size$jscomp$16$$,function($multiSizeDataStr$$){return $multiSizeDataStr$$>$primaryWidth$$},function($multiSizeDataStr$$){return $multiSizeDataStr$$>$primaryHeight$$},function($multiSizeDataStr$$){return $multiSizeDataStr$$.map(function($multiSizeDataStr$$){return"Secondary "+$multiSizeDataStr$$.dim+" "+$multiSizeDataStr$$.val+" "+("can't be larger than the primary "+$multiSizeDataStr$$.dim+".")}).join(" ")}))){if($multiSizeValidation$$){var $minRatio$jscomp$1$$=2/3;$$jscomp$loop$198$$.minWidth=
$minRatio$jscomp$1$$*$primaryWidth$$;$$jscomp$loop$198$$.minHeight=$minRatio$jscomp$1$$*$primaryHeight$$;if(!$validateDimensions$$module$ads$google$utils$$($sizeStr$jscomp$1_width$jscomp$27$$,$height$jscomp$23_size$jscomp$16$$,function($multiSizeDataStr$$){return function($primaryWidth$$){return $primaryWidth$$<$multiSizeDataStr$$.minWidth}}($$jscomp$loop$198$$),function($multiSizeDataStr$$){return function($primaryWidth$$){return $primaryWidth$$<$multiSizeDataStr$$.minHeight}}($$jscomp$loop$198$$),
function($multiSizeDataStr$$){return $multiSizeDataStr$$.map(function($multiSizeDataStr$$){return"Secondary "+$multiSizeDataStr$$.dim+" "+$multiSizeDataStr$$.val+" is "+("smaller than 2/3rds of the primary "+$multiSizeDataStr$$.dim+".")}).join(" ")}))continue}$dimensions$jscomp$1$$.push([$sizeStr$jscomp$1_width$jscomp$27$$,$height$jscomp$23_size$jscomp$16$$])}}return $dimensions$jscomp$1$$}
function $experimentFeatureEnabled$$module$extensions$amp_ad_network_doubleclick_impl$0_1$doubleclick_a4a_config$$($win$jscomp$232$$,$feature$jscomp$5$$,$opt_experimentName$$){return $getExperimentBranch$$module$src$experiments$$($win$jscomp$232$$,$opt_experimentName$$||"expDoubleclickA4A")==$feature$jscomp$5$$}
function $groupAmpAdsByType$$module$ads$google$a4a$utils$$($win$jscomp$205$$,$type$jscomp$127$$){var $groupFn$$=$getNetworkId$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$;return $Services$$module$src$services$resourcesForDoc$$($win$jscomp$205$$.document).getMeasuredResources($win$jscomp$205$$,function($win$jscomp$205$$){var $groupFn$$="AMP-AD"==$win$jscomp$205$$.element.tagName&&$win$jscomp$205$$.element.getAttribute("type")==$type$jscomp$127$$;if($groupFn$$)return!0;
var $r$jscomp$20$$=Object.keys($ValidAdContainerTypes$$module$ads$google$a4a$utils$$).includes($win$jscomp$205$$.element.tagName)&&!!$scopedQuerySelector$$module$src$dom$$($win$jscomp$205$$.element,$cssEscape$$module$third_party$css_escape$css_escape$$("amp-ad[type="+$type$jscomp$127$$+"]"));return $r$jscomp$20$$}).then(function($win$jscomp$205$$){return Promise.all($win$jscomp$205$$.map(function($win$jscomp$205$$){return"AMP-AD"==$win$jscomp$205$$.element.tagName?$win$jscomp$205$$.element:$whenUpgradedToCustomElement$$module$src$dom$$($scopedQuerySelector$$module$src$dom$$($win$jscomp$205$$.element,
$cssEscape$$module$third_party$css_escape$css_escape$$("amp-ad[type="+$type$jscomp$127$$+"]")))}))}).then(function($win$jscomp$205$$){return $win$jscomp$205$$.reduce(function($win$jscomp$205$$,$type$jscomp$127$$){var $elements$jscomp$14$$=$groupFn$$($type$jscomp$127$$);($win$jscomp$205$$[$elements$jscomp$14$$]||($win$jscomp$205$$[$elements$jscomp$14$$]=[])).push($type$jscomp$127$$.getImpl());return $win$jscomp$205$$},{})})}
function $lineDelimitedStreamer$$module$ads$google$a4a$line_delimited_response_handler$$($win$jscomp$249$$,$response$jscomp$28$$,$lineCallback$$){function $streamer$$($win$jscomp$249$$,$response$jscomp$28$$){for(var $streamer$$=/([^\n]*)(\n)?/g,$decoder$$;($decoder$$=$streamer$$.exec($win$jscomp$249$$))&&($line$jscomp$3$$+=$decoder$$[1],$decoder$$[2]&&($lineCallback$$($line$jscomp$3$$,$response$jscomp$28$$&&$streamer$$.lastIndex===$win$jscomp$249$$.length),$line$jscomp$3$$=""),$streamer$$.lastIndex!==
$win$jscomp$249$$.length););}var $line$jscomp$3$$="";if($response$jscomp$28$$.body&&$win$jscomp$249$$.TextDecoder){var $decoder$$=new TextDecoder("utf-8"),$reader$$=$response$jscomp$28$$.body.getReader();$reader$$.read().then(function $chunk$jscomp$7$$($win$jscomp$249$$){$win$jscomp$249$$.value&&$streamer$$($decoder$$.decode($win$jscomp$249$$.value,{stream:!0}),$win$jscomp$249$$.done);$win$jscomp$249$$.done||$reader$$.read().then($chunk$jscomp$7$$)})}else $response$jscomp$28$$.text().then(function($win$jscomp$249$$){return $streamer$$($win$jscomp$249$$,
!0)})}
function $metaJsonCreativeGrouper$$module$ads$google$a4a$line_delimited_response_handler$$($callback$jscomp$119$$){var $first$jscomp$8$$;return function($line$jscomp$4$$,$done$jscomp$2$$){if($first$jscomp$8$$){var $metadata$jscomp$2$$=$tryParseJson$$module$src$json$$($first$jscomp$8$$)||{},$lowerCasedMetadata$$=Object.keys($metadata$jscomp$2$$).reduce(function($callback$jscomp$119$$,$first$jscomp$8$$){$callback$jscomp$119$$[$first$jscomp$8$$.toLowerCase()]=$metadata$jscomp$2$$[$first$jscomp$8$$];return $callback$jscomp$119$$},
{});$callback$jscomp$119$$($unescapeLineDelimitedHtml_$$module$ads$google$a4a$line_delimited_response_handler$$($line$jscomp$4$$),$lowerCasedMetadata$$,$done$jscomp$2$$);$first$jscomp$8$$=null}else $first$jscomp$8$$=$line$jscomp$4$$}}
function $unescapeLineDelimitedHtml_$$module$ads$google$a4a$line_delimited_response_handler$$($html$jscomp$5$$){return $html$jscomp$5$$.replace(/\\(n|r|\\)/g,function($html$jscomp$5$$,$match$jscomp$19$$){return"n"==$match$jscomp$19$$?"\n":"r"==$match$jscomp$19$$?"\r":"\\"})};var $RTC_VENDORS$$module$extensions$amp_a4a$0_1$callout_vendors$$={medianet:{url:"https://amprtc.media.net/rtb/getrtc?cid=CID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&tgt=TGT&curl=CANONICAL_URL&to=TIMEOUT&purl=HREF",macros:["CID"],disableKeyAppend:!0},prebidappnexus:{url:"https://prebid.adnxs.com/pbs/v1/openrtb2/amp?tag_id=PLACEMENT_ID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adcid=ADCID&purl=HREF",
macros:["PLACEMENT_ID"],disableKeyAppend:!0},prebidrubicon:{url:"https://prebid-server.rubiconproject.com/openrtb2/amp?tag_id=REQUEST_ID&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&slot=ATTR(data-slot)&targeting=TGT&curl=CANONICAL_URL&timeout=TIMEOUT&adc=ADCID&purl=HREF",macros:["REQUEST_ID"],disableKeyAppend:!0},indexexchange:{url:"https://amp.casalemedia.com/amprtc?v=1&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&s=SITE_ID&p=CANONICAL_URL",
macros:["SITE_ID"],disableKeyAppend:!0},lotame:{url:"https://ad.crwdcntrl.net/5/pe=y/c=CLIENT_ID/an=AD_NETWORK",macros:["CLIENT_ID","AD_NETWORK"]},yieldbot:{url:"https://i.yldbt.com/m/YB_PSN/v1/amp/init?curl=CANONICAL_URL&sn=YB_SLOT&w=ATTR(width)&h=ATTR(height)&ow=ATTR(data-override-width)&oh=ATTR(data-override-height)&ms=ATTR(data-multi-size)&aup=ATTR(data-slot)&pvi=PAGEVIEWID&tgt=TGT&adcid=ADCID&href=HREF",macros:["YB_PSN","YB_SLOT"],disableKeyAppend:!0},salesforcedmp:{url:"https://cdn.krxd.net/userdata/v2/amp/ORGANIZATION_ID?segments_key=SEGMENTS_KEY&kuid_key=USER_KEY",
macros:["ORGANIZATION_ID","SEGMENTS_KEY","USER_KEY"],disableKeyAppend:!0},purch:{url:"https://ads.servebom.com/tmntag.js?v=1.2&fmt=amp&o={%22p%22%3APLACEMENT_ID}&div_id=DIV_ID",macros:["PLACEMENT_ID","DIV_ID"],disableKeyAppend:!0},aps:{url:"https://aax.amazon-adsystem.com/e/dtb/bid?src=PUB_ID&amp=1&u=HREF&slots=%5B%7B%22sd%22%3A%22ATTR(data-slot)%22%2C%22s%22%3A%5B%22ATTR(width)xATTR(height)%22%5D%7D%5D&pj=PARAMS&gdpre=GDPRE&gdprc=GDPRC",macros:["PUB_ID","PARAMS","GDPRE","GDPRC"],disableKeyAppend:!0}};var $ERROR_REPORTING_ENABLED$$module$extensions$amp_a4a$0_1$real_time_config_manager$$=.01>Math.random();
function $buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($error$jscomp$46$$,$callout$$,$errorReportingUrl$$,$win$jscomp$250$$,$JSCompiler_url$jscomp$inline_1314_ampDoc$jscomp$2$$,$opt_rtcTime$$){$dev$$module$src$log$$().warn("real-time-config","RTC callout to "+$callout$$+" caused "+$error$jscomp$46$$);if($errorReportingUrl$$){var $JSCompiler_errorReportingUrl$jscomp$inline_1310$$=$errorReportingUrl$$;if($ERROR_REPORTING_ENABLED$$module$extensions$amp_a4a$0_1$real_time_config_manager$$)if($isSecureUrl$$module$src$url$$($JSCompiler_errorReportingUrl$jscomp$inline_1310$$)){var $JSCompiler_macros$jscomp$inline_1313$$=
{ERROR_TYPE:$error$jscomp$46$$,HREF:$win$jscomp$250$$.location.href};$JSCompiler_url$jscomp$inline_1314_ampDoc$jscomp$2$$=$Services$$module$src$services$urlReplacementsForDoc$$($JSCompiler_url$jscomp$inline_1314_ampDoc$jscomp$2$$).expandUrlSync($JSCompiler_errorReportingUrl$jscomp$inline_1310$$,$JSCompiler_macros$jscomp$inline_1313$$,{ERROR_TYPE:!0,HREF:!0});(new $win$jscomp$250$$.Image).src=$JSCompiler_url$jscomp$inline_1314_ampDoc$jscomp$2$$}else $dev$$module$src$log$$().warn("real-time-config",
"Insecure RTC errorReportingUrl: "+$JSCompiler_errorReportingUrl$jscomp$inline_1310$$)}return Promise.resolve({error:$error$jscomp$46$$,callout:$callout$$,rtcTime:$opt_rtcTime$$||0})}
function $getCalloutParam_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($parsedUrl$jscomp$1_url$jscomp$123$$){$parsedUrl$jscomp$1_url$jscomp$123$$=$parseUrlDeprecated$$module$src$url$$($parsedUrl$jscomp$1_url$jscomp$123$$);return($parsedUrl$jscomp$1_url$jscomp$123$$.hostname+$parsedUrl$jscomp$1_url$jscomp$123$$.pathname).substr(0,50)}
function $inflateAndSendRtc_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($a4aElement$jscomp$1_urlReplacements$jscomp$2$$,$url$jscomp$126$$,$seenUrls$jscomp$1$$,$promiseArray$jscomp$2$$,$rtcStartTime$jscomp$1$$,$macros$jscomp$2$$,$timeoutMillis$$,$errorReportingUrl$jscomp$4$$,$opt_vendor$$){function $send$$($a4aElement$jscomp$1_urlReplacements$jscomp$2$$){if(5==Object.keys($seenUrls$jscomp$1$$).length)return $buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("7",
$callout$jscomp$1$$,$errorReportingUrl$jscomp$4$$,$win$jscomp$252$$,$ampDoc$jscomp$4$$);if(!$isSecureUrl$$module$src$url$$($a4aElement$jscomp$1_urlReplacements$jscomp$2$$))return $buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("6",$callout$jscomp$1$$,$errorReportingUrl$jscomp$4$$,$win$jscomp$252$$,$ampDoc$jscomp$4$$);if($seenUrls$jscomp$1$$[$a4aElement$jscomp$1_urlReplacements$jscomp$2$$])return $buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("5",
$callout$jscomp$1$$,$errorReportingUrl$jscomp$4$$,$win$jscomp$252$$,$ampDoc$jscomp$4$$);$seenUrls$jscomp$1$$[$a4aElement$jscomp$1_urlReplacements$jscomp$2$$]=!0;16384<$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.length&&($a4aElement$jscomp$1_urlReplacements$jscomp$2$$=$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.substr(0,16372).replace(/%\w?$/,""),$a4aElement$jscomp$1_urlReplacements$jscomp$2$$+="&__trunc__=1");return $sendRtcCallout_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($a4aElement$jscomp$1_urlReplacements$jscomp$2$$,
$rtcStartTime$jscomp$1$$,$win$jscomp$252$$,$timeoutMillis$$,$callout$jscomp$1$$,$checkStillCurrent$jscomp$6$$,$errorReportingUrl$jscomp$4$$,$ampDoc$jscomp$4$$)}var $win$jscomp$252$$=$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.win,$ampDoc$jscomp$4$$=$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.getAmpDoc(),$callout$jscomp$1$$=$opt_vendor$$||$getCalloutParam_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($url$jscomp$126$$),$checkStillCurrent$jscomp$6$$=$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.verifyStillCurrent.bind($a4aElement$jscomp$1_urlReplacements$jscomp$2$$)();
$a4aElement$jscomp$1_urlReplacements$jscomp$2$$=$Services$$module$src$services$urlReplacementsForDoc$$($ampDoc$jscomp$4$$);var $whitelist$jscomp$8$$={};Object.keys($macros$jscomp$2$$).forEach(function($a4aElement$jscomp$1_urlReplacements$jscomp$2$$){return $whitelist$jscomp$8$$[$a4aElement$jscomp$1_urlReplacements$jscomp$2$$]=!0});var $urlReplacementStartTime$$=Date.now();$promiseArray$jscomp$2$$.push($Services$$module$src$services$timerFor$$($win$jscomp$252$$).timeoutPromise($timeoutMillis$$,$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.expandUrlAsync($url$jscomp$126$$,
$macros$jscomp$2$$,$whitelist$jscomp$8$$)).then(function($a4aElement$jscomp$1_urlReplacements$jscomp$2$$){$checkStillCurrent$jscomp$6$$();$timeoutMillis$$-=$urlReplacementStartTime$$-Date.now();return $send$$($a4aElement$jscomp$1_urlReplacements$jscomp$2$$)}).catch(function($a4aElement$jscomp$1_urlReplacements$jscomp$2$$){return"CANCELLED"==$a4aElement$jscomp$1_urlReplacements$jscomp$2$$.message?void 0:$buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("11",$callout$jscomp$1$$,
$errorReportingUrl$jscomp$4$$,$win$jscomp$252$$,$ampDoc$jscomp$4$$)}))}
function $sendRtcCallout_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($url$jscomp$130$$,$rtcStartTime$jscomp$2$$,$win$jscomp$253$$,$timeoutMillis$jscomp$1$$,$callout$jscomp$2$$,$checkStillCurrent$jscomp$7$$,$errorReportingUrl$jscomp$5$$,$ampDoc$jscomp$5$$){return $Services$$module$src$services$timerFor$$($win$jscomp$253$$).timeoutPromise($timeoutMillis$jscomp$1$$,$Services$$module$src$services$xhrFor$$($win$jscomp$253$$).fetchJson($url$jscomp$130$$,{credentials:"include"}).then(function($url$jscomp$130$$){$checkStillCurrent$jscomp$7$$();
return $url$jscomp$130$$.text().then(function($url$jscomp$130$$){$checkStillCurrent$jscomp$7$$();var $timeoutMillis$jscomp$1$$=Date.now()-$rtcStartTime$jscomp$2$$;return $url$jscomp$130$$?($url$jscomp$130$$=$tryParseJson$$module$src$json$$($url$jscomp$130$$))?{response:$url$jscomp$130$$,rtcTime:$timeoutMillis$jscomp$1$$,callout:$callout$jscomp$2$$}:$buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("4",$callout$jscomp$2$$,$errorReportingUrl$jscomp$5$$,$win$jscomp$253$$,
$ampDoc$jscomp$5$$,$timeoutMillis$jscomp$1$$):{rtcTime:$timeoutMillis$jscomp$1$$,callout:$callout$jscomp$2$$}})})).catch(function($url$jscomp$130$$){return"CANCELLED"==$url$jscomp$130$$.message?void 0:$buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($url$jscomp$130$$.message&&$url$jscomp$130$$.message.match(/^timeout/)?"10":"8",$callout$jscomp$2$$,$errorReportingUrl$jscomp$5$$,$win$jscomp$253$$,$ampDoc$jscomp$5$$,Date.now()-$rtcStartTime$jscomp$2$$)})}
function $validateRtcConfig_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($element$jscomp$228$$){var $defaultTimeoutMillis$$=1E3,$unparsedRtcConfig$$=$element$jscomp$228$$.getAttribute("rtc-config");if(!$unparsedRtcConfig$$)return null;var $rtcConfig$jscomp$1$$=$tryParseJson$$module$src$json$$($unparsedRtcConfig$$);if(!$rtcConfig$jscomp$1$$)return $user$$module$src$log$$().warn("real-time-config","Could not parse rtc-config attribute"),null;var $timeout$jscomp$8$$;try{if($user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($rtcConfig$jscomp$1$$.vendors||
$rtcConfig$jscomp$1$$.urls,"RTC Config must specify vendors or urls"),Object.keys($rtcConfig$jscomp$1$$).forEach(function($element$jscomp$228$$){switch($element$jscomp$228$$){case "vendors":$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isObject$$module$src$types$$($rtcConfig$jscomp$1$$[$element$jscomp$228$$]),"RTC invalid vendors");break;case "urls":$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isArray$$module$src$types$$($rtcConfig$jscomp$1$$[$element$jscomp$228$$]),
"RTC invalid urls");break;case "timeoutMillis":$timeout$jscomp$8$$=parseInt($rtcConfig$jscomp$1$$[$element$jscomp$228$$],10);if(isNaN($timeout$jscomp$8$$))$user$$module$src$log$$().warn("real-time-config","Invalid RTC timeout is NaN, "+("using default timeout "+$defaultTimeoutMillis$$+"ms")),$timeout$jscomp$8$$=void 0;else if($timeout$jscomp$8$$>=$defaultTimeoutMillis$$||0>$timeout$jscomp$8$$)$user$$module$src$log$$().warn("real-time-config","Invalid RTC timeout: "+$timeout$jscomp$8$$+"ms, "+("using default timeout "+
$defaultTimeoutMillis$$+"ms")),$timeout$jscomp$8$$=void 0;break;default:$user$$module$src$log$$().warn("real-time-config","Unknown RTC Config key: "+$element$jscomp$228$$)}}),!Object.keys($rtcConfig$jscomp$1$$.vendors||{}).length&&!($rtcConfig$jscomp$1$$.urls||[]).length)return null}catch($unusedErr$jscomp$2$$){return null}$rtcConfig$jscomp$1$$.timeoutMillis=void 0!==$timeout$jscomp$8$$?$timeout$jscomp$8$$:$defaultTimeoutMillis$$;return $rtcConfig$jscomp$1$$}
AMP.maybeExecuteRealTimeConfig=function($a4aElement$$,$customMacros$$,$consentState$jscomp$3$$){if(2!=$consentState$jscomp$3$$&&4!=$consentState$jscomp$3$$){var $rtcConfig$$=$validateRtcConfig_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($a4aElement$$.element);if($rtcConfig$$){$customMacros$$.TIMEOUT=function(){return $rtcConfig$$.timeoutMillis};var $promiseArray$jscomp$1$$=[],$seenUrls$$={},$rtcStartTime$$=Date.now();($rtcConfig$$.urls||[]).forEach(function($consentState$jscomp$3$$){var $urlObj$$,
$errorReportingUrl$jscomp$2$$;$isObject$$module$src$types$$($consentState$jscomp$3$$)?($urlObj$$=$consentState$jscomp$3$$.url,$errorReportingUrl$jscomp$2$$=$consentState$jscomp$3$$.errorReportingUrl):"string"==typeof $consentState$jscomp$3$$?$urlObj$$=$consentState$jscomp$3$$:$dev$$module$src$log$$().warn("real-time-config","Invalid url: "+$consentState$jscomp$3$$);$inflateAndSendRtc_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($a4aElement$$,$urlObj$$,$seenUrls$$,$promiseArray$jscomp$1$$,
$rtcStartTime$$,$customMacros$$,$rtcConfig$$.timeoutMillis,$errorReportingUrl$jscomp$2$$)});Object.keys($rtcConfig$$.vendors||[]).forEach(function($consentState$jscomp$3$$){var $vendor$jscomp$8$$=$RTC_VENDORS$$module$extensions$amp_a4a$0_1$callout_vendors$$[$consentState$jscomp$3$$.toLowerCase()],$url$jscomp$125$$=$vendor$jscomp$8$$?$vendor$jscomp$8$$.url:"",$errorReportingUrl$jscomp$3$$=$vendor$jscomp$8$$?$vendor$jscomp$8$$.errorReportingUrl:"";if(!$url$jscomp$125$$)return $promiseArray$jscomp$1$$.push($buildErrorResponse_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$("9",
$consentState$jscomp$3$$,$errorReportingUrl$jscomp$3$$,$a4aElement$$.win,$a4aElement$$.getAmpDoc()));var $validVendorMacros$$={};Object.keys($rtcConfig$$.vendors[$consentState$jscomp$3$$]).forEach(function($a4aElement$$){if($vendor$jscomp$8$$.macros&&$vendor$jscomp$8$$.macros.includes($a4aElement$$)){var $customMacros$$=$rtcConfig$$.vendors[$consentState$jscomp$3$$][$a4aElement$$];$validVendorMacros$$[$a4aElement$$]=$isObject$$module$src$types$$($customMacros$$)||$isArray$$module$src$types$$($customMacros$$)?
JSON.stringify($customMacros$$):$customMacros$$}else $user$$module$src$log$$().warn("real-time-config","Unknown macro: "+$a4aElement$$+" for vendor: "+$consentState$jscomp$3$$)});var $macros$jscomp$1$$=Object.assign($validVendorMacros$$,$customMacros$$);$inflateAndSendRtc_$$module$extensions$amp_a4a$0_1$real_time_config_manager$$($a4aElement$$,$url$jscomp$125$$,$seenUrls$$,$promiseArray$jscomp$1$$,$rtcStartTime$$,$macros$jscomp$1$$,$rtcConfig$$.timeoutMillis,$errorReportingUrl$jscomp$3$$,$consentState$jscomp$3$$.toLowerCase())});
return Promise.all($promiseArray$jscomp$1$$)}}};function $RefreshIntersectionObserverWrapper$$module$extensions$amp_a4a$0_1$refresh_intersection_observer_wrapper$$($callback$jscomp$120$$,$baseElement$jscomp$1$$,$config$jscomp$15$$){this.$intersectionObserver_$=new $IntersectionObserverPolyfill$$module$src$intersection_observer_polyfill$$($callback$jscomp$120$$,$config$jscomp$15$$);this.C={};this.$viewport_$=$baseElement$jscomp$1$$.getViewport();this.B=!1}
$RefreshIntersectionObserverWrapper$$module$extensions$amp_a4a$0_1$refresh_intersection_observer_wrapper$$.prototype.observe=function($element$jscomp$229$$){var $$jscomp$this$jscomp$275$$=this,$refreshId$$=$element$jscomp$229$$.getAttribute("data-amp-ad-refresh-id");if(!this.C[$refreshId$$]){var $viewportCallback$$=$element$jscomp$229$$.viewportCallback.bind($element$jscomp$229$$);this.C[$refreshId$$]=$viewportCallback$$;$element$jscomp$229$$.viewportCallback=function($element$jscomp$229$$){$$jscomp$this$jscomp$275$$.B&&
$JSCompiler_StaticMethods_IntersectionObserverPolyfill$$module$src$intersection_observer_polyfill_prototype$tick$$($$jscomp$this$jscomp$275$$.$intersectionObserver_$,$$jscomp$this$jscomp$275$$.$viewport_$.getRect());$viewportCallback$$($element$jscomp$229$$)}}this.B=!0;this.$intersectionObserver_$.observe($element$jscomp$229$$)};
$RefreshIntersectionObserverWrapper$$module$extensions$amp_a4a$0_1$refresh_intersection_observer_wrapper$$.prototype.unobserve=function($element$jscomp$230$$){$JSCompiler_StaticMethods_IntersectionObserverPolyfill$$module$src$intersection_observer_polyfill_prototype$tick$$(this.$intersectionObserver_$,this.$viewport_$.getRect());this.$intersectionObserver_$.unobserve($element$jscomp$230$$);this.B=!1};function $getPublisherSpecifiedRefreshInterval$$module$extensions$amp_a4a$0_1$refresh_manager$$($element$jscomp$231$$,$i$jscomp$198_win$jscomp$254$$){var $refreshInterval$$=$element$jscomp$231$$.getAttribute("data-enable-refresh");if($refreshInterval$$)return $checkAndSanitizeRefreshInterval$$module$extensions$amp_a4a$0_1$refresh_manager$$($refreshInterval$$);var $metaTag$jscomp$1_pair$jscomp$2$$,$metaTagContent$$=($metaTag$jscomp$1_pair$jscomp$2$$=$i$jscomp$198_win$jscomp$254$$.document.getElementsByName("amp-ad-enable-refresh"))&&
$metaTag$jscomp$1_pair$jscomp$2$$[0]&&$metaTag$jscomp$1_pair$jscomp$2$$[0].getAttribute("content");if(!$metaTagContent$$)return null;var $networkIntervalPairs$$=$metaTagContent$$.split(",");for($i$jscomp$198_win$jscomp$254$$=0;$i$jscomp$198_win$jscomp$254$$<$networkIntervalPairs$$.length;$i$jscomp$198_win$jscomp$254$$++)if($metaTag$jscomp$1_pair$jscomp$2$$=$networkIntervalPairs$$[$i$jscomp$198_win$jscomp$254$$].split("="),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(2==$metaTag$jscomp$1_pair$jscomp$2$$.length,
"refresh metadata config must be of the form `network_type=refresh_interval`"),$metaTag$jscomp$1_pair$jscomp$2$$[0].toLowerCase()==$element$jscomp$231$$.getAttribute("type").toLowerCase())return $checkAndSanitizeRefreshInterval$$module$extensions$amp_a4a$0_1$refresh_manager$$($metaTag$jscomp$1_pair$jscomp$2$$[1]);return null}
function $checkAndSanitizeRefreshInterval$$module$extensions$amp_a4a$0_1$refresh_manager$$($refreshInterval$jscomp$1$$){var $refreshIntervalNum$$=Number($refreshInterval$jscomp$1$$);return isNaN($refreshIntervalNum$$)||30>$refreshIntervalNum$$?($user$$module$src$log$$().warn("AMP-AD","invalid refresh interval, must be a number no less than 30: "+$refreshInterval$jscomp$1$$),null):1E3*$refreshIntervalNum$$}
var $observers$$module$extensions$amp_a4a$0_1$refresh_manager$$={},$managers$$module$extensions$amp_a4a$0_1$refresh_manager$$={},$refreshManagerIdCounter$$module$extensions$amp_a4a$0_1$refresh_manager$$=0;
function $getRefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$($a4a$jscomp$5$$,$opt_predicate$$){var $refreshInterval$jscomp$2$$=$getPublisherSpecifiedRefreshInterval$$module$extensions$amp_a4a$0_1$refresh_manager$$($a4a$jscomp$5$$.element,$a4a$jscomp$5$$.win);return!$refreshInterval$jscomp$2$$||$opt_predicate$$&&!$opt_predicate$$()?null:new $RefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$($a4a$jscomp$5$$,{visiblePercentageMin:50,continuousTimeMin:1},$refreshInterval$jscomp$2$$)}
function $RefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$($a4a$jscomp$6$$,$config$jscomp$16$$,$refreshInterval$jscomp$3$$){this.B="initial";this.G=$a4a$jscomp$6$$;this.D=$a4a$jscomp$6$$.win;this.C=$a4a$jscomp$6$$.element;this.C.getAttribute("type").toLowerCase();this.I=$refreshInterval$jscomp$3$$;$config$jscomp$16$$.continuousTimeMin*=1E3;$config$jscomp$16$$.visiblePercentageMin/=100;this.$config_$=$config$jscomp$16$$;this.$timer_$=$Services$$module$src$services$timerFor$$(this.D);
this.F=this.J=null;var $managerId$$=String($refreshManagerIdCounter$$module$extensions$amp_a4a$0_1$refresh_manager$$++);this.C.setAttribute("data-amp-ad-refresh-id",$managerId$$);$managers$$module$extensions$amp_a4a$0_1$refresh_manager$$[$managerId$$]=this;this.initiateRefreshCycle()}
function $JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$$($JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$,$threshold$jscomp$3$$){var $thresholdString$$=String($threshold$jscomp$3$$);return $observers$$module$extensions$amp_a4a$0_1$refresh_manager$$[$thresholdString$$]||($observers$$module$extensions$amp_a4a$0_1$refresh_manager$$[$thresholdString$$]="IntersectionObserver"in $JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$.D?new $JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$.D.IntersectionObserver($JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$.H,
{threshold:$threshold$jscomp$3$$}):new $RefreshIntersectionObserverWrapper$$module$extensions$amp_a4a$0_1$refresh_intersection_observer_wrapper$$($JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$.H,$JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$self$$.G,{threshold:$threshold$jscomp$3$$}))}
$RefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$.prototype.H=function($entries$jscomp$2$$){$entries$jscomp$2$$.forEach(function($entries$jscomp$2$$){var $entry$jscomp$22$$=$entries$jscomp$2$$.target.getAttribute("data-amp-ad-refresh-id"),$refreshManager$$=$managers$$module$extensions$amp_a4a$0_1$refresh_manager$$[$entry$jscomp$22$$];if($entries$jscomp$2$$.target==$refreshManager$$.C)switch($refreshManager$$.B){case "initial":$entries$jscomp$2$$.intersectionRatio>=$refreshManager$$.$config_$.visiblePercentageMin&&
($refreshManager$$.B="view_pending",$refreshManager$$.F=$refreshManager$$.$timer_$.delay(function(){$refreshManager$$.B="refresh_pending";$JSCompiler_StaticMethods_startRefreshTimer_$$($refreshManager$$)},$refreshManager$$.$config_$.continuousTimeMin));break;case "view_pending":$entries$jscomp$2$$.intersectionRatio<$refreshManager$$.$config_$.visiblePercentageMin&&($refreshManager$$.$timer_$.cancel($refreshManager$$.F),$refreshManager$$.F=null,$refreshManager$$.B="initial")}})};
$RefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$.prototype.initiateRefreshCycle=function(){switch(this.B){case "initial":$JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$$(this,this.$config_$.visiblePercentageMin).observe(this.C)}};
function $JSCompiler_StaticMethods_startRefreshTimer_$$($JSCompiler_StaticMethods_startRefreshTimer_$self$$){new Promise(function($resolve$jscomp$48$$){$JSCompiler_StaticMethods_startRefreshTimer_$self$$.J=$JSCompiler_StaticMethods_startRefreshTimer_$self$$.$timer_$.delay(function(){$JSCompiler_StaticMethods_startRefreshTimer_$self$$.B="initial";$JSCompiler_StaticMethods_startRefreshTimer_$self$$.unobserve();$JSCompiler_StaticMethods_startRefreshTimer_$self$$.G.refresh(function(){return $JSCompiler_StaticMethods_startRefreshTimer_$self$$.initiateRefreshCycle()});
$resolve$jscomp$48$$(!0)},$JSCompiler_StaticMethods_startRefreshTimer_$self$$.I)})}$RefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$.prototype.unobserve=function(){$JSCompiler_StaticMethods_getIntersectionObserverWithThreshold_$$(this,this.$config_$.visiblePercentageMin).unobserve(this.C)};var $safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$={},$safeframeListenerCreated_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$=!1;
function $safeframeListener$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$($event$jscomp$60_payload$jscomp$7$$){var $data$jscomp$79$$=$tryParseJson$$module$src$json$$($event$jscomp$60_payload$jscomp$7$$.data);if("https://tpc.googlesyndication.com"==$event$jscomp$60_payload$jscomp$7$$.origin&&$data$jscomp$79$$){$event$jscomp$60_payload$jscomp$7$$=$tryParseJson$$module$src$json$$($data$jscomp$79$$.p)||{};var $sentinel$jscomp$6$$=$data$jscomp$79$$.e||$event$jscomp$60_payload$jscomp$7$$.sentinel,
$safeframeHost$$=$safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$[$sentinel$jscomp$6$$];$safeframeHost$$?$safeframeHost$$.C?$event$jscomp$60_payload$jscomp$7$$&&$safeframeHost$$.processMessage($event$jscomp$60_payload$jscomp$7$$,$data$jscomp$79$$.s):$safeframeHost$$.connectMessagingChannel($data$jscomp$79$$.c):$dev$$module$src$log$$().warn("AMP-DOUBLECLICK-SAFEFRAME","Safeframe Host for sentinel: "+$sentinel$jscomp$6$$+" not found.")}}
function $SafeframeHostApi$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$($baseInstance$jscomp$1$$,$isFluid$jscomp$2$$,$creativeSize$$,$fluidImpressionUrl$$){this.B=$baseInstance$jscomp$1$$;this.H=this.B.verifyStillCurrent.bind(this.B)();this.G=this.B.win;this.F=this.B.sentinel;this.D=this.C=this.$iframe_$=null;this.P=Math.random();this.K=Math.random();this.R=$isFluid$jscomp$2$$;this.$creativeSize_$=$creativeSize$$;this.I=Object.assign({},$creativeSize$$);this.$fluidImpressionUrl_$=
$fluidImpressionUrl$$;this.$viewport_$=this.B.getViewport();this.$isCollapsed_$=!0;this.J=!1;var $sfConfig$$=Object($tryParseJson$$module$src$json$$(this.B.element.getAttribute("data-safeframe-config"))||{});this.M=$sfConfig$$.hasOwnProperty("expandByOverlay")?$sfConfig$$.expandByOverlay:!0;this.O=$sfConfig$$.hasOwnProperty("expandByPush")?$sfConfig$$.expandByPush:!0;this.$unlisten_$=null;this.registerSafeframeHost()}$JSCompiler_prototypeAlias$$=$SafeframeHostApi$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$.prototype;
$JSCompiler_prototypeAlias$$.getSafeframeNameAttr=function(){var $attributes$jscomp$14$$=$dict$$module$src$utils$object$$({});$attributes$jscomp$14$$.uid=this.K;$attributes$jscomp$14$$.hostPeerName=this.G.location.origin;$attributes$jscomp$14$$.initialGeometry=this.getInitialGeometry();$attributes$jscomp$14$$.permissions=JSON.stringify($dict$$module$src$utils$object$$({expandByOverlay:this.M,expandByPush:this.O,readCookie:!1,writeCookie:!1}));$attributes$jscomp$14$$.metadata=JSON.stringify($dict$$module$src$utils$object$$({shared:{sf_ver:this.B.safeframeVersion,
ck_on:1,flash_ver:"26.0.0",canonical_url:this.maybeGetCanonicalUrl(),amp:{canonical_url:this.maybeGetCanonicalUrl()}}}));$attributes$jscomp$14$$.reportCreativeGeometry=this.R;$attributes$jscomp$14$$.isDifferentSourceWindow=!1;$attributes$jscomp$14$$.sentinel=this.F;return $attributes$jscomp$14$$};
$JSCompiler_prototypeAlias$$.maybeGetCanonicalUrl=function(){var $canonicalUrl$jscomp$4$$=$Services$$module$src$services$documentInfoForDoc$$(this.B.getAmpDoc()).canonicalUrl,$metaReferrer$$=this.G.document.querySelector("meta[name='referrer']");if(!$metaReferrer$$)return $canonicalUrl$jscomp$4$$;switch($metaReferrer$$.getAttribute("content")){case "same-origin":return;case "no-referrer":return;case "origin":return $parseUrlDeprecated$$module$src$url$$($canonicalUrl$jscomp$4$$).origin}return $canonicalUrl$jscomp$4$$};
$JSCompiler_prototypeAlias$$.getInitialGeometry=function(){var $ampAdBox$$=this.B.getPageLayoutBox(),$heightOffset$$=($ampAdBox$$.height-this.$creativeSize_$.height)/2,$widthOffset$$=($ampAdBox$$.width-this.$creativeSize_$.width)/2,$iframeBox$$={top:$ampAdBox$$.top+$heightOffset$$,bottom:$ampAdBox$$.bottom-$heightOffset$$,left:$ampAdBox$$.left+$widthOffset$$,right:$ampAdBox$$.right-$widthOffset$$,height:this.I.height,width:this.I.width};return $JSCompiler_StaticMethods_formatGeom_$$(this,$iframeBox$$)};
$JSCompiler_prototypeAlias$$.registerSafeframeHost=function(){$safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$[this.F]=$safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$[this.F]||this;$safeframeListenerCreated_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$||($safeframeListenerCreated_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$=!0,this.G.addEventListener("message",$safeframeListener$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$,
!1))};$JSCompiler_prototypeAlias$$.connectMessagingChannel=function($channel$jscomp$1$$){this.$iframe_$=this.B.iframe;this.C=$channel$jscomp$1$$;$JSCompiler_StaticMethods_setupGeom_$$(this);this.$sendMessage_$({message:"connect",c:this.C},"")};
function $JSCompiler_StaticMethods_setupGeom_$$($JSCompiler_StaticMethods_setupGeom_$self$$){var $throttledUpdate$$=$throttle$$module$src$utils$rate_limit$$($JSCompiler_StaticMethods_setupGeom_$self$$.G,$JSCompiler_StaticMethods_setupGeom_$self$$.$updateGeometry_$.bind($JSCompiler_StaticMethods_setupGeom_$self$$),1E3),$scrollUnlistener$$=$JSCompiler_StaticMethods_setupGeom_$self$$.$viewport_$.onScroll($throttledUpdate$$),$changedUnlistener$$=$JSCompiler_StaticMethods_setupGeom_$self$$.$viewport_$.onChanged($throttledUpdate$$);
$JSCompiler_StaticMethods_setupGeom_$self$$.$unlisten_$=function(){$scrollUnlistener$$();$changedUnlistener$$()};$JSCompiler_StaticMethods_setupGeom_$self$$.$updateGeometry_$()}
$JSCompiler_prototypeAlias$$.$updateGeometry_$=function(){var $$jscomp$this$jscomp$277$$=this;this.$iframe_$&&this.$viewport_$.getClientRectAsync(this.$iframe_$).then(function($iframeBox$jscomp$1$$){$$jscomp$this$jscomp$277$$.H();var $formattedGeom$$=$JSCompiler_StaticMethods_formatGeom_$$($$jscomp$this$jscomp$277$$,$iframeBox$jscomp$1$$);$$jscomp$this$jscomp$277$$.$sendMessage_$({newGeometry:$formattedGeom$$,uid:$$jscomp$this$jscomp$277$$.K},"geometry_update")}).catch(function($$jscomp$this$jscomp$277$$){return $dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME",
$$jscomp$this$jscomp$277$$)})};
function $JSCompiler_StaticMethods_formatGeom_$$($JSCompiler_StaticMethods_formatGeom_$self$$,$iframeBox$jscomp$2$$){var $viewportSize$jscomp$8$$=$JSCompiler_StaticMethods_formatGeom_$self$$.$viewport_$.getSize(),$scrollLeft$jscomp$6$$=$JSCompiler_StaticMethods_formatGeom_$self$$.$viewport_$.getScrollLeft(),$scrollTop$jscomp$9$$=$JSCompiler_StaticMethods_formatGeom_$self$$.$viewport_$.getScrollTop(),$currentGeometry$$={windowCoords_t:0,windowCoords_r:$viewportSize$jscomp$8$$.width,windowCoords_b:$viewportSize$jscomp$8$$.height,
windowCoords_l:0,frameCoords_t:$iframeBox$jscomp$2$$.top+$scrollTop$jscomp$9$$,frameCoords_r:$iframeBox$jscomp$2$$.right+$scrollLeft$jscomp$6$$,frameCoords_b:$iframeBox$jscomp$2$$.bottom+$scrollTop$jscomp$9$$,frameCoords_l:$iframeBox$jscomp$2$$.left+$scrollLeft$jscomp$6$$,posCoords_t:$iframeBox$jscomp$2$$.top,posCoords_b:$iframeBox$jscomp$2$$.bottom,posCoords_r:$iframeBox$jscomp$2$$.right,posCoords_l:$iframeBox$jscomp$2$$.left,styleZIndex:$getStyle$$module$src$style$$($JSCompiler_StaticMethods_formatGeom_$self$$.B.element,
"zIndex"),allowedExpansion_r:$viewportSize$jscomp$8$$.width-$iframeBox$jscomp$2$$.width,allowedExpansion_b:$viewportSize$jscomp$8$$.height-$iframeBox$jscomp$2$$.height,allowedExpansion_t:0,allowedExpansion_l:0,yInView:$JSCompiler_StaticMethods_formatGeom_$self$$.getPercInView($viewportSize$jscomp$8$$.height,$iframeBox$jscomp$2$$.top,$iframeBox$jscomp$2$$.bottom),xInView:$JSCompiler_StaticMethods_formatGeom_$self$$.getPercInView($viewportSize$jscomp$8$$.width,$iframeBox$jscomp$2$$.left,$iframeBox$jscomp$2$$.right)};
$JSCompiler_StaticMethods_formatGeom_$self$$.D=$currentGeometry$$;return JSON.stringify($currentGeometry$$)}$JSCompiler_prototypeAlias$$.getPercInView=function($rootBoundEnd$$,$boundingRectStart$$,$boundingRectEnd$$){var $lengthInView$$=$boundingRectEnd$$>=$rootBoundEnd$$?$rootBoundEnd$$-$boundingRectStart$$:$boundingRectEnd$$,$percInView$$=$lengthInView$$/($boundingRectEnd$$-$boundingRectStart$$);return Math.max(0,Math.min(1,$percInView$$))||0};
$JSCompiler_prototypeAlias$$.$sendMessage_$=function($payload$jscomp$8$$,$serviceName$$){if(this.$iframe_$.contentWindow){var $message$jscomp$45$$={};$message$jscomp$45$$.c=this.C;$message$jscomp$45$$.p=JSON.stringify($payload$jscomp$8$$);$message$jscomp$45$$.s=$serviceName$$;$message$jscomp$45$$.e=this.F;$message$jscomp$45$$.i=this.P;this.$iframe_$.contentWindow.postMessage(JSON.stringify($message$jscomp$45$$),"https://tpc.googlesyndication.com")}else $dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME",
"Frame contentWindow unavailable.")};
$JSCompiler_prototypeAlias$$.processMessage=function($JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$,$JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$){switch($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$){case "creative_geometry_update":$JSCompiler_StaticMethods_handleFluidMessage_$$(this,$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$);break;case "expand_request":if(this.J){$JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$=
Number(this.$creativeSize_$.height)+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.expand_b+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.expand_t;var $JSCompiler_expandWidth$jscomp$inline_1323$$=Number(this.$creativeSize_$.width)+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.expand_r+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.expand_l;isNaN($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$)||
isNaN($JSCompiler_expandWidth$jscomp$inline_1323$$)||$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.push&&!this.O||!$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.push&&!this.M&&($JSCompiler_expandWidth$jscomp$inline_1323$$>this.$creativeSize_$.width||$JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$>this.$creativeSize_$.height)?($dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME","Invalid expand values."),
this.sendResizeResponse(!1,"expand_response")):$JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$>this.$viewport_$.getSize().height||$JSCompiler_expandWidth$jscomp$inline_1323$$>this.$viewport_$.getSize().width?this.sendResizeResponse(!1,"expand_response"):this.handleSizeChange($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$,$JSCompiler_expandWidth$jscomp$inline_1323$$,"expand_response")}break;
case "register_done":this.J=!0;break;case "collapse_request":this.$isCollapsed_$||!this.J?this.sendResizeResponse(!1,"collapse_response"):this.handleSizeChange(this.I.height,this.I.width,"collapse_response",!0);break;case "resize_request":this.J&&($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$=Number(this.$creativeSize_$.height)+($JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.resize_b+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.resize_t),
$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$=Number(this.$creativeSize_$.width)+($JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.resize_r+$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$.resize_l),isNaN($JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$)||isNaN($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$)||$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$>this.$creativeSize_$.width||
$JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$>this.$creativeSize_$.height?$dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME","Invalid resize values."):this.resizeAmpAdAndSafeframe($JSCompiler_expandHeight$jscomp$inline_1322_JSCompiler_resizeHeight$jscomp$inline_1329_service$jscomp$19$$,$JSCompiler_resizeWidth$jscomp$inline_1330_payload$jscomp$9$$,"resize_response",!0))}};
$JSCompiler_prototypeAlias$$.resizeSafeframe=function($height$jscomp$29$$,$width$jscomp$31$$,$messageType$$){var $$jscomp$this$jscomp$278$$=this;this.$isCollapsed_$="collapse_response"==$messageType$$;this.B.measureMutateElement(function(){$$jscomp$this$jscomp$278$$.B.getResource().measure()},function(){$$jscomp$this$jscomp$278$$.$iframe_$&&($setStyles$$module$src$style$$($$jscomp$this$jscomp$278$$.$iframe_$,{height:$height$jscomp$29$$+"px",width:$width$jscomp$31$$+"px"}),$$jscomp$this$jscomp$278$$.$creativeSize_$.height=
$height$jscomp$29$$,$$jscomp$this$jscomp$278$$.$creativeSize_$.width=$width$jscomp$31$$);$$jscomp$this$jscomp$278$$.sendResizeResponse(!0,$messageType$$)},this.$iframe_$)};
$JSCompiler_prototypeAlias$$.handleSizeChange=function($height$jscomp$30$$,$width$jscomp$32$$,$messageType$jscomp$1$$,$optIsCollapse$$){var $$jscomp$this$jscomp$279$$=this;return this.$viewport_$.getClientRectAsync(this.B.element).then(function($box$jscomp$11$$){!$optIsCollapse$$&&$width$jscomp$32$$<=$box$jscomp$11$$.width&&$height$jscomp$30$$<=$box$jscomp$11$$.height?$$jscomp$this$jscomp$279$$.resizeSafeframe($height$jscomp$30$$,$width$jscomp$32$$,$messageType$jscomp$1$$):$$jscomp$this$jscomp$279$$.resizeAmpAdAndSafeframe($height$jscomp$30$$,
$width$jscomp$32$$,$messageType$jscomp$1$$,$optIsCollapse$$)})};
$JSCompiler_prototypeAlias$$.sendResizeResponse=function($success$jscomp$9$$,$messageType$jscomp$2$$){var $$jscomp$this$jscomp$280$$=this;this.$iframe_$&&this.$viewport_$.getClientRectAsync(this.$iframe_$).then(function($formattedGeom$jscomp$1_iframeBox$jscomp$3$$){$$jscomp$this$jscomp$280$$.H();$formattedGeom$jscomp$1_iframeBox$jscomp$3$$=$JSCompiler_StaticMethods_formatGeom_$$($$jscomp$this$jscomp$280$$,$formattedGeom$jscomp$1_iframeBox$jscomp$3$$);$$jscomp$this$jscomp$280$$.$sendMessage_$({uid:$$jscomp$this$jscomp$280$$.K,
success:$success$jscomp$9$$,newGeometry:$formattedGeom$jscomp$1_iframeBox$jscomp$3$$,expand_t:$$jscomp$this$jscomp$280$$.D.allowedExpansion_t,expand_b:$$jscomp$this$jscomp$280$$.D.allowedExpansion_b,expand_r:$$jscomp$this$jscomp$280$$.D.allowedExpansion_r,expand_l:$$jscomp$this$jscomp$280$$.D.allowedExpansion_l,push:!0},$messageType$jscomp$2$$)}).catch(function($success$jscomp$9$$){return $dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME",$success$jscomp$9$$)})};
$JSCompiler_prototypeAlias$$.resizeAmpAdAndSafeframe=function($height$jscomp$31$$,$width$jscomp$33$$,$messageType$jscomp$3$$,$opt_isShrinking$$){var $$jscomp$this$jscomp$281$$=this;this.B.attemptChangeSize($height$jscomp$31$$,$width$jscomp$33$$).then(function(){$$jscomp$this$jscomp$281$$.H();$$jscomp$this$jscomp$281$$.resizeSafeframe($height$jscomp$31$$,$width$jscomp$33$$,$messageType$jscomp$3$$)},function(){$$jscomp$this$jscomp$281$$.B.getResource().resetPendingChangeSize();$opt_isShrinking$$?$$jscomp$this$jscomp$281$$.resizeSafeframe($height$jscomp$31$$,
$width$jscomp$33$$,$messageType$jscomp$3$$):$$jscomp$this$jscomp$281$$.sendResizeResponse(!1,$messageType$jscomp$3$$)}).catch(function($height$jscomp$31$$){"CANCELLED"==$height$jscomp$31$$.message?$dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME",$height$jscomp$31$$):($dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME","Resizing failed: "+$height$jscomp$31$$),$$jscomp$this$jscomp$281$$.sendResizeResponse(!1,$messageType$jscomp$3$$))})};
function $JSCompiler_StaticMethods_handleFluidMessage_$$($JSCompiler_StaticMethods_handleFluidMessage_$self$$,$payload$jscomp$12$$){var $newHeight$jscomp$10$$;$payload$jscomp$12$$&&($newHeight$jscomp$10$$=parseInt($payload$jscomp$12$$.height,10))?$JSCompiler_StaticMethods_handleFluidMessage_$self$$.B.attemptChangeHeight($newHeight$jscomp$10$$).then(function(){$JSCompiler_StaticMethods_handleFluidMessage_$self$$.H();$JSCompiler_StaticMethods_handleFluidMessage_$self$$.$fluidImpressionUrl_$&&($JSCompiler_StaticMethods_handleFluidMessage_$self$$.B.fireDelayedImpressions($JSCompiler_StaticMethods_handleFluidMessage_$self$$.$fluidImpressionUrl_$),
$JSCompiler_StaticMethods_handleFluidMessage_$self$$.$fluidImpressionUrl_$=null);$JSCompiler_StaticMethods_handleFluidMessage_$self$$.$iframe_$.contentWindow.postMessage(JSON.stringify($dict$$module$src$utils$object$$({message:"resize-complete",c:$JSCompiler_StaticMethods_handleFluidMessage_$self$$.C})),"https://tpc.googlesyndication.com")}).catch(function($payload$jscomp$12$$){"CANCELLED"==$payload$jscomp$12$$.message?$dev$$module$src$log$$().error("AMP-DOUBLECLICK-SAFEFRAME",$payload$jscomp$12$$):
$JSCompiler_StaticMethods_handleFluidMessage_$self$$.B.forceCollapse()}):$JSCompiler_StaticMethods_handleFluidMessage_$self$$.B.forceCollapse()}
$JSCompiler_prototypeAlias$$.destroy=function(){this.$iframe_$=null;delete $safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$[this.F];this.$unlisten_$&&this.$unlisten_$();Object.keys($safeframeHosts$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$).length||(window.removeEventListener("message",$safeframeListener$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$,!1),$safeframeListenerCreated_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$=
!1)};var $sraRequests$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$=null,$windowLocationQueryParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$,$BLOCK_SRA_COMBINERS_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$=[function($instances$$){var $uniqueIuNames$$={},$uniqueIuNamesCount$$=0,$prevIusEncoded$$=[];$instances$$.forEach(function($instances$$){var $i$jscomp$199_instance$jscomp$2$$=
$instances$$.element.getAttribute("data-slot"),$componentNames$$=($i$jscomp$199_instance$jscomp$2$$||"").split("/"),$encodedNames$$=[];for($instances$$=0;$instances$$<$componentNames$$.length;$instances$$++)if(""!=$componentNames$$[$instances$$]){var $index$jscomp$74$$=$uniqueIuNames$$[$componentNames$$[$instances$$]];void 0==$index$jscomp$74$$&&($uniqueIuNames$$[$componentNames$$[$instances$$]]=$index$jscomp$74$$=$uniqueIuNamesCount$$++);$encodedNames$$.push($index$jscomp$74$$)}$prevIusEncoded$$.push($encodedNames$$.join("/"))});
return{iu_parts:Object.keys($uniqueIuNames$$).join(),enc_prev_ius:$prevIusEncoded$$.join()}},function($instances$jscomp$1$$){return $getFirstInstanceValue_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$1$$,function($instances$jscomp$1$$){return $instances$jscomp$1$$.$jsonTargeting_$&&$instances$jscomp$1$$.$jsonTargeting_$.cookieOptOut?{co:"1"}:null})},function($instances$jscomp$2$$){return{adks:$instances$jscomp$2$$.map(function($instances$jscomp$2$$){return $instances$jscomp$2$$.$adKey_$}).join()}},
function($instances$jscomp$3$$){return{prev_iu_szs:$instances$jscomp$3$$.map(function($instances$jscomp$3$$){return $instances$jscomp$3$$.$parameterSize_$}).join()}},function($instances$jscomp$4$$){return $getFirstInstanceValue_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$4$$,function($instances$jscomp$4$$){return $instances$jscomp$4$$.$jsonTargeting_$&&$instances$jscomp$4$$.$jsonTargeting_$.tagForChildDirectedTreatment?{tfcd:$instances$jscomp$4$$.$jsonTargeting_$.tagForChildDirectedTreatment}:
null})},function($instances$jscomp$5$$){return $getFirstInstanceValue_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$5$$,function($instances$jscomp$5$$){return $isInExperiment$$module$ads$google$a4a$traffic_experiments$$($instances$jscomp$5$$.element)?{adtest:"on"}:null})},function($instances$jscomp$6$$){var $scps$$=[];$instances$jscomp$6$$.forEach(function($instances$jscomp$6$$){$instances$jscomp$6$$.$jsonTargeting_$&&$scps$$.push($serializeTargeting_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$6$$.$jsonTargeting_$.targeting||
null,$instances$jscomp$6$$.$jsonTargeting_$.categoryExclusions||null))});return $scps$$.length?{prev_scp:$scps$$.join("|")}:null},function($instances$jscomp$7$$){var $eids$jscomp$2$$={};$instances$jscomp$7$$.forEach(function($instances$jscomp$7$$){var $instance$jscomp$9$$=$instances$jscomp$7$$.element.getAttribute("data-experiment-id");$instance$jscomp$9$$&&$instance$jscomp$9$$.split(",").forEach(function($instances$jscomp$7$$){return $eids$jscomp$2$$[$instances$jscomp$7$$]=1});var $deid$$=/(?:#|,)deid=(\d+)/i.exec($instances$jscomp$7$$.win.location.hash);
$deid$$&&($eids$jscomp$2$$[$deid$$[1]]=1)});return Object.keys($eids$jscomp$2$$).length?{eid:Object.keys($eids$jscomp$2$$).join()}:null},function($instances$jscomp$8$$){return $getFirstInstanceValue_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$8$$,function($instances$jscomp$8$$){return $JSCompiler_StaticMethods_buildIdentityParams_$$($instances$jscomp$8$$)})},function($instances$jscomp$9$$){var $safeframeForced$$=!1,$forceSafeframes$$=
[];$instances$jscomp$9$$.forEach(function($instances$jscomp$9$$){$safeframeForced$$=$safeframeForced$$||$instances$jscomp$9$$.$forceSafeframe_$;$forceSafeframes$$.push(Number($instances$jscomp$9$$.$forceSafeframe_$))});return $safeframeForced$$?{fsfs:$forceSafeframes$$.join(",")}:null},function($instances$jscomp$10$$){return{adxs:$instances$jscomp$10$$.map(function($instances$jscomp$10$$){return $instances$jscomp$10$$.getPageLayoutBox().left}).join()}},function($instances$jscomp$11$$){return{adys:$instances$jscomp$11$$.map(function($instances$jscomp$11$$){return $instances$jscomp$11$$.getPageLayoutBox().top}).join()}},
function($instances$jscomp$12$$){var $hasAmpContainer$$=!1,$result$jscomp$23$$=[];$instances$jscomp$12$$.forEach(function($instances$jscomp$12$$){$instances$jscomp$12$$=$getEnclosingContainerTypes$$module$ads$google$a4a$utils$$($instances$jscomp$12$$.element);$result$jscomp$23$$.push($instances$jscomp$12$$.join());$hasAmpContainer$$=$hasAmpContainer$$||!!$instances$jscomp$12$$.length});return $hasAmpContainer$$?{acts:$result$jscomp$23$$.join("|")}:null}];
function $AmpAdNetworkDoubleclickImpl$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($$jscomp$super$this$jscomp$9_element$jscomp$232$$){$$jscomp$super$this$jscomp$9_element$jscomp$232$$=$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.call(this,$$jscomp$super$this$jscomp$9_element$jscomp$232$$)||this;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$lifecycleReporter_$=$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$lifecycleReporter_$||$$jscomp$super$this$jscomp$9_element$jscomp$232$$.initLifecycleReporter();
$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$ampAnalyticsConfig_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$extensions_$=$Services$$module$src$services$extensionsFor$$($$jscomp$super$this$jscomp$9_element$jscomp$232$$.win);$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$qqid_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$initialSize_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$parameterSize_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$returnedSize_$=
null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$ampAnalyticsElement_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$jsonTargeting_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$adKey_$=0;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.useSra=!!$$jscomp$super$this$jscomp$9_element$jscomp$232$$.win.document.querySelector("meta[name=amp-ad-doubleclick-sra]")||$experimentFeatureEnabled$$module$extensions$amp_ad_network_doubleclick_impl$0_1$doubleclick_a4a_config$$($$jscomp$super$this$jscomp$9_element$jscomp$232$$.win,
"117152667");$$jscomp$super$this$jscomp$9_element$jscomp$232$$.sraDeferred=new $Deferred$$module$src$utils$promise$$;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$refreshManager_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$refreshCount_$=0;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$ifi_$=0;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$isFluidRequest_$=!1;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$fluidImpressionUrl_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$identityTokenPromise_$=
null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.identityToken=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$troubleshootData_$={};$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$isAmpCreative_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$isIdleRender_$=!1;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$safeframeApi_$=null;$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$forceSafeframe_$=!1;"forceSafeframe"in $$jscomp$super$this$jscomp$9_element$jscomp$232$$.element.dataset&&
(/^(1|(true))$/i.test($$jscomp$super$this$jscomp$9_element$jscomp$232$$.element.dataset.forceSafeframe)?$$jscomp$super$this$jscomp$9_element$jscomp$232$$.$forceSafeframe_$=!0:$user$$module$src$log$$().warn("amp-ad-network-doubleclick-impl","Ignoring invalid data-force-safeframe attribute: "+$$jscomp$super$this$jscomp$9_element$jscomp$232$$.element.dataset.forceSafeframe));$$jscomp$super$this$jscomp$9_element$jscomp$232$$.consentState=null;return $$jscomp$super$this$jscomp$9_element$jscomp$232$$}
$$jscomp$inherits$$($AmpAdNetworkDoubleclickImpl$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$,$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$);$JSCompiler_prototypeAlias$$=$AmpAdNetworkDoubleclickImpl$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$.prototype;
$JSCompiler_prototypeAlias$$.idleRenderOutsideViewport=function(){var $$jscomp$this$jscomp$283$$=this;if(this.element.getAttribute("data-loading-strategy"))return!1;var $expVal$$=this.postAdResponseExperimentFeatures["render-idle-vp"],$vpRange$$=parseInt($expVal$$,10);if($expVal$$&&isNaN($vpRange$$))return!1;$vpRange$$=$vpRange$$||12;this.$isIdleRender_$=!0;this.getResource().whenWithinRenderOutsideViewport().then(function(){return $$jscomp$this$jscomp$283$$.$isIdleRender_$=!1});return $vpRange$$};
$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$27$$){return(this.$isFluidRequest_$="fluid"==$layout$jscomp$27$$)||$isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$27$$)};$JSCompiler_prototypeAlias$$.isValidElement=function(){return this.isAmpAdElement()};$JSCompiler_prototypeAlias$$.delayAdRequestEnabled=function(){return $experimentFeatureEnabled$$module$extensions$amp_ad_network_doubleclick_impl$0_1$doubleclick_a4a_config$$(this.win,"21060729")};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$284$$=this;$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.buildCallback.call(this);this.$identityTokenPromise_$=$Services$$module$src$services$viewerForDoc$$(this.getAmpDoc()).whenFirstVisible().then(function(){return $getIdentityToken$$module$ads$google$a4a$utils$$($$jscomp$this$jscomp$284$$.win,$$jscomp$this$jscomp$284$$.getAmpDoc())});this.$troubleshootData_$.slotId=this.element.getAttribute("data-slot");
this.$troubleshootData_$.slotIndex=this.element.getAttribute("data-amp-slot-index");if(this.win.dbclk_a4a_viz_change){var $expId$$=$getExperimentBranch$$module$src$experiments$$(this.win,"dbclk-correlator-clear");$expId$$&&$addExperimentIdToElement$$module$ads$google$a4a$traffic_experiments$$($expId$$,this.element)}else{this.win.dbclk_a4a_viz_change=!0;var $viewer$jscomp$33$$=$Services$$module$src$services$viewerForDoc$$(this.getAmpDoc());$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($viewer$jscomp$33$$,
function(){if("paused"==$viewer$jscomp$33$$.B&&!$$jscomp$this$jscomp$284$$.useSra&&$$jscomp$this$jscomp$284$$.win.ampAdPageCorrelator){$randomlySelectUnsetExperiments$$module$src$experiments$$($$jscomp$this$jscomp$284$$.win,{"dbclk-correlator-clear":{isTrafficEligible:function(){return!0},branches:["22302764","22302765"]}});var $expId$$=$getExperimentBranch$$module$src$experiments$$($$jscomp$this$jscomp$284$$.win,"dbclk-correlator-clear");$expId$$&&($addExperimentIdToElement$$module$ads$google$a4a$traffic_experiments$$($expId$$,
$$jscomp$this$jscomp$284$$.element),"22302765"===$expId$$&&($dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","resetting page correlator"),$$jscomp$this$jscomp$284$$.win.ampAdPageCorrelator=null))}})}};
$JSCompiler_prototypeAlias$$.shouldPreferentialRenderWithoutCrypto=function(){$CDN_PROXY_REGEXP$$module$ads$google$a4a$utils$$.test(this.win.location.origin);return!$experimentFeatureEnabled$$module$extensions$amp_ad_network_doubleclick_impl$0_1$doubleclick_a4a_config$$(this.win,"21061373","expUnconditionedCanonicalHoldback")};
$JSCompiler_prototypeAlias$$.getPageParameters=function($consentState$jscomp$4$$){return{npa:2==$consentState$jscomp$4$$||4==$consentState$jscomp$4$$?1:null,gdfp_req:"1",sfv:"1-0-23",u_sd:this.win.devicePixelRatio,gct:this.getLocationQueryParameterValue("google_preview")||null}};
function $JSCompiler_StaticMethods_getBlockParameters_$$($JSCompiler_StaticMethods_getBlockParameters_$self$$){var $tfcd$$=$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$&&$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$.tagForChildDirectedTreatment;$JSCompiler_StaticMethods_getBlockParameters_$self$$.win.ampAdGoogleIfiCounter=$JSCompiler_StaticMethods_getBlockParameters_$self$$.win.ampAdGoogleIfiCounter||1;$JSCompiler_StaticMethods_getBlockParameters_$self$$.$ifi_$=
$JSCompiler_StaticMethods_getBlockParameters_$self$$.isRefreshing&&$JSCompiler_StaticMethods_getBlockParameters_$self$$.$ifi_$||$JSCompiler_StaticMethods_getBlockParameters_$self$$.win.ampAdGoogleIfiCounter++;var $pageLayoutBox$$=$JSCompiler_StaticMethods_getBlockParameters_$self$$.isSinglePageStoryAd?$JSCompiler_StaticMethods_getBlockParameters_$self$$.element.getPageLayoutBox():null;return Object.assign({iu:$JSCompiler_StaticMethods_getBlockParameters_$self$$.element.getAttribute("data-slot"),co:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$&&
$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$.cookieOptOut?"1":null,adk:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$adKey_$,sz:$JSCompiler_StaticMethods_getBlockParameters_$self$$.isSinglePageStoryAd?"1x1":$JSCompiler_StaticMethods_getBlockParameters_$self$$.$parameterSize_$,output:"html",impl:"ifr",tfcd:void 0==$tfcd$$?null:$tfcd$$,adtest:$isInExperiment$$module$ads$google$a4a$traffic_experiments$$($JSCompiler_StaticMethods_getBlockParameters_$self$$.element)?"on":
null,ifi:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$ifi_$,rc:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$refreshCount_$||null,frc:Number($JSCompiler_StaticMethods_getBlockParameters_$self$$.fromResumeCallback)||null,fluid:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$isFluidRequest_$?"height":null,fsf:$JSCompiler_StaticMethods_getBlockParameters_$self$$.$forceSafeframe_$?"1":null,scp:$serializeTargeting_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$&&
$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$.targeting||null,$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$&&$JSCompiler_StaticMethods_getBlockParameters_$self$$.$jsonTargeting_$.categoryExclusions||null),spsa:$JSCompiler_StaticMethods_getBlockParameters_$self$$.isSinglePageStoryAd?$pageLayoutBox$$.width+"x"+$pageLayoutBox$$.height:null},$googleBlockParameters$$module$ads$google$a4a$utils$$($JSCompiler_StaticMethods_getBlockParameters_$self$$))}
$JSCompiler_prototypeAlias$$.populateAdUrlState=function($consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$){this.consentState=$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$;$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$=Number(this.element.getAttribute("data-override-width"))||Number(this.element.getAttribute("width"));var $height$jscomp$32_multiSizeValidation$jscomp$1$$=Number(this.element.getAttribute("data-override-height"))||
Number(this.element.getAttribute("height"));this.$initialSize_$=this.$isFluidRequest_$?{width:0,height:0}:$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$&&$height$jscomp$32_multiSizeValidation$jscomp$1$$?{width:$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$,height:$height$jscomp$32_multiSizeValidation$jscomp$1$$}:this.getIntersectionElementLayoutBox();this.$jsonTargeting_$=$tryParseJson$$module$src$json$$(this.element.getAttribute("json"))||
{};this.$adKey_$=$JSCompiler_StaticMethods_generateAdKey_$$(this,this.$initialSize_$.width+"x"+this.$initialSize_$.height);this.$parameterSize_$=this.$isFluidRequest_$?"320x50":this.$initialSize_$.width+"x"+this.$initialSize_$.height;if($consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$=this.element.getAttribute("data-multi-size"))"responsive"==this.element.getAttribute("layout")&&$user$$module$src$log$$().warn("amp-ad-network-doubleclick-impl","Behavior of multi-size and responsive layout is currently not well defined. Proceed with caution."),
$height$jscomp$32_multiSizeValidation$jscomp$1$$=this.element.getAttribute("data-multi-size-validation")||"true",$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$=$getMultiSizeDimensions$$module$ads$google$utils$$($consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$,this.$initialSize_$.width,this.$initialSize_$.height,"true"==$height$jscomp$32_multiSizeValidation$jscomp$1$$,this.$isFluidRequest_$),$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$.length&&
(this.$parameterSize_$+="|"+$consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$.map(function($consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$){return $consentState$jscomp$5_dimensions$jscomp$2_multiSizeDataStr$jscomp$1_width$jscomp$34$$.join("x")}).join("|"))};$JSCompiler_prototypeAlias$$.getConsentPolicy=function(){return null};
$JSCompiler_prototypeAlias$$.getAdUrl=function($consentState$jscomp$6$$,$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$){var $$jscomp$this$jscomp$285$$=this;if(4==$consentState$jscomp$6$$&&"true"!=this.element.getAttribute("data-npa-on-unknown-consent"))return $user$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","Ad request suppressed due to unknown consent"),Promise.resolve("");if(this.iframe&&!this.isRefreshing)return $dev$$module$src$log$$().warn("amp-ad-network-doubleclick-impl",
"Frame already exists, sra: "+this.useSra),Promise.resolve("");$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$=$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$||Promise.resolve();this.populateAdUrlState($consentState$jscomp$6$$);var $startTime$jscomp$17$$=Date.now(),$identityPromise$jscomp$1$$=$Services$$module$src$services$timerFor$$(this.win).timeoutPromise(1E3,this.$identityTokenPromise_$).catch(function(){return{}});$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$=Promise.all([$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$,
$identityPromise$jscomp$1$$]).then(function($opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$){$$jscomp$this$jscomp$285$$.verifyStillCurrent();var $identityPromise$jscomp$1$$=$JSCompiler_StaticMethods_mergeRtcResponses_$$($$jscomp$this$jscomp$285$$,$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$[0]);$$jscomp$this$jscomp$285$$.identityToken=$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$[1];return $googleAdUrl$$module$ads$google$a4a$utils$$($$jscomp$this$jscomp$285$$,"https://securepubads.g.doubleclick.net/gampad/ads",
$startTime$jscomp$17$$,Object.assign($JSCompiler_StaticMethods_getBlockParameters_$$($$jscomp$this$jscomp$285$$),$JSCompiler_StaticMethods_buildIdentityParams_$$($$jscomp$this$jscomp$285$$),$$jscomp$this$jscomp$285$$.getPageParameters($consentState$jscomp$6$$),$identityPromise$jscomp$1$$))});return this.$troubleshootData_$.adUrl=$opt_rtcResponsesPromise$jscomp$1_urlPromise$jscomp$6$$};
function $JSCompiler_StaticMethods_buildIdentityParams_$$($JSCompiler_StaticMethods_buildIdentityParams_$self$$){return $JSCompiler_StaticMethods_buildIdentityParams_$self$$.identityToken?{adsid:$JSCompiler_StaticMethods_buildIdentityParams_$self$$.identityToken.token||null,jar:$JSCompiler_StaticMethods_buildIdentityParams_$self$$.identityToken.jar||null,pucrd:$JSCompiler_StaticMethods_buildIdentityParams_$self$$.identityToken.pucrd||null}:{}}
function $JSCompiler_StaticMethods_mergeRtcResponses_$$($JSCompiler_StaticMethods_mergeRtcResponses_$self$$,$rtcResponseArray$$){if(!$rtcResponseArray$$)return null;var $artc$$=[],$ati$$=[],$ard$$=[],$exclusions$$;$rtcResponseArray$$.forEach(function($rtcResponseArray$$){$artc$$.push($rtcResponseArray$$.rtcTime);$ati$$.push($rtcResponseArray$$.error||"2");$ard$$.push($rtcResponseArray$$.callout);if($rtcResponseArray$$.response){if($rtcResponseArray$$.response.targeting){var $rtcResponse$$=$JSCompiler_StaticMethods_rewriteRtcKeys_$$($rtcResponseArray$$.response.targeting,
$rtcResponseArray$$.callout);$JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.targeting=$JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.targeting?$deepMerge$$module$src$utils$object$$($JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.targeting,$rtcResponse$$):$rtcResponse$$}$rtcResponseArray$$.response.categoryExclusions&&($exclusions$$||($exclusions$$={},$JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.categoryExclusions&&
$JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.categoryExclusions.forEach(function($JSCompiler_StaticMethods_mergeRtcResponses_$self$$){$exclusions$$[$JSCompiler_StaticMethods_mergeRtcResponses_$self$$]=!0})),$rtcResponseArray$$.response.categoryExclusions.forEach(function($JSCompiler_StaticMethods_mergeRtcResponses_$self$$){$exclusions$$[$JSCompiler_StaticMethods_mergeRtcResponses_$self$$]=!0}))}});$exclusions$$&&($JSCompiler_StaticMethods_mergeRtcResponses_$self$$.$jsonTargeting_$.categoryExclusions=
Object.keys($exclusions$$));return{artc:$artc$$.join()||null,ati:$ati$$.join(),ard:$ard$$.join()}}
$JSCompiler_prototypeAlias$$.$getCustomRealTimeConfigMacros_$=function(){var $$jscomp$this$jscomp$287$$=this,$whitelist$jscomp$9$$={height:!0,width:!0,"data-slot":!0,"data-multi-size":!0,"data-multi-size-validation":!0,"data-override-width":!0,"data-override-height":!0};return{PAGEVIEWID:function(){return $Services$$module$src$services$documentInfoForDoc$$($$jscomp$this$jscomp$287$$.element).pageViewId},HREF:function(){return $$jscomp$this$jscomp$287$$.win.location.href},REFERRER:function($whitelist$jscomp$9$$){return $JSCompiler_StaticMethods_getReferrer_$$($$jscomp$this$jscomp$287$$,
$whitelist$jscomp$9$$)},TGT:function(){return JSON.stringify(($tryParseJson$$module$src$json$$($$jscomp$this$jscomp$287$$.element.getAttribute("json"))||{}).targeting)},ADCID:function($whitelist$jscomp$9$$){return $getOrCreateAdCid$$module$src$ad_cid$$($$jscomp$this$jscomp$287$$.getAmpDoc(),"AMP_ECID_GOOGLE","_ga",parseInt($whitelist$jscomp$9$$,10))},ATTR:function($name$jscomp$164$$){if($whitelist$jscomp$9$$[$name$jscomp$164$$.toLowerCase()])return $$jscomp$this$jscomp$287$$.element.getAttribute($name$jscomp$164$$);
$dev$$module$src$log$$().warn("TAG","Invalid attribute "+$name$jscomp$164$$)},CANONICAL_URL:function(){return $Services$$module$src$services$documentInfoForDoc$$($$jscomp$this$jscomp$287$$.element).canonicalUrl}}};
function $JSCompiler_StaticMethods_getReferrer_$$($JSCompiler_StaticMethods_getReferrer_$self$$,$opt_timeout$jscomp$5$$){var $timeoutInt$$=parseInt($opt_timeout$jscomp$5$$,10),$referrerPromise$$=$Services$$module$src$services$viewerForDoc$$($JSCompiler_StaticMethods_getReferrer_$self$$.getAmpDoc()).getReferrerUrl();return isNaN($timeoutInt$$)||0>$timeoutInt$$?$referrerPromise$$:$Services$$module$src$services$timerFor$$($JSCompiler_StaticMethods_getReferrer_$self$$.win).timeoutPromise($timeoutInt$$,
$referrerPromise$$).catch(function(){})}
function $JSCompiler_StaticMethods_rewriteRtcKeys_$$($response$jscomp$30$$,$callout$jscomp$3$$){if(!$RTC_VENDORS$$module$extensions$amp_a4a$0_1$callout_vendors$$[$callout$jscomp$3$$]||$RTC_VENDORS$$module$extensions$amp_a4a$0_1$callout_vendors$$[$callout$jscomp$3$$].disableKeyAppend)return $response$jscomp$30$$;var $newResponse$$={};Object.keys($response$jscomp$30$$).forEach(function($key$jscomp$81$$){$newResponse$$[$key$jscomp$81$$+"_"+$callout$jscomp$3$$]=$response$jscomp$30$$[$key$jscomp$81$$]});
return $newResponse$$}$JSCompiler_prototypeAlias$$.onNetworkFailure=function($error$jscomp$49$$,$adUrl$jscomp$6$$){$dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","network error, attempt adding of error parameter",$error$jscomp$49$$);return{adUrl:$maybeAppendErrorParameter$$module$ads$google$a4a$utils$$($adUrl$jscomp$6$$)}};
$JSCompiler_prototypeAlias$$.extractSize=function($responseHeaders$jscomp$3$$){$setGoogleLifecycleVarsFromHeaders$$module$ads$google$a4a$google_data_reporter$$($responseHeaders$jscomp$3$$,this.$lifecycleReporter_$);this.$ampAnalyticsConfig_$=$extractAmpAnalyticsConfig$$module$ads$google$a4a$utils$$($responseHeaders$jscomp$3$$);this.$qqid_$=$responseHeaders$jscomp$3$$.get("X-QQID");this.$troubleshootData_$.creativeId=$responseHeaders$jscomp$3$$.get("google-creative-id");this.$troubleshootData_$.lineItemId=
$responseHeaders$jscomp$3$$.get("google-lineitem-id");this.$ampAnalyticsConfig_$&&this.$extensions_$.installExtensionForDoc(this.getAmpDoc(),"amp-analytics");var $size$jscomp$17$$=$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.extractSize.call(this,$responseHeaders$jscomp$3$$);$size$jscomp$17$$?(this.$returnedSize_$=$size$jscomp$17$$,this.$handleResize_$($size$jscomp$17$$.width,$size$jscomp$17$$.height)):$size$jscomp$17$$=this.getSlotSize();this.$isFluidRequest_$&&!this.$returnedSize_$?
this.$fluidImpressionUrl_$=$responseHeaders$jscomp$3$$.get("X-AmpImps"):this.fireDelayedImpressions($responseHeaders$jscomp$3$$.get("X-AmpImps"));return $size$jscomp$17$$};$JSCompiler_prototypeAlias$$.getSlotSize=function(){var $width$jscomp$35$$=Number(this.element.getAttribute("width")),$height$jscomp$33$$=Number(this.element.getAttribute("height"));return $width$jscomp$35$$&&$height$jscomp$33$$?{width:$width$jscomp$35$$,height:$height$jscomp$33$$}:this.getIntersectionElementLayoutBox()};
$JSCompiler_prototypeAlias$$.emitLifecycleEvent=function($eventName$jscomp$3$$,$opt_extraVariables$jscomp$2$$){$opt_extraVariables$jscomp$2$$&&this.$lifecycleReporter_$.setPingParameters($opt_extraVariables$jscomp$2$$);this.$lifecycleReporter_$.sendPing($eventName$jscomp$3$$)};
$JSCompiler_prototypeAlias$$.tearDownSlot=function(){$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.tearDownSlot.call(this);this.element.setAttribute("data-amp-slot-index",this.win.ampAdSlotIdCounter++);this.$lifecycleReporter_$=this.initLifecycleReporter();this.$ampAnalyticsElement_$&&($removeElement$$module$src$dom$$(this.$ampAnalyticsElement_$),this.$ampAnalyticsElement_$=null);this.$isAmpCreative_$=this.$jsonTargeting_$=this.$ampAnalyticsConfig_$=null;this.$isIdleRender_$=!1;$sraRequests$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$=
this.$returnedSize_$=this.$parameterSize_$=null;this.sraDeferred=new $Deferred$$module$src$utils$promise$$;this.consentState=this.$qqid_$=null};
$JSCompiler_prototypeAlias$$.renderNonAmpCreative=function(){var $$jscomp$this$jscomp$288$$=this;if(this.postAdResponseExperimentFeatures["render-idle-throttle"]&&this.$isIdleRender_$){if(this.win["3pla"])return($throttlePromise_$$module$extensions$amp_ad$0_1$concurrent_load$$||Promise.resolve()).then(function(){return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.renderNonAmpCreative.call($$jscomp$this$jscomp$288$$)});$incrementLoadingAds$$module$extensions$amp_ad$0_1$concurrent_load$$(this.win);
return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.renderNonAmpCreative.call(this,!0)}return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.renderNonAmpCreative.call(this)};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){switch(this.postAdResponseExperimentFeatures.unlayout_exp){case "all":this.$isAmpCreative_$=!1;break;case "remain":if(this.$qqid_$&&null===this.$isAmpCreative_$)return $dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","unlayoutCallback - unrendered creative can remain"),!1}this.$refreshManager_$&&this.$refreshManager_$.unobserve();if(!this.useSra&&this.$isAmpCreative_$)return!1;this.$safeframeApi_$&&
(this.$safeframeApi_$.destroy(),this.$safeframeApi_$=null);return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.unlayoutCallback.call(this)};$JSCompiler_prototypeAlias$$.cleanupAfterTest=function(){this.$safeframeApi_$&&(this.$safeframeApi_$.destroy(),this.$safeframeApi_$=null)};$JSCompiler_prototypeAlias$$.refresh=function($refreshEndCallback$jscomp$1$$){this.$refreshCount_$++;return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.refresh.call(this,$refreshEndCallback$jscomp$1$$)};
$JSCompiler_prototypeAlias$$.initLifecycleReporter=function(){return $googleLifecycleReporterFactory$$module$ads$google$a4a$google_data_reporter$$(this)};
$JSCompiler_prototypeAlias$$.onCreativeRender=function($creativeMetaData$jscomp$4_size$jscomp$18$$){var $$jscomp$this$jscomp$289$$=this;$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.onCreativeRender.call(this,$creativeMetaData$jscomp$4_size$jscomp$18$$);this.$isAmpCreative_$=!!$creativeMetaData$jscomp$4_size$jscomp$18$$;$creativeMetaData$jscomp$4_size$jscomp$18$$&&!$creativeMetaData$jscomp$4_size$jscomp$18$$.customElementExtensions.includes("amp-ad-exit")&&$Navigation$$module$src$service$navigation$installAnchorClickInterceptor$$(this.getAmpDoc(),
this.iframe.contentWindow);this.$ampAnalyticsConfig_$&&($isReportingEnabled$$module$ads$google$a4a$utils$$(this)&&$addCsiSignalsToAmpAnalyticsConfig$$module$ads$google$a4a$utils$$(this.win,this.element,this.$ampAnalyticsConfig_$,this.$qqid_$,!!$creativeMetaData$jscomp$4_size$jscomp$18$$,this.$lifecycleReporter_$.getDeltaTime(),this.$lifecycleReporter_$.getInitTime()),this.$ampAnalyticsElement_$=$insertAnalyticsElement$$module$src$extension_analytics$$(this.element,this.$ampAnalyticsConfig_$,!!this.postAdResponseExperimentFeatures.avr_disable_immediate));
this.isRefreshing&&(this.$refreshManager_$.initiateRefreshCycle(),this.isRelayoutNeededFlag=this.isRefreshing=!1);this.$lifecycleReporter_$.addPingsForVisibility(this.element);$creativeMetaData$jscomp$4_size$jscomp$18$$=this.$returnedSize_$||this.getSlotSize();var $isMultiSizeFluid$$=this.$isFluidRequest_$&&this.$returnedSize_$&&!(0==$creativeMetaData$jscomp$4_size$jscomp$18$$.width&&0==$creativeMetaData$jscomp$4_size$jscomp$18$$.height);$setStyles$$module$src$style$$(this.iframe,{width:$creativeMetaData$jscomp$4_size$jscomp$18$$.width+
"px",height:$creativeMetaData$jscomp$4_size$jscomp$18$$.height+"px",position:$isMultiSizeFluid$$?"relative":null});$isMultiSizeFluid$$&&(this.element.removeAttribute("height"),$setStyles$$module$src$style$$(this.element,{width:$creativeMetaData$jscomp$4_size$jscomp$18$$.width+"px"}));this.$refreshManager_$=this.$refreshManager_$||$getRefreshManager$$module$extensions$amp_a4a$0_1$refresh_manager$$(this,function(){return $$jscomp$this$jscomp$289$$.useSra?($user$$module$src$log$$().warn("amp-ad-network-doubleclick-impl",
"Refresh not compatible with SRA."),!1):$getEnclosingContainerTypes$$module$ads$google$a4a$utils$$($$jscomp$this$jscomp$289$$.element).filter(function($creativeMetaData$jscomp$4_size$jscomp$18$$){return $creativeMetaData$jscomp$4_size$jscomp$18$$!=$ValidAdContainerTypes$$module$ads$google$a4a$utils$$["AMP-CAROUSEL"]&&$creativeMetaData$jscomp$4_size$jscomp$18$$!=$ValidAdContainerTypes$$module$ads$google$a4a$utils$$["AMP-STICKY-AD"]}).length?($user$$module$src$log$$().warn("amp-ad-network-doubleclick-impl",
"Refresh not compatible with ad-containers, except for AMP-CAROUSEL and AMP-STICKY-AD"),!1):!0});this.postTroubleshootMessage()};
function $JSCompiler_StaticMethods_generateAdKey_$$($JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$,$size$jscomp$19$$){$JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$=$JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$.element;var $domFingerprint$$=$domFingerprintPlain$$module$src$utils$dom_fingerprint$$($JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$),$slot$jscomp$3$$=$JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$.getAttribute("data-slot")||
"",$multiSize$$=$JSCompiler_StaticMethods_generateAdKey_$self_element$jscomp$233$$.getAttribute("data-multi-size")||"";return $stringHash32$$module$src$string$$($slot$jscomp$3$$+":"+$size$jscomp$19$$+":"+$multiSize$$+":"+$domFingerprint$$)}
$JSCompiler_prototypeAlias$$.$handleResize_$=function($width$jscomp$36$$,$height$jscomp$34$$){var $pWidth$$=this.element.getAttribute("width"),$pHeight$$=this.element.getAttribute("height");(this.$isFluidRequest_$&&$width$jscomp$36$$&&$height$jscomp$34$$||($width$jscomp$36$$!=$pWidth$$||$height$jscomp$34$$!=$pHeight$$)&&$width$jscomp$36$$<=$pWidth$$&&$height$jscomp$34$$<=$pHeight$$)&&this.attemptChangeSize($height$jscomp$34$$,$width$jscomp$36$$).catch(function(){})};
$JSCompiler_prototypeAlias$$.sendXhrRequest=function($adUrl$jscomp$7$$){var $$jscomp$this$jscomp$290$$=this;if(!this.useSra)return $AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.sendXhrRequest.call(this,$adUrl$jscomp$7$$);this.initiateSraRequests();return this.sraDeferred.promise.then(function($response$jscomp$31$$){return $response$jscomp$31$$||$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.sendXhrRequest.call($$jscomp$this$jscomp$290$$,$adUrl$jscomp$7$$)})};
$JSCompiler_prototypeAlias$$.fireDelayedImpressions=function($impressions$$,$scrubReferer$$){var $$jscomp$this$jscomp$291$$=this;$impressions$$&&$impressions$$.split(",").forEach(function($impressions$$){try{$isSecureUrl$$module$src$url$$($impressions$$)?$$jscomp$this$jscomp$291$$.win.document.body.appendChild($createElementWithAttributes$$module$src$dom$$($$jscomp$this$jscomp$291$$.win.document,"amp-pixel",$dict$$module$src$utils$object$$({src:$impressions$$,referrerpolicy:$scrubReferer$$?"no-referrer":
""}))):$dev$$module$src$log$$().warn("amp-ad-network-doubleclick-impl","insecure impression url: "+$impressions$$)}catch($unusedError$jscomp$3$$){}})};$JSCompiler_prototypeAlias$$.groupSlotsForSra=function(){return $groupAmpAdsByType$$module$ads$google$a4a$utils$$(this.win,this.element.getAttribute("type"))};
$JSCompiler_prototypeAlias$$.initiateSraRequests=function(){var $$jscomp$this$jscomp$292$$=this;if(!$sraRequests$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$){var $checkStillCurrent$jscomp$8$$=this.verifyStillCurrent();$sraRequests$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$=this.groupSlotsForSra().then(function($groupIdToBlocksAry$$){$checkStillCurrent$jscomp$8$$();Object.keys($groupIdToBlocksAry$$).forEach(function($networkId$$){var $blocks$$=
$groupIdToBlocksAry$$[$networkId$$];Promise.all($blocks$$).then(function($groupIdToBlocksAry$$){$checkStillCurrent$jscomp$8$$();var $blocks$$=$groupIdToBlocksAry$$.filter(function($$jscomp$this$jscomp$292$$){var $checkStillCurrent$jscomp$8$$=$$jscomp$this$jscomp$292$$.hasAdPromise();$checkStillCurrent$jscomp$8$$||$dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","Ignoring instance without ad promise as likely invalid",$$jscomp$this$jscomp$292$$.element);
return $checkStillCurrent$jscomp$8$$});if($blocks$$.length)if(1==$blocks$$.length)$dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-ad-network-doubleclick-impl","single block in network "+$networkId$$),$blocks$$[0].sraDeferred.resolve(null);else{var $instances$jscomp$13$$=$blocks$$.map(function($$jscomp$this$jscomp$292$$){return $$jscomp$this$jscomp$292$$.sraDeferred.resolve}),$slotCallback$$=$metaJsonCreativeGrouper$$module$ads$google$a4a$line_delimited_response_handler$$(function($$jscomp$this$jscomp$292$$,
$groupIdToBlocksAry$$,$networkId$$){$checkStillCurrent$jscomp$8$$();var $blocks$$=Object.keys($groupIdToBlocksAry$$);1==$blocks$$.length&&$isObject$$module$src$types$$($groupIdToBlocksAry$$[$blocks$$[0]])&&($groupIdToBlocksAry$$=$groupIdToBlocksAry$$[$blocks$$[0]],$groupIdToBlocksAry$$=Object.keys($groupIdToBlocksAry$$).reduce(function($$jscomp$this$jscomp$292$$,$checkStillCurrent$jscomp$8$$){$$jscomp$this$jscomp$292$$[$checkStillCurrent$jscomp$8$$.toLowerCase()]=$groupIdToBlocksAry$$[$checkStillCurrent$jscomp$8$$];
return $$jscomp$this$jscomp$292$$},{}));$groupIdToBlocksAry$$["x-ampadrender"]="safeframe";$instances$jscomp$13$$.shift()({headers:{get:function($$jscomp$this$jscomp$292$$){($$jscomp$this$jscomp$292$$=$groupIdToBlocksAry$$[$$jscomp$this$jscomp$292$$.toLowerCase()])&&"string"!=typeof $$jscomp$this$jscomp$292$$&&($$jscomp$this$jscomp$292$$=JSON.stringify($$jscomp$this$jscomp$292$$));return $$jscomp$this$jscomp$292$$},has:function($$jscomp$this$jscomp$292$$){return!!$groupIdToBlocksAry$$[$$jscomp$this$jscomp$292$$.toLowerCase()]}},
arrayBuffer:function(){return $tryResolve$$module$src$utils$promise$$(function(){return $utf8Encode$$module$src$utils$bytes$$($$jscomp$this$jscomp$292$$)})}});$networkId$$&&$instances$jscomp$13$$.length&&$dev$$module$src$log$$().warn("amp-ad-network-doubleclick-impl","Premature end of SRA response",$instances$jscomp$13$$.length,$sraUrl$$)}),$sraUrl$$;return $constructSRARequest_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($$jscomp$this$jscomp$292$$.win,
$$jscomp$this$jscomp$292$$.getAmpDoc(),$blocks$$).then(function($groupIdToBlocksAry$$){$checkStillCurrent$jscomp$8$$();$sraUrl$$=$groupIdToBlocksAry$$;return $Services$$module$src$services$xhrFor$$($$jscomp$this$jscomp$292$$.win).$Xhr$$module$src$service$xhr_impl_prototype$fetch$($sraUrl$$,{mode:"cors",method:"GET",credentials:"include"})}).then(function($groupIdToBlocksAry$$){$checkStillCurrent$jscomp$8$$();return $lineDelimitedStreamer$$module$ads$google$a4a$line_delimited_response_handler$$($$jscomp$this$jscomp$292$$.win,
$groupIdToBlocksAry$$,$slotCallback$$)}).catch(function($checkStillCurrent$jscomp$8$$){var $groupIdToBlocksAry$$=$isCancellation$$module$src$error$$($checkStillCurrent$jscomp$8$$);$groupIdToBlocksAry$$?$blocks$$.forEach(function($$jscomp$this$jscomp$292$$){return $$jscomp$this$jscomp$292$$.sraDeferred.reject($checkStillCurrent$jscomp$8$$)}):$$jscomp$this$jscomp$292$$.win.document.querySelector("meta[name=amp-ad-doubleclick-sra]")?($assignAdUrlToError$$module$extensions$amp_a4a$0_1$amp_a4a$$($checkStillCurrent$jscomp$8$$,
$sraUrl$$),$$jscomp$this$jscomp$292$$.warnOnError("SRA request failure",$checkStillCurrent$jscomp$8$$),$blocks$$.forEach(function($$jscomp$this$jscomp$292$$){$$jscomp$this$jscomp$292$$.resetAdUrl();$$jscomp$this$jscomp$292$$.attemptCollapse();$$jscomp$this$jscomp$292$$.sraDeferred.reject($checkStillCurrent$jscomp$8$$)})):$blocks$$.forEach(function($$jscomp$this$jscomp$292$$){return $$jscomp$this$jscomp$292$$.sraDeferred.resolve(null)})})}})})})}};
$JSCompiler_prototypeAlias$$.warnOnError=function($message$jscomp$46$$,$error$jscomp$51$$){$dev$$module$src$log$$().warn("amp-ad-network-doubleclick-impl",$message$jscomp$46$$,$error$jscomp$51$$)};$JSCompiler_prototypeAlias$$.getPreconnectUrls=function(){return["https://securepubads.g.doubleclick.net/"]};
$JSCompiler_prototypeAlias$$.getNonAmpCreativeRenderingMethod=function($headerValue$jscomp$4$$){return this.$forceSafeframe_$||this.$isFluidRequest_$?"safeframe":$AmpA4A$$module$extensions$amp_a4a$0_1$amp_a4a$$.prototype.getNonAmpCreativeRenderingMethod.call(this,$headerValue$jscomp$4$$)};
$JSCompiler_prototypeAlias$$.getLocationQueryParameterValue=function($parameterName$$){$windowLocationQueryParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$=$windowLocationQueryParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$||$parseQueryString_$$module$src$url_parse_query_string$$(this.win.location&&this.win.location.search||"");return $windowLocationQueryParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$[$parameterName$$]};
$JSCompiler_prototypeAlias$$.getAdditionalContextMetadata=function($isSafeFrame$$){$isSafeFrame$$=void 0===$isSafeFrame$$?!1:$isSafeFrame$$;if(this.$isFluidRequest_$||$isSafeFrame$$){var $creativeSize$jscomp$1$$=this.getCreativeSize();this.$safeframeApi_$=this.$safeframeApi_$||new $SafeframeHostApi$$module$extensions$amp_ad_network_doubleclick_impl$0_1$safeframe_host$$(this,this.$isFluidRequest_$,$creativeSize$jscomp$1$$,this.$fluidImpressionUrl_$);return this.$safeframeApi_$.getSafeframeNameAttr()}};
$JSCompiler_prototypeAlias$$.postTroubleshootMessage=function(){var $$jscomp$this$jscomp$293$$=this;return this.win.opener&&/[?|&]dfpdeb/.test(this.win.location.search)?this.$troubleshootData_$.adUrl.then(function($adUrl$jscomp$8_payload$jscomp$13$$){var $slotId$jscomp$4$$=$$jscomp$this$jscomp$293$$.$troubleshootData_$.slotId+"_"+$$jscomp$this$jscomp$293$$.$troubleshootData_$.slotIndex;$adUrl$jscomp$8_payload$jscomp$13$$=$dict$$module$src$utils$object$$({gutData:JSON.stringify($dict$$module$src$utils$object$$({events:[{timestamp:Date.now(),
slotid:$slotId$jscomp$4$$,messageId:4}],slots:[{contentUrl:$adUrl$jscomp$8_payload$jscomp$13$$||"",id:$slotId$jscomp$4$$,leafAdUnitName:$$jscomp$this$jscomp$293$$.$troubleshootData_$.slotId,domId:$slotId$jscomp$4$$,lineItemId:$$jscomp$this$jscomp$293$$.$troubleshootData_$.lineItemId,creativeId:$$jscomp$this$jscomp$293$$.$troubleshootData_$.creativeId}]})),userAgent:navigator.userAgent,referrer:$$jscomp$this$jscomp$293$$.win.location.href,messageType:"LOAD"});$$jscomp$this$jscomp$293$$.win.opener.postMessage($adUrl$jscomp$8_payload$jscomp$13$$,
"*")}):null};$JSCompiler_prototypeAlias$$.getA4aAnalyticsVars=function($analyticsTrigger$jscomp$2$$){return $getCsiAmpAnalyticsVariables$$module$ads$google$a4a$utils$$($analyticsTrigger$jscomp$2$$,this,this.$qqid_$)};$JSCompiler_prototypeAlias$$.getA4aAnalyticsConfig=function(){return $getCsiAmpAnalyticsConfig$$module$ads$google$a4a$utils$$()};(function($AMP$jscomp$11$$){$AMP$jscomp$11$$.registerElement("amp-ad-network-doubleclick-impl",$AmpAdNetworkDoubleclickImpl$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$)})(self.AMP);
function $getNetworkId$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($element$jscomp$234_networkId$jscomp$1$$){return($element$jscomp$234_networkId$jscomp$1$$=/^(?:\/)?(\d+)/.exec($element$jscomp$234_networkId$jscomp$1$$.getAttribute("data-slot")))?$element$jscomp$234_networkId$jscomp$1$$[1]:""}
function $constructSRARequest_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($win$jscomp$255$$,$doc$jscomp$64$$,$instances$jscomp$14$$){var $startTime$jscomp$18$$=Date.now();return $googlePageParameters$$module$ads$google$a4a$utils$$($win$jscomp$255$$,$doc$jscomp$64$$,$startTime$jscomp$18$$).then(function($win$jscomp$255$$){var $doc$jscomp$64$$=$constructSRABlockParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$14$$);
return $truncAndTimeUrl$$module$ads$google$a4a$utils$$("https://securepubads.g.doubleclick.net/gampad/ads",Object.assign($doc$jscomp$64$$,$win$jscomp$255$$,$instances$jscomp$14$$[0].getPageParameters($instances$jscomp$14$$[0].consentState)),$startTime$jscomp$18$$)})}
function $constructSRABlockParameters$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$15$$){var $parameters$jscomp$3$$={output:"ldjh",impl:"fifs"};$BLOCK_SRA_COMBINERS_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$.forEach(function($combiner$$){return Object.assign($parameters$jscomp$3$$,$combiner$$($instances$jscomp$15$$))});return $parameters$jscomp$3$$}
function $serializeTargeting_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($targeting$$,$categoryExclusions$$){var $serialized$$=$targeting$$?Object.keys($targeting$$).map(function($categoryExclusions$$){return $serializeItem_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($categoryExclusions$$,$targeting$$[$categoryExclusions$$])}):[];$categoryExclusions$$&&$serialized$$.push($serializeItem_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$("excl_cat",
$categoryExclusions$$));return $serialized$$.length?$serialized$$.join("&"):null}function $serializeItem_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($key$jscomp$84$$,$value$jscomp$128$$){var $serializedValue$$=(Array.isArray($value$jscomp$128$$)?$value$jscomp$128$$:[$value$jscomp$128$$]).map(encodeURIComponent).join();return encodeURIComponent($key$jscomp$84$$)+"="+$serializedValue$$}
function $getFirstInstanceValue_$$module$extensions$amp_ad_network_doubleclick_impl$0_1$amp_ad_network_doubleclick_impl$$($instances$jscomp$16$$,$extractFn$$){for(var $i$jscomp$200$$=0;$i$jscomp$200$$<$instances$jscomp$16$$.length;$i$jscomp$200$$++){var $val$jscomp$26$$=$extractFn$$($instances$jscomp$16$$[$i$jscomp$200$$]);if($val$jscomp$26$$)return $val$jscomp$26$$}return null};})});
//# sourceMappingURL=extensions-amp-ad-network-doubleclick-impl-0.1-amp-ad-network-doubleclick-impl.js.map

