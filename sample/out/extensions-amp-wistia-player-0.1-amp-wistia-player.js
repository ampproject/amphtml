(self.AMP=self.AMP||[]).push({n:"extensions-amp-wistia-player-0.1-amp-wistia-player.js", v:"erwin", f:(function(){function $AmpWistiaPlayer$$module$extensions$amp_wistia_player$0_1$amp_wistia_player$$($$jscomp$super$this$jscomp$91_element$jscomp$467$$){$$jscomp$super$this$jscomp$91_element$jscomp$467$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$91_element$jscomp$467$$)||this;$$jscomp$super$this$jscomp$91_element$jscomp$467$$.$iframe_$=null;$$jscomp$super$this$jscomp$91_element$jscomp$467$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$91_element$jscomp$467$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$91_element$jscomp$467$$.$unlistenMessage_$=
null;return $$jscomp$super$this$jscomp$91_element$jscomp$467$$}$$jscomp$inherits$$($AmpWistiaPlayer$$module$extensions$amp_wistia_player$0_1$amp_wistia_player$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpWistiaPlayer$$module$extensions$amp_wistia_player$0_1$amp_wistia_player$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function($onLayout$jscomp$11$$){this.preconnect.url("https://fast.wistia.net",$onLayout$jscomp$11$$)};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$90$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$90$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $deferred$jscomp$51$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$51$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$51$$.resolve;$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$853$$=this,$loaded$jscomp$5_mediaId$jscomp$1$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-media-hashed-id"),"The data-media-hashed-id attribute is required for <amp-wistia-player> %s",this.element),$iframe$jscomp$71$$=this.element.ownerDocument.createElement("iframe");$iframe$jscomp$71$$.setAttribute("title",this.element.getAttribute("title")||"Wistia Video Player");
$iframe$jscomp$71$$.setAttribute("frameborder","0");$iframe$jscomp$71$$.setAttribute("scrolling","no");$iframe$jscomp$71$$.setAttribute("allowtransparency","");$iframe$jscomp$71$$.setAttribute("allowfullscreen","true");$iframe$jscomp$71$$.src="https://fast.wistia.net/embed/iframe/"+encodeURIComponent($loaded$jscomp$5_mediaId$jscomp$1$$);this.applyFillContent($iframe$jscomp$71$$);this.$iframe_$=$iframe$jscomp$71$$;this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",this.$handleWistiaMessages_$.bind(this));
this.element.appendChild(this.$iframe_$);$loaded$jscomp$5_mediaId$jscomp$1$$=this.loadPromise(this.$iframe_$).then(function(){$$jscomp$this$jscomp$853$$.$listenToFrame_$();$$jscomp$this$jscomp$853$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)});this.$playerReadyResolver_$($loaded$jscomp$5_mediaId$jscomp$1$$);return $loaded$jscomp$5_mediaId$jscomp$1$$};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$52$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$52$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$52$$.resolve;return!0};
$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$14$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$14$$})};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$iframe_$&&this.pause()};
$JSCompiler_prototypeAlias$$.$handleWistiaMessages_$=function($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$){if("https://fast.wistia.net"===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.origin&&$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.source==this.$iframe_$.contentWindow&&$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data&&($isObject$$module$src$types$$($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data)||
$startsWith$$module$src$string$$($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data,"{"))&&($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$=$isObject$$module$src$types$$($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data)?$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data:$tryParseJson$$module$src$json$$($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.data),void 0!==$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$&&
"_trigger"==$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.method)){var $playerEvent$$=$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args?$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args[0]:void 0;"statechange"===$playerEvent$$?($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$=$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args?$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args[1]:
void 0,"playing"===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING):"paused"===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE):"ended"===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$&&(this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE),this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.ENDED))):
"mutechange"==$playerEvent$$&&($data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$=$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args?$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$.args[1]:void 0,!0===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.MUTED):!1===$data$jscomp$137_event$jscomp$167_isMuted$jscomp$9_state$jscomp$85$$&&this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.UNMUTED))}};
$JSCompiler_prototypeAlias$$.$listenToFrame_$=function(){this.$sendCommand_$("amp-listening")};$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$7$$){var $$jscomp$this$jscomp$854$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$854$$.$iframe_$&&$$jscomp$this$jscomp$854$$.$iframe_$.contentWindow&&$$jscomp$this$jscomp$854$$.$iframe_$.contentWindow.postMessage($command$jscomp$7$$,"*")})};$JSCompiler_prototypeAlias$$.play=function(){this.$sendCommand_$("amp-play")};
$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("amp-pause")};$JSCompiler_prototypeAlias$$.mute=function(){this.$sendCommand_$("amp-mute")};$JSCompiler_prototypeAlias$$.unmute=function(){this.$sendCommand_$("amp-unmute")};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};$JSCompiler_prototypeAlias$$.showControls=function(){};$JSCompiler_prototypeAlias$$.hideControls=function(){};
$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.fullscreenExit=function(){this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.isFullscreen=function(){return this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};
$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!0};$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$98$$){$AMP$jscomp$98$$.registerElement("amp-wistia-player",$AmpWistiaPlayer$$module$extensions$amp_wistia_player$0_1$amp_wistia_player$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-wistia-player-0.1-amp-wistia-player.js.map

