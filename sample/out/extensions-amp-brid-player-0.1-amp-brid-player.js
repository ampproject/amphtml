(self.AMP=self.AMP||[]).push({n:"extensions-amp-brid-player-0.1-amp-brid-player.js", v:"erwin", f:(function(){function $AmpBridPlayer$$module$extensions$amp_brid_player$0_1$amp_brid_player$$($$jscomp$super$this$jscomp$23_element$jscomp$286$$){$$jscomp$super$this$jscomp$23_element$jscomp$286$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$23_element$jscomp$286$$)||this;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$partnerID_$="";$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$feedID_$="";$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$playerID_$="";$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$iframe_$=
null;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$videoIframeSrc_$=null;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$volume_$=null;$$jscomp$super$this$jscomp$23_element$jscomp$286$$.$unlistenMessage_$=null;return $$jscomp$super$this$jscomp$23_element$jscomp$286$$}
$$jscomp$inherits$$($AmpBridPlayer$$module$extensions$amp_brid_player$0_1$amp_brid_player$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpBridPlayer$$module$extensions$amp_brid_player$0_1$amp_brid_player$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$9$$){this.preconnect.url("https://services.brid.tv",$opt_onLayout$jscomp$9$$);this.preconnect.url("https://cdn.brid.tv",$opt_onLayout$jscomp$9$$)};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$36$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$36$$)};
$JSCompiler_prototypeAlias$$.$getVideoIframeSrc_$=function(){if(this.$videoIframeSrc_$)return this.$videoIframeSrc_$;var $feedType$$="";this.element.hasAttribute("data-video")?$feedType$$="video":this.element.hasAttribute("data-playlist")?$feedType$$="playlist":this.element.hasAttribute("data-outstream")&&($feedType$$="outstream");var $src$jscomp$31$$="https://services.brid.tv/services/iframe/"+encodeURIComponent($feedType$$)+"/"+encodeURIComponent(this.$feedID_$)+"/"+encodeURIComponent(this.$partnerID_$)+
"/"+encodeURIComponent(this.$playerID_$)+"/0/1";return this.$videoIframeSrc_$=$assertAbsoluteHttpOrHttpsUrl$$module$src$url$$($src$jscomp$31$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$partnerID_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-partner"),"The data-partner attribute is required for <amp-brid-player> %s",this.element);this.$playerID_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-player"),"The data-player attribute is required for <amp-brid-player> %s",this.element);this.$feedID_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-video")||
this.element.getAttribute("data-playlist")||this.element.getAttribute("data-outstream"),"Either the data-video or the data-playlist or the data-outstream attributes must be specified for <amp-brid-player> %s",this.element);var $deferred$jscomp$27$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$27$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$27$$.resolve;$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$431$$=this,$iframe$jscomp$34$$=this.element.ownerDocument.createElement("iframe");$iframe$jscomp$34$$.setAttribute("frameborder","0");$iframe$jscomp$34$$.setAttribute("allowfullscreen","true");$iframe$jscomp$34$$.src=this.$getVideoIframeSrc_$();this.applyFillContent($iframe$jscomp$34$$);this.$iframe_$=$iframe$jscomp$34$$;this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",this.$handleBridMessages_$.bind(this));
this.element.appendChild($iframe$jscomp$34$$);return this.loadPromise($iframe$jscomp$34$$).then(function(){return $$jscomp$this$jscomp$431$$.$playerReadyPromise_$})};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$28$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$28$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$28$$.resolve;return!0};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.pause()};
$JSCompiler_prototypeAlias$$.createPlaceholderCallback=function(){var $placeholder$jscomp$6$$=this.win.document.createElement("amp-img"),$partnerID$$=this.$partnerID_$,$feedID$$=this.$feedID_$;this.propagateAttributes(["aria-label"],$placeholder$jscomp$6$$);if(this.element.hasAttribute("data-video")||this.element.hasAttribute("data-playlist")){var $placeholderFallback$$=this.win.document.createElement("amp-img");$placeholderFallback$$.setAttribute("src","https://cdn.brid.tv/live/default/defaultSnapshot.png");
$placeholderFallback$$.setAttribute("referrerpolicy","origin");$placeholderFallback$$.setAttribute("layout","fill");$placeholderFallback$$.setAttribute("fallback","");$placeholder$jscomp$6$$.appendChild($placeholderFallback$$);$placeholder$jscomp$6$$.setAttribute("src","https://cdn.brid.tv/live/partners/"+encodeURIComponent($partnerID$$)+"/snapshot/"+encodeURIComponent($feedID$$)+".jpg");$placeholder$jscomp$6$$.setAttribute("layout","fill");$placeholder$jscomp$6$$.setAttribute("placeholder","");$placeholder$jscomp$6$$.setAttribute("referrerpolicy",
"origin");$placeholder$jscomp$6$$.hasAttribute("aria-label")?$placeholder$jscomp$6$$.setAttribute("alt","Loading video - "+$placeholder$jscomp$6$$.getAttribute("aria-label")):$placeholder$jscomp$6$$.setAttribute("alt","Loading video");this.applyFillContent($placeholder$jscomp$6$$);return $placeholder$jscomp$6$$}return!1};
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$$,$opt_arg$$){var $$jscomp$this$jscomp$432$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$432$$.$iframe_$&&$$jscomp$this$jscomp$432$$.$iframe_$.contentWindow&&$$jscomp$this$jscomp$432$$.$iframe_$.contentWindow.postMessage("Brid|"+$command$$+(void 0===$opt_arg$$?"":"|"+$opt_arg$$),"*")})};
$JSCompiler_prototypeAlias$$.$handleBridMessages_$=function($event$jscomp$80_params$jscomp$25$$){var $eventData$jscomp$3$$=$event$jscomp$80_params$jscomp$25$$.data;"https://services.brid.tv"!==$event$jscomp$80_params$jscomp$25$$.origin||$event$jscomp$80_params$jscomp$25$$.source!=this.$iframe_$.contentWindow||"string"!==typeof $eventData$jscomp$3$$||$eventData$jscomp$3$$.indexOf("Brid")||($event$jscomp$80_params$jscomp$25$$=$eventData$jscomp$3$$.split("|"),"trigger"==$event$jscomp$80_params$jscomp$25$$[2]?
"ready"==$event$jscomp$80_params$jscomp$25$$[3]?(this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD),this.$playerReadyResolver_$(this.$iframe_$)):"play"==$event$jscomp$80_params$jscomp$25$$[3]?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING):"pause"==$event$jscomp$80_params$jscomp$25$$[3]&&this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE):"volume"==$event$jscomp$80_params$jscomp$25$$[2]&&((this.$volume_$=
parseFloat($event$jscomp$80_params$jscomp$25$$[3]))?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.UNMUTED):this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.MUTED)))};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};$JSCompiler_prototypeAlias$$.play=function(){this.$sendCommand_$("play")};$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("pause")};
$JSCompiler_prototypeAlias$$.mute=function(){this.$sendCommand_$("muted",1);this.$sendCommand_$("volume",0)};$JSCompiler_prototypeAlias$$.unmute=function(){this.$sendCommand_$("muted",0);this.$sendCommand_$("volume",1)};$JSCompiler_prototypeAlias$$.showControls=function(){};$JSCompiler_prototypeAlias$$.hideControls=function(){};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.fullscreenExit=function(){this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.isFullscreen=function(){return this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};
$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$27$$){$AMP$jscomp$27$$.registerElement("amp-brid-player",$AmpBridPlayer$$module$extensions$amp_brid_player$0_1$amp_brid_player$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-brid-player-0.1-amp-brid-player.js.map

