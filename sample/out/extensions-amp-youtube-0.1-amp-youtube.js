(self.AMP=self.AMP||[]).push({n:"extensions-amp-youtube-0.1-amp-youtube.js", v:"erwin", f:(function(){function $AmpYoutube$$module$extensions$amp_youtube$0_1$amp_youtube$$($$jscomp$super$this$jscomp$92_element$jscomp$468$$){$$jscomp$super$this$jscomp$92_element$jscomp$468$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$92_element$jscomp$468$$)||this;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$videoid_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$liveChannelid_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$muted_$=!1;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$iframe_$=
null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$info_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$videoIframeSrc_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$92_element$jscomp$468$$.$unlistenMessage_$=null;return $$jscomp$super$this$jscomp$92_element$jscomp$468$$}
$$jscomp$inherits$$($AmpYoutube$$module$extensions$amp_youtube$0_1$amp_youtube$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpYoutube$$module$extensions$amp_youtube$0_1$amp_youtube$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$28$$){this.preconnect.url(this.$getVideoIframeSrc_$());this.preconnect.url("https://s.ytimg.com",$opt_onLayout$jscomp$28$$);this.preconnect.url("https://i.ytimg.com",$opt_onLayout$jscomp$28$$)};
$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$91$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$91$$)};$JSCompiler_prototypeAlias$$.renderOutsideViewport=function(){return.75};$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$15$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$15$$})};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$videoid_$=this.$getVideoId_$();this.$liveChannelid_$=this.element.getAttribute("data-live-channelid");$JSCompiler_StaticMethods_assertDatasourceExists_$$(this);var $deferred$jscomp$53$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$53$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$53$$.resolve;!this.getPlaceholder()&&this.$videoid_$&&$JSCompiler_StaticMethods_buildImagePlaceholder_$$(this);
$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this)};
$JSCompiler_prototypeAlias$$.$getVideoIframeSrc_$=function(){if(this.$videoIframeSrc_$)return this.$videoIframeSrc_$;var $JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$;$JSCompiler_StaticMethods_assertDatasourceExists_$$(this);$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$="";"omit"===(this.element.getAttribute("credentials")||"include")&&($JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$=
"-nocookie");$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$="https://www.youtube"+$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$+".com/embed/";var $JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$;$JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$=this.$videoid_$?encodeURIComponent(this.$videoid_$||"")+"?":"live_stream?channel="+(encodeURIComponent(this.$liveChannelid_$||"")+"&");$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$=
""+$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$+$JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$+"enablejsapi=1";$JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$=$getDataParamsFromAttributes$$module$src$dom$$(this.element);"autoplay"in $JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$&&(delete $JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$.autoplay,this.user().error("AMP-YOUTUBE","Use autoplay attribute instead of data-param-autoplay"));
"playsinline"in $JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$||($JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$.playsinline="1");var $hasAutoplay$$=this.element.hasAttribute("autoplay");$hasAutoplay$$&&("iv_load_policy"in $JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$||($JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$.iv_load_policy="3"),$JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$.playsinline="1");return this.$videoIframeSrc_$=
$JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$=$addParamsToUrl$$module$src$url$$($JSCompiler_baseUrl$jscomp$inline_2604_JSCompiler_urlSuffix$jscomp$inline_2603_src$jscomp$66$$,$JSCompiler_descriptor$jscomp$inline_2605_params$jscomp$34$$)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$855$$=this,$iframe$jscomp$72_loaded$jscomp$6$$=this.element.ownerDocument.createElement("iframe"),$src$jscomp$67$$=this.$getVideoIframeSrc_$();$iframe$jscomp$72_loaded$jscomp$6$$.setAttribute("frameborder","0");$iframe$jscomp$72_loaded$jscomp$6$$.setAttribute("allowfullscreen","true");$iframe$jscomp$72_loaded$jscomp$6$$.src=$src$jscomp$67$$;this.applyFillContent($iframe$jscomp$72_loaded$jscomp$6$$);this.$iframe_$=$iframe$jscomp$72_loaded$jscomp$6$$;
this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",this.$handleYoutubeMessages_$.bind(this));this.element.appendChild(this.$iframe_$);$iframe$jscomp$72_loaded$jscomp$6$$=this.loadPromise(this.$iframe_$).then(function(){$$jscomp$this$jscomp$855$$.$listenToFrame_$();$$jscomp$this$jscomp$855$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)});this.$playerReadyResolver_$($iframe$jscomp$72_loaded$jscomp$6$$);return $iframe$jscomp$72_loaded$jscomp$6$$};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$54$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$54$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$54$$.resolve;return!0};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$iframe_$&&this.$iframe_$.contentWindow&&this.pause()};
$JSCompiler_prototypeAlias$$.mutatedAttributesCallback=function($mutations$jscomp$10$$){void 0!==$mutations$jscomp$10$$["data-videoid"]&&(this.$videoid_$=this.$getVideoId_$(),this.$iframe_$&&this.$sendCommand_$("loadVideoById",[this.$videoid_$]))};$JSCompiler_prototypeAlias$$.$getVideoId_$=function(){return this.element.getAttribute("data-videoid")};
function $JSCompiler_StaticMethods_assertDatasourceExists_$$($JSCompiler_StaticMethods_assertDatasourceExists_$self$$){var $datasourceExists$$=!($JSCompiler_StaticMethods_assertDatasourceExists_$self$$.$videoid_$&&$JSCompiler_StaticMethods_assertDatasourceExists_$self$$.$liveChannelid_$)&&($JSCompiler_StaticMethods_assertDatasourceExists_$self$$.$videoid_$||$JSCompiler_StaticMethods_assertDatasourceExists_$self$$.$liveChannelid_$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($datasourceExists$$,
"Exactly one of data-videoid or data-live-channelid should be present for <amp-youtube> %s",$JSCompiler_StaticMethods_assertDatasourceExists_$self$$.element)}
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$8$$,$opt_args$jscomp$11$$){var $$jscomp$this$jscomp$856$$=this;this.$playerReadyPromise_$.then(function(){if($$jscomp$this$jscomp$856$$.$iframe_$&&$$jscomp$this$jscomp$856$$.$iframe_$.contentWindow){var $message$jscomp$67$$=JSON.stringify($dict$$module$src$utils$object$$({event:"command",func:$command$jscomp$8$$,args:$opt_args$jscomp$11$$||""}));$$jscomp$this$jscomp$856$$.$iframe_$.contentWindow.postMessage($message$jscomp$67$$,
"*")}})};
$JSCompiler_prototypeAlias$$.$handleYoutubeMessages_$=function($data$jscomp$138_event$jscomp$168$$){if("https://www.youtube.com"==$data$jscomp$138_event$jscomp$168$$.origin&&$data$jscomp$138_event$jscomp$168$$.source==this.$iframe_$.contentWindow&&$data$jscomp$138_event$jscomp$168$$.data&&($isObject$$module$src$types$$($data$jscomp$138_event$jscomp$168$$.data)||$startsWith$$module$src$string$$($data$jscomp$138_event$jscomp$168$$.data,"{"))&&($data$jscomp$138_event$jscomp$168$$=$isObject$$module$src$types$$($data$jscomp$138_event$jscomp$168$$.data)?$data$jscomp$138_event$jscomp$168$$.data:
$tryParseJson$$module$src$json$$($data$jscomp$138_event$jscomp$168$$.data),void 0!==$data$jscomp$138_event$jscomp$168$$))if("infoDelivery"==$data$jscomp$138_event$jscomp$168$$.event&&$data$jscomp$138_event$jscomp$168$$.info&&void 0!==$data$jscomp$138_event$jscomp$168$$.info.playerState){var $playerState$$=$data$jscomp$138_event$jscomp$168$$.info.playerState;2==$playerState$$?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE):0==$playerState$$?(this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE),
this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.ENDED)):1==$playerState$$&&this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING)}else"infoDelivery"==$data$jscomp$138_event$jscomp$168$$.event&&$data$jscomp$138_event$jscomp$168$$.info&&void 0!==$data$jscomp$138_event$jscomp$168$$.info.muted?this.$muted_$!=$data$jscomp$138_event$jscomp$168$$.info.muted&&(this.$muted_$=$data$jscomp$138_event$jscomp$168$$.info.muted,this.element.dispatchCustomEvent(this.$muted_$?
$VideoEvents$$module$src$video_interface$$.MUTED:$VideoEvents$$module$src$video_interface$$.UNMUTED)):"initialDelivery"==$data$jscomp$138_event$jscomp$168$$.event&&$data$jscomp$138_event$jscomp$168$$.info?this.$info_$=$data$jscomp$138_event$jscomp$168$$.info:"infoDelivery"==$data$jscomp$138_event$jscomp$168$$.event&&$data$jscomp$138_event$jscomp$168$$.info&&void 0!==$data$jscomp$138_event$jscomp$168$$.info.currentTime&&(this.$info_$.currentTime=$data$jscomp$138_event$jscomp$168$$.info.currentTime)};
$JSCompiler_prototypeAlias$$.$listenToFrame_$=function(){this.$iframe_$&&this.$iframe_$.contentWindow.postMessage(JSON.stringify($dict$$module$src$utils$object$$({event:"listening"})),"*")};
function $JSCompiler_StaticMethods_buildImagePlaceholder_$$($JSCompiler_StaticMethods_buildImagePlaceholder_$self$$){var $imgPlaceholder$$=$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.element.ownerDocument.createElement("img"),$videoid$jscomp$2$$=$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.$videoid_$;$setStyles$$module$src$style$$($imgPlaceholder$$,{"object-fit":"cover",visibility:"hidden"});$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.propagateAttributes(["aria-label"],
$imgPlaceholder$$);$imgPlaceholder$$.src="https://i.ytimg.com/vi/"+encodeURIComponent($videoid$jscomp$2$$)+"/sddefault.jpg#404_is_fine";$imgPlaceholder$$.setAttribute("placeholder","");$imgPlaceholder$$.setAttribute("referrerpolicy","origin");$imgPlaceholder$$.hasAttribute("aria-label")?$imgPlaceholder$$.setAttribute("alt","Loading video - "+$imgPlaceholder$$.getAttribute("aria-label")):$imgPlaceholder$$.setAttribute("alt","Loading video");$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.applyFillContent($imgPlaceholder$$);
$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.element.appendChild($imgPlaceholder$$);$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.loadPromise($imgPlaceholder$$).then(function(){if(120==$imgPlaceholder$$.naturalWidth&&90==$imgPlaceholder$$.naturalHeight)throw Error("sddefault.jpg is not found");}).catch(function(){$imgPlaceholder$$.src="https://i.ytimg.com/vi/"+encodeURIComponent($videoid$jscomp$2$$)+"/hqdefault.jpg";return $JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.loadPromise($imgPlaceholder$$)}).then(function(){$JSCompiler_StaticMethods_buildImagePlaceholder_$self$$.getVsync().mutate(function(){$setStyles$$module$src$style$$($imgPlaceholder$$,
{visibility:""})})})}$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};$JSCompiler_prototypeAlias$$.play=function(){this.$sendCommand_$("playVideo")};$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("pauseVideo")};$JSCompiler_prototypeAlias$$.mute=function(){this.$sendCommand_$("mute")};$JSCompiler_prototypeAlias$$.unmute=function(){this.$sendCommand_$("unMute")};
$JSCompiler_prototypeAlias$$.showControls=function(){};$JSCompiler_prototypeAlias$$.hideControls=function(){};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.fullscreenExit=function(){this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.isFullscreen=function(){return this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};
$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!0};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return this.$info_$?this.$info_$.currentTime:0};$JSCompiler_prototypeAlias$$.getDuration=function(){return this.$info_$?this.$info_$.duration:1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};
(function($AMP$jscomp$99$$){$AMP$jscomp$99$$.registerElement("amp-youtube",$AmpYoutube$$module$extensions$amp_youtube$0_1$amp_youtube$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-youtube-0.1-amp-youtube.js.map

