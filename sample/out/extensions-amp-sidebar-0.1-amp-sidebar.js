(self.AMP=self.AMP||[]).push({n:"extensions-amp-sidebar-0.1-amp-sidebar.js", v:"erwin", f:(function(){function $Toolbar$$module$extensions$amp_sidebar$0_1$toolbar$$($element$jscomp$405$$,$contextElement$$){this.$context_$=$contextElement$$;this.B=$element$jscomp$405$$;this.$ampdoc_$=$contextElement$$.getAmpDoc();this.G=this.B.getAttribute("toolbar");this.D=null;this.C=void 0;this.F=!1;this.B.classList.add("amp-sidebar-toolbar-target-hidden");$JSCompiler_StaticMethods_buildCallback_$$(this)}
$Toolbar$$module$extensions$amp_sidebar$0_1$toolbar$$.prototype.onLayoutChange=function($onShowCallback$$){var $matchesMedia$$=this.$ampdoc_$.win.matchMedia(this.G).matches;$matchesMedia$$?$JSCompiler_StaticMethods_attemptShow_$$(this).then($onShowCallback$$):$JSCompiler_StaticMethods_hideToolbar_$$(this)};
function $JSCompiler_StaticMethods_buildCallback_$$($JSCompiler_StaticMethods_buildCallback_$self$$){$JSCompiler_StaticMethods_buildCallback_$self$$.D=$JSCompiler_StaticMethods_buildCallback_$self$$.B.cloneNode(!0);var $targetId$jscomp$4$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($JSCompiler_StaticMethods_buildCallback_$self$$.B.getAttribute("toolbar-target"),'"toolbar-target" is required',$JSCompiler_StaticMethods_buildCallback_$self$$.B);$JSCompiler_StaticMethods_buildCallback_$self$$.$ampdoc_$.whenReady().then(function(){var $targetElement$jscomp$1$$=
$JSCompiler_StaticMethods_buildCallback_$self$$.$ampdoc_$.getElementById($targetId$jscomp$4$$);if($targetElement$jscomp$1$$)$JSCompiler_StaticMethods_buildCallback_$self$$.C=$targetElement$jscomp$1$$,$JSCompiler_StaticMethods_buildCallback_$self$$.D.classList.add("i-amphtml-toolbar"),$toggle$$module$src$style$$($JSCompiler_StaticMethods_buildCallback_$self$$.C,!1);else throw Error("Could not find the toolbar-target element with an id: "+$targetId$jscomp$4$$);})}
function $JSCompiler_StaticMethods_attemptShow_$$($JSCompiler_StaticMethods_attemptShow_$self$$){return $JSCompiler_StaticMethods_attemptShow_$self$$.F?Promise.resolve():$JSCompiler_StaticMethods_attemptShow_$self$$.$context_$.mutateElement(function(){$JSCompiler_StaticMethods_attemptShow_$self$$.C&&($toggle$$module$src$style$$($JSCompiler_StaticMethods_attemptShow_$self$$.C,!0),$JSCompiler_StaticMethods_attemptShow_$self$$.C.contains($JSCompiler_StaticMethods_attemptShow_$self$$.D)||$JSCompiler_StaticMethods_attemptShow_$self$$.C.appendChild($JSCompiler_StaticMethods_attemptShow_$self$$.D),
$JSCompiler_StaticMethods_attemptShow_$self$$.B.classList.add("amp-sidebar-toolbar-target-shown"),$JSCompiler_StaticMethods_attemptShow_$self$$.B.classList.remove("amp-sidebar-toolbar-target-hidden"),$JSCompiler_StaticMethods_attemptShow_$self$$.F=!0)})}
function $JSCompiler_StaticMethods_hideToolbar_$$($JSCompiler_StaticMethods_hideToolbar_$self$$){$JSCompiler_StaticMethods_hideToolbar_$self$$.F&&$JSCompiler_StaticMethods_hideToolbar_$self$$.$context_$.mutateElement(function(){$JSCompiler_StaticMethods_hideToolbar_$self$$.C&&($toggle$$module$src$style$$($JSCompiler_StaticMethods_hideToolbar_$self$$.C,!1),$JSCompiler_StaticMethods_hideToolbar_$self$$.B.classList.add("amp-sidebar-toolbar-target-hidden"),$JSCompiler_StaticMethods_hideToolbar_$self$$.B.classList.remove("amp-sidebar-toolbar-target-shown"),
$JSCompiler_StaticMethods_hideToolbar_$self$$.F=!1)})};function $AmpSidebar$$module$extensions$amp_sidebar$0_1$amp_sidebar$$($$jscomp$super$this$jscomp$72_element$jscomp$406$$){$$jscomp$super$this$jscomp$72_element$jscomp$406$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$72_element$jscomp$406$$)||this;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$viewport_$=null;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$action_$=null;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$maskElement_$=null;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$document_$=
$$jscomp$super$this$jscomp$72_element$jscomp$406$$.win.document;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$documentElement_$=$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$document_$.documentElement;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$side_$=null;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$toolbars_$=[];var $platform$jscomp$13$$=$Services$$module$src$services$platformFor$$($$jscomp$super$this$jscomp$72_element$jscomp$406$$.win);$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$isIos_$=
$platform$jscomp$13$$.isIos();$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$isSafari_$=$platform$jscomp$13$$.isSafari();$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$historyId_$=-1;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$bottomBarCompensated_$=!1;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$boundOnAnimationEnd_$=$debounce$$module$src$utils$rate_limit$$($$jscomp$super$this$jscomp$72_element$jscomp$406$$.win,$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$onAnimationEnd_$.bind($$jscomp$super$this$jscomp$72_element$jscomp$406$$),
350);$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$openerElement_$=null;$$jscomp$super$this$jscomp$72_element$jscomp$406$$.$initialScrollTop_$=0;return $$jscomp$super$this$jscomp$72_element$jscomp$406$$}$$jscomp$inherits$$($AmpSidebar$$module$extensions$amp_sidebar$0_1$amp_sidebar$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpSidebar$$module$extensions$amp_sidebar$0_1$amp_sidebar$$.prototype;
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$648$$=this,$element$jscomp$407$$=this.element;$element$jscomp$407$$.classList.add("i-amphtml-overlay");this.$side_$=$element$jscomp$407$$.getAttribute("side");this.$viewport_$=this.getViewport();this.$action_$=$Services$$module$src$services$actionServiceForDoc$$($element$jscomp$407$$);"left"!=this.$side_$&&"right"!=this.$side_$&&(this.$side_$=$isRTL$$module$src$dom$$(this.$document_$)?"right":"left",$element$jscomp$407$$.setAttribute("side",
this.$side_$));var $toolbarElements$$=$toArray$$module$src$types$$($element$jscomp$407$$.querySelectorAll("nav[toolbar]"));$toolbarElements$$.forEach(function($element$jscomp$407$$){try{$$jscomp$this$jscomp$648$$.$toolbars_$.push(new $Toolbar$$module$extensions$amp_sidebar$0_1$toolbar$$($element$jscomp$407$$,$$jscomp$this$jscomp$648$$))}catch($e$jscomp$262$$){$$jscomp$this$jscomp$648$$.user().error("amp-sidebar toolbar","Failed to instantiate toolbar",$e$jscomp$262$$)}});this.$isIos_$&&$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$$(this);
$JSCompiler_StaticMethods_isOpen_$$(this)?this.$open_$():$element$jscomp$407$$.setAttribute("aria-hidden","true");$element$jscomp$407$$.hasAttribute("role")||$element$jscomp$407$$.setAttribute("role","menu");$element$jscomp$407$$.tabIndex=-1;this.$documentElement_$.addEventListener("keydown",function($element$jscomp$407$$){27==$element$jscomp$407$$.keyCode&&$$jscomp$this$jscomp$648$$.$close_$()});var $ariaLabel$jscomp$1$$=$element$jscomp$407$$.getAttribute("data-close-button-aria-label")||"Close the sidebar",
$screenReaderCloseButton$jscomp$1$$=this.$document_$.createElement("button");$screenReaderCloseButton$jscomp$1$$.textContent=$ariaLabel$jscomp$1$$;$screenReaderCloseButton$jscomp$1$$.classList.add("i-amphtml-screen-reader");$screenReaderCloseButton$jscomp$1$$.tabIndex=-1;$screenReaderCloseButton$jscomp$1$$.addEventListener("click",function(){$$jscomp$this$jscomp$648$$.$close_$()});$element$jscomp$407$$.appendChild($screenReaderCloseButton$jscomp$1$$);this.registerAction("toggle",this.$toggle_$.bind(this));
this.registerAction("open",this.$open_$.bind(this));this.registerAction("close",this.$close_$.bind(this));$element$jscomp$407$$.addEventListener("click",function($toolbarElements$$){if(($toolbarElements$$=$closestByTag$$module$src$dom$$($toolbarElements$$.target,"A"))&&$toolbarElements$$.href){var $ariaLabel$jscomp$1$$=$Services$$module$src$services$urlForDoc$$($element$jscomp$407$$).parse($toolbarElements$$.href),$screenReaderCloseButton$jscomp$1$$=$$jscomp$this$jscomp$648$$.getAmpDoc().win.location.href;
$removeFragment$$module$src$url$$($toolbarElements$$.href)==$removeFragment$$module$src$url$$($screenReaderCloseButton$jscomp$1$$)&&$ariaLabel$jscomp$1$$.hash&&$$jscomp$this$jscomp$648$$.$close_$()}},!0)};$JSCompiler_prototypeAlias$$.activate=function($invocation$jscomp$40$$){this.$open_$($invocation$jscomp$40$$)};$JSCompiler_prototypeAlias$$.onLayoutMeasure=function(){var $$jscomp$this$jscomp$649$$=this;this.getAmpDoc().whenReady().then(function(){$$jscomp$this$jscomp$649$$.$toolbars_$.forEach(function($toolbar$$){$toolbar$$.onLayoutChange(function(){$$jscomp$this$jscomp$649$$.$close_$()})})})};
function $JSCompiler_StaticMethods_isOpen_$$($JSCompiler_StaticMethods_isOpen_$self$$){return $JSCompiler_StaticMethods_isOpen_$self$$.element.hasAttribute("open")}$JSCompiler_prototypeAlias$$.$toggle_$=function($opt_invocation$jscomp$1$$){$JSCompiler_StaticMethods_isOpen_$$(this)?this.$close_$():this.$open_$($opt_invocation$jscomp$1$$)};
$JSCompiler_prototypeAlias$$.$open_$=function($opt_invocation$jscomp$2$$){var $$jscomp$this$jscomp$650$$=this;$JSCompiler_StaticMethods_isOpen_$$(this)||(this.$viewport_$.enterOverlayMode(),this.mutateElement(function(){$toggle$$module$src$style$$($$jscomp$this$jscomp$650$$.element,!0);$$jscomp$this$jscomp$650$$.$viewport_$.addToFixedLayer($$jscomp$this$jscomp$650$$.element,!0);$$jscomp$this$jscomp$650$$.$isIos_$&&$$jscomp$this$jscomp$650$$.$isSafari_$&&$JSCompiler_StaticMethods_compensateIosBottombar_$$($$jscomp$this$jscomp$650$$);
$$jscomp$this$jscomp$650$$.element.scrollTop=1;$$jscomp$this$jscomp$650$$.mutateElement(function(){$JSCompiler_StaticMethods_openMask_$$($$jscomp$this$jscomp$650$$);$$jscomp$this$jscomp$650$$.element.setAttribute("open","");$$jscomp$this$jscomp$650$$.$boundOnAnimationEnd_$();$$jscomp$this$jscomp$650$$.element.setAttribute("aria-hidden","false")})}),this.$getHistory_$().push(this.$close_$.bind(this)).then(function($opt_invocation$jscomp$2$$){$$jscomp$this$jscomp$650$$.$historyId_$=$opt_invocation$jscomp$2$$}),
$opt_invocation$jscomp$2$$&&(this.$openerElement_$=$opt_invocation$jscomp$2$$.caller,this.$initialScrollTop_$=this.$viewport_$.getScrollTop()))};
$JSCompiler_prototypeAlias$$.$close_$=function(){var $$jscomp$this$jscomp$651$$=this;if($JSCompiler_StaticMethods_isOpen_$$(this)){this.$viewport_$.leaveOverlayMode();var $scrollDidNotChange$$=this.$initialScrollTop_$==this.$viewport_$.getScrollTop(),$sidebarIsActive$$=this.element.contains(this.$document_$.activeElement);this.mutateElement(function(){$$jscomp$this$jscomp$651$$.$maskElement_$&&$toggle$$module$src$style$$($$jscomp$this$jscomp$651$$.$maskElement_$,!1);$$jscomp$this$jscomp$651$$.element.removeAttribute("open");
$$jscomp$this$jscomp$651$$.$boundOnAnimationEnd_$();$$jscomp$this$jscomp$651$$.element.setAttribute("aria-hidden","true")});-1!=this.$historyId_$&&(this.$getHistory_$().pop(this.$historyId_$),this.$historyId_$=-1);this.$openerElement_$&&$sidebarIsActive$$&&$scrollDidNotChange$$&&$tryFocus$$module$src$dom$$(this.$openerElement_$)}};
function $JSCompiler_StaticMethods_openMask_$$($JSCompiler_StaticMethods_openMask_$self$$){if(!$JSCompiler_StaticMethods_openMask_$self$$.$maskElement_$){var $mask$jscomp$8$$=$JSCompiler_StaticMethods_openMask_$self$$.$document_$.createElement("div");$mask$jscomp$8$$.classList.add("i-amphtml-sidebar-mask");$mask$jscomp$8$$.addEventListener("click",function(){$JSCompiler_StaticMethods_openMask_$self$$.$close_$()});$JSCompiler_StaticMethods_openMask_$self$$.element.ownerDocument.body.appendChild($mask$jscomp$8$$);
$mask$jscomp$8$$.addEventListener("touchmove",function($JSCompiler_StaticMethods_openMask_$self$$){$JSCompiler_StaticMethods_openMask_$self$$.preventDefault()});$JSCompiler_StaticMethods_openMask_$self$$.$maskElement_$=$mask$jscomp$8$$}$toggle$$module$src$style$$($JSCompiler_StaticMethods_openMask_$self$$.$maskElement_$,!0)}
function $JSCompiler_StaticMethods_fixIosElasticScrollLeak_$$($JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$){$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.addEventListener("scroll",function($e$jscomp$265$$){$JSCompiler_StaticMethods_isOpen_$$($JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$)&&(1>$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollTop?($JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollTop=1,$e$jscomp$265$$.preventDefault()):
$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollHeight==$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollTop+$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.offsetHeight&&($JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollTop=$JSCompiler_StaticMethods_fixIosElasticScrollLeak_$self$$.element.scrollTop-1,$e$jscomp$265$$.preventDefault()))})}
function $JSCompiler_StaticMethods_compensateIosBottombar_$$($JSCompiler_StaticMethods_compensateIosBottombar_$self$$){if(!$JSCompiler_StaticMethods_compensateIosBottombar_$self$$.$bottomBarCompensated_$){var $div$jscomp$1$$=$JSCompiler_StaticMethods_compensateIosBottombar_$self$$.$document_$.createElement("div");$setStyles$$module$src$style$$($div$jscomp$1$$,{height:"10vh",width:"100%","background-color":"transparent"});$JSCompiler_StaticMethods_compensateIosBottombar_$self$$.element.appendChild($div$jscomp$1$$);
$JSCompiler_StaticMethods_compensateIosBottombar_$self$$.$bottomBarCompensated_$=!0}}$JSCompiler_prototypeAlias$$.$getHistory_$=function(){return $Services$$module$src$services$historyForDoc$$(this.getAmpDoc())};
$JSCompiler_prototypeAlias$$.$onAnimationEnd_$=function(){var $$jscomp$this$jscomp$654$$=this;if($JSCompiler_StaticMethods_isOpen_$$(this)){var $children$jscomp$16$$=this.getRealChildren();this.scheduleLayout($children$jscomp$16$$);this.scheduleResume($children$jscomp$16$$);$tryFocus$$module$src$dom$$(this.element);this.$triggerEvent_$("sidebarOpen")}else this.mutateElement(function(){$toggle$$module$src$style$$($$jscomp$this$jscomp$654$$.element,!1);$$jscomp$this$jscomp$654$$.schedulePause($$jscomp$this$jscomp$654$$.getRealChildren());
$$jscomp$this$jscomp$654$$.$triggerEvent_$("sidebarClose")})};$JSCompiler_prototypeAlias$$.$triggerEvent_$=function($name$jscomp$208$$){var $event$jscomp$141$$=$createCustomEvent$$module$src$event_helper$$(this.win,"amp-sidebar toolbar."+$name$jscomp$208$$,{});this.$action_$.trigger(this.element,$name$jscomp$208$$,$event$jscomp$141$$,100)};(function($AMP$jscomp$79$$){$AMP$jscomp$79$$.registerElement("amp-sidebar",$AmpSidebar$$module$extensions$amp_sidebar$0_1$amp_sidebar$$,"amp-sidebar{position:fixed!important;top:0;max-height:100vh!important;height:100vh;max-width:80vw!important;background-color:#efefef;min-width:45px!important;outline:none;overflow-x:hidden!important;overflow-y:auto!important;z-index:2147483647;-webkit-overflow-scrolling:touch;will-change:transform}amp-sidebar[side=left]{left:0!important;-webkit-transform:translateX(-100%)!important;transform:translateX(-100%)!important}amp-sidebar[side=right]{right:0!important;-webkit-transform:translateX(100%)!important;transform:translateX(100%)!important}amp-sidebar[side][open]{-webkit-transform:translateX(0)!important;transform:translateX(0)!important}amp-sidebar[side]{-webkit-transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:-webkit-transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1);transition:transform 233ms cubic-bezier(0,0,.21,1),-webkit-transform 233ms cubic-bezier(0,0,.21,1)}.i-amphtml-toolbar>ul{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;overflow:auto;list-style-type:none;padding:0;margin:0}.i-amphtml-sidebar-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;opacity:0.2;background-image:none!important;background-color:#000;z-index:2147483646}\n/*# sourceURL=/extensions/amp-sidebar/0.1/amp-sidebar.css*/")})(self.AMP);})});
//# sourceMappingURL=extensions-amp-sidebar-0.1-amp-sidebar.js.map

