(self.AMP=self.AMP||[]).push({n:"extensions-amp-audio-0.1-amp-audio.js", v:"erwin", f:(function(){function $AmpAudio$$module$extensions$amp_audio$0_1$amp_audio$$($$jscomp$super$this$jscomp$20_element$jscomp$269$$){$$jscomp$super$this$jscomp$20_element$jscomp$269$$=self.AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$20_element$jscomp$269$$)||this;$$jscomp$super$this$jscomp$20_element$jscomp$269$$.$audio_$=null;$$jscomp$super$this$jscomp$20_element$jscomp$269$$.$metadata_$=$EMPTY_METADATA$$module$src$mediasession_helper$$;$$jscomp$super$this$jscomp$20_element$jscomp$269$$.isPlaying=!1;return $$jscomp$super$this$jscomp$20_element$jscomp$269$$}
$$jscomp$inherits$$($AmpAudio$$module$extensions$amp_audio$0_1$amp_audio$$,self.AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpAudio$$module$extensions$amp_audio$0_1$amp_audio$$.prototype;$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$33$$){return"fixed"==$layout$jscomp$33$$||"fixed-height"==$layout$jscomp$33$$};$JSCompiler_prototypeAlias$$.buildCallback=function(){this.registerAction("play",this.$play_$.bind(this));this.registerAction("pause",this.$pause_$.bind(this))};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$389$$=this,$audio$$=this.element.ownerDocument.createElement("audio");if(!$audio$$.play)return this.toggleFallback(!0),Promise.resolve();$audio$$.controls=!0;var $src$jscomp$28_title$jscomp$18$$=this.element.getAttribute("src");$src$jscomp$28_title$jscomp$18$$&&$assertHttpsUrl$$module$src$url$$($src$jscomp$28_title$jscomp$18$$,this.element);this.propagateAttributes("src preload autoplay muted loop aria-label aria-describedby aria-labelledby controlsList".split(" "),
$audio$$);this.applyFillContent($audio$$);this.getRealChildNodes().forEach(function($$jscomp$this$jscomp$389$$){$$jscomp$this$jscomp$389$$.getAttribute&&$$jscomp$this$jscomp$389$$.getAttribute("src")&&$assertHttpsUrl$$module$src$url$$($$jscomp$this$jscomp$389$$.getAttribute("src"),$$jscomp$this$jscomp$389$$);$audio$$.appendChild($$jscomp$this$jscomp$389$$)});this.element.appendChild($audio$$);this.$audio_$=$audio$$;var $artwork$jscomp$1_document$jscomp$4$$=this.getAmpDoc().win.document,$artist$$=
this.element.getAttribute("artist")||"",$src$jscomp$28_title$jscomp$18$$=this.element.getAttribute("title")||this.element.getAttribute("aria-label")||$artwork$jscomp$1_document$jscomp$4$$.title||"",$album$$=this.element.getAttribute("album")||"",$artwork$jscomp$1_document$jscomp$4$$=this.element.getAttribute("artwork")||$parseSchemaImage$$module$src$mediasession_helper$$($artwork$jscomp$1_document$jscomp$4$$)||$parseOgImage$$module$src$mediasession_helper$$($artwork$jscomp$1_document$jscomp$4$$)||
$parseFavicon$$module$src$mediasession_helper$$($artwork$jscomp$1_document$jscomp$4$$)||"";this.$metadata_$={title:$src$jscomp$28_title$jscomp$18$$,artist:$artist$$,album:$album$$,artwork:[{src:$artwork$jscomp$1_document$jscomp$4$$}]};$listen$$module$src$event_helper$$(this.$audio_$,"playing",function(){return $JSCompiler_StaticMethods_audioPlaying_$$($$jscomp$this$jscomp$389$$)});return this.loadPromise($audio$$)};$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$audio_$&&this.$audio_$.pause()};
function $JSCompiler_StaticMethods_isInvocationValid_$$($JSCompiler_StaticMethods_isInvocationValid_$self$$){return $JSCompiler_StaticMethods_isInvocationValid_$self$$.$audio_$?$closestByTag$$module$src$dom$$($JSCompiler_StaticMethods_isInvocationValid_$self$$.element,"AMP-STORY")?($user$$module$src$log$$().warn("amp-audio","<amp-story> elements do not support actions on <amp-audio> elements"),!1):!0:!1}
$JSCompiler_prototypeAlias$$.$pause_$=function(){$JSCompiler_StaticMethods_isInvocationValid_$$(this)&&this.$audio_$.pause()};$JSCompiler_prototypeAlias$$.$play_$=function(){$JSCompiler_StaticMethods_isInvocationValid_$$(this)&&this.$audio_$.play()};
function $JSCompiler_StaticMethods_audioPlaying_$$($JSCompiler_StaticMethods_audioPlaying_$self$$){$setMediaSession$$module$src$mediasession_helper$$($JSCompiler_StaticMethods_audioPlaying_$self$$.getAmpDoc(),$JSCompiler_StaticMethods_audioPlaying_$self$$.$metadata_$,function(){$JSCompiler_StaticMethods_audioPlaying_$self$$.$audio_$.play()},function(){$JSCompiler_StaticMethods_audioPlaying_$self$$.$audio_$.pause()})}(function($AMP$jscomp$22$$){$AMP$jscomp$22$$.registerElement("amp-audio",$AmpAudio$$module$extensions$amp_audio$0_1$amp_audio$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-audio-0.1-amp-audio.js.map

