(self.AMP=self.AMP||[]).push({n:"extensions-amp-list-0.1-amp-list.js", v:"erwin", f:(function(){function $AmpList$$module$extensions$amp_list$0_1$amp_list$$($element$jscomp$378$$){var $$jscomp$super$this$jscomp$59$$;$$jscomp$super$this$jscomp$59$$=AMP.BaseElement.call(this,$element$jscomp$378$$)||this;$$jscomp$super$this$jscomp$59$$.$container_$=null;$$jscomp$super$this$jscomp$59$$.$fallbackDisplayed_$=!1;$$jscomp$super$this$jscomp$59$$.$renderPass_$=new $Pass$$module$src$pass$$($$jscomp$super$this$jscomp$59$$.win,function(){return $JSCompiler_StaticMethods_doRenderPass_$$($$jscomp$super$this$jscomp$59$$)});
$$jscomp$super$this$jscomp$59$$.$renderItems_$=null;$$jscomp$super$this$jscomp$59$$.$templates_$=$Services$$module$src$services$templatesFor$$($$jscomp$super$this$jscomp$59$$.win);$$jscomp$super$this$jscomp$59$$.$layoutCompleted_$=!1;$$jscomp$super$this$jscomp$59$$.$initialSrc_$=null;$$jscomp$super$this$jscomp$59$$.$bind_$=null;$$jscomp$super$this$jscomp$59$$.registerAction("refresh",function(){$$jscomp$super$this$jscomp$59$$.$layoutCompleted_$&&$JSCompiler_StaticMethods_fetchList_$$($$jscomp$super$this$jscomp$59$$)},
100);return $$jscomp$super$this$jscomp$59$$}$$jscomp$inherits$$($AmpList$$module$extensions$amp_list$0_1$amp_list$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpList$$module$extensions$amp_list$0_1$amp_list$$.prototype;$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$63$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$63$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$602$$=this;this.$initialSrc_$=this.element.getAttribute("src");this.$container_$=this.win.document.createElement("div");this.applyFillContent(this.$container_$,!0);this.element.appendChild(this.$container_$);this.$container_$.hasAttribute("role")||this.$container_$.setAttribute("role","list");this.element.hasAttribute("aria-live")||this.element.setAttribute("aria-live","polite");$getElementServiceIfAvailableForDocInEmbedScope$$module$src$element_service$$(this.element).then(function($bind$jscomp$4$$){$$jscomp$this$jscomp$602$$.$bind_$=
$bind$jscomp$4$$})};$JSCompiler_prototypeAlias$$.reconstructWhenReparented=function(){return!1};$JSCompiler_prototypeAlias$$.layoutCallback=function(){this.$layoutCompleted_$=!0;return $JSCompiler_StaticMethods_fetchList_$$(this)};
$JSCompiler_prototypeAlias$$.mutatedAttributesCallback=function($mutations$jscomp$7_state$jscomp$68$$){var $items$161_items$jscomp$3_src$jscomp$52$$=$mutations$jscomp$7_state$jscomp$68$$.src;$mutations$jscomp$7_state$jscomp$68$$=$mutations$jscomp$7_state$jscomp$68$$.state;if(void 0!==$items$161_items$jscomp$3_src$jscomp$52$$){var $typeOfSrc$$=typeof $items$161_items$jscomp$3_src$jscomp$52$$;"string"===$typeOfSrc$$?this.$layoutCompleted_$&&$JSCompiler_StaticMethods_fetchList_$$(this):"object"===$typeOfSrc$$?
($items$161_items$jscomp$3_src$jscomp$52$$=$isArray$$module$src$types$$($items$161_items$jscomp$3_src$jscomp$52$$)?$items$161_items$jscomp$3_src$jscomp$52$$:[$items$161_items$jscomp$3_src$jscomp$52$$],$JSCompiler_StaticMethods_scheduleRender_$$(this,$items$161_items$jscomp$3_src$jscomp$52$$),this.element.setAttribute("src","")):this.user().error("amp-list",'Unexpected "src" type: '+$items$161_items$jscomp$3_src$jscomp$52$$)}else void 0!==$mutations$jscomp$7_state$jscomp$68$$&&($items$161_items$jscomp$3_src$jscomp$52$$=
$isArray$$module$src$types$$($mutations$jscomp$7_state$jscomp$68$$)?$mutations$jscomp$7_state$jscomp$68$$:[$mutations$jscomp$7_state$jscomp$68$$],$JSCompiler_StaticMethods_scheduleRender_$$(this,$items$161_items$jscomp$3_src$jscomp$52$$),$user$$module$src$log$$().error("amp-list","[state] is deprecated, please use [src] instead."))};$JSCompiler_prototypeAlias$$.isLoadingReused=function(){return this.element.hasAttribute("reset-on-refresh")};
function $JSCompiler_StaticMethods_toggleFallbackInMutate_$$($JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$,$state$jscomp$69$$){$state$jscomp$69$$?$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.getVsync().mutate(function(){$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.toggleFallback(!0);$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.$fallbackDisplayed_$=!0}):$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.$fallbackDisplayed_$&&$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.getVsync().mutate(function(){$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.toggleFallback(!1);
$JSCompiler_StaticMethods_toggleFallbackInMutate_$self$$.$fallbackDisplayed_$=!1})}
function $JSCompiler_StaticMethods_fetchList_$$($JSCompiler_StaticMethods_fetchList_$self$$){if(!$JSCompiler_StaticMethods_fetchList_$self$$.element.getAttribute("src"))return Promise.resolve();$JSCompiler_StaticMethods_fetchList_$self$$.element.hasAttribute("reset-on-refresh")&&($JSCompiler_StaticMethods_fetchList_$self$$.togglePlaceholder(!0),$JSCompiler_StaticMethods_fetchList_$self$$.toggleLoading(!0,$JSCompiler_StaticMethods_fetchList_$self$$.isLoadingReused()),$JSCompiler_StaticMethods_toggleFallbackInMutate_$$($JSCompiler_StaticMethods_fetchList_$self$$,
!1),$removeChildren$$module$src$dom$$($JSCompiler_StaticMethods_fetchList_$self$$.$container_$));var $itemsExpr$$=$JSCompiler_StaticMethods_fetchList_$self$$.element.getAttribute("items")||"items";return $JSCompiler_StaticMethods_fetchList_$self$$.$fetch_$($itemsExpr$$).then(function($items$jscomp$4$$){$JSCompiler_StaticMethods_fetchList_$self$$.element.hasAttribute("single-item")&&($user$$module$src$log$$().$Log$$module$src$log_prototype$assert$("undefined"!==typeof $items$jscomp$4$$,'Response must contain an array or object at "%s". %s',
$itemsExpr$$,$JSCompiler_StaticMethods_fetchList_$self$$.element),$isArray$$module$src$types$$($items$jscomp$4$$)||($items$jscomp$4$$=[$items$jscomp$4$$]));$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($isArray$$module$src$types$$($items$jscomp$4$$),'Response must contain an array at "%s". %s',$itemsExpr$$,$JSCompiler_StaticMethods_fetchList_$self$$.element);var $maxLen$$=parseInt($JSCompiler_StaticMethods_fetchList_$self$$.element.getAttribute("max-items"),10);$maxLen$$<$items$jscomp$4$$.length&&
($items$jscomp$4$$=$items$jscomp$4$$.slice(0,$maxLen$$));return $JSCompiler_StaticMethods_scheduleRender_$$($JSCompiler_StaticMethods_fetchList_$self$$,$items$jscomp$4$$)},function($JSCompiler_StaticMethods_fetchList_$self$$){throw $user$$module$src$log$$().createError("Error fetching amp-list",$JSCompiler_StaticMethods_fetchList_$self$$);}).then(function(){$JSCompiler_StaticMethods_fetchList_$self$$.getFallback()&&$JSCompiler_StaticMethods_toggleFallbackInMutate_$$($JSCompiler_StaticMethods_fetchList_$self$$,
!1);$JSCompiler_StaticMethods_fetchList_$self$$.togglePlaceholder(!1);$JSCompiler_StaticMethods_fetchList_$self$$.toggleLoading(!1)},function($itemsExpr$$){$JSCompiler_StaticMethods_fetchList_$self$$.toggleLoading(!1);if($JSCompiler_StaticMethods_fetchList_$self$$.getFallback())$JSCompiler_StaticMethods_toggleFallbackInMutate_$$($JSCompiler_StaticMethods_fetchList_$self$$,!0),$JSCompiler_StaticMethods_fetchList_$self$$.togglePlaceholder(!1);else throw $itemsExpr$$;})}
function $JSCompiler_StaticMethods_scheduleRender_$$($JSCompiler_StaticMethods_scheduleRender_$self$$,$items$jscomp$5$$){var $$jscomp$destructuring$var324$$=new $Deferred$$module$src$utils$promise$$,$promise$jscomp$33$$=$$jscomp$destructuring$var324$$.promise,$resolver$jscomp$4$$=$$jscomp$destructuring$var324$$.resolve,$rejecter$$=$$jscomp$destructuring$var324$$.reject;$JSCompiler_StaticMethods_scheduleRender_$self$$.$renderItems_$||$JSCompiler_StaticMethods_scheduleRender_$self$$.$renderPass_$.schedule();
$JSCompiler_StaticMethods_scheduleRender_$self$$.$renderItems_$={items:$items$jscomp$5$$,resolver:$resolver$jscomp$4$$,rejecter:$rejecter$$};return $promise$jscomp$33$$}
function $JSCompiler_StaticMethods_doRenderPass_$$($JSCompiler_StaticMethods_doRenderPass_$self$$){function $scheduleNextPass$$(){$JSCompiler_StaticMethods_doRenderPass_$self$$.$renderItems_$!==$current$jscomp$5$$?$JSCompiler_StaticMethods_doRenderPass_$self$$.$renderPass_$.schedule(1):$JSCompiler_StaticMethods_doRenderPass_$self$$.$renderItems_$=null}var $current$jscomp$5$$=$JSCompiler_StaticMethods_doRenderPass_$self$$.$renderItems_$;$JSCompiler_StaticMethods_doRenderPass_$self$$.$templates_$.findAndRenderTemplateArray($JSCompiler_StaticMethods_doRenderPass_$self$$.element,
$current$jscomp$5$$.items).then(function($scheduleNextPass$$){return $JSCompiler_StaticMethods_updateBindingsForElements_$$($JSCompiler_StaticMethods_doRenderPass_$self$$,$scheduleNextPass$$)}).then(function($scheduleNextPass$$){return $JSCompiler_StaticMethods_rendered_$$($JSCompiler_StaticMethods_doRenderPass_$self$$,$scheduleNextPass$$)}).then(function(){$scheduleNextPass$$();$current$jscomp$5$$.resolver()},function(){$scheduleNextPass$$();$current$jscomp$5$$.rejecter()})}
function $JSCompiler_StaticMethods_updateBindingsForElements_$$($JSCompiler_StaticMethods_updateBindingsForElements_$self$$,$elements$jscomp$30$$){return $isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_updateBindingsForElements_$self$$.win,"disable-faster-amp-list")?$getElementServiceIfAvailableForDocInEmbedScope$$module$src$element_service$$($JSCompiler_StaticMethods_updateBindingsForElements_$self$$.element).then(function($bind$jscomp$5$$){if($bind$jscomp$5$$)return $JSCompiler_StaticMethods_updateBindingsWith_$$($JSCompiler_StaticMethods_updateBindingsForElements_$self$$,
$bind$jscomp$5$$,$elements$jscomp$30$$)}):$JSCompiler_StaticMethods_updateBindingsForElements_$self$$.$bind_$&&$JSCompiler_StaticMethods_updateBindingsForElements_$self$$.$bind_$.signals().get("FIRST_MUTATE")?$JSCompiler_StaticMethods_updateBindingsWith_$$($JSCompiler_StaticMethods_updateBindingsForElements_$self$$,$JSCompiler_StaticMethods_updateBindingsForElements_$self$$.$bind_$,$elements$jscomp$30$$):Promise.resolve($elements$jscomp$30$$)}
function $JSCompiler_StaticMethods_updateBindingsWith_$$($JSCompiler_StaticMethods_updateBindingsWith_$self$$,$bind$jscomp$6$$,$elements$jscomp$31$$){function $forwardElements$$(){return $elements$jscomp$31$$}return $bind$jscomp$6$$.scanAndApply($elements$jscomp$31$$,[$JSCompiler_StaticMethods_updateBindingsWith_$self$$.$container_$]).then($forwardElements$$,$forwardElements$$)}
function $JSCompiler_StaticMethods_rendered_$$($JSCompiler_StaticMethods_rendered_$self$$,$elements$jscomp$32_event$jscomp$120$$){$removeChildren$$module$src$dom$$($JSCompiler_StaticMethods_rendered_$self$$.$container_$);$elements$jscomp$32_event$jscomp$120$$.forEach(function($elements$jscomp$32_event$jscomp$120$$){$elements$jscomp$32_event$jscomp$120$$.hasAttribute("role")||$elements$jscomp$32_event$jscomp$120$$.setAttribute("role","listitem");$JSCompiler_StaticMethods_rendered_$self$$.$container_$.appendChild($elements$jscomp$32_event$jscomp$120$$)});
$elements$jscomp$32_event$jscomp$120$$=$createCustomEvent$$module$src$event_helper$$($JSCompiler_StaticMethods_rendered_$self$$.win,"amp:dom-update",null,{bubbles:!0});$JSCompiler_StaticMethods_rendered_$self$$.$container_$.dispatchEvent($elements$jscomp$32_event$jscomp$120$$);$JSCompiler_StaticMethods_rendered_$self$$.getVsync().measure(function(){var $elements$jscomp$32_event$jscomp$120$$=$JSCompiler_StaticMethods_rendered_$self$$.$container_$.scrollHeight;$elements$jscomp$32_event$jscomp$120$$>
$JSCompiler_StaticMethods_rendered_$self$$.element.offsetHeight&&$JSCompiler_StaticMethods_rendered_$self$$.attemptChangeHeight($elements$jscomp$32_event$jscomp$120$$).catch(function(){})})}
$JSCompiler_prototypeAlias$$.$fetch_$=function($itemsExpr$jscomp$1$$){var $ampdoc$jscomp$160$$=this.getAmpDoc(),$src$jscomp$53$$=this.element.getAttribute("src"),$policy$jscomp$1$$=1;if($src$jscomp$53$$==this.$initialSrc_$||$getSourceOrigin$$module$src$url$$($src$jscomp$53$$)==$getSourceOrigin$$module$src$url$$($ampdoc$jscomp$160$$.win.location))$policy$jscomp$1$$=2;return $batchFetchJsonFor$$module$src$batched_json$$($ampdoc$jscomp$160$$,this.element,$itemsExpr$jscomp$1$$,$policy$jscomp$1$$)};
(function($AMP$jscomp$64$$){$AMP$jscomp$64$$.registerElement("amp-list",$AmpList$$module$extensions$amp_list$0_1$amp_list$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-list-0.1-amp-list.js.map

