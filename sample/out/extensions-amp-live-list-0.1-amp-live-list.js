(self.AMP=self.AMP||[]).push({n:"extensions-amp-live-list-0.1-amp-live-list.js", v:"erwin", f:(function(){function $Poller$$module$extensions$amp_live_list$0_1$poller$$($win$jscomp$311$$,$wait$jscomp$3$$,$work$jscomp$2$$){this.win=$win$jscomp$311$$;this.F=$wait$jscomp$3$$;this.G=$work$jscomp$2$$;this.D=null;this.C=!1;this.H=this.B=null}$Poller$$module$extensions$amp_live_list$0_1$poller$$.prototype.$getTimeout_$=function(){return this.B?this.B():this.F+$getJitter$$module$src$exponential_backoff$$(this.F,.2)};
$Poller$$module$extensions$amp_live_list$0_1$poller$$.prototype.start=function($opt_immediate$$){this.C||(this.C=!0,$JSCompiler_StaticMethods_poll_$$(this,$opt_immediate$$))};$Poller$$module$extensions$amp_live_list$0_1$poller$$.prototype.stop=function(){this.C&&(this.C=!1,this.D&&($Services$$module$src$services$timerFor$$(this.win).cancel(this.D),this.D=null))};
function $JSCompiler_StaticMethods_poll_$$($JSCompiler_StaticMethods_poll_$self$$,$opt_immediate$jscomp$1$$){if($JSCompiler_StaticMethods_poll_$self$$.C){var $work$jscomp$3$$=function(){$JSCompiler_StaticMethods_poll_$self$$.H=$JSCompiler_StaticMethods_poll_$self$$.G().then(function(){$JSCompiler_StaticMethods_poll_$self$$.B&&($JSCompiler_StaticMethods_poll_$self$$.B=null);$JSCompiler_StaticMethods_poll_$$($JSCompiler_StaticMethods_poll_$self$$)}).catch(function($opt_immediate$jscomp$1$$){if($opt_immediate$jscomp$1$$.retriable)$JSCompiler_StaticMethods_poll_$self$$.B||
($JSCompiler_StaticMethods_poll_$self$$.B=$exponentialBackoffClock$$module$src$exponential_backoff$$()),$JSCompiler_StaticMethods_poll_$$($JSCompiler_StaticMethods_poll_$self$$);else throw $opt_immediate$jscomp$1$$;})};$opt_immediate$jscomp$1$$?$work$jscomp$3$$():$JSCompiler_StaticMethods_poll_$self$$.D=$Services$$module$src$services$timerFor$$($JSCompiler_StaticMethods_poll_$self$$.win).delay($work$jscomp$3$$,$JSCompiler_StaticMethods_poll_$self$$.$getTimeout_$())}};function $LiveListManager$$module$extensions$amp_live_list$0_1$live_list_manager$$($ampdoc$jscomp$161$$){var $$jscomp$this$jscomp$609$$=this;this.ampdoc=$ampdoc$jscomp$161$$;this.B=Object.create(null);this.$viewer_$=$Services$$module$src$services$viewerForDoc$$(this.ampdoc);this.$extensions_$=$Services$$module$src$services$extensionsFor$$(this.ampdoc.win);this.F=15E3;this.G=[this.F];this.C=null;this.$url_$=this.ampdoc.getUrl();this.D=0;this.H=this.$fetchDocument_$.bind(this);this.ampdoc.whenReady().then(function(){$$jscomp$this$jscomp$609$$.F=
Math.min.apply(Math,$$jscomp$this$jscomp$609$$.G);var $ampdoc$jscomp$161$$=Object.keys($$jscomp$this$jscomp$609$$.B).map(function($ampdoc$jscomp$161$$){return $$jscomp$this$jscomp$609$$.B[$ampdoc$jscomp$161$$].getUpdateTime()});$$jscomp$this$jscomp$609$$.D=Math.max.apply(Math,$ampdoc$jscomp$161$$);$$jscomp$this$jscomp$609$$.C=new $Poller$$module$extensions$amp_live_list$0_1$poller$$($$jscomp$this$jscomp$609$$.ampdoc.win,$$jscomp$this$jscomp$609$$.F,$$jscomp$this$jscomp$609$$.H);$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($$jscomp$this$jscomp$609$$.$viewer_$)&&
$JSCompiler_StaticMethods_hasActiveLiveLists_$$($$jscomp$this$jscomp$609$$)&&$$jscomp$this$jscomp$609$$.C.start();$JSCompiler_StaticMethods_setupVisibilityHandler_$$($$jscomp$this$jscomp$609$$)})}$JSCompiler_prototypeAlias$$=$LiveListManager$$module$extensions$amp_live_list$0_1$live_list_manager$$.prototype;$JSCompiler_prototypeAlias$$.dispose=function(){this.C.stop()};
function $JSCompiler_StaticMethods_hasActiveLiveLists_$$($JSCompiler_StaticMethods_hasActiveLiveLists_$self$$){return Object.keys($JSCompiler_StaticMethods_hasActiveLiveLists_$self$$.B).some(function($key$jscomp$107$$){return $JSCompiler_StaticMethods_hasActiveLiveLists_$self$$.B[$key$jscomp$107$$].isEnabled()})}
$JSCompiler_prototypeAlias$$.$fetchDocument_$=function(){var $url$jscomp$161$$=this.$url_$;0<this.D&&($url$jscomp$161$$=$addParamToUrl$$module$src$url$$($url$jscomp$161$$,"amp_latest_update_time",String(this.D)));return $Services$$module$src$services$xhrFor$$(this.ampdoc.win).fetchDocument($url$jscomp$161$$,{requireAmpResponseSourceOrigin:!1}).then(this.$getLiveLists_$.bind(this))};
$JSCompiler_prototypeAlias$$.$getLiveLists_$=function($doc$jscomp$82$$){$JSCompiler_StaticMethods_installExtensionsForDoc_$$(this,$doc$jscomp$82$$);var $lists$$=Array.prototype.slice.call($doc$jscomp$82$$.getElementsByTagName("amp-live-list")),$updateTimes$$=$lists$$.map(this.$updateLiveList_$.bind(this)),$latestUpdateTime$$=Math.max.apply(Math,[0].concat($updateTimes$$));0<$latestUpdateTime$$&&(this.D=$latestUpdateTime$$);$JSCompiler_StaticMethods_hasActiveLiveLists_$$(this)||this.C.stop()};
$JSCompiler_prototypeAlias$$.$updateLiveList_$=function($liveList$$){var $id$jscomp$75$$=$liveList$$.getAttribute("id");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($id$jscomp$75$$,"amp-live-list must have an id.");$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($id$jscomp$75$$ in this.B,"amp-live-list#"+$id$jscomp$75$$+" found but did not exist on original page load.");var $inClientDomLiveList$$=this.B[$id$jscomp$75$$];$inClientDomLiveList$$.toggle(!$liveList$$.hasAttribute("disabled"));
return $inClientDomLiveList$$.isEnabled()?$inClientDomLiveList$$.update($liveList$$):0};$JSCompiler_prototypeAlias$$.register=function($id$jscomp$76$$,$liveList$jscomp$1$$){var $isNotRegistered$$=!($id$jscomp$76$$ in this.B);$isNotRegistered$$&&(this.B[$id$jscomp$76$$]=$liveList$jscomp$1$$,this.G.push($liveList$jscomp$1$$.getInterval()))};
function $JSCompiler_StaticMethods_setupVisibilityHandler_$$($JSCompiler_StaticMethods_setupVisibilityHandler_$self$$){$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$onVisibilityChanged$$($JSCompiler_StaticMethods_setupVisibilityHandler_$self$$.$viewer_$,function(){$JSCompiler_StaticMethods_Viewer$$module$src$service$viewer_impl_prototype$isVisible$$($JSCompiler_StaticMethods_setupVisibilityHandler_$self$$.$viewer_$)?$JSCompiler_StaticMethods_setupVisibilityHandler_$self$$.C.start(!0):
$JSCompiler_StaticMethods_setupVisibilityHandler_$self$$.C.stop()})}
function $JSCompiler_StaticMethods_installExtensionsForDoc_$$($JSCompiler_StaticMethods_installExtensionsForDoc_$self$$,$doc$jscomp$83$$){$toArray$$module$src$types$$($doc$jscomp$83$$.querySelectorAll("script[custom-element], script[custom-template]")).forEach(function($doc$jscomp$83$$){var $script$jscomp$6$$=$doc$jscomp$83$$.getAttribute("custom-element")||$doc$jscomp$83$$.getAttribute("custom-template");$JSCompiler_StaticMethods_installExtensionsForDoc_$self$$.$extensions_$.installExtensionForDoc($JSCompiler_StaticMethods_installExtensionsForDoc_$self$$.ampdoc,$script$jscomp$6$$)})}
function $liveListManagerForDoc$$module$extensions$amp_live_list$0_1$live_list_manager$$($ampdoc$jscomp$163$$){$registerServiceBuilderForDoc$$module$src$service$$($ampdoc$jscomp$163$$,"liveListManager",$LiveListManager$$module$extensions$amp_live_list$0_1$live_list_manager$$,!0);return $getServiceForDoc$$module$src$service$$($ampdoc$jscomp$163$$,"liveListManager")};function $getNumberMaxOrDefault$$module$extensions$amp_live_list$0_1$amp_live_list$$($value$jscomp$160$$,$defaultValue$jscomp$6$$){return Math.max(parseInt($value$jscomp$160$$,10)||0,$defaultValue$jscomp$6$$)}
function $AmpLiveList$$module$extensions$amp_live_list$0_1$amp_live_list$$($$jscomp$super$this$jscomp$60_element$jscomp$380$$){$$jscomp$super$this$jscomp$60_element$jscomp$380$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$60_element$jscomp$380$$)||this;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$viewport_$=null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$manager_$=null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$updateSlot_$=null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$itemsSlot_$=
null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$paginationSlot_$=null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$liveListId_$="";$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$pollInterval_$=0;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$maxItemsPerPage_$=0;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$updateTime_$=0;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$isReverseOrder_$=!1;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$knownItems_$=Object.create(null);
$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$pendingItemsInsert_$=[];$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$pendingItemsReplace_$=[];$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$pendingItemsTombstone_$=[];$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$pendingPagination_$=null;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$curNumOfLiveItems_$=0;$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$comparator_$=$$jscomp$super$this$jscomp$60_element$jscomp$380$$.$sortByDataSortTime_$.bind($$jscomp$super$this$jscomp$60_element$jscomp$380$$);
return $$jscomp$super$this$jscomp$60_element$jscomp$380$$}$$jscomp$inherits$$($AmpLiveList$$module$extensions$amp_live_list$0_1$amp_live_list$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpLiveList$$module$extensions$amp_live_list$0_1$amp_live_list$$.prototype;$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$64$$){return"container"==$layout$jscomp$64$$||"fixed-height"==$layout$jscomp$64$$};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$viewport_$=this.getViewport();this.$manager_$=$liveListManagerForDoc$$module$extensions$amp_live_list$0_1$live_list_manager$$(this.getAmpDoc());this.$updateSlot_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($childElementByAttr$$module$src$dom$$(this.element,"update"),'amp-live-list must have an "update" slot.');this.$itemsSlot_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($childElementByAttr$$module$src$dom$$(this.element,
"items"),'amp-live-list must have an "items" slot.');this.$paginationSlot_$=$childElementByAttr$$module$src$dom$$(this.element,"pagination");this.$liveListId_$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("id"),"amp-live-list must have an id.");this.$pollInterval_$=$getNumberMaxOrDefault$$module$extensions$amp_live_list$0_1$amp_live_list$$(this.element.getAttribute("data-poll-interval"),15E3);var $maxItems$$=this.element.getAttribute("data-max-items-per-page");
$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(0<Number($maxItems$$),"amp-live-list#"+this.$liveListId_$+" must have data-max-items-per-page attribute with numeric value. "+("Found "+$maxItems$$));var $actualCount$$=[].slice.call(this.$itemsSlot_$.children).filter(function($maxItems$$){return!$maxItems$$.hasAttribute("data-tombstone")}).length;this.$maxItemsPerPage_$=Math.max($getNumberMaxOrDefault$$module$extensions$amp_live_list$0_1$amp_live_list$$($maxItems$$,1),$actualCount$$);
$isExperimentOn$$module$src$experiments$$(this.win,"amp-live-list-sorting")&&(this.$isReverseOrder_$="ascending"===this.element.getAttribute("sort"));this.$manager_$.register(this.$liveListId_$,this);$JSCompiler_StaticMethods_toggleUpdateButton_$$(this,!1);$JSCompiler_StaticMethods_eachChildElement_$$(this.$itemsSlot_$,function($maxItems$$){$maxItems$$.classList.add("amp-live-list-item")});this.$curNumOfLiveItems_$=$JSCompiler_StaticMethods_validateLiveListItems_$$(this,this.$itemsSlot_$,!0);this.registerAction("update",
this.$updateAction_$.bind(this),100);this.element.hasAttribute("aria-live")||this.element.setAttribute("aria-live","polite")};$JSCompiler_prototypeAlias$$.isEnabled=function(){return!this.element.hasAttribute("disabled")};$JSCompiler_prototypeAlias$$.toggle=function($value$jscomp$161$$){$value$jscomp$161$$?this.element.removeAttribute("disabled"):this.element.setAttribute("disabled","")};$JSCompiler_prototypeAlias$$.activate=function(){this.$updateAction_$()};
$JSCompiler_prototypeAlias$$.update=function($updatedElement$$){var $$jscomp$this$jscomp$613$$=this,$container$jscomp$14$$=$childElementByAttr$$module$src$dom$$($updatedElement$$,"items");if(!$container$jscomp$14$$)return this.$updateTime_$;$JSCompiler_StaticMethods_validateLiveListItems_$$(this,$container$jscomp$14$$);var $mutateItems$$=$JSCompiler_StaticMethods_getUpdates_$$(this,$container$jscomp$14$$);$JSCompiler_StaticMethods_preparePendingItemsInsert_$$(this,$mutateItems$$.insert);$JSCompiler_StaticMethods_preparePendingItemsReplace_$$(this,
$mutateItems$$.replace);this.$pendingItemsTombstone_$.push.apply(this.$pendingItemsTombstone_$,$mutateItems$$.tombstone);this.$pendingPagination_$=$childElementByAttr$$module$src$dom$$($updatedElement$$,"pagination");0<this.$pendingItemsInsert_$.length?this.mutateElement(function(){$JSCompiler_StaticMethods_toggleUpdateButton_$$($$jscomp$this$jscomp$613$$,!0);$$jscomp$this$jscomp$613$$.$viewport_$.updateFixedLayer()}):(0<this.$pendingItemsReplace_$.length||0<this.$pendingItemsTombstone_$.length)&&
this.$updateAction_$();return this.$updateTime_$};
$JSCompiler_prototypeAlias$$.$updateAction_$=function(){var $$jscomp$this$jscomp$614$$=this,$hasInsertItems$$=0<this.$pendingItemsInsert_$.length,$hasTombstoneItems$$=0<this.$pendingItemsTombstone_$.length,$hasReplaceItems$$=0<this.$pendingItemsReplace_$.length,$updateHasNewItems$$=$hasInsertItems$$||$hasReplaceItems$$,$promise$jscomp$34$$=this.mutateElement(function(){var $hasReplaceItems$$=$user$$module$src$log$$().assertElement($$jscomp$this$jscomp$614$$.$itemsSlot_$);$hasInsertItems$$&&($JSCompiler_StaticMethods_eachChildElement_$$($hasReplaceItems$$,
function($$jscomp$this$jscomp$614$$){$$jscomp$this$jscomp$614$$.classList.remove("amp-live-list-item-new")}),$$jscomp$this$jscomp$614$$.$curNumOfLiveItems_$+=$JSCompiler_StaticMethods_insert_$$($$jscomp$this$jscomp$614$$,$$jscomp$this$jscomp$614$$.$pendingItemsInsert_$),$$jscomp$this$jscomp$614$$.$pendingItemsInsert_$.length=0);0<$$jscomp$this$jscomp$614$$.$pendingItemsReplace_$.length&&($JSCompiler_StaticMethods_replace_$$($hasReplaceItems$$,$$jscomp$this$jscomp$614$$.$pendingItemsReplace_$),$$jscomp$this$jscomp$614$$.$pendingItemsReplace_$.length=
0);0<$$jscomp$this$jscomp$614$$.$pendingItemsTombstone_$.length&&($$jscomp$this$jscomp$614$$.$curNumOfLiveItems_$-=$JSCompiler_StaticMethods_tombstone_$$($hasReplaceItems$$,$$jscomp$this$jscomp$614$$.$pendingItemsTombstone_$),$$jscomp$this$jscomp$614$$.$pendingItemsTombstone_$.length=0);($hasInsertItems$$||$hasTombstoneItems$$)&&$$jscomp$this$jscomp$614$$.$paginationSlot_$&&$$jscomp$this$jscomp$614$$.$pendingPagination_$&&($$jscomp$this$jscomp$614$$.element.replaceChild($$jscomp$this$jscomp$614$$.$pendingPagination_$,
$$jscomp$this$jscomp$614$$.$paginationSlot_$),$$jscomp$this$jscomp$614$$.$paginationSlot_$=$childElementByAttr$$module$src$dom$$($$jscomp$this$jscomp$614$$.element,"pagination"));$JSCompiler_StaticMethods_toggleUpdateButton_$$($$jscomp$this$jscomp$614$$,!1);$$jscomp$this$jscomp$614$$.$pendingPagination_$=null;return $JSCompiler_StaticMethods_removeOverflowItems_$$($$jscomp$this$jscomp$614$$,$hasReplaceItems$$)});$updateHasNewItems$$&&($promise$jscomp$34$$=$promise$jscomp$34$$.then(function(){var $hasInsertItems$$=
$$jscomp$this$jscomp$614$$.win.document.createEvent("Event");$hasInsertItems$$.initEvent("amp:dom-update",!0,!0);$$jscomp$this$jscomp$614$$.$itemsSlot_$.dispatchEvent($hasInsertItems$$)}));$hasInsertItems$$&&($promise$jscomp$34$$=$promise$jscomp$34$$.then(function(){var $hasInsertItems$$=$$jscomp$this$jscomp$614$$.$isReverseOrder_$&&$$jscomp$this$jscomp$614$$.$itemsSlot_$.lastElementChild?$$jscomp$this$jscomp$614$$.$itemsSlot_$.lastElementChild:$$jscomp$this$jscomp$614$$.element;return $$jscomp$this$jscomp$614$$.$viewport_$.animateScrollIntoView($hasInsertItems$$,
500,"ease-in",$$jscomp$this$jscomp$614$$.$isReverseOrder_$?"bottom":"top")}));return $promise$jscomp$34$$};function $JSCompiler_StaticMethods_toggleUpdateButton_$$($JSCompiler_StaticMethods_toggleUpdateButton_$self$$,$visible$jscomp$10$$){$JSCompiler_StaticMethods_toggleUpdateButton_$self$$.$updateSlot_$.classList.toggle("amp-hidden",!$visible$jscomp$10$$);$JSCompiler_StaticMethods_toggleUpdateButton_$self$$.$updateSlot_$.classList.toggle("amp-active",$visible$jscomp$10$$)}
function $JSCompiler_StaticMethods_insert_$$($JSCompiler_StaticMethods_insert_$self$$,$orphans$$){var $count$jscomp$13$$=0;$orphans$$.forEach(function($orphans$$){if(0==$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.childElementCount)$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.appendChild($orphans$$);else{var $orphan$$=$JSCompiler_StaticMethods_getSortTime_$$($orphans$$);if($JSCompiler_StaticMethods_insert_$self$$.$isReverseOrder_$)for(var $child$162_child$jscomp$27$$=$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.lastElementChild;$child$162_child$jscomp$27$$;$child$162_child$jscomp$27$$=
$child$162_child$jscomp$27$$.previousElementSibling){var $childSortTime$$=$JSCompiler_StaticMethods_getSortTime_$$($child$162_child$jscomp$27$$);if($orphan$$>=$childSortTime$$){$child$162_child$jscomp$27$$.nextElementSibling?$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.insertBefore($orphans$$,$child$162_child$jscomp$27$$.nextElementSibling):$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.appendChild($orphans$$);$count$jscomp$13$$++;break}else if(!$child$162_child$jscomp$27$$.previousElementSibling){$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.insertBefore($orphans$$,
$child$162_child$jscomp$27$$);$count$jscomp$13$$++;break}}else for($child$162_child$jscomp$27$$=$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.firstElementChild;$child$162_child$jscomp$27$$;$child$162_child$jscomp$27$$=$child$162_child$jscomp$27$$.nextElementSibling){var $childSortTime$163$$=$JSCompiler_StaticMethods_getSortTime_$$($child$162_child$jscomp$27$$);if($orphan$$>=$childSortTime$163$$){$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.insertBefore($orphans$$,$child$162_child$jscomp$27$$);
$count$jscomp$13$$++;break}else if(!$child$162_child$jscomp$27$$.nextElementSibling){$JSCompiler_StaticMethods_insert_$self$$.$itemsSlot_$.appendChild($orphans$$);$count$jscomp$13$$++;break}}}});return $count$jscomp$13$$}
function $JSCompiler_StaticMethods_replace_$$($parent$jscomp$39$$,$orphans$jscomp$1$$){var $count$jscomp$14$$=0;$orphans$jscomp$1$$.forEach(function($orphans$jscomp$1$$){var $orphan$jscomp$1$$=$orphans$jscomp$1$$.getAttribute("id"),$liveElement$$=$parent$jscomp$39$$.querySelector("#"+$orphan$jscomp$1$$);$liveElement$$&&($parent$jscomp$39$$.replaceChild($orphans$jscomp$1$$,$liveElement$$),$count$jscomp$14$$++)})}
function $JSCompiler_StaticMethods_tombstone_$$($parent$jscomp$40$$,$orphans$jscomp$2$$){var $count$jscomp$15$$=0;$orphans$jscomp$2$$.forEach(function($orphans$jscomp$2$$){$orphans$jscomp$2$$=$orphans$jscomp$2$$.getAttribute("id");if($orphans$jscomp$2$$=$parent$jscomp$40$$.querySelector("#"+$orphans$jscomp$2$$))$orphans$jscomp$2$$.setAttribute("data-tombstone",""),$orphans$jscomp$2$$.textContent="",$count$jscomp$15$$++});return $count$jscomp$15$$}
function $JSCompiler_StaticMethods_removeOverflowItems_$$($JSCompiler_StaticMethods_removeOverflowItems_$self$$,$parent$jscomp$41$$){var $numOfItemsToDelete$$=$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$curNumOfLiveItems_$-$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$maxItemsPerPage_$;if(1>$numOfItemsToDelete$$)return Promise.resolve();var $deleteItemsCandidates$$=[],$actualDeleteItems$$=[];if($JSCompiler_StaticMethods_removeOverflowItems_$self$$.$isReverseOrder_$)for(var $child$164_child$jscomp$28$$=
$parent$jscomp$41$$.firstElementChild;$child$164_child$jscomp$28$$&&!($deleteItemsCandidates$$.length>=$numOfItemsToDelete$$);$child$164_child$jscomp$28$$=$child$164_child$jscomp$28$$.nextElementSibling)$JSCompiler_StaticMethods_isChildTombstone_$$($child$164_child$jscomp$28$$)||$deleteItemsCandidates$$.push($child$164_child$jscomp$28$$);else for($child$164_child$jscomp$28$$=$parent$jscomp$41$$.lastElementChild;$child$164_child$jscomp$28$$&&!($deleteItemsCandidates$$.length>=$numOfItemsToDelete$$);$child$164_child$jscomp$28$$=
$child$164_child$jscomp$28$$.previousElementSibling)$JSCompiler_StaticMethods_isChildTombstone_$$($child$164_child$jscomp$28$$)||$deleteItemsCandidates$$.push($child$164_child$jscomp$28$$);return $JSCompiler_StaticMethods_removeOverflowItems_$self$$.getVsync().runPromise({measure:function(){for(var $parent$jscomp$41$$=0;$parent$jscomp$41$$<$deleteItemsCandidates$$.length;$parent$jscomp$41$$++){var $numOfItemsToDelete$$=$deleteItemsCandidates$$[$parent$jscomp$41$$];if($JSCompiler_StaticMethods_removeOverflowItems_$self$$.$isReverseOrder_$){if(!($JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getLayoutRect($numOfItemsToDelete$$).bottom<
$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getScrollTop()))break}else if(!($isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_removeOverflowItems_$self$$.win,"layers")?0<$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getLayoutRect($numOfItemsToDelete$$).top:$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getLayoutRect($numOfItemsToDelete$$).top>$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getScrollTop()+
$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$viewport_$.getSize().height))break;$actualDeleteItems$$.push($numOfItemsToDelete$$)}},mutate:function(){$actualDeleteItems$$.forEach(function($numOfItemsToDelete$$){$parent$jscomp$41$$.removeChild($numOfItemsToDelete$$);$JSCompiler_StaticMethods_removeOverflowItems_$self$$.$curNumOfLiveItems_$--})}})}
function $JSCompiler_StaticMethods_preparePendingItemsInsert_$$($JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$,$items$jscomp$6$$){$items$jscomp$6$$.sort($JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$.$comparator_$).forEach(function($JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$){$JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$.classList.add("amp-live-list-item");$JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$.classList.add("amp-live-list-item-new")});
$JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$.$pendingItemsInsert_$.push.apply($JSCompiler_StaticMethods_preparePendingItemsInsert_$self$$.$pendingItemsInsert_$,$items$jscomp$6$$)}
function $JSCompiler_StaticMethods_preparePendingItemsReplace_$$($JSCompiler_StaticMethods_preparePendingItemsReplace_$self$$,$items$jscomp$7$$){$items$jscomp$7$$.forEach(function($items$jscomp$7$$){var $elem$jscomp$6$$;a:{$elem$jscomp$6$$=$JSCompiler_StaticMethods_preparePendingItemsReplace_$self$$.$pendingItemsReplace_$;for(var $JSCompiler_i$jscomp$inline_2055$$=0;$JSCompiler_i$jscomp$inline_2055$$<$elem$jscomp$6$$.length;$JSCompiler_i$jscomp$inline_2055$$++)if($elem$jscomp$6$$[$JSCompiler_i$jscomp$inline_2055$$].getAttribute("id")==
$items$jscomp$7$$.getAttribute("id")){$elem$jscomp$6$$=$JSCompiler_i$jscomp$inline_2055$$;break a}$elem$jscomp$6$$=-1}var $hasPendingCounterpart$$=$elem$jscomp$6$$;$items$jscomp$7$$.classList.add("amp-live-list-item");-1==$hasPendingCounterpart$$?$JSCompiler_StaticMethods_preparePendingItemsReplace_$self$$.$pendingItemsReplace_$.push($items$jscomp$7$$):$JSCompiler_StaticMethods_preparePendingItemsReplace_$self$$.$pendingItemsReplace_$[$hasPendingCounterpart$$]=$items$jscomp$7$$})}
$JSCompiler_prototypeAlias$$.getInterval=function(){return this.$pollInterval_$};
function $JSCompiler_StaticMethods_getUpdates_$$($JSCompiler_StaticMethods_getUpdates_$self$$,$child$jscomp$30_updatedElement$jscomp$1$$){var $insert$jscomp$1$$=[],$replace$$=[],$tombstone$$=[];for($child$jscomp$30_updatedElement$jscomp$1$$=$child$jscomp$30_updatedElement$jscomp$1$$.firstElementChild;$child$jscomp$30_updatedElement$jscomp$1$$;$child$jscomp$30_updatedElement$jscomp$1$$=$child$jscomp$30_updatedElement$jscomp$1$$.nextElementSibling){var $id$jscomp$77_orphan$166_orphan$jscomp$3$$=$child$jscomp$30_updatedElement$jscomp$1$$.getAttribute("id"),
$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$=$JSCompiler_StaticMethods_getUpdates_$self$$,$JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$=$child$jscomp$30_updatedElement$jscomp$1$$,$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$=$JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$.getAttribute("id");
if($JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$.hasAttribute("data-tombstone")||$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$ in $JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$.$knownItems_$)if($JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$=
$JSCompiler_StaticMethods_getUpdates_$self$$,$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$=$child$jscomp$30_updatedElement$jscomp$1$$,!$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$.hasAttribute("data-update-time")||$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$.hasAttribute("data-tombstone")?$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$=
!1:($JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$=$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$.getAttribute("id"),$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$=$JSCompiler_StaticMethods_getUpdateTime_$$($JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$),$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$=
$JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$ in $JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$.$knownItems_$&&-1!=$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$.$knownItems_$[$JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$]&&
$JSCompiler_elem$jscomp$inline_2062_JSCompiler_id$jscomp$inline_2059_JSCompiler_updateTime$jscomp$inline_2064$$>$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$.$knownItems_$[$JSCompiler_elem$jscomp$inline_2058_JSCompiler_id$jscomp$inline_2063$$]),$JSCompiler_StaticMethods_isChildNew_$self$jscomp$inline_2057_JSCompiler_StaticMethods_isChildUpdate_$self$jscomp$inline_2061_JSCompiler_inline_result$jscomp$473$$){var $updateTime$$=
$JSCompiler_StaticMethods_getUpdateTime_$$($child$jscomp$30_updatedElement$jscomp$1$$);$JSCompiler_StaticMethods_getUpdates_$self$$.$knownItems_$[$id$jscomp$77_orphan$166_orphan$jscomp$3$$]=$updateTime$$;$id$jscomp$77_orphan$166_orphan$jscomp$3$$=$JSCompiler_StaticMethods_getUpdates_$self$$.win.document.importNode($child$jscomp$30_updatedElement$jscomp$1$$,!0);$updateTime$$>$JSCompiler_StaticMethods_getUpdates_$self$$.$updateTime_$&&($JSCompiler_StaticMethods_getUpdates_$self$$.$updateTime_$=$updateTime$$);
$replace$$.push($id$jscomp$77_orphan$166_orphan$jscomp$3$$)}else $JSCompiler_StaticMethods_isChildTombstone_$$($child$jscomp$30_updatedElement$jscomp$1$$)&&-1!=$JSCompiler_StaticMethods_getUpdates_$self$$.$knownItems_$[$id$jscomp$77_orphan$166_orphan$jscomp$3$$]&&($JSCompiler_StaticMethods_getUpdates_$self$$.$knownItems_$[$id$jscomp$77_orphan$166_orphan$jscomp$3$$]=-1,$tombstone$$.push($child$jscomp$30_updatedElement$jscomp$1$$));else $id$jscomp$77_orphan$166_orphan$jscomp$3$$=$JSCompiler_StaticMethods_getUpdates_$self$$.win.document.importNode($child$jscomp$30_updatedElement$jscomp$1$$,
!0),$insert$jscomp$1$$.push($id$jscomp$77_orphan$166_orphan$jscomp$3$$),$JSCompiler_StaticMethods_cacheChild_$$($JSCompiler_StaticMethods_getUpdates_$self$$,$child$jscomp$30_updatedElement$jscomp$1$$)}return{insert:$insert$jscomp$1$$,replace:$replace$$,tombstone:$tombstone$$}}function $JSCompiler_StaticMethods_isChildTombstone_$$($elem$jscomp$10$$){return $elem$jscomp$10$$.hasAttribute("data-tombstone")}
function $JSCompiler_StaticMethods_cacheChild_$$($JSCompiler_StaticMethods_cacheChild_$self$$,$child$jscomp$31_updateTime$jscomp$2$$){var $id$jscomp$80$$=$child$jscomp$31_updateTime$jscomp$2$$.getAttribute("id");$child$jscomp$31_updateTime$jscomp$2$$=$JSCompiler_StaticMethods_getUpdateTime_$$($child$jscomp$31_updateTime$jscomp$2$$);$child$jscomp$31_updateTime$jscomp$2$$>$JSCompiler_StaticMethods_cacheChild_$self$$.$updateTime_$&&($JSCompiler_StaticMethods_cacheChild_$self$$.$updateTime_$=$child$jscomp$31_updateTime$jscomp$2$$);
$JSCompiler_StaticMethods_cacheChild_$self$$.$knownItems_$[$id$jscomp$80$$]=$child$jscomp$31_updateTime$jscomp$2$$}
function $JSCompiler_StaticMethods_validateLiveListItems_$$($JSCompiler_StaticMethods_validateLiveListItems_$self$$,$element$jscomp$381$$,$opt_cacheIds$$){var $numItems$$=0,$foundInvalid$$=!1;$JSCompiler_StaticMethods_eachChildElement_$$($element$jscomp$381$$,function($element$jscomp$381$$){$element$jscomp$381$$.hasAttribute("id")&&0<Number($element$jscomp$381$$.getAttribute("data-sort-time"))?$opt_cacheIds$$&&$JSCompiler_StaticMethods_cacheChild_$$($JSCompiler_StaticMethods_validateLiveListItems_$self$$,
$element$jscomp$381$$):$foundInvalid$$=!0;$numItems$$++});$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!$foundInvalid$$,"All amp-live-list-items under amp-live-list#"+$JSCompiler_StaticMethods_validateLiveListItems_$self$$.$liveListId_$+" children must have id and data-sort-time attributes. data-sort-time must be a Number greater than 0.");return $numItems$$}
function $JSCompiler_StaticMethods_eachChildElement_$$($child$jscomp$34_parent$jscomp$42$$,$cb$jscomp$8$$){for($child$jscomp$34_parent$jscomp$42$$=$child$jscomp$34_parent$jscomp$42$$.firstElementChild;$child$jscomp$34_parent$jscomp$42$$;$child$jscomp$34_parent$jscomp$42$$=$child$jscomp$34_parent$jscomp$42$$.nextElementSibling)$cb$jscomp$8$$($child$jscomp$34_parent$jscomp$42$$)}
$JSCompiler_prototypeAlias$$.$sortByDataSortTime_$=function($a$jscomp$233$$,$b$jscomp$203$$){return $JSCompiler_StaticMethods_getSortTime_$$($a$jscomp$233$$)-$JSCompiler_StaticMethods_getSortTime_$$($b$jscomp$203$$)};function $JSCompiler_StaticMethods_getSortTime_$$($elem$jscomp$11$$){return $JSCompiler_StaticMethods_getTimeAttr_$$($elem$jscomp$11$$,"data-sort-time")}
function $JSCompiler_StaticMethods_getUpdateTime_$$($elem$jscomp$12$$){return $elem$jscomp$12$$.hasAttribute("data-update-time")?$JSCompiler_StaticMethods_getTimeAttr_$$($elem$jscomp$12$$,"data-update-time"):$JSCompiler_StaticMethods_getSortTime_$$($elem$jscomp$12$$)}
function $JSCompiler_StaticMethods_getTimeAttr_$$($elem$jscomp$13$$,$attr$jscomp$17$$){var $time$jscomp$32$$=Number($elem$jscomp$13$$.getAttribute($attr$jscomp$17$$));$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(0<$time$jscomp$32$$,'"'+$attr$jscomp$17$$+'" attribute must exist and value '+("must be a number greater than 0. Found "+$time$jscomp$32$$+" on ")+($elem$jscomp$13$$.getAttribute("id")+" instead."));return $time$jscomp$32$$}$JSCompiler_prototypeAlias$$.getUpdateTime=function(){return this.$updateTime_$};
(function($AMP$jscomp$65$$){$AMP$jscomp$65$$.registerElement("amp-live-list",$AmpLiveList$$module$extensions$amp_live_list$0_1$amp_live_list$$,"amp-live-list>[update]{position:relative;z-index:1000}amp-live-list>.amp-active[update]{display:block}amp-live-list>[items]>[data-tombstone]{display:none}@-webkit-keyframes amp-live-list-item-highlight{0%{box-shadow:0 0 5px 2px #51cbee}to{box-shadow:0}}@keyframes amp-live-list-item-highlight{0%{box-shadow:0 0 5px 2px #51cbee}to{box-shadow:0}}\n/*# sourceURL=/extensions/amp-live-list/0.1/amp-live-list.css*/")})(self.AMP);})});
//# sourceMappingURL=extensions-amp-live-list-0.1-amp-live-list.js.map

