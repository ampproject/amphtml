(self.AMP=self.AMP||[]).push({n:"extensions-amp-brightcove-0.1-amp-brightcove.js", v:"erwin", f:(function(){function $AmpBrightcove$$module$extensions$amp_brightcove$0_1$amp_brightcove$$($$jscomp$super$this$jscomp$24_element$jscomp$287$$){$$jscomp$super$this$jscomp$24_element$jscomp$287$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$24_element$jscomp$287$$)||this;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$iframe_$=null;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$playing_$=!1;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$muted_$=!1;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$hasAmpSupport_$=
!1;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$playerReadyPromise_$=null;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$playerReadyResolver_$=null;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$readyTimeout_$=null;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$unlistenMessage_$=null;$$jscomp$super$this$jscomp$24_element$jscomp$287$$.$playerId_$=null;return $$jscomp$super$this$jscomp$24_element$jscomp$287$$}
$$jscomp$inherits$$($AmpBrightcove$$module$extensions$amp_brightcove$0_1$amp_brightcove$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpBrightcove$$module$extensions$amp_brightcove$0_1$amp_brightcove$$.prototype;$JSCompiler_prototypeAlias$$.preconnectCallback=function(){this.preconnect.url("https://players.brightcove.net")};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$37$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$37$$)};
$JSCompiler_prototypeAlias$$.viewportCallback=function($visible$jscomp$7$$){this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.VISIBILITY,{visible:$visible$jscomp$7$$})};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$433$$=this;this.$iframe_$=null;var $deferred$jscomp$29$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$29$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$29$$.resolve;this.$readyTimeout_$=$Services$$module$src$services$timerFor$$(window).delay(function(){$dev$$module$src$log$$().warn("amp-brightcove","Did not receive ready callback from player "+$$jscomp$this$jscomp$433$$.$playerId_$+
". Ensure it has the videojs-amp-support plugin.")},3E3);this.$playerReadyResolver_$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$434$$=this,$el$jscomp$31$$=this.element,$iframe$jscomp$35$$=$el$jscomp$31$$.ownerDocument.createElement("iframe");$iframe$jscomp$35$$.setAttribute("frameborder","0");$iframe$jscomp$35$$.setAttribute("allowfullscreen","true");$iframe$jscomp$35$$.src=this.$getIframeSrc_$();this.applyFillContent($iframe$jscomp$35$$);$el$jscomp$31$$.appendChild($iframe$jscomp$35$$);this.$iframe_$=$iframe$jscomp$35$$;this.$unlistenMessage_$=
$listen$$module$src$event_helper$$(this.win,"message",this.$handlePlayerMessages_$.bind(this));return this.loadPromise($iframe$jscomp$35$$).then(function(){return $$jscomp$this$jscomp$434$$.$playerReadyPromise_$})};$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$1$$,$arg$jscomp$13$$){this.$iframe_$.contentWindow.postMessage(JSON.stringify($dict$$module$src$utils$object$$({command:$command$jscomp$1$$,args:$arg$jscomp$13$$})),"https://players.brightcove.net")};
$JSCompiler_prototypeAlias$$.$handlePlayerMessages_$=function($data$jscomp$100_event$jscomp$81$$){var $el$jscomp$32$$=this.element;"https://players.brightcove.net"==$data$jscomp$100_event$jscomp$81$$.origin&&$data$jscomp$100_event$jscomp$81$$.source==this.$iframe_$.contentWindow&&$data$jscomp$100_event$jscomp$81$$.data&&($isObject$$module$src$types$$($data$jscomp$100_event$jscomp$81$$.data)||$startsWith$$module$src$string$$($data$jscomp$100_event$jscomp$81$$.data,"{"))&&($data$jscomp$100_event$jscomp$81$$=
$isObject$$module$src$types$$($data$jscomp$100_event$jscomp$81$$.data)?$data$jscomp$100_event$jscomp$81$$.data:$tryParseJson$$module$src$json$$($data$jscomp$100_event$jscomp$81$$.data),void 0!==$data$jscomp$100_event$jscomp$81$$&&$data$jscomp$100_event$jscomp$81$$.event&&("ready"===$data$jscomp$100_event$jscomp$81$$.event&&($Services$$module$src$services$timerFor$$(window).cancel(this.$readyTimeout_$),$dev$$module$src$log$$().$Log$$module$src$log_prototype$info$("amp-brightcove","Player "+this.$playerId_$+
" ready. "+("Brightcove Player version: "+$data$jscomp$100_event$jscomp$81$$.bcVersion+" ")+("AMP Support version: "+$data$jscomp$100_event$jscomp$81$$.ampSupportVersion)),this.$hasAmpSupport_$=!0,$installVideoManagerForDoc$$module$src$service$video_manager_impl$$($el$jscomp$32$$),$Services$$module$src$services$videoManagerForDoc$$($el$jscomp$32$$).register(this),$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)),"playing"===$data$jscomp$100_event$jscomp$81$$.event?
(this.$playing_$=!0,$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING)):"pause"===$data$jscomp$100_event$jscomp$81$$.event?(this.$playing_$=!1,$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE)):"ended"===$data$jscomp$100_event$jscomp$81$$.event?$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.ENDED):"ads-ad-started"===$data$jscomp$100_event$jscomp$81$$.event?$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.AD_START):
"ads-ad-ended"===$data$jscomp$100_event$jscomp$81$$.event?$el$jscomp$32$$.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.AD_END):"volumechange"===$data$jscomp$100_event$jscomp$81$$.event&&void 0!==$data$jscomp$100_event$jscomp$81$$.muted&&(this.$muted_$=$data$jscomp$100_event$jscomp$81$$.muted,$el$jscomp$32$$.dispatchCustomEvent(this.$muted_$?$VideoEvents$$module$src$video_interface$$.MUTED:$VideoEvents$$module$src$video_interface$$.UNMUTED))))};
$JSCompiler_prototypeAlias$$.$getIframeSrc_$=function(){var $el$jscomp$33$$=this.element,$account$$=$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($el$jscomp$33$$.getAttribute("data-account"),"The data-account attribute is required for <amp-brightcove> %s",$el$jscomp$33$$),$embed$jscomp$6_src$jscomp$32$$=$el$jscomp$33$$.getAttribute("data-embed")||"default";this.$playerId_$=$el$jscomp$33$$.getAttribute("data-player")||$el$jscomp$33$$.getAttribute("data-player-id")||"default";$embed$jscomp$6_src$jscomp$32$$=
"https://players.brightcove.net/"+encodeURIComponent($account$$)+("/"+encodeURIComponent(this.$playerId_$))+("_"+encodeURIComponent($embed$jscomp$6_src$jscomp$32$$)+"/index.html");$el$jscomp$33$$.getAttribute("data-playlist-id")?$embed$jscomp$6_src$jscomp$32$$=$embed$jscomp$6_src$jscomp$32$$+"?playlistId="+$JSCompiler_StaticMethods_encodeId_$$($el$jscomp$33$$.getAttribute("data-playlist-id")):$el$jscomp$33$$.getAttribute("data-video-id")&&($embed$jscomp$6_src$jscomp$32$$=$embed$jscomp$6_src$jscomp$32$$+
"?videoId="+$JSCompiler_StaticMethods_encodeId_$$($el$jscomp$33$$.getAttribute("data-video-id")));$el$jscomp$33$$.setAttribute("data-param-playsinline","true");return $embed$jscomp$6_src$jscomp$32$$=$addParamsToUrl$$module$src$url$$($embed$jscomp$6_src$jscomp$32$$,$getDataParamsFromAttributes$$module$src$dom$$($el$jscomp$33$$))};
$JSCompiler_prototypeAlias$$.mutatedAttributesCallback=function($mutations$jscomp$4$$){var $playerId$$=$mutations$jscomp$4$$["data-player"]||$mutations$jscomp$4$$["data-player-id"],$embed$jscomp$7$$=$mutations$jscomp$4$$["data-embed"],$playlistId$$=$mutations$jscomp$4$$["data-playlist-id"],$videoId$$=$mutations$jscomp$4$$["data-video-id"];void 0===$mutations$jscomp$4$$["data-account"]&&void 0===$playerId$$&&void 0===$playlistId$$&&void 0===$embed$jscomp$7$$&&void 0===$videoId$$||!this.$iframe_$||
(this.$iframe_$.src=this.$getIframeSrc_$())};function $JSCompiler_StaticMethods_encodeId_$$($id$jscomp$62$$){return"ref:"===$id$jscomp$62$$.substring(0,4)?"ref:"+encodeURIComponent($id$jscomp$62$$.substring(4)):encodeURIComponent($id$jscomp$62$$)}$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.$iframe_$&&this.$iframe_$.contentWindow&&this.$hasAmpSupport_$&&this.$playing_$&&this.pause()};$JSCompiler_prototypeAlias$$.unlayoutOnPause=function(){return this.$hasAmpSupport_$?!1:!0};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();var $deferred$jscomp$30$$=new $Deferred$$module$src$utils$promise$$;this.$playerReadyPromise_$=$deferred$jscomp$30$$.promise;this.$playerReadyResolver_$=$deferred$jscomp$30$$.resolve;return!0};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!0};
$JSCompiler_prototypeAlias$$.play=function(){var $$jscomp$this$jscomp$435$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$435$$.$sendCommand_$("play")})};$JSCompiler_prototypeAlias$$.pause=function(){var $$jscomp$this$jscomp$436$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$436$$.$sendCommand_$("pause")})};
$JSCompiler_prototypeAlias$$.mute=function(){var $$jscomp$this$jscomp$437$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$437$$.$sendCommand_$("muted",!0)})};$JSCompiler_prototypeAlias$$.unmute=function(){var $$jscomp$this$jscomp$438$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$438$$.$sendCommand_$("muted",!1)})};
$JSCompiler_prototypeAlias$$.showControls=function(){var $$jscomp$this$jscomp$439$$=this;this.$playerReadyPromise_$.then(function(){$$jscomp$this$jscomp$439$$.$sendCommand_$("controls",!0)})};$JSCompiler_prototypeAlias$$.hideControls=function(){this.$sendCommand_$("controls",!1)};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){this.$iframe_$&&$fullscreenEnter$$module$src$dom$$(this.$iframe_$)};$JSCompiler_prototypeAlias$$.fullscreenExit=function(){this.$iframe_$&&$fullscreenExit$$module$src$dom$$(this.$iframe_$)};
$JSCompiler_prototypeAlias$$.isFullscreen=function(){return this.$iframe_$?$isFullscreenElement$$module$src$dom$$(this.$iframe_$):!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!0};$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};
$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$28$$){$AMP$jscomp$28$$.registerElement("amp-brightcove",$AmpBrightcove$$module$extensions$amp_brightcove$0_1$amp_brightcove$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-brightcove-0.1-amp-brightcove.js.map

