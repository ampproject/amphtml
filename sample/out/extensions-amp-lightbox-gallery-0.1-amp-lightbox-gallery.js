(self.AMP=self.AMP||[]).push({n:"extensions-amp-lightbox-gallery-0.1-amp-lightbox-gallery.js", v:"erwin", f:(function(){function $SwipeYRecognizer$$module$src$gesture_recognizers$$($manager$jscomp$6$$){$SwipeRecognizer$$module$src$gesture_recognizers$$.call(this,"swipe-y",$manager$jscomp$6$$,!1,!0)}$$jscomp$inherits$$($SwipeYRecognizer$$module$src$gesture_recognizers$$,$SwipeRecognizer$$module$src$gesture_recognizers$$);var $LIGHTBOX_ELIGIBLE_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$={"AMP-IMG":!0},$ELIGIBLE_TAP_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$={"AMP-IMG":!0},$VIDEO_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$={"AMP-YOUTUBE":!0,"AMP-VIDEO":!0};
function $LightboxManager$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$($ampdoc$jscomp$157$$){this.$ampdoc_$=$ampdoc$jscomp$157$$;this.C=null;this.B=$map$$module$src$utils$object$$({default:[]});this.D=0;this.$seen_$=[]}$JSCompiler_prototypeAlias$$=$LightboxManager$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$.prototype;
$JSCompiler_prototypeAlias$$.maybeInit=function(){var $$jscomp$this$jscomp$563$$=this;if(this.C)return this.C;this.C=$JSCompiler_StaticMethods_scanLightboxables_$$(this);this.$ampdoc_$.getRootNode().addEventListener("amp:dom-update",function(){$$jscomp$this$jscomp$563$$.C=$JSCompiler_StaticMethods_scanLightboxables_$$($$jscomp$this$jscomp$563$$)});return this.C};
function $JSCompiler_StaticMethods_scanLightboxables_$$($JSCompiler_StaticMethods_scanLightboxables_$self$$){return $JSCompiler_StaticMethods_scanLightboxables_$self$$.$ampdoc_$.whenReady().then(function(){var $matches$jscomp$9$$=$JSCompiler_StaticMethods_scanLightboxables_$self$$.$ampdoc_$.getRootNode().querySelectorAll("[lightbox]"),$processLightboxElement$$=$JSCompiler_StaticMethods_scanLightboxables_$self$$.$processLightboxElement_$.bind($JSCompiler_StaticMethods_scanLightboxables_$self$$);$iterateCursor$$module$src$dom$$($matches$jscomp$9$$,
$processLightboxElement$$)})}
function $JSCompiler_StaticMethods_processLightboxCarousel_$$($JSCompiler_StaticMethods_processLightboxCarousel_$self$$,$carousel$$){var $lightboxGroupId$$=$carousel$$.getAttribute("lightbox")||"carousel"+($carousel$$.getAttribute("id")||$JSCompiler_StaticMethods_processLightboxCarousel_$self$$.D++);$JSCompiler_StaticMethods_getSlidesFromCarousel_$$($carousel$$).then(function($carousel$$){$carousel$$.forEach(function($carousel$$){var $slides$$=$carousel$$.hasAttribute("lightbox-exclude")||$carousel$$.hasAttribute("lightbox")&&
$carousel$$.getAttribute("lightbox")!==$lightboxGroupId$$;$slides$$||$JSCompiler_StaticMethods_processLightboxCarousel_$self$$.$seen_$.includes($carousel$$)||($carousel$$.setAttribute("lightbox",$lightboxGroupId$$),$JSCompiler_StaticMethods_processLightboxCarousel_$self$$.$seen_$.push($carousel$$),$JSCompiler_StaticMethods_processBaseLightboxElement_$$($JSCompiler_StaticMethods_processLightboxCarousel_$self$$,$carousel$$,$lightboxGroupId$$))})})}
$JSCompiler_prototypeAlias$$.$processLightboxElement_$=function($element$jscomp$358$$){if(!this.$seen_$.includes($element$jscomp$358$$))if(this.$seen_$.push($element$jscomp$358$$),"AMP-CAROUSEL"==$element$jscomp$358$$.tagName)$JSCompiler_StaticMethods_processLightboxCarousel_$$(this,$element$jscomp$358$$);else{var $lightboxGroupId$jscomp$1$$=$element$jscomp$358$$.getAttribute("lightbox")||"default";$JSCompiler_StaticMethods_processBaseLightboxElement_$$(this,$element$jscomp$358$$,$lightboxGroupId$jscomp$1$$)}};
function $JSCompiler_StaticMethods_unwrapLightboxedFigure_$$($element$jscomp$359_figure$jscomp$1$$,$lightboxGroupId$jscomp$2$$){($element$jscomp$359_figure$jscomp$1$$=$childElement$$module$src$dom$$($element$jscomp$359_figure$jscomp$1$$,function($element$jscomp$359_figure$jscomp$1$$){return"FIGCAPTION"!==$element$jscomp$359_figure$jscomp$1$$.tagName}))&&$element$jscomp$359_figure$jscomp$1$$.setAttribute("lightbox",$lightboxGroupId$jscomp$2$$);return $element$jscomp$359_figure$jscomp$1$$}
function $JSCompiler_StaticMethods_processBaseLightboxElement_$$($JSCompiler_StaticMethods_processBaseLightboxElement_$self$$,$element$jscomp$360$$,$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$){if("FIGURE"==$element$jscomp$360$$.tagName){var $unwrappedFigureElement$$=$JSCompiler_StaticMethods_unwrapLightboxedFigure_$$($element$jscomp$360$$,$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$);if($unwrappedFigureElement$$)$element$jscomp$360$$=$unwrappedFigureElement$$;
else return}$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($LIGHTBOX_ELIGIBLE_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$element$jscomp$360$$.tagName],"The element "+$element$jscomp$360$$.tagName+" isn't supported in lightbox yet.");$JSCompiler_StaticMethods_processBaseLightboxElement_$self$$.B[$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$]||($JSCompiler_StaticMethods_processBaseLightboxElement_$self$$.B[$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$]=
[]);$JSCompiler_StaticMethods_processBaseLightboxElement_$self$$.B[$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$].push($element$jscomp$360$$);$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$=$element$jscomp$360$$;$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$.hasAttribute("lightbox");if($ELIGIBLE_TAP_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$.tagName]&&
!$JSCompiler_element$jscomp$inline_2007_lightboxGroupId$jscomp$3$$.hasAttribute("on")){var $gallery$$=$elementByTag$$module$src$dom$$($JSCompiler_StaticMethods_processBaseLightboxElement_$self$$.$ampdoc_$.getRootNode(),"amp-lightbox-gallery");$element$jscomp$360$$.setAttribute("on","tap:"+$gallery$$.id+".activate")}}
function $JSCompiler_StaticMethods_getSlidesFromCarousel_$$($element$jscomp$361$$){return $element$jscomp$361$$.signals().whenSignal("load-end").then(function(){return $toArray$$module$src$types$$($element$jscomp$361$$.querySelectorAll(".amp-carousel-slide"))})}$JSCompiler_prototypeAlias$$.getElementsForLightboxGroup=function($lightboxGroupId$jscomp$4$$){var $$jscomp$this$jscomp$566$$=this;return this.maybeInit().then(function(){return $$jscomp$this$jscomp$566$$.B[$lightboxGroupId$jscomp$4$$]})};
$JSCompiler_prototypeAlias$$.getDescription=function($element$jscomp$362$$){var $figureParent$$=$closestByTag$$module$src$dom$$($element$jscomp$362$$,"figure");if($figureParent$$){var $figCaption$$=$elementByTag$$module$src$dom$$($figureParent$$,"figcaption");if($figCaption$$)return $figCaption$$.innerText}var $ariaDescribedBy$$=$element$jscomp$362$$.getAttribute("aria-describedby");if($ariaDescribedBy$$){var $descriptionElement$$=$element$jscomp$362$$.ownerDocument.getElementById($ariaDescribedBy$$);
if($descriptionElement$$)return $descriptionElement$$.innerText}return null};function $JSCompiler_StaticMethods_getVideoTimestamp_$$($element$jscomp$363$$){return $VIDEO_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$element$jscomp$363$$.tagName]?$element$jscomp$363$$.getImpl().then(function($element$jscomp$363$$){return $element$jscomp$363$$.getDuration()}):Promise.resolve()}
$JSCompiler_prototypeAlias$$.getThumbnails=function($lightboxGroupId$jscomp$5$$){var $$jscomp$this$jscomp$567$$=this;return this.B[$lightboxGroupId$jscomp$5$$].map(function($lightboxGroupId$jscomp$5$$){var $element$jscomp$364$$;a:{if($lightboxGroupId$jscomp$5$$.hasAttribute("lightbox-thumbnail-id")&&($element$jscomp$364$$=$lightboxGroupId$jscomp$5$$.getAttribute("lightbox-thumbnail-id"),($element$jscomp$364$$=$lightboxGroupId$jscomp$5$$.ownerDocument.getElementById($element$jscomp$364$$))&&"AMP-IMG"==
$element$jscomp$364$$.tagName)){$element$jscomp$364$$=$srcsetFromElement$$module$src$srcset$$($element$jscomp$364$$);break a}$element$jscomp$364$$=$JSCompiler_StaticMethods_getUserPlaceholderSrcset_$$($$jscomp$this$jscomp$567$$,$lightboxGroupId$jscomp$5$$)}var $JSCompiler_inline_result$jscomp$464$$;a:switch($lightboxGroupId$jscomp$5$$.tagName){case "AMP-AD":$JSCompiler_inline_result$jscomp$464$$='data:image/svg+xml;charset=utf-8,<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="#1E3B63" d="M0 0h128v128H0z"/><rect fill="#2B6AC0" x="34" y="74" width="8" height="30" rx="2"/><rect fill="#2B6AC0" x="87" y="74" width="8" height="30" rx="2"/><rect fill="#ACC8F0" x="24" y="30" width="81" height="54" rx="4"/><path fill="#D1E5FF" d="M29 35h71v44H29z"/><path d="M64 53.5V66a3 3 0 0 1-6 0v-4h-5v4a3 3 0 0 1-6 0V53.5a8.5 8.5 0 0 1 17 0zm-6 0a2.5 2.5 0 0 0-5 0V56h5v-2.5zM71 45h3v.041C80.16 45.55 85 50.71 85 57s-4.84 11.45-11 11.959V69h-3a3 3 0 0 1-3-3V48a3 3 0 0 1 3-3zm3 6.083v11.834a6.002 6.002 0 0 0 0-11.834z" fill="#225CAC"/></g></svg>';
break a;case "AMP-VIDEO":case "AMP-YOUTUBE":$JSCompiler_inline_result$jscomp$464$$='data:image/svg+xml;charset=utf-8,<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path fill="#1E3B63" d="M0 0h128v128H0z"/><path d="M24 51h80v46a4 4 0 0 1-4 4H28a4 4 0 0 1-4-4V51z" fill="#225CAC"/><path fill="#1B519B" d="M24 49h80v12H24z"/><path fill="#D1E5FF" d="M56 49l-8 12h-9l8-12zm16 0l-8 12h-8l8-12zm32 0l-8 12h-8l8-12zm-16 0l-8 12h-8l8-12z"/><path d="M26.916 49.148l77.274-20.705-2.07-7.728a4 4 0 0 0-4.9-2.828L27.674 36.522a4 4 0 0 0-2.829 4.899l2.07 7.727z" fill="#1B519B"/><path fill="#D1E5FF" d="M57.826 40.866l-10.834-9.52-8.693 2.329 10.833 9.52zm15.454-4.141l-10.833-9.52-7.727 2.07 10.833 9.52zm30.91-8.282l-10.833-9.52-7.728 2.07 10.834 9.52zm-15.455 4.141l-10.833-9.52-7.728 2.07 10.834 9.52z"/><path d="M28 37h9.86a4 4 0 0 1 3.327 1.781L48 49l-8 12H24V41a4 4 0 0 1 4-4z" fill="#2B6AC0"/><circle fill="#D1E5FF" cx="29.5" cy="44.5" r="1.5"/><circle fill="#D1E5FF" cx="29.5" cy="55.5" r="1.5"/></g></svg>';
break a;default:$JSCompiler_inline_result$jscomp$464$$='data:image/svg+xml;charset=utf-8,<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M9 20.5a1.5 1.5 0 0 1-3 0c0-6.488 5-8.53 5-13.5a4 4 0 1 0-8 0 1.5 1.5 0 0 1-3 0 7 7 0 1 1 14 0c0 5.483-5 7.485-5 13.5z" id="a"/><circle id="b" cx="7.5" cy="29.5" r="1.5"/></defs><g fill="none" fill-rule="evenodd"><path fill="#1E3B63" d="M0 0h128v128H0z"/><path d="M33 24.5h62a4 4 0 0 1 4 4v54.952L78.081 104.5H33a4 4 0 0 1-4-4v-72a4 4 0 0 1 4-4z" fill="#D1E5FF"/><g transform="translate(57 48)"><use fill="#225CAC" xlink:href="#a"/><path stroke="#225CAC" d="M9.5 20.5a2 2 0 1 1-4 0c0-2.85.756-4.755 2.58-7.59l.385-.595c.152-.236.265-.412.373-.584C10.006 9.873 10.5 8.601 10.5 7a3.5 3.5 0 1 0-7 0 2 2 0 1 1-4 0 7.5 7.5 0 0 1 15 0c0 2.273-.642 3.81-2.314 6.409l-.266.412C10.133 16.592 9.5 18.103 9.5 20.5z"/></g><g transform="translate(57 48)"><use fill="#225CAC" xlink:href="#b"/><circle stroke="#225CAC" cx="7.5" cy="29.5" r="2"/></g><path d="M82 83.5h17l-21 21v-17a4 4 0 0 1 4-4z" fill="#ACC8F0"/></g></svg>'}return{srcset:$element$jscomp$364$$,
placeholderSrc:$JSCompiler_inline_result$jscomp$464$$,element:$lightboxGroupId$jscomp$5$$,timestampPromise:$JSCompiler_StaticMethods_getVideoTimestamp_$$($lightboxGroupId$jscomp$5$$)}})};
function $JSCompiler_StaticMethods_getUserPlaceholderSrcset_$$($JSCompiler_StaticMethods_getUserPlaceholderSrcset_$self_JSCompiler_poster$jscomp$inline_2017$$,$element$jscomp$367_placeholder$jscomp$12$$){return"AMP-IMG"==$element$jscomp$367_placeholder$jscomp$12$$.tagName?$srcsetFromElement$$module$src$srcset$$($element$jscomp$367_placeholder$jscomp$12$$):"AMP-VIDEO"==$element$jscomp$367_placeholder$jscomp$12$$.tagName?($JSCompiler_StaticMethods_getUserPlaceholderSrcset_$self_JSCompiler_poster$jscomp$inline_2017$$=
$element$jscomp$367_placeholder$jscomp$12$$.getAttribute("poster"))?$srcsetFromSrc$$module$src$srcset$$($JSCompiler_StaticMethods_getUserPlaceholderSrcset_$self_JSCompiler_poster$jscomp$inline_2017$$):null:($element$jscomp$367_placeholder$jscomp$12$$=$childElementByAttr$$module$src$dom$$($element$jscomp$367_placeholder$jscomp$12$$,"placeholder"))?$JSCompiler_StaticMethods_getUserPlaceholderSrcset_$$($JSCompiler_StaticMethods_getUserPlaceholderSrcset_$self_JSCompiler_poster$jscomp$inline_2017$$,$element$jscomp$367_placeholder$jscomp$12$$):
null};var $ENTER_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$=$bezierCurve$$module$src$curve$$(.8,0,.2,1),$EXIT_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$=$bezierCurve$$module$src$curve$$(.8,0,.2,1),$manager_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$;
function $AmpLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$($$jscomp$super$this$jscomp$57_element$jscomp$368$$){$$jscomp$super$this$jscomp$57_element$jscomp$368$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$57_element$jscomp$368$$)||this;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$isActive_$=!1;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$historyId_$=-1;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$currentElemId_$=-1;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$boundOnKeyDown_$=
$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$onKeyDown_$.bind($$jscomp$super$this$jscomp$57_element$jscomp$368$$);$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$manager_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$history_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$action_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$elementsMetadata_$={default:[]};$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$container_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$carouselContainer_$=
null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$controlsContainer_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$navControls_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$carousel_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$descriptionBox_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$descriptionTextArea_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$descriptionOverflowMask_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$gallery_$=
null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$topBar_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$controlsMode_$=1;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$unlistenClick_$=null;$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$currentLightboxGroupId_$="default";$$jscomp$super$this$jscomp$57_element$jscomp$368$$.$sourceElement_$=null;return $$jscomp$super$this$jscomp$57_element$jscomp$368$$}
$$jscomp$inherits$$($AmpLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$.prototype;$JSCompiler_prototypeAlias$$.renderOutsideViewport=function(){return!0};
$JSCompiler_prototypeAlias$$.buildCallback=function(){var $$jscomp$this$jscomp$568$$=this;this.$manager_$=$manager_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$;this.$history_$=$Services$$module$src$services$historyForDoc$$(this.getAmpDoc());this.$action_$=$Services$$module$src$services$actionServiceForDoc$$(this.element);$Services$$module$src$services$viewerForDoc$$(this.getAmpDoc()).whenFirstVisible().then(function(){$$jscomp$this$jscomp$568$$.$container_$=$$jscomp$this$jscomp$568$$.win.document.createElement("div");
$$jscomp$this$jscomp$568$$.$container_$.classList.add("i-amphtml-lbg");$$jscomp$this$jscomp$568$$.element.appendChild($$jscomp$this$jscomp$568$$.$container_$);$$jscomp$this$jscomp$568$$.$manager_$.maybeInit();$JSCompiler_StaticMethods_buildMask_$$($$jscomp$this$jscomp$568$$);$$jscomp$this$jscomp$568$$.registerAction("open",function($invocation$jscomp$35$$){return $$jscomp$this$jscomp$568$$.activate($invocation$jscomp$35$$)})})};$JSCompiler_prototypeAlias$$.layoutCallback=function(){return Promise.resolve()};
function $JSCompiler_StaticMethods_buildControls_$$($JSCompiler_StaticMethods_buildControls_$self$$){$JSCompiler_StaticMethods_buildControls_$self$$.$controlsContainer_$=$JSCompiler_StaticMethods_buildControls_$self$$.win.document.createElement("div");$JSCompiler_StaticMethods_buildControls_$self$$.$controlsContainer_$.classList.add("i-amphtml-lbg-controls");$JSCompiler_StaticMethods_buildDescriptionBox_$$($JSCompiler_StaticMethods_buildControls_$self$$);$JSCompiler_StaticMethods_buildControls_$self$$.$buildTopBar_$();
$JSCompiler_StaticMethods_buildNavControls_$$($JSCompiler_StaticMethods_buildControls_$self$$);$JSCompiler_StaticMethods_buildControls_$self$$.mutateElement(function(){$JSCompiler_StaticMethods_buildControls_$self$$.$container_$.appendChild($JSCompiler_StaticMethods_buildControls_$self$$.$controlsContainer_$)})}
function $JSCompiler_StaticMethods_buildMask_$$($JSCompiler_StaticMethods_buildMask_$self$$){var $mask$jscomp$7$$=$JSCompiler_StaticMethods_buildMask_$self$$.win.document.createElement("div");$mask$jscomp$7$$.classList.add("i-amphtml-lbg-mask");$JSCompiler_StaticMethods_buildMask_$self$$.$container_$.appendChild($mask$jscomp$7$$)}
function $JSCompiler_StaticMethods_buildCarouselSlides_$$($JSCompiler_StaticMethods_buildCarouselSlides_$self$$,$lightboxableElements$$){var $index$jscomp$101$$=0;$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$elementsMetadata_$[$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$currentLightboxGroupId_$]=[];$lightboxableElements$$.forEach(function($lightboxableElements$$){$lightboxableElements$$.sa=$index$jscomp$101$$++;var $element$jscomp$370_metadata$jscomp$3$$=!$lightboxableElements$$.classList.contains("i-amphtml-element"),
$element$jscomp$370_metadata$jscomp$3$$=$lightboxableElements$$.cloneNode($element$jscomp$370_metadata$jscomp$3$$);$element$jscomp$370_metadata$jscomp$3$$.removeAttribute("on");$element$jscomp$370_metadata$jscomp$3$$.removeAttribute("id");var $descText$$=$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$manager_$.getDescription($lightboxableElements$$);$lightboxableElements$$={descriptionText:$descText$$,tagName:$element$jscomp$370_metadata$jscomp$3$$.tagName,sourceElement:$lightboxableElements$$,
element:$element$jscomp$370_metadata$jscomp$3$$};var $container$jscomp$11_slide$jscomp$3$$=$element$jscomp$370_metadata$jscomp$3$$;if($ELIGIBLE_TAP_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$element$jscomp$370_metadata$jscomp$3$$.tagName]){var $container$jscomp$11_slide$jscomp$3$$=$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.element.ownerDocument.createElement("div"),$imageViewer$$=$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.win.document.createElement("amp-image-viewer");
$imageViewer$$.setAttribute("layout","fill");$element$jscomp$370_metadata$jscomp$3$$.removeAttribute("class");$imageViewer$$.appendChild($element$jscomp$370_metadata$jscomp$3$$);$container$jscomp$11_slide$jscomp$3$$.appendChild($imageViewer$$);$lightboxableElements$$.imageViewer=$imageViewer$$}$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$carousel_$.appendChild($container$jscomp$11_slide$jscomp$3$$);$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$elementsMetadata_$[$JSCompiler_StaticMethods_buildCarouselSlides_$self$$.$currentLightboxGroupId_$].push($lightboxableElements$$)})}
function $JSCompiler_StaticMethods_findOrBuildCarousel_$$($JSCompiler_StaticMethods_findOrBuildCarousel_$self$$,$lightboxGroupId$jscomp$7$$){var $existingCarousel$$=$JSCompiler_StaticMethods_findOrBuildCarousel_$self$$.element.querySelector("amp-carousel[amp-lightbox-group="+$cssEscape$$module$third_party$css_escape$css_escape$$($lightboxGroupId$jscomp$7$$)+"]");return $existingCarousel$$?($JSCompiler_StaticMethods_findOrBuildCarousel_$self$$.$carousel_$=$existingCarousel$$,$JSCompiler_StaticMethods_findOrBuildCarousel_$self$$.$carousel_$.getImpl().then(function($lightboxGroupId$jscomp$7$$){return $JSCompiler_StaticMethods_findOrBuildCarousel_$self$$.mutateElement(function(){$JSCompiler_StaticMethods_toggleNavControls_$$($JSCompiler_StaticMethods_findOrBuildCarousel_$self$$,
$lightboxGroupId$jscomp$7$$.$noOfSlides_$);$toggle$$module$src$style$$($JSCompiler_StaticMethods_findOrBuildCarousel_$self$$.$carousel_$,!0)})})):$JSCompiler_StaticMethods_buildCarousel_$$($JSCompiler_StaticMethods_findOrBuildCarousel_$self$$,$lightboxGroupId$jscomp$7$$)}
function $JSCompiler_StaticMethods_buildCarousel_$$($JSCompiler_StaticMethods_buildCarousel_$self$$,$lightboxGroupId$jscomp$8$$){return Promise.all([$Services$$module$src$services$extensionsFor$$($JSCompiler_StaticMethods_buildCarousel_$self$$.win).installExtensionForDoc($JSCompiler_StaticMethods_buildCarousel_$self$$.getAmpDoc(),"amp-carousel"),$Services$$module$src$services$extensionsFor$$($JSCompiler_StaticMethods_buildCarousel_$self$$.win).installExtensionForDoc($JSCompiler_StaticMethods_buildCarousel_$self$$.getAmpDoc(),
"amp-image-viewer")]).then(function(){return $JSCompiler_StaticMethods_buildCarousel_$self$$.$manager_$.getElementsForLightboxGroup($lightboxGroupId$jscomp$8$$)}).then(function($list$jscomp$6$$){$JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$=$JSCompiler_StaticMethods_buildCarousel_$self$$.win.document.createElement("amp-carousel");$JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$.setAttribute("type","slides");$JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$.setAttribute("layout",
"fill");$JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$.setAttribute("loop","");$JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$.setAttribute("amp-lightbox-group",$lightboxGroupId$jscomp$8$$);$JSCompiler_StaticMethods_buildCarouselSlides_$$($JSCompiler_StaticMethods_buildCarousel_$self$$,$list$jscomp$6$$);return $JSCompiler_StaticMethods_buildCarousel_$self$$.mutateElement(function(){$JSCompiler_StaticMethods_buildCarousel_$self$$.$carouselContainer_$.appendChild($JSCompiler_StaticMethods_buildCarousel_$self$$.$carousel_$);
$JSCompiler_StaticMethods_toggleNavControls_$$($JSCompiler_StaticMethods_buildCarousel_$self$$,$list$jscomp$6$$.length)})})}function $JSCompiler_StaticMethods_toggleNavControls_$$($JSCompiler_StaticMethods_toggleNavControls_$self$$,$noOfChildren$$){1<$noOfChildren$$?$JSCompiler_StaticMethods_toggleNavControls_$self$$.$controlsContainer_$.classList.remove("i-amphtml-lbg-single"):$JSCompiler_StaticMethods_toggleNavControls_$self$$.$controlsContainer_$.classList.add("i-amphtml-lbg-single")}
function $JSCompiler_StaticMethods_buildDescriptionBox_$$($JSCompiler_StaticMethods_buildDescriptionBox_$self$$){$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$=$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.win.document.createElement("div");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$.classList.add("i-amphtml-lbg-desc-box");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$.classList.add("i-amphtml-lbg-standard");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionTextArea_$=
$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.win.document.createElement("div");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionTextArea_$.classList.add("i-amphtml-lbg-desc-text");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionOverflowMask_$=$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.win.document.createElement("div");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionOverflowMask_$.classList.add("i-amphtml-lbg-desc-mask");$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$.appendChild($JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionOverflowMask_$);
$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$.appendChild($JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionTextArea_$);$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$.addEventListener("click",function($event$jscomp$112$$){$JSCompiler_StaticMethods_toggleDescriptionOverflow_$$($JSCompiler_StaticMethods_buildDescriptionBox_$self$$);$event$jscomp$112$$.stopPropagation()});$JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$controlsContainer_$.appendChild($JSCompiler_StaticMethods_buildDescriptionBox_$self$$.$descriptionBox_$)}
function $JSCompiler_StaticMethods_updateDescriptionBox_$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$){var $descText$jscomp$1$$=$JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$).descriptionText;$descText$jscomp$1$$?$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.mutateElement(function(){$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionTextArea_$.innerText=$descText$jscomp$1$$;$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$.classList.remove("i-amphtml-lbg-fade-out");
$toggle$$module$src$style$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$,!0)}).then(function(){function $descText$jscomp$1$$(){$setStyles$$module$src$style$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionOverflowMask_$,{visibility:$descriptionOverflows$$||$isInOverflowMode$$?"visible":"hidden"});$isInOverflowMode$$&&$JSCompiler_StaticMethods_clearDescOverflowState_$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$)}function $measureOverflowState$$(){$descriptionOverflows$$=
$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$.scrollHeight-$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$.clientHeight>=$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionOverflowMask_$.clientHeight;$isInOverflowMode$$=$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$.classList.contains("i-amphtml-lbg-overflow")}var $descriptionOverflows$$,$isInOverflowMode$$;$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.measureMutateElement($measureOverflowState$$,
$descText$jscomp$1$$)}):$JSCompiler_StaticMethods_updateDescriptionBox_$self$$.mutateElement(function(){$toggle$$module$src$style$$($JSCompiler_StaticMethods_updateDescriptionBox_$self$$.$descriptionBox_$,!1)})}
function $JSCompiler_StaticMethods_toggleDescriptionOverflow_$$($JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$){var $isInStandardMode$$,$isInOverflowMode$jscomp$1$$,$descriptionOverflows$jscomp$1$$;$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.measureMutateElement(function(){$isInStandardMode$$=$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.classList.contains("i-amphtml-lbg-standard");$isInOverflowMode$jscomp$1$$=$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.classList.contains("i-amphtml-lbg-overflow");
$descriptionOverflows$jscomp$1$$=$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.scrollHeight-$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.clientHeight>=$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionOverflowMask_$.clientHeight},function(){$isInStandardMode$$&&$descriptionOverflows$jscomp$1$$?($JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.classList.remove("i-amphtml-lbg-standard"),
$JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$descriptionBox_$.classList.add("i-amphtml-lbg-overflow"),$toggle$$module$src$style$$($JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$navControls_$,!1),$toggle$$module$src$style$$($JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$.$topBar_$,!1)):$isInOverflowMode$jscomp$1$$&&$JSCompiler_StaticMethods_clearDescOverflowState_$$($JSCompiler_StaticMethods_toggleDescriptionOverflow_$self$$)})}
function $JSCompiler_StaticMethods_clearDescOverflowState_$$($JSCompiler_StaticMethods_clearDescOverflowState_$self$$){$JSCompiler_StaticMethods_clearDescOverflowState_$self$$.$descriptionBox_$.scrollTop=0;$JSCompiler_StaticMethods_clearDescOverflowState_$self$$.$descriptionBox_$.classList.remove("i-amphtml-lbg-overflow");$JSCompiler_StaticMethods_clearDescOverflowState_$self$$.$descriptionBox_$.classList.add("i-amphtml-lbg-standard");$toggle$$module$src$style$$($JSCompiler_StaticMethods_clearDescOverflowState_$self$$.$navControls_$,
!0);$toggle$$module$src$style$$($JSCompiler_StaticMethods_clearDescOverflowState_$self$$.$topBar_$,!0)}$JSCompiler_prototypeAlias$$.$nextSlide_$=function(){this.$carousel_$.getImpl().then(function($carousel$jscomp$1$$){$carousel$jscomp$1$$.interactionNext()})};$JSCompiler_prototypeAlias$$.$prevSlide_$=function(){this.$carousel_$.getImpl().then(function($carousel$jscomp$2$$){$carousel$jscomp$2$$.interactionPrev()})};
function $JSCompiler_StaticMethods_buildNavControls_$$($JSCompiler_StaticMethods_buildNavControls_$self$$){$JSCompiler_StaticMethods_buildNavControls_$self$$.$navControls_$=$JSCompiler_StaticMethods_buildNavControls_$self$$.win.document.createElement("div");var $nextSlide$$=$JSCompiler_StaticMethods_buildNavControls_$self$$.$nextSlide_$.bind($JSCompiler_StaticMethods_buildNavControls_$self$$),$prevSlide$$=$JSCompiler_StaticMethods_buildNavControls_$self$$.$prevSlide_$.bind($JSCompiler_StaticMethods_buildNavControls_$self$$),
$nextButton$$=$JSCompiler_StaticMethods_buildButton_$$($JSCompiler_StaticMethods_buildNavControls_$self$$,"Next","i-amphtml-lbg-button-next",$nextSlide$$),$prevButton$$=$JSCompiler_StaticMethods_buildButton_$$($JSCompiler_StaticMethods_buildNavControls_$self$$,"Prev","i-amphtml-lbg-button-prev",$prevSlide$$);$getService$$module$src$service$$($JSCompiler_StaticMethods_buildNavControls_$self$$.win,"input").isMouseDetected()||($prevButton$$.classList.add("i-amphtml-screen-reader"),$nextButton$$.classList.add("i-amphtml-screen-reader"));
$JSCompiler_StaticMethods_buildNavControls_$self$$.$navControls_$.appendChild($prevButton$$);$JSCompiler_StaticMethods_buildNavControls_$self$$.$navControls_$.appendChild($nextButton$$);$JSCompiler_StaticMethods_buildNavControls_$self$$.$controlsContainer_$.appendChild($JSCompiler_StaticMethods_buildNavControls_$self$$.$navControls_$)}
$JSCompiler_prototypeAlias$$.$buildTopBar_$=function(){this.$topBar_$=this.win.document.createElement("div");this.$topBar_$.classList.add("i-amphtml-lbg-top-bar");var $close$$=this.$close_$.bind(this),$openGallery$$=this.$openGallery_$.bind(this),$closeGallery$$=this.$closeGallery_$.bind(this),$closeButton$$=$JSCompiler_StaticMethods_buildButton_$$(this,"Close","i-amphtml-lbg-button-close",$close$$),$openGalleryButton$$=$JSCompiler_StaticMethods_buildButton_$$(this,"Gallery","i-amphtml-lbg-button-gallery",
$openGallery$$),$closeGalleryButton$$=$JSCompiler_StaticMethods_buildButton_$$(this,"Content","i-amphtml-lbg-button-slide",$closeGallery$$);this.$topBar_$.appendChild($closeButton$$);this.$topBar_$.appendChild($openGalleryButton$$);this.$topBar_$.appendChild($closeGalleryButton$$);this.$controlsContainer_$.appendChild(this.$topBar_$)};
function $JSCompiler_StaticMethods_buildButton_$$($JSCompiler_StaticMethods_buildButton_$self$$,$label$jscomp$8$$,$className$jscomp$7$$,$action$jscomp$16$$){var $button$jscomp$1$$=$JSCompiler_StaticMethods_buildButton_$self$$.win.document.createElement("div");$button$jscomp$1$$.setAttribute("role","button");$button$jscomp$1$$.setAttribute("aria-label",$label$jscomp$8$$);var $icon$$=$JSCompiler_StaticMethods_buildButton_$self$$.win.document.createElement("span");$icon$$.classList.add("i-amphtml-lbg-icon");
$button$jscomp$1$$.appendChild($icon$$);$button$jscomp$1$$.classList.add($className$jscomp$7$$);$button$jscomp$1$$.classList.add("i-amphtml-lbg-button");$button$jscomp$1$$.addEventListener("click",function($JSCompiler_StaticMethods_buildButton_$self$$){$action$jscomp$16$$();$JSCompiler_StaticMethods_buildButton_$self$$.stopPropagation();$JSCompiler_StaticMethods_buildButton_$self$$.preventDefault()});return $button$jscomp$1$$}
$JSCompiler_prototypeAlias$$.$shouldHandleClick_$=function($e$jscomp$250_target$jscomp$143$$){$e$jscomp$250_target$jscomp$143$$=$e$jscomp$250_target$jscomp$143$$.target;var $consumingElement$$=$closest$$module$src$dom$$($e$jscomp$250_target$jscomp$143$$,function($e$jscomp$250_target$jscomp$143$$){return"BUTTON"==$e$jscomp$250_target$jscomp$143$$.tagName||"A"==$e$jscomp$250_target$jscomp$143$$.tagName||"button"==$e$jscomp$250_target$jscomp$143$$.getAttribute("role")},this.$container_$),$clickConsumed$$=
null!==$consumingElement$$,$hasTap$$=this.$action_$.hasAction($e$jscomp$250_target$jscomp$143$$,"tap",this.$container_$);return!($clickConsumed$$||$hasTap$$)};$JSCompiler_prototypeAlias$$.$onToggleControls_$=function($e$jscomp$251$$){this.$shouldHandleClick_$($e$jscomp$251$$)&&(0==this.$controlsMode_$?this.$showControls_$():this.$container_$.hasAttribute("gallery-view")||this.$hideControls_$())};
$JSCompiler_prototypeAlias$$.$showControls_$=function(){this.$controlsContainer_$.classList.remove("i-amphtml-lbg-fade-out");this.$controlsContainer_$.classList.remove("i-amphtml-lbg-hidden");this.$controlsContainer_$.classList.add("i-amphtml-lbg-fade-in");this.$container_$.hasAttribute("gallery-view")||$JSCompiler_StaticMethods_updateDescriptionBox_$$(this);this.$controlsMode_$=1};
$JSCompiler_prototypeAlias$$.$hideControls_$=function(){this.$controlsContainer_$.classList.remove("i-amphtml-lbg-fade-in");this.$controlsContainer_$.classList.add("i-amphtml-lbg-fade-out");this.$controlsMode_$=0};
function $JSCompiler_StaticMethods_setupEventListeners_$$($JSCompiler_StaticMethods_setupEventListeners_$self$$){var $onToggleControls$$=$JSCompiler_StaticMethods_setupEventListeners_$self$$.$onToggleControls_$.bind($JSCompiler_StaticMethods_setupEventListeners_$self$$);$JSCompiler_StaticMethods_setupEventListeners_$self$$.$unlistenClick_$=$internalListenImplementation$$module$src$event_helper_listen$$($JSCompiler_StaticMethods_setupEventListeners_$self$$.$container_$,"click",$onToggleControls$$,
void 0)}$JSCompiler_prototypeAlias$$.$setupGestures_$=function(){var $$jscomp$this$jscomp$576$$=this;$Gestures$$module$src$gesture$get$$(this.$carousel_$).onGesture($SwipeYRecognizer$$module$src$gesture_recognizers$$,function($e$jscomp$252$$){$e$jscomp$252$$.data.last&&$$jscomp$this$jscomp$576$$.$onMoveRelease_$($e$jscomp$252$$.data.deltaY)})};
function $JSCompiler_StaticMethods_pauseLightboxChildren_$$($JSCompiler_StaticMethods_pauseLightboxChildren_$self$$){var $lbgId$$=$JSCompiler_StaticMethods_pauseLightboxChildren_$self$$.$currentLightboxGroupId_$,$slides$jscomp$1$$=$JSCompiler_StaticMethods_pauseLightboxChildren_$self$$.$elementsMetadata_$[$lbgId$$].map(function($JSCompiler_StaticMethods_pauseLightboxChildren_$self$$){return $JSCompiler_StaticMethods_pauseLightboxChildren_$self$$.element});$JSCompiler_StaticMethods_pauseLightboxChildren_$self$$.schedulePause($slides$jscomp$1$$)}
function $JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_getCurrentElement_$self$$){return $JSCompiler_StaticMethods_getCurrentElement_$self$$.$elementsMetadata_$[$JSCompiler_StaticMethods_getCurrentElement_$self$$.$currentLightboxGroupId_$][$JSCompiler_StaticMethods_getCurrentElement_$self$$.$currentElemId_$]}$JSCompiler_prototypeAlias$$.$onMoveRelease_$=function($deltaY$jscomp$14$$){10<Math.abs($deltaY$jscomp$14$$)&&this.$close_$()};
$JSCompiler_prototypeAlias$$.activate=function($invocation$jscomp$36_targetId$jscomp$3$$){var $$jscomp$this$jscomp$577$$=this,$target$jscomp$144$$=$invocation$jscomp$36_targetId$jscomp$3$$.caller;$invocation$jscomp$36_targetId$jscomp$3$$.args&&$invocation$jscomp$36_targetId$jscomp$3$$.args.id&&($invocation$jscomp$36_targetId$jscomp$3$$=$invocation$jscomp$36_targetId$jscomp$3$$.args.id,$target$jscomp$144$$=this.getAmpDoc().getElementById($invocation$jscomp$36_targetId$jscomp$3$$),$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($target$jscomp$144$$,
"amp-lightbox-gallery.open: element with id: %s not found",$invocation$jscomp$36_targetId$jscomp$3$$));this.$open_$($target$jscomp$144$$).then(function(){return $$jscomp$this$jscomp$577$$.$history_$.push($$jscomp$this$jscomp$577$$.$close_$.bind($$jscomp$this$jscomp$577$$))}).then(function($invocation$jscomp$36_targetId$jscomp$3$$){$$jscomp$this$jscomp$577$$.$historyId_$=$invocation$jscomp$36_targetId$jscomp$3$$})};
$JSCompiler_prototypeAlias$$.$open_$=function($element$jscomp$372$$){var $$jscomp$this$jscomp$578$$=this;this.$sourceElement_$=$element$jscomp$372$$;var $lightboxGroupId$jscomp$9$$=$element$jscomp$372$$.getAttribute("lightbox")||"default";this.$currentLightboxGroupId_$=$lightboxGroupId$jscomp$9$$;this.$carouselContainer_$||(this.$carouselContainer_$=this.win.document.createElement("div"),this.$container_$.appendChild(this.$carouselContainer_$));this.$controlsContainer_$||$JSCompiler_StaticMethods_buildControls_$$(this);
return $JSCompiler_StaticMethods_findOrBuildCarousel_$$(this,$lightboxGroupId$jscomp$9$$).then(function(){return $$jscomp$this$jscomp$578$$.mutateElement(function(){$toggle$$module$src$style$$($$jscomp$this$jscomp$578$$.element,!0);$setStyles$$module$src$style$$($$jscomp$this$jscomp$578$$.element,{opacity:0,display:""});$$jscomp$this$jscomp$578$$.$controlsContainer_$.classList.remove("i-amphtml-lbg-fade-in");$$jscomp$this$jscomp$578$$.$controlsContainer_$.classList.add("i-amphtml-lbg-hidden")})}).then(function(){$$jscomp$this$jscomp$578$$.getViewport().enterLightboxMode();
$$jscomp$this$jscomp$578$$.$isActive_$=!0;$$jscomp$this$jscomp$578$$.updateInViewport($$jscomp$this$jscomp$578$$.$container_$,!0);$$jscomp$this$jscomp$578$$.scheduleLayout($$jscomp$this$jscomp$578$$.$container_$);$$jscomp$this$jscomp$578$$.win.document.documentElement.addEventListener("keydown",$$jscomp$this$jscomp$578$$.$boundOnKeyDown_$);$$jscomp$this$jscomp$578$$.$carousel_$.addEventListener("slideChange",function($element$jscomp$372$$){$$jscomp$this$jscomp$578$$.$currentElemId_$=$element$jscomp$372$$.data.index;
$JSCompiler_StaticMethods_updateDescriptionBox_$$($$jscomp$this$jscomp$578$$)});$$jscomp$this$jscomp$578$$.$setupGestures_$();$JSCompiler_StaticMethods_setupEventListeners_$$($$jscomp$this$jscomp$578$$);return $$jscomp$this$jscomp$578$$.$carousel_$.signals().whenSignal("load-end")}).then(function(){return $JSCompiler_StaticMethods_openLightboxForElement_$$($$jscomp$this$jscomp$578$$,$element$jscomp$372$$)}).then(function(){return $$jscomp$this$jscomp$578$$.$showControls_$()})};
function $JSCompiler_StaticMethods_openLightboxForElement_$$($JSCompiler_StaticMethods_openLightboxForElement_$self$$,$element$jscomp$373$$){$JSCompiler_StaticMethods_openLightboxForElement_$self$$.$currentElemId_$=$element$jscomp$373$$.sa;$JSCompiler_StaticMethods_openLightboxForElement_$self$$.$carousel_$.getImpl().then(function($element$jscomp$373$$){return $element$jscomp$373$$.showSlideWhenReady($JSCompiler_StaticMethods_openLightboxForElement_$self$$.$currentElemId_$)});$JSCompiler_StaticMethods_updateDescriptionBox_$$($JSCompiler_StaticMethods_openLightboxForElement_$self$$);
return $JSCompiler_StaticMethods_openLightboxForElement_$self$$.$enter_$()}function $JSCompiler_StaticMethods_elementTypeCanBeAnimated_$$($element$jscomp$374$$){return $element$jscomp$374$$&&$isLoaded$$module$src$event_helper$$($element$jscomp$374$$)&&$ELIGIBLE_TAP_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$element$jscomp$374$$.tagName]&&$elementByTag$$module$src$dom$$($element$jscomp$374$$,"img")?!0:!1}
function $JSCompiler_StaticMethods_shouldAnimate_$$($JSCompiler_StaticMethods_shouldAnimate_$self$$,$element$jscomp$375$$){var $img$jscomp$6$$=$elementByTag$$module$src$dom$$($element$jscomp$375$$,"img");return $JSCompiler_StaticMethods_shouldAnimate_$self$$.measureElement(function(){var $JSCompiler_StaticMethods_shouldAnimate_$self$$=$img$jscomp$6$$.naturalWidth/$img$jscomp$6$$.naturalHeight,$elementHeight$$=$element$jscomp$375$$.offsetHeight,$elementWidth$$=$element$jscomp$375$$.offsetWidth,$ampImageAspectRatio$$=
$elementWidth$$/$elementHeight$$;return.01>Math.abs($JSCompiler_StaticMethods_shouldAnimate_$self$$-$ampImageAspectRatio$$)})}
function $JSCompiler_StaticMethods_shouldExit_$$($JSCompiler_StaticMethods_shouldExit_$self$$){var $target$jscomp$145$$=$JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_shouldExit_$self$$).sourceElement;return $JSCompiler_StaticMethods_transitionTargetIsInViewport_$$($JSCompiler_StaticMethods_shouldExit_$self$$,$target$jscomp$145$$)&&$JSCompiler_StaticMethods_elementTypeCanBeAnimated_$$($target$jscomp$145$$)?$JSCompiler_StaticMethods_shouldAnimate_$$($JSCompiler_StaticMethods_shouldExit_$self$$,
$target$jscomp$145$$).then(function($JSCompiler_StaticMethods_shouldExit_$self$$){return $JSCompiler_StaticMethods_shouldExit_$self$$}):Promise.resolve(!1)}
function $JSCompiler_StaticMethods_transitionTargetIsInViewport_$$($JSCompiler_StaticMethods_transitionTargetIsInViewport_$self$$,$target$jscomp$146$$){if($target$jscomp$146$$==$JSCompiler_StaticMethods_transitionTargetIsInViewport_$self$$.$sourceElement_$||$target$jscomp$146$$.isInViewport())return!0;var $parentCarousel$$=$closestBySelector$$module$src$dom$$($target$jscomp$146$$,'amp-carousel[type="slides"]');return $parentCarousel$$&&$parentCarousel$$.isInViewport()?!0:!1}
function $JSCompiler_StaticMethods_transitionIn_$$($JSCompiler_StaticMethods_transitionIn_$self$$,$sourceElement$jscomp$2$$){var $anim$jscomp$3$$=new $Animation$$module$src$animation$$($JSCompiler_StaticMethods_transitionIn_$self$$.element),$duration$jscomp$18$$=500,$transLayer$jscomp$2$$=$JSCompiler_StaticMethods_transitionIn_$self$$.element.ownerDocument.createElement("div");$transLayer$jscomp$2$$.classList.add("i-amphtml-lightbox-gallery-trans");var $sourceImg$$=$childElementByTag$$module$src$dom$$($sourceElement$jscomp$2$$,
"img"),$clone$jscomp$4$$=$sourceImg$$.cloneNode(!0);$clone$jscomp$4$$.removeAttribute("class");$transLayer$jscomp$2$$.appendChild($clone$jscomp$4$$);return $JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_transitionIn_$self$$).imageViewer.getImpl().then(function($sourceImg$$){var $imageViewer$jscomp$1$$=$sourceImg$$.getImageBoxWithOffset();if(!$imageViewer$jscomp$1$$)return $JSCompiler_StaticMethods_fade_$$($JSCompiler_StaticMethods_transitionIn_$self$$,0,1);$anim$jscomp$3$$.add(0,
$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_transitionIn_$self$$.element,{opacity:$numeric$$module$src$transition$$(0,1)}),.8,$ENTER_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$);$anim$jscomp$3$$.add(.79,$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_transitionIn_$self$$.$carousel_$,{opacity:$numeric$$module$src$transition$$(0,1)}),.01);$anim$jscomp$3$$.add(.9,$setStyles$$module$src$transition$$($transLayer$jscomp$2$$,{opacity:$numeric$$module$src$transition$$(1,
.01)}),.1,$EXIT_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$);return $JSCompiler_StaticMethods_transitionIn_$self$$.measureMutateElement(function(){var $transLayer$jscomp$2$$=$layoutRectFromDomRect$$module$src$layout_rect$$($sourceElement$jscomp$2$$.getBoundingClientRect());$setStyles$$module$src$style$$($clone$jscomp$4$$,{position:"absolute",top:$px$$module$src$style$$($transLayer$jscomp$2$$.top),left:$px$$module$src$style$$($transLayer$jscomp$2$$.left),width:$px$$module$src$style$$($transLayer$jscomp$2$$.width),
height:$px$$module$src$style$$($transLayer$jscomp$2$$.height),transformOrigin:"top left",willChange:"transform"});var $sourceImg$$=$imageViewer$jscomp$1$$.left-$transLayer$jscomp$2$$.left,$imageBox$jscomp$2$$=$imageViewer$jscomp$1$$.top-$transLayer$jscomp$2$$.top,$transLayer$jscomp$2$$=$transLayer$jscomp$2$$.width?$imageViewer$jscomp$1$$.width/$transLayer$jscomp$2$$.width:1,$viewportHeight$jscomp$7$$=$JSCompiler_StaticMethods_transitionIn_$self$$.getViewport().getSize().height;$duration$jscomp$18$$=
$JSCompiler_StaticMethods_transitionIn_$self$$.$getTransitionDuration_$(Math.abs($imageBox$jscomp$2$$),$viewportHeight$jscomp$7$$);$anim$jscomp$3$$.add(0,$setStyles$$module$src$transition$$($clone$jscomp$4$$,{transform:$concat$$module$src$transition$$([$translate$$module$src$transition$$($numeric$$module$src$transition$$(0,$sourceImg$$),$numeric$$module$src$transition$$(0,$imageBox$jscomp$2$$)),$scale$$module$src$transition$$($numeric$$module$src$transition$$(1,$transLayer$jscomp$2$$))])}),.8,$ENTER_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$)},
function(){$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionIn_$self$$.$carousel_$,{opacity:0,display:""});$sourceElement$jscomp$2$$.classList.add("i-amphtml-ghost");$JSCompiler_StaticMethods_transitionIn_$self$$.element.ownerDocument.body.appendChild($transLayer$jscomp$2$$)})}).then(function(){return $JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($anim$jscomp$3$$.start($duration$jscomp$18$$),function(){return $JSCompiler_StaticMethods_transitionIn_$self$$.mutateElement(function(){$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionIn_$self$$.element,
{opacity:""});$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionIn_$self$$.$carousel_$,{opacity:""});$sourceElement$jscomp$2$$.classList.remove("i-amphtml-ghost");$transLayer$jscomp$2$$&&$JSCompiler_StaticMethods_transitionIn_$self$$.element.ownerDocument.body.removeChild($transLayer$jscomp$2$$)})})})}
function $JSCompiler_StaticMethods_fade_$$($JSCompiler_StaticMethods_fade_$self$$,$startOpacity$$,$endOpacity$$){var $anim$jscomp$4$$=new $Animation$$module$src$animation$$($JSCompiler_StaticMethods_fade_$self$$.element);$anim$jscomp$4$$.add(0,$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_fade_$self$$.element,{opacity:$numeric$$module$src$transition$$($startOpacity$$,$endOpacity$$)}),.8,$ENTER_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$);return $JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($anim$jscomp$4$$.start(500),
function(){return $JSCompiler_StaticMethods_fade_$self$$.mutateElement(function(){$setStyles$$module$src$style$$($JSCompiler_StaticMethods_fade_$self$$.element,{opacity:""});$endOpacity$$||($toggle$$module$src$style$$($JSCompiler_StaticMethods_fade_$self$$.$carousel_$,!1),$toggle$$module$src$style$$($JSCompiler_StaticMethods_fade_$self$$.element,!1))})})}
$JSCompiler_prototypeAlias$$.$enter_$=function(){var $$jscomp$this$jscomp$582$$=this,$sourceElement$jscomp$3$$=$JSCompiler_StaticMethods_getCurrentElement_$$(this).sourceElement;if(!$JSCompiler_StaticMethods_elementTypeCanBeAnimated_$$($sourceElement$jscomp$3$$))return $JSCompiler_StaticMethods_fade_$$(this,0,1);var $promises$jscomp$18$$=[$JSCompiler_StaticMethods_shouldAnimate_$$(this,$sourceElement$jscomp$3$$),$JSCompiler_StaticMethods_getCurrentElement_$$(this).imageViewer.signals().whenSignal("load-end")];
return Promise.all($promises$jscomp$18$$).then(function($promises$jscomp$18$$){return $promises$jscomp$18$$[0]?$JSCompiler_StaticMethods_transitionIn_$$($$jscomp$this$jscomp$582$$,$sourceElement$jscomp$3$$):$JSCompiler_StaticMethods_fade_$$($$jscomp$this$jscomp$582$$,0,1)})};
function $JSCompiler_StaticMethods_transitionOut_$$($JSCompiler_StaticMethods_transitionOut_$self$$){var $currentElementMetadata$$=$JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_transitionOut_$self$$),$sourceElement$jscomp$4$$=$currentElementMetadata$$.sourceElement,$duration$jscomp$20$$=500,$anim$jscomp$5$$=new $Animation$$module$src$animation$$($JSCompiler_StaticMethods_transitionOut_$self$$.element),$transLayer$jscomp$3$$=$JSCompiler_StaticMethods_transitionOut_$self$$.element.ownerDocument.createElement("div");
$transLayer$jscomp$3$$.classList.add("i-amphtml-lightbox-gallery-trans");return $currentElementMetadata$$.imageViewer.getImpl().then(function($currentElementMetadata$$){function $image$jscomp$10_imageViewer$jscomp$2$$(){$sourceElement$jscomp$4$$.classList.add("i-amphtml-ghost");$JSCompiler_StaticMethods_transitionOut_$self$$.element.ownerDocument.body.appendChild($transLayer$jscomp$3$$);$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionOut_$self$$.$carousel_$,{opacity:0})}function $transitionMeasure$$(){var $currentElementMetadata$$=
$layoutRectFromDomRect$$module$src$layout_rect$$($sourceElement$jscomp$4$$.getBoundingClientRect()),$transLayer$jscomp$3$$=$currentElementMetadata$$.left-$imageBox$jscomp$3$$.left,$image$jscomp$10_imageViewer$jscomp$2$$=$currentElementMetadata$$.top-$imageBox$jscomp$3$$.top,$currentElementMetadata$$=0!=$imageBox$jscomp$3$$.width?$currentElementMetadata$$.width/$imageBox$jscomp$3$$.width:1,$transitionMutate$$=$JSCompiler_StaticMethods_transitionOut_$self$$.getViewport().getSize().height;$duration$jscomp$20$$=
$JSCompiler_StaticMethods_transitionOut_$self$$.$getTransitionDuration_$(Math.abs($image$jscomp$10_imageViewer$jscomp$2$$),$transitionMutate$$);var $transitionMeasure$$=$setStyles$$module$src$transition$$($clone$jscomp$5$$,{transform:$concat$$module$src$transition$$([$translate$$module$src$transition$$($numeric$$module$src$transition$$(0,$transLayer$jscomp$3$$),$numeric$$module$src$transition$$(0,$image$jscomp$10_imageViewer$jscomp$2$$)),$scale$$module$src$transition$$($numeric$$module$src$transition$$(1,
$currentElementMetadata$$))])});$anim$jscomp$5$$.add(0,function($JSCompiler_StaticMethods_transitionOut_$self$$,$currentElementMetadata$$){$transitionMeasure$$($JSCompiler_StaticMethods_transitionOut_$self$$);$currentElementMetadata$$&&$sourceElement$jscomp$4$$.classList.remove("i-amphtml-ghost")},.8,$EXIT_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$)}var $imageBox$jscomp$3$$=$currentElementMetadata$$.getImageBoxWithOffset();$currentElementMetadata$$=$currentElementMetadata$$.getImage();
if(!$imageBox$jscomp$3$$)return $JSCompiler_StaticMethods_fade_$$($JSCompiler_StaticMethods_transitionOut_$self$$,1,0);var $clone$jscomp$5$$=$currentElementMetadata$$.cloneNode(!0);$clone$jscomp$5$$.removeAttribute("class");$clone$jscomp$5$$.removeAttribute("style");$setStyles$$module$src$style$$($clone$jscomp$5$$,{position:"absolute",top:$px$$module$src$style$$($imageBox$jscomp$3$$.top),left:$px$$module$src$style$$($imageBox$jscomp$3$$.left),width:$px$$module$src$style$$($imageBox$jscomp$3$$.width),
height:$px$$module$src$style$$($imageBox$jscomp$3$$.height),transform:"",transformOrigin:"top left",willChange:"transform"});$transLayer$jscomp$3$$.appendChild($clone$jscomp$5$$);$anim$jscomp$5$$.add(0,$setStyles$$module$src$transition$$($JSCompiler_StaticMethods_transitionOut_$self$$.element,{opacity:$numeric$$module$src$transition$$(1,0)}),.8,$ENTER_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$);$anim$jscomp$5$$.add(.8,$setStyles$$module$src$transition$$($transLayer$jscomp$3$$,
{opacity:$numeric$$module$src$transition$$(1,.01)}),.2,$EXIT_CURVE_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$);return $JSCompiler_StaticMethods_transitionOut_$self$$.measureMutateElement($transitionMeasure$$,$image$jscomp$10_imageViewer$jscomp$2$$)}).then(function(){return $JSCompiler_StaticMethods_AnimationPlayer$$module$src$animation_prototype$thenAlways$$($anim$jscomp$5$$.start($duration$jscomp$20$$),function(){return $JSCompiler_StaticMethods_transitionOut_$self$$.mutateElement(function(){$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionOut_$self$$.element,
{opacity:""});$setStyles$$module$src$style$$($JSCompiler_StaticMethods_transitionOut_$self$$.$carousel_$,{opacity:""});$toggle$$module$src$style$$($JSCompiler_StaticMethods_transitionOut_$self$$.$carousel_$,!1);$toggle$$module$src$style$$($JSCompiler_StaticMethods_transitionOut_$self$$.element,!1);$JSCompiler_StaticMethods_transitionOut_$self$$.element.ownerDocument.body.removeChild($transLayer$jscomp$3$$)})})})}
$JSCompiler_prototypeAlias$$.$exit_$=function(){var $$jscomp$this$jscomp$584$$=this;return $JSCompiler_StaticMethods_shouldExit_$$(this).then(function($shouldExit$$){return $shouldExit$$?$JSCompiler_StaticMethods_transitionOut_$$($$jscomp$this$jscomp$584$$):$JSCompiler_StaticMethods_fade_$$($$jscomp$this$jscomp$584$$,1,0)})};
$JSCompiler_prototypeAlias$$.$getTransitionDuration_$=function($dy$jscomp$16$$,$maxY$jscomp$3$$,$minDur$$,$maxDur$jscomp$2$$){$minDur$$=void 0===$minDur$$?500:$minDur$$;$maxDur$jscomp$2$$=void 0===$maxDur$jscomp$2$$?1E3:$maxDur$jscomp$2$$;return $clamp$$module$src$utils$math$$(Math.abs($dy$jscomp$16$$)/(void 0===$maxY$jscomp$3$$?250:$maxY$jscomp$3$$)*$maxDur$jscomp$2$$,$minDur$$,$maxDur$jscomp$2$$)};
function $JSCompiler_StaticMethods_maybeSyncSourceCarousel_$$($JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$){$JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$=$JSCompiler_StaticMethods_getCurrentElement_$$($JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$).sourceElement;var $parentCarousel$jscomp$1$$=$closestBySelector$$module$src$dom$$($JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$,'amp-carousel[type="slides"]');
if($parentCarousel$jscomp$1$$){var $targetSlide$$=$closestBySelector$$module$src$dom$$($JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$,"div.i-amphtml-slide-item"),$targetSlideIndex$$=$toArray$$module$src$types$$($targetSlide$$.parentNode.children).indexOf($targetSlide$$);$parentCarousel$jscomp$1$$.getImpl().then(function($JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$){return $JSCompiler_StaticMethods_maybeSyncSourceCarousel_$self_target$jscomp$147$$.showSlideWhenReady($targetSlideIndex$$)})}}
$JSCompiler_prototypeAlias$$.$close_$=function(){var $$jscomp$this$jscomp$585$$=this;if(!this.$isActive_$)return Promise.resolve();$JSCompiler_StaticMethods_maybeSyncSourceCarousel_$$(this);this.$isActive_$=!1;this.$unlistenClick_$&&(this.$unlistenClick_$(),this.$unlistenClick_$=null);this.win.document.documentElement.removeEventListener("keydown",this.$boundOnKeyDown_$);this.$carousel_$.removeEventListener("slideChange",function($event$jscomp$115$$){$$jscomp$this$jscomp$585$$.$currentElemId_$=$event$jscomp$115$$.data.index;
$JSCompiler_StaticMethods_updateDescriptionBox_$$($$jscomp$this$jscomp$585$$)});$Gestures$$module$src$gesture$get$$(this.$carousel_$).cleanup();return this.mutateElement(function(){$$jscomp$this$jscomp$585$$.$container_$.removeAttribute("gallery-view");$$jscomp$this$jscomp$585$$.$gallery_$&&($$jscomp$this$jscomp$585$$.$gallery_$.classList.add("i-amphtml-lbg-gallery-hidden"),$$jscomp$this$jscomp$585$$.$gallery_$=null);$JSCompiler_StaticMethods_clearDescOverflowState_$$($$jscomp$this$jscomp$585$$)}).then(function(){return $$jscomp$this$jscomp$585$$.$exit_$()}).then(function(){$$jscomp$this$jscomp$585$$.getViewport().leaveLightboxMode();
$$jscomp$this$jscomp$585$$.schedulePause($$jscomp$this$jscomp$585$$.$container_$);$JSCompiler_StaticMethods_pauseLightboxChildren_$$($$jscomp$this$jscomp$585$$);$$jscomp$this$jscomp$585$$.$carousel_$=null;-1!=$$jscomp$this$jscomp$585$$.$historyId_$&&$$jscomp$this$jscomp$585$$.$history_$.pop($$jscomp$this$jscomp$585$$.$historyId_$)})};
$JSCompiler_prototypeAlias$$.$onKeyDown_$=function($event$jscomp$116$$){if(this.$isActive_$)switch($event$jscomp$116$$.keyCode){case 27:this.$close_$();break;case 37:$JSCompiler_StaticMethods_maybeSlideCarousel_$$(this,-1);break;case 39:$JSCompiler_StaticMethods_maybeSlideCarousel_$$(this,1)}};
function $JSCompiler_StaticMethods_maybeSlideCarousel_$$($JSCompiler_StaticMethods_maybeSlideCarousel_$self$$,$direction$jscomp$7$$){var $isGalleryView$$=$JSCompiler_StaticMethods_maybeSlideCarousel_$self$$.$container_$.hasAttribute("gallery-view");$isGalleryView$$||$JSCompiler_StaticMethods_maybeSlideCarousel_$self$$.$carousel_$.getImpl().then(function($JSCompiler_StaticMethods_maybeSlideCarousel_$self$$){$JSCompiler_StaticMethods_maybeSlideCarousel_$self$$.goCallback($direction$jscomp$7$$,!0,!1)})}
$JSCompiler_prototypeAlias$$.$openGallery_$=function(){var $$jscomp$this$jscomp$586$$=this;this.$gallery_$||$JSCompiler_StaticMethods_findOrBuildGallery_$$(this);this.mutateElement(function(){$$jscomp$this$jscomp$586$$.$container_$.setAttribute("gallery-view","");$toggle$$module$src$style$$($$jscomp$this$jscomp$586$$.$navControls_$,!1);$toggle$$module$src$style$$($$jscomp$this$jscomp$586$$.$carousel_$,!1);$toggle$$module$src$style$$($$jscomp$this$jscomp$586$$.$descriptionBox_$,!1)})};
$JSCompiler_prototypeAlias$$.$closeGallery_$=function(){var $$jscomp$this$jscomp$587$$=this;return this.mutateElement(function(){$$jscomp$this$jscomp$587$$.$container_$.removeAttribute("gallery-view");$toggle$$module$src$style$$($$jscomp$this$jscomp$587$$.$navControls_$,!0);$toggle$$module$src$style$$($$jscomp$this$jscomp$587$$.$carousel_$,!0);$JSCompiler_StaticMethods_updateDescriptionBox_$$($$jscomp$this$jscomp$587$$);$toggle$$module$src$style$$($$jscomp$this$jscomp$587$$.$descriptionBox_$,!0)})};
function $JSCompiler_StaticMethods_findOrBuildGallery_$$($JSCompiler_StaticMethods_findOrBuildGallery_$self$$){$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$=$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.element.querySelector(".i-amphtml-lbg-gallery[amp-lightbox-group="+$cssEscape$$module$third_party$css_escape$css_escape$$($JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$currentLightboxGroupId_$)+"]");$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$?($JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$.classList.remove("i-amphtml-lbg-gallery-hidden"),
$JSCompiler_StaticMethods_updateVideoThumbnails_$$($JSCompiler_StaticMethods_findOrBuildGallery_$self$$)):($JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$=$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.win.document.createElement("div"),$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$.classList.add("i-amphtml-lbg-gallery"),$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$.setAttribute("amp-lightbox-group",$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$currentLightboxGroupId_$),
$JSCompiler_StaticMethods_initializeThumbnails_$$($JSCompiler_StaticMethods_findOrBuildGallery_$self$$),$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.mutateElement(function(){$JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$container_$.appendChild($JSCompiler_StaticMethods_findOrBuildGallery_$self$$.$gallery_$)}))}
function $JSCompiler_StaticMethods_updateVideoThumbnails_$$($JSCompiler_StaticMethods_updateVideoThumbnails_$self$$){var $thumbnails$$=$JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.$manager_$.getThumbnails($JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.$currentLightboxGroupId_$).map(function($JSCompiler_StaticMethods_updateVideoThumbnails_$self$$,$thumbnails$$){return Object.assign({index:$thumbnails$$},$JSCompiler_StaticMethods_updateVideoThumbnails_$self$$)}).filter(function($JSCompiler_StaticMethods_updateVideoThumbnails_$self$$){return $VIDEO_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.element.tagName]});
$JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.mutateElement(function(){$thumbnails$$.forEach(function($thumbnails$$){$thumbnails$$.timestampPromise.then(function($thumbnail$jscomp$2$$){if($thumbnail$jscomp$2$$&&!isNaN($thumbnail$jscomp$2$$)){var $ts$$=$JSCompiler_StaticMethods_secondsToTimestampString_$$($thumbnail$jscomp$2$$),$thumbnailContainer$$=$JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.$gallery_$.childNodes[$thumbnails$$.index],$timestampDiv$$=$childElementByTag$$module$src$dom$$($thumbnailContainer$$,
"div");1<$timestampDiv$$.childNodes.length&&$timestampDiv$$.removeChild($timestampDiv$$.childNodes[1]);$timestampDiv$$.appendChild($JSCompiler_StaticMethods_updateVideoThumbnails_$self$$.win.document.createTextNode($ts$$));$timestampDiv$$.classList.add("i-amphtml-lbg-has-timestamp")}})})})}
function $JSCompiler_StaticMethods_initializeThumbnails_$$($JSCompiler_StaticMethods_initializeThumbnails_$self$$){var $thumbnails$jscomp$1$$=[];$JSCompiler_StaticMethods_initializeThumbnails_$self$$.$manager_$.getThumbnails($JSCompiler_StaticMethods_initializeThumbnails_$self$$.$currentLightboxGroupId_$).forEach(function($thumbnail$jscomp$3$$){if("AMP-AD"!=$thumbnail$jscomp$3$$.element.tagName){var $thumbnailElement$$=$JSCompiler_StaticMethods_createThumbnailElement_$$($JSCompiler_StaticMethods_initializeThumbnails_$self$$,
$thumbnail$jscomp$3$$);$thumbnails$jscomp$1$$.push($thumbnailElement$$)}});$JSCompiler_StaticMethods_initializeThumbnails_$self$$.mutateElement(function(){$thumbnails$jscomp$1$$.forEach(function($thumbnails$jscomp$1$$){$JSCompiler_StaticMethods_initializeThumbnails_$self$$.$gallery_$.appendChild($thumbnails$jscomp$1$$)})})}
function $JSCompiler_StaticMethods_padStart_$$($s$jscomp$41$$){var $targetLength$jscomp$2$$=2,$padString$$="0";if($s$jscomp$41$$.length>=$targetLength$jscomp$2$$)return $s$jscomp$41$$;for(var $targetLength$jscomp$2$$=$targetLength$jscomp$2$$-$s$jscomp$41$$.length,$padding$$=$padString$$;$targetLength$jscomp$2$$>$padding$$.length;)$padding$$+=$padString$$;return $padding$$.slice(0,$targetLength$jscomp$2$$)+$s$jscomp$41$$}
function $JSCompiler_StaticMethods_secondsToTimestampString_$$($seconds$$){var $m$jscomp$21$$=Math.floor($seconds$$/60),$s$jscomp$42$$=Math.floor($seconds$$%60),$hh$$=$JSCompiler_StaticMethods_padStart_$$(Math.floor($seconds$$/3600).toString()),$mm$$=$JSCompiler_StaticMethods_padStart_$$($m$jscomp$21$$.toString()),$ss$$=$JSCompiler_StaticMethods_padStart_$$($s$jscomp$42$$.toString());return $hh$$+":"+$mm$$+":"+$ss$$}
function $JSCompiler_StaticMethods_handleThumbnailClick_$$($JSCompiler_StaticMethods_handleThumbnailClick_$self$$,$event$jscomp$117$$,$id$jscomp$74$$){$event$jscomp$117$$.stopPropagation();Promise.all([$JSCompiler_StaticMethods_handleThumbnailClick_$self$$.$closeGallery_$(),$JSCompiler_StaticMethods_handleThumbnailClick_$self$$.$carousel_$.getImpl()]).then(function($event$jscomp$117$$){$JSCompiler_StaticMethods_handleThumbnailClick_$self$$.$currentElemId_$=$id$jscomp$74$$;$event$jscomp$117$$[1].showSlideWhenReady($JSCompiler_StaticMethods_handleThumbnailClick_$self$$.$currentElemId_$);
$JSCompiler_StaticMethods_updateDescriptionBox_$$($JSCompiler_StaticMethods_handleThumbnailClick_$self$$)})}
function $JSCompiler_StaticMethods_createThumbnailElement_$$($JSCompiler_StaticMethods_createThumbnailElement_$self$$,$thumbnailObj$$){var $element$jscomp$376$$=$JSCompiler_StaticMethods_createThumbnailElement_$self$$.win.document.createElement("div");$element$jscomp$376$$.classList.add("i-amphtml-lbg-gallery-thumbnail");var $imgElement$$=$JSCompiler_StaticMethods_createThumbnailElement_$self$$.win.document.createElement("img");$imgElement$$.classList.add("i-amphtml-lbg-gallery-thumbnail-img");$thumbnailObj$$.srcset?
$imgElement$$.setAttribute("srcset",$JSCompiler_StaticMethods_Srcset$$module$src$srcset_prototype$stringify$$($thumbnailObj$$.srcset)):$imgElement$$.setAttribute("src",$thumbnailObj$$.placeholderSrc);$element$jscomp$376$$.appendChild($imgElement$$);if($VIDEO_TAGS$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$[$thumbnailObj$$.element.tagName]){var $playButtonSpan$$=$JSCompiler_StaticMethods_createThumbnailElement_$self$$.win.document.createElement("span");$playButtonSpan$$.classList.add("i-amphtml-lbg-thumbnail-play-icon");
var $timestampDiv$jscomp$1$$=$JSCompiler_StaticMethods_createThumbnailElement_$self$$.win.document.createElement("div");$timestampDiv$jscomp$1$$.classList.add("i-amphtml-lbg-thumbnail-timestamp-container");$timestampDiv$jscomp$1$$.appendChild($playButtonSpan$$);$thumbnailObj$$.timestampPromise.then(function($thumbnailObj$$){$thumbnailObj$$&&!isNaN($thumbnailObj$$)&&($thumbnailObj$$=$JSCompiler_StaticMethods_secondsToTimestampString_$$($thumbnailObj$$),$timestampDiv$jscomp$1$$.appendChild($JSCompiler_StaticMethods_createThumbnailElement_$self$$.win.document.createTextNode($thumbnailObj$$)),
$timestampDiv$jscomp$1$$.classList.add("i-amphtml-lbg-has-timestamp"))});$element$jscomp$376$$.appendChild($timestampDiv$jscomp$1$$)}$element$jscomp$376$$.addEventListener("click",function($element$jscomp$376$$){$JSCompiler_StaticMethods_handleThumbnailClick_$$($JSCompiler_StaticMethods_createThumbnailElement_$self$$,$element$jscomp$376$$,$thumbnailObj$$.element.sa)});return $element$jscomp$376$$}
function $installLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$($win$jscomp$309$$){var $ampdoc$jscomp$159$$=$Services$$module$src$services$ampdocServiceFor$$($win$jscomp$309$$).getAmpDoc();$ampdoc$jscomp$159$$.whenBodyAvailable().then(function($win$jscomp$309$$){var $body$jscomp$17$$=$elementByTag$$module$src$dom$$($ampdoc$jscomp$159$$.getRootNode(),"amp-lightbox-gallery");if(!$body$jscomp$17$$){var $gallery$jscomp$1$$=$ampdoc$jscomp$159$$.getRootNode().createElement("amp-lightbox-gallery");
$gallery$jscomp$1$$.setAttribute("layout","nodisplay");$gallery$jscomp$1$$.setAttribute("id","amp-lightbox-gallery");$win$jscomp$309$$.appendChild($gallery$jscomp$1$$)}})}
(function($AMP$jscomp$62$$){$AMP$jscomp$62$$.registerElement("amp-lightbox-gallery",$AmpLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$,"amp-lightbox-gallery .amp-carousel-button{display:none}.i-amphtml-lbg-icon{width:100%!important;height:100%!important;display:block!important;background-repeat:no-repeat!important;background-position:50%!important}.i-amphtml-lbg-button-close{top:0!important;right:0!important}.i-amphtml-lbg-button-close .i-amphtml-lbg-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.295 5.705a.997.997 0 0 0-1.41 0L12 10.59 7.115 5.705a.997.997 0 1 0-1.41 1.41L10.59 12l-4.885 4.885a.997.997 0 0 0 1.41 1.41L12 13.41l4.885 4.885a.997.997 0 0 0 1.41-1.41L13.41 12l4.885-4.885a.997.997 0 0 0 0-1.41z' fill='%23fff' fill-rule='nonzero'/%3E%3C/svg%3E\")}.i-amphtml-lbg-button-gallery{top:0!important;left:0!important}.i-amphtml-lbg-button-gallery .i-amphtml-lbg-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 3h4a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm8 0h8a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zM4 13h8a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1zm12 0h4a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1z' fill='%23fff' fill-rule='evenodd'/%3E%3C/svg%3E\")}.i-amphtml-lbg-button-slide{top:0!important;left:0!important;display:none}.i-amphtml-lbg-button-slide .i-amphtml-lbg-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5 3h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm14 12V5H5v8l3-3 5 5 3-3 3 3zm-3.5-5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z' fill='%23fff' fill-rule='evenodd'/%3E%3C/svg%3E\")}.i-amphtml-lbg-button.i-amphtml-lbg-button-next,.i-amphtml-lbg-button.i-amphtml-lbg-button-prev{top:0!important;bottom:0!important;margin:auto!important;-webkit-filter:drop-shadow(0 0 1px #000)!important;filter:drop-shadow(0 0 1px black)!important;width:40px;height:40px;padding:20px}.i-amphtml-lbg-button-next{right:0!important}.i-amphtml-lbg-button-next .i-amphtml-lbg-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.182 12l-3.89-3.89a1 1 0 0 1 1.415-1.413l4.596 4.596a1 1 0 0 1 0 1.414l-4.596 4.596a1 1 0 0 1-1.414-1.414L13.182 12z' fill='%23fff' fill-rule='evenodd'/%3E%3C/svg%3E\")}.i-amphtml-lbg-button-prev{left:0!important}.i-amphtml-lbg-button-prev .i-amphtml-lbg-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.828 12l3.89 3.89a1 1 0 1 1-1.415 1.413l-4.596-4.596a1 1 0 0 1 0-1.414l4.596-4.596a1 1 0 1 1 1.415 1.414L10.828 12z' fill='%23fff' fill-rule='evenodd'/%3E%3C/svg%3E\")}.i-amphtml-lbg-button{position:absolute!important;cursor:pointer!important;width:24px;height:24px;padding:16px;box-sizing:content-box}.i-amphtml-lbg{position:fixed!important;z-index:2147483642}.i-amphtml-lbg,.i-amphtml-lbg-gallery,.i-amphtml-lbg-mask{top:0!important;left:0!important;right:0!important;bottom:0!important}.i-amphtml-lbg-gallery,.i-amphtml-lbg-mask{background-color:#000!important;position:absolute!important}.i-amphtml-lbg-gallery{display:none;top:56px!important;overflow:auto!important}@media (min-width:1024px){.i-amphtml-lbg-gallery{top:80px!important}}.i-amphtml-lbg-top-bar{position:absolute!important;left:0!important;right:0!important;top:0!important;height:56px!important;z-index:1!important;background:-webkit-linear-gradient(rgba(0,0,0,0.3),transparent);background:linear-gradient(rgba(0,0,0,0.3),transparent)}@media (min-width:1024px){.i-amphtml-lbg-top-bar{height:80px!important}}.i-amphtml-lbg-controls.i-amphtml-lbg-single .i-amphtml-lbg-button-gallery,.i-amphtml-lbg-controls.i-amphtml-lbg-single .i-amphtml-lbg-button-next,.i-amphtml-lbg-controls.i-amphtml-lbg-single .i-amphtml-lbg-button-prev{display:none}.i-amphtml-lbg-controls.i-amphtml-lbg-hidden{opacity:0;visibility:hidden}.i-amphtml-lbg-controls.i-amphtml-lbg-fade-in{-webkit-animation:fadeIn ease-in 0.4s 1 forwards;animation:fadeIn ease-in 0.4s 1 forwards}.i-amphtml-lbg-controls.i-amphtml-lbg-fade-out{-webkit-animation:fadeOut linear 0.4s 1 forwards;animation:fadeOut linear 0.4s 1 forwards}.i-amphtml-lbg-desc-box{position:absolute!important;left:0!important;right:0!important;bottom:0!important;color:#fff}.i-amphtml-lbg-desc-box.i-amphtml-lbg-standard{background:-webkit-linear-gradient(transparent,rgba(0,0,0,0.5));background:linear-gradient(transparent,rgba(0,0,0,0.5));max-height:6rem!important;-webkit-transition:max-height 0.3s ease-out!important;transition:max-height 0.3s ease-out!important;overflow:hidden!important}.i-amphtml-lbg-desc-box.i-amphtml-lbg-overflow{overflow-y:auto!important;-webkit-overflow-scrolling:touch!important;max-height:100%!important;-webkit-transition:max-height 0.7s ease-out!important;transition:max-height 0.7s ease-out!important}.i-amphtml-lbg-desc-mask{width:100%!important;position:fixed!important;bottom:0!important}.i-amphtml-lbg-desc-text{padding:20px!important;position:relative!important}.i-amphtml-lbg-desc-box.i-amphtml-lbg-overflow .i-amphtml-lbg-desc-text{padding-top:40px!important}.i-amphtml-lbg-desc-box.i-amphtml-lbg-standard .i-amphtml-lbg-desc-mask{z-index:1!important;height:1rem!important;background:-webkit-linear-gradient(transparent,rgba(0,0,0,0.9));background:linear-gradient(transparent,rgba(0,0,0,0.9));-webkit-transition:background-color 0.5s ease-out!important;transition:background-color 0.5s ease-out!important}.i-amphtml-lbg-desc-box.i-amphtml-lbg-overflow .i-amphtml-lbg-desc-mask{background-color:rgba(0,0,0,0.4)!important;top:0!important;z-index:0!important;-webkit-transition:background-color 0.4s ease-in!important;transition:background-color 0.4s ease-in!important}.i-amphtml-lbg[gallery-view] .i-amphtml-lbg-gallery{display:grid!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;grid-gap:5px!important;grid-template-columns:repeat(3,1fr);grid-auto-rows:-webkit-min-content!important;grid-auto-rows:min-content!important;padding:5px}@media (min-width:1024px){.i-amphtml-lbg[gallery-view] .i-amphtml-lbg-gallery{grid-template-columns:repeat(4,249.75px)}}.i-amphtml-lbg[gallery-view] .i-amphtml-lbg-gallery.i-amphtml-lbg-gallery-hidden{display:none!important}.i-amphtml-lbg-gallery-thumbnail{position:relative!important;padding-top:100%!important}.i-amphtml-lbg-gallery-thumbnail-img{width:100%!important;height:100%!important;position:absolute!important;top:0!important;-o-object-fit:cover!important;object-fit:cover!important;cursor:pointer!important}.i-amphtml-lbg-thumbnail-timestamp-container{background-color:#292d33;color:#fff;position:absolute;bottom:10px;left:10px;height:20px;border-radius:2px;opacity:0.8;width:20px}.i-amphtml-lbg-thumbnail-timestamp-container.i-amphtml-lbg-has-timestamp{font-size:12px;padding:0 5px 0 18px;line-height:1.3rem;width:auto}.i-amphtml-lbg-thumbnail-play-icon{background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M8 5v14l11-7z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\");height:16px;width:16px;position:absolute;left:2px;bottom:2px}@media (min-width:1024px){.i-amphtml-lbg-button{width:40px;height:40px;padding:20px}}.i-amphtml-lbg[gallery-view] .i-amphtml-lbg-button-gallery{display:none}.i-amphtml-lbg[gallery-view] .i-amphtml-lbg-button-slide{display:block}.i-amphtml-lightbox-gallery-trans{pointer-events:none!important;position:fixed!important;z-index:1001!important;top:0!important;left:0!important;bottom:0!important;right:0!important}amp-lightbox-gallery .i-amphtml-slide-item>*{height:auto}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1;visibility:visible}}@keyframes fadeIn{0%{opacity:0}to{opacity:1;visibility:visible}}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0;visibility:hidden}}@keyframes fadeOut{0%{opacity:1}to{opacity:0;visibility:hidden}}@-webkit-keyframes slideUp{0%{max-height:6rem}to{max-height:100%}}@keyframes slideUp{0%{max-height:6rem}to{max-height:100%}}\n/*# sourceURL=/extensions/amp-lightbox-gallery/0.1/amp-lightbox-gallery.css*/");var $JSCompiler_ampdoc$jscomp$inline_2035$$=
$Services$$module$src$services$ampdocServiceFor$$($AMP$jscomp$62$$.win).getAmpDoc();$manager_$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$=new $LightboxManager$$module$extensions$amp_lightbox_gallery$0_1$service$lightbox_manager_impl$$($JSCompiler_ampdoc$jscomp$inline_2035$$);$installLightboxGallery$$module$extensions$amp_lightbox_gallery$0_1$amp_lightbox_gallery$$($AMP$jscomp$62$$.win)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-lightbox-gallery-0.1-amp-lightbox-gallery.js.map

