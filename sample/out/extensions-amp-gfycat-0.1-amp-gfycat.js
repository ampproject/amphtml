(self.AMP=self.AMP||[]).push({n:"extensions-amp-gfycat-0.1-amp-gfycat.js", v:"erwin", f:(function(){function $AmpGfycat$$module$extensions$amp_gfycat$0_1$amp_gfycat$$($$jscomp$super$this$jscomp$42_element$jscomp$330$$){$$jscomp$super$this$jscomp$42_element$jscomp$330$$=AMP.BaseElement.call(this,$$jscomp$super$this$jscomp$42_element$jscomp$330$$)||this;$$jscomp$super$this$jscomp$42_element$jscomp$330$$.$videoid_$="";$$jscomp$super$this$jscomp$42_element$jscomp$330$$.$iframe_$=null;$$jscomp$super$this$jscomp$42_element$jscomp$330$$.$videoIframeSrc_$=null;$$jscomp$super$this$jscomp$42_element$jscomp$330$$.$unlistenMessage_$=
null;return $$jscomp$super$this$jscomp$42_element$jscomp$330$$}$$jscomp$inherits$$($AmpGfycat$$module$extensions$amp_gfycat$0_1$amp_gfycat$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpGfycat$$module$extensions$amp_gfycat$0_1$amp_gfycat$$.prototype;
$JSCompiler_prototypeAlias$$.preconnectCallback=function($opt_onLayout$jscomp$15$$){this.preconnect.url("https://gfycat.com",$opt_onLayout$jscomp$15$$);this.preconnect.url("https://giant.gfycat.com",$opt_onLayout$jscomp$15$$);this.preconnect.url("https://thumbs.gfycat.com",$opt_onLayout$jscomp$15$$)};$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$51$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$51$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$videoid_$=this.$getVideoId_$();this.element.hasAttribute("noautoplay")||this.element.setAttribute("autoplay","");$installVideoManagerForDoc$$module$src$service$video_manager_impl$$(this.element);$Services$$module$src$services$videoManagerForDoc$$(this.element).register(this)};
$JSCompiler_prototypeAlias$$.createPlaceholderCallback=function(){var $placeholder$jscomp$8$$=this.win.document.createElement("amp-img"),$videoid$$=this.$videoid_$;this.propagateAttributes(["alt","aria-label"],$placeholder$jscomp$8$$);$placeholder$jscomp$8$$.setAttribute("src","https://thumbs.gfycat.com/"+encodeURIComponent($videoid$$)+"-poster.jpg");$placeholder$jscomp$8$$.setAttribute("layout","fill");$placeholder$jscomp$8$$.setAttribute("placeholder","");$placeholder$jscomp$8$$.setAttribute("referrerpolicy",
"origin");this.element.hasAttribute("aria-label")?$placeholder$jscomp$8$$.setAttribute("alt","Loading gif "+this.element.getAttribute("aria-label")):this.element.hasAttribute("alt")?$placeholder$jscomp$8$$.setAttribute("alt","Loading gif "+this.element.getAttribute("alt")):$placeholder$jscomp$8$$.setAttribute("alt","Loading gif");this.applyFillContent($placeholder$jscomp$8$$);return $placeholder$jscomp$8$$};
$JSCompiler_prototypeAlias$$.$getVideoId_$=function(){return $user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.element.getAttribute("data-gfyid"),"The data-gfyid attribute is required for <amp-gfycat> %s",this.element)};
$JSCompiler_prototypeAlias$$.$getVideoIframeSrc_$=function(){if(this.$videoIframeSrc_$)return this.$videoIframeSrc_$;var $src$jscomp$35$$="https://gfycat.com/ifr/"+encodeURIComponent(this.$videoid_$),$params$jscomp$27$$=$getDataParamsFromAttributes$$module$src$dom$$(this.element),$noautoplay$$=this.element.hasAttribute("noautoplay");$noautoplay$$&&($params$jscomp$27$$.autoplay="0");return this.$videoIframeSrc_$=$src$jscomp$35$$=$addParamsToUrl$$module$src$url$$($src$jscomp$35$$,$params$jscomp$27$$)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$518$$=this,$iframe$jscomp$42$$=this.element.ownerDocument.createElement("iframe"),$src$jscomp$36$$=this.$getVideoIframeSrc_$();$iframe$jscomp$42$$.setAttribute("frameborder","0");$iframe$jscomp$42$$.src=$src$jscomp$36$$;this.applyFillContent($iframe$jscomp$42$$);this.$iframe_$=$iframe$jscomp$42$$;this.$unlistenMessage_$=$listen$$module$src$event_helper$$(this.win,"message",this.$handleGfycatMessages_$.bind(this));this.element.appendChild($iframe$jscomp$42$$);
return this.loadPromise(this.$iframe_$).then(function(){$$jscomp$this$jscomp$518$$.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.LOAD)})};$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$iframe_$=null);this.$unlistenMessage_$&&this.$unlistenMessage_$();return!0};
$JSCompiler_prototypeAlias$$.$sendCommand_$=function($command$jscomp$3$$){this.$iframe_$&&this.$iframe_$.contentWindow&&this.$iframe_$.contentWindow.postMessage($command$jscomp$3$$,"*")};
$JSCompiler_prototypeAlias$$.$handleGfycatMessages_$=function($event$jscomp$101$$){var $eventData$jscomp$8$$=$event$jscomp$101$$.data;"https://gfycat.com"===$event$jscomp$101$$.origin&&$event$jscomp$101$$.source==this.$iframe_$.contentWindow&&"string"===typeof $eventData$jscomp$8$$&&("paused"==$eventData$jscomp$8$$?this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PAUSE):"playing"==$eventData$jscomp$8$$&&this.element.dispatchCustomEvent($VideoEvents$$module$src$video_interface$$.PLAYING))};
$JSCompiler_prototypeAlias$$.pauseCallback=function(){this.pause()};$JSCompiler_prototypeAlias$$.supportsPlatform=function(){return!0};$JSCompiler_prototypeAlias$$.isInteractive=function(){return!1};$JSCompiler_prototypeAlias$$.play=function(){this.$sendCommand_$("play")};$JSCompiler_prototypeAlias$$.pause=function(){this.$sendCommand_$("pause")};$JSCompiler_prototypeAlias$$.mute=function(){};$JSCompiler_prototypeAlias$$.unmute=function(){};$JSCompiler_prototypeAlias$$.showControls=function(){};
$JSCompiler_prototypeAlias$$.hideControls=function(){};$JSCompiler_prototypeAlias$$.fullscreenEnter=function(){};$JSCompiler_prototypeAlias$$.fullscreenExit=function(){};$JSCompiler_prototypeAlias$$.isFullscreen=function(){return!1};$JSCompiler_prototypeAlias$$.getMetadata=function(){};$JSCompiler_prototypeAlias$$.preimplementsMediaSessionAPI=function(){return!1};$JSCompiler_prototypeAlias$$.preimplementsAutoFullscreen=function(){return!1};$JSCompiler_prototypeAlias$$.getCurrentTime=function(){return 0};
$JSCompiler_prototypeAlias$$.getDuration=function(){return 1};$JSCompiler_prototypeAlias$$.getPlayedRanges=function(){return[]};(function($AMP$jscomp$47$$){$AMP$jscomp$47$$.registerElement("amp-gfycat",$AmpGfycat$$module$extensions$amp_gfycat$0_1$amp_gfycat$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-gfycat-0.1-amp-gfycat.js.map

