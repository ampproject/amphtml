(self.AMP=self.AMP||[]).push({n:"extensions-amp-iframe-0.1-amp-iframe.js", v:"erwin", f:(function(){var $ATTRIBUTES_TO_PROPAGATE$$module$extensions$amp_iframe$0_1$amp_iframe$$="allowfullscreen allowpaymentrequest allowtransparency allow frameborder referrerpolicy scrolling".split(" "),$count$$module$extensions$amp_iframe$0_1$amp_iframe$$=0,$trackingIframeCount$$module$extensions$amp_iframe$0_1$amp_iframe$$=0;
function $AmpIframe$$module$extensions$amp_iframe$0_1$amp_iframe$$($element$jscomp$338$$){var $$jscomp$super$this$jscomp$47$$;$$jscomp$super$this$jscomp$47$$=AMP.BaseElement.call(this,$element$jscomp$338$$)||this;$$jscomp$super$this$jscomp$47$$.$placeholder_$=null;$$jscomp$super$this$jscomp$47$$.$isClickToPlay_$=!1;$$jscomp$super$this$jscomp$47$$.$isAdLike_$=!1;$$jscomp$super$this$jscomp$47$$.$isTrackingFrame_$=!1;$$jscomp$super$this$jscomp$47$$.$isDisallowedAsAd_$=!1;$$jscomp$super$this$jscomp$47$$.$iframeLayoutBox_$=
null;$$jscomp$super$this$jscomp$47$$.$iframe_$=null;$$jscomp$super$this$jscomp$47$$.$isResizable_$=!1;$$jscomp$super$this$jscomp$47$$.$intersectionObserverApi_$=null;$$jscomp$super$this$jscomp$47$$.$sandbox_$="";$$jscomp$super$this$jscomp$47$$.iframeSrc=null;$$jscomp$super$this$jscomp$47$$.$container_$=null;$$jscomp$super$this$jscomp$47$$.$isInContainer_$=void 0;$$jscomp$super$this$jscomp$47$$.$targetOrigin_$=null;$$jscomp$super$this$jscomp$47$$.$getUrlService_$=$once$$module$src$utils$function$$(function(){return $Services$$module$src$services$urlForDoc$$($$jscomp$super$this$jscomp$47$$.element)});
return $$jscomp$super$this$jscomp$47$$}$$jscomp$inherits$$($AmpIframe$$module$extensions$amp_iframe$0_1$amp_iframe$$,AMP.BaseElement);$JSCompiler_prototypeAlias$$=$AmpIframe$$module$extensions$amp_iframe$0_1$amp_iframe$$.prototype;$JSCompiler_prototypeAlias$$.isLayoutSupported=function($layout$jscomp$55$$){return $isLayoutSizeDefined$$module$src$layout$$($layout$jscomp$55$$)};
$JSCompiler_prototypeAlias$$.$assertSource_$=function($src$jscomp$39$$,$containerSrc$$,$sandbox$$){$sandbox$$=void 0===$sandbox$$?"":$sandbox$$;var $element$jscomp$339$$=this.element,$urlService$jscomp$3$$=this.$getUrlService_$(),$url$jscomp$160$$=$urlService$jscomp$3$$.parse($src$jscomp$39$$),$hostname$jscomp$3$$=$url$jscomp$160$$.hostname,$protocol$jscomp$5$$=$url$jscomp$160$$.protocol,$origin$jscomp$23$$=$url$jscomp$160$$.origin;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($urlService$jscomp$3$$.isSecureUrl($url$jscomp$160$$)||
"data:"==$protocol$jscomp$5$$,"Invalid <amp-iframe> src. Must start with https://. Found %s",$element$jscomp$339$$);var $containerUrl$$=$urlService$jscomp$3$$.parse($containerSrc$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!/\sallow-same-origin\s/i.test(" "+$sandbox$$+" ")||$origin$jscomp$23$$!=$containerUrl$$.origin&&"data:"!=$protocol$jscomp$5$$,"Origin of <amp-iframe> must not be equal to container %sif allow-same-origin is set. See https://github.com/ampproject/amphtml/blob/master/spec/amp-iframe-origin-policy.md for details.",
$element$jscomp$339$$);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!($endsWith$$module$src$string$$($hostname$jscomp$3$$,"."+$module$src$config$$.urls.thirdPartyFrameHost)||$endsWith$$module$src$string$$($hostname$jscomp$3$$,".ampproject.org")),"amp-iframe does not allow embedding of frames from ampproject.*: %s",$src$jscomp$39$$);return $src$jscomp$39$$};
$JSCompiler_prototypeAlias$$.$assertPosition_$=function(){var $pos$jscomp$21$$=this.element.getLayoutBox(),$minTop$jscomp$3$$=Math.min(600,.75*this.getViewport().getSize().height);$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$($pos$jscomp$21$$.top>=$minTop$jscomp$3$$,"<amp-iframe> elements must be positioned outside the first 75% of the viewport or 600px from the top (whichever is smaller): %s  Current position %s. Min: %sPositioning rules don't apply for iframes that use `placeholder`.See https://github.com/ampproject/amphtml/blob/master/extensions/amp-iframe/amp-iframe.md#iframe-with-placeholder for details.",
this.element,$pos$jscomp$21$$.top,$minTop$jscomp$3$$)};
function $JSCompiler_StaticMethods_transformSrc_$$($$jscomp$destructuring$var308_JSCompiler_StaticMethods_transformSrc_$self$$,$src$jscomp$40$$){if($src$jscomp$40$$){$$jscomp$destructuring$var308_JSCompiler_StaticMethods_transformSrc_$self$$=$$jscomp$destructuring$var308_JSCompiler_StaticMethods_transformSrc_$self$$.$getUrlService_$().parse($src$jscomp$40$$);var $hash$jscomp$16$$=$$jscomp$destructuring$var308_JSCompiler_StaticMethods_transformSrc_$self$$.hash;return"data:"==$$jscomp$destructuring$var308_JSCompiler_StaticMethods_transformSrc_$self$$.protocol||
$hash$jscomp$16$$&&"#"!=$hash$jscomp$16$$?$src$jscomp$40$$:$removeFragment$$module$src$url$$($src$jscomp$40$$)+"#amp=1"}}
$JSCompiler_prototypeAlias$$.firstAttachedCallback=function(){this.$sandbox_$=this.element.getAttribute("sandbox");var $JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$;if(!($JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$=$JSCompiler_StaticMethods_transformSrc_$$(this,this.element.getAttribute("src")))){$JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$=this.element.getAttribute("srcdoc");var $JSCompiler_sandbox$jscomp$inline_1945$$=this.$sandbox_$;
$JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$?($user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!(" "+$JSCompiler_sandbox$jscomp$inline_1945$$+" ").match(/\s+allow-same-origin\s+/i),"allow-same-origin is not allowed with the srcdoc attribute %s.",this.element),$JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$="data:text/html;charset=utf-8;base64,"+btoa($bytesToString$$module$src$utils$bytes$$($utf8Encode$$module$src$utils$bytes$$($JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$)))):
$JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$=void 0}this.iframeSrc=this.$assertSource_$($JSCompiler_srcdoc$jscomp$inline_1944_JSCompiler_temp$jscomp$453$$,window.location.href,this.$sandbox_$)};$JSCompiler_prototypeAlias$$.preconnectCallback=function($onLayout$jscomp$4$$){this.iframeSrc&&this.preconnect.url(this.iframeSrc,$onLayout$jscomp$4$$)};
$JSCompiler_prototypeAlias$$.buildCallback=function(){this.$placeholder_$=this.getPlaceholder();this.$isClickToPlay_$=!!this.$placeholder_$;(this.$isResizable_$=this.element.hasAttribute("resizable"))&&this.element.setAttribute("scrolling","no");this.element.hasAttribute("frameborder")||this.element.setAttribute("frameborder","0");var $JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$;$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$=this.element;
if("no"!=$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$.getAttribute("scrolling")){var $JSCompiler_wrapper$jscomp$inline_1948$$=$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$.ownerDocument.createElement("i-amphtml-scroll-container");$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$.appendChild($JSCompiler_wrapper$jscomp$inline_1948$$);$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$=
$JSCompiler_wrapper$jscomp$inline_1948$$}this.$container_$=$JSCompiler_element$jscomp$inline_1947_JSCompiler_inline_result$jscomp$456$$;$JSCompiler_StaticMethods_registerIframeMessaging_$$(this)};
$JSCompiler_prototypeAlias$$.onLayoutMeasure=function(){this.$measureIframeLayoutBox_$();var $JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$;a:{var $JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$=this.element.getLayoutBox();$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=$JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$.height;
for(var $JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$=$JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$.width,$JSCompiler_i$jscomp$inline_1954$$=0;$JSCompiler_i$jscomp$inline_1954$$<$adSizes$$module$extensions$amp_iframe$0_1$amp_iframe$$.length;$JSCompiler_i$jscomp$inline_1954$$++){var $JSCompiler_refWidth$jscomp$inline_1955$$=$adSizes$$module$extensions$amp_iframe$0_1$amp_iframe$$[$JSCompiler_i$jscomp$inline_1954$$][0],$JSCompiler_refHeight$jscomp$inline_1956$$=
$adSizes$$module$extensions$amp_iframe$0_1$amp_iframe$$[$JSCompiler_i$jscomp$inline_1954$$][1];if(!($JSCompiler_refHeight$jscomp$inline_1956$$>$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$||$JSCompiler_refWidth$jscomp$inline_1955$$>$JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$)&&20>=$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$-
$JSCompiler_refHeight$jscomp$inline_1956$$&&20>=$JSCompiler_$jscomp$inline_1951_JSCompiler_width$jscomp$inline_1953$$-$JSCompiler_refWidth$jscomp$inline_1955$$){$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=!0;break a}}$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=!1}this.$isAdLike_$=$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$;
$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=this.element.getLayoutBox();10<$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$.width&&10<$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$.height?$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=
!1:(void 0===this.$isInContainer_$&&(this.$isInContainer_$=!!$closestBySelector$$module$src$dom$$(this.element,".i-amphtml-overlay")),$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$=!this.$isInContainer_$);this.$isTrackingFrame_$=$JSCompiler_box$jscomp$inline_1959_JSCompiler_height$jscomp$inline_1952_JSCompiler_inline_result$jscomp$454_JSCompiler_inline_result$jscomp$457$$;this.$isDisallowedAsAd_$=this.$isAdLike_$&&
!$isAdPositionAllowed$$module$src$ad_helper$$(this.element,this.win);this.$intersectionObserverApi_$&&this.$intersectionObserverApi_$.fire()};$JSCompiler_prototypeAlias$$.$measureIframeLayoutBox_$=function(){if(this.$iframe_$){var $iframeBox$jscomp$5$$=this.getViewport().getLayoutRect(this.$iframe_$),$box$jscomp$15$$=this.getLayoutBox();this.$iframeLayoutBox_$=$moveLayoutRect$$module$src$layout_rect$$($iframeBox$jscomp$5$$,-$box$jscomp$15$$.left,-$box$jscomp$15$$.top)}};
$JSCompiler_prototypeAlias$$.getIntersectionElementLayoutBox=function(){if(!this.$iframe_$)return AMP.BaseElement.prototype.getIntersectionElementLayoutBox.call(this);var $box$jscomp$16$$=this.getLayoutBox();this.$iframeLayoutBox_$||this.$measureIframeLayoutBox_$();return $moveLayoutRect$$module$src$layout_rect$$(this.$iframeLayoutBox_$,$box$jscomp$16$$.left,$box$jscomp$16$$.top)};
$JSCompiler_prototypeAlias$$.layoutCallback=function(){var $$jscomp$this$jscomp$524$$=this;$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(!this.$isDisallowedAsAd_$,"amp-iframe is not used for displaying fixed ad. Please use amp-sticky-ad and amp-ad instead.");this.$isClickToPlay_$||this.$assertPosition_$();this.$isResizable_$&&$user$$module$src$log$$().$Log$$module$src$log_prototype$assert$(this.getOverflowElement(),"Overflow element must be defined for resizable frames: %s",this.element);
if(!this.iframeSrc)return Promise.resolve();if(this.$isTrackingFrame_$&&($trackingIframeCount$$module$extensions$amp_iframe$0_1$amp_iframe$$++,1<$trackingIframeCount$$module$extensions$amp_iframe$0_1$amp_iframe$$))return console.error("Only 1 analytics/tracking iframe allowed per page. Please use amp-analytics instead or file a GitHub issue for your use case: https://github.com/ampproject/amphtml/issues/new"),Promise.resolve();var $iframe$jscomp$47$$=this.element.ownerDocument.createElement("iframe");
this.$iframe_$=$iframe$jscomp$47$$;this.applyFillContent($iframe$jscomp$47$$);$iframe$jscomp$47$$.name="amp_iframe"+$count$$module$extensions$amp_iframe$0_1$amp_iframe$$++;this.$isClickToPlay_$&&$setStyle$$module$src$style$$($iframe$jscomp$47$$,"zIndex",-1);this.propagateAttributes($ATTRIBUTES_TO_PROPAGATE$$module$extensions$amp_iframe$0_1$amp_iframe$$,$iframe$jscomp$47$$);$setSandbox$$module$extensions$amp_iframe$0_1$amp_iframe$$($iframe$jscomp$47$$,this.$sandbox_$);$iframe$jscomp$47$$.src=this.iframeSrc;
this.$isTrackingFrame_$||(this.$intersectionObserverApi_$=new $IntersectionObserverApi$$module$src$intersection_observer_polyfill$$(this,$iframe$jscomp$47$$));$iframe$jscomp$47$$.onload=function(){$iframe$jscomp$47$$.readyState="complete";$$jscomp$this$jscomp$524$$.$activateIframe_$();$$jscomp$this$jscomp$524$$.$isTrackingFrame_$&&($$jscomp$this$jscomp$524$$.iframeSrc=null,$Services$$module$src$services$timerFor$$($$jscomp$this$jscomp$524$$.win).promise(5E3).then(function(){$removeElement$$module$src$dom$$($iframe$jscomp$47$$);
$$jscomp$this$jscomp$524$$.element.setAttribute("amp-removed","");$$jscomp$this$jscomp$524$$.$iframe_$=null}))};$listenFor$$module$src$iframe_helper$$($iframe$jscomp$47$$,"embed-size",function($iframe$jscomp$47$$){$$jscomp$this$jscomp$524$$.$updateSize_$($iframe$jscomp$47$$.height,$iframe$jscomp$47$$.width)});this.$isClickToPlay_$&&$listenFor$$module$src$iframe_helper$$($iframe$jscomp$47$$,"embed-ready",this.$activateIframe_$.bind(this));this.$container_$.appendChild($iframe$jscomp$47$$);return this.loadPromise($iframe$jscomp$47$$).then(function(){$$jscomp$this$jscomp$524$$.$container_$!=
$$jscomp$this$jscomp$524$$.element&&$Services$$module$src$services$timerFor$$($$jscomp$this$jscomp$524$$.win).delay(function(){$$jscomp$this$jscomp$524$$.mutateElement(function(){$$jscomp$this$jscomp$524$$.$container_$.classList.add("amp-active")})},1E3)})};$JSCompiler_prototypeAlias$$.unlayoutOnPause=function(){return!0};
$JSCompiler_prototypeAlias$$.unlayoutCallback=function(){this.$iframe_$&&($removeElement$$module$src$dom$$(this.$iframe_$),this.$placeholder_$&&this.togglePlaceholder(!0),this.$iframe_$=null,this.$intersectionObserverApi_$&&(this.$intersectionObserverApi_$.destroy(),this.$intersectionObserverApi_$=null));return!0};$JSCompiler_prototypeAlias$$.viewportCallback=function($inViewport$jscomp$18$$){if(this.$intersectionObserverApi_$)this.$intersectionObserverApi_$.onViewportCallback($inViewport$jscomp$18$$)};
$JSCompiler_prototypeAlias$$.getLayoutPriority=function(){return this.$isAdLike_$?2:this.$isTrackingFrame_$?1:AMP.BaseElement.prototype.getLayoutPriority.call(this)};
$JSCompiler_prototypeAlias$$.mutatedAttributesCallback=function($mutations$jscomp$6_src$jscomp$41$$){$mutations$jscomp$6_src$jscomp$41$$=$mutations$jscomp$6_src$jscomp$41$$.src;void 0!==$mutations$jscomp$6_src$jscomp$41$$&&(this.iframeSrc=$JSCompiler_StaticMethods_transformSrc_$$(this,$mutations$jscomp$6_src$jscomp$41$$),this.$iframe_$&&(this.$iframe_$.src=this.$assertSource_$(this.iframeSrc,window.location.href,this.$sandbox_$)))};
$JSCompiler_prototypeAlias$$.$activateIframe_$=function(){var $$jscomp$this$jscomp$525$$=this;this.$placeholder_$&&this.getVsync().mutate(function(){$$jscomp$this$jscomp$525$$.$iframe_$&&($setStyle$$module$src$style$$($$jscomp$this$jscomp$525$$.$iframe_$,"zIndex",0),$$jscomp$this$jscomp$525$$.togglePlaceholder(!1))})};$JSCompiler_prototypeAlias$$.firstLayoutCompleted=function(){};
$JSCompiler_prototypeAlias$$.throwIfCannotNavigate=function(){if(!/\sallow-top-navigation\s/i.test(" "+this.$sandbox_$+" "))throw $user$$module$src$log$$().createError('"AMP.navigateTo" is only allowed on <amp-iframe> when its "sandbox" attribute contains "allow-top-navigation".');};
$JSCompiler_prototypeAlias$$.$updateSize_$=function($height$jscomp$43$$,$width$jscomp$46$$){var $$jscomp$this$jscomp$526$$=this;if(this.$isResizable_$)if(100>$height$jscomp$43$$)this.user().error("amp-iframe","Ignoring embed-size request because the resize height is less than 100px. If you are using amp-iframe to display ads, consider using amp-ad instead.",this.element);else{var $newHeight$jscomp$13$$,$newWidth$jscomp$9$$;$height$jscomp$43$$=parseInt($height$jscomp$43$$,10);isNaN($height$jscomp$43$$)||
($newHeight$jscomp$13$$=Math.max($height$jscomp$43$$+(this.element.offsetHeight-this.$iframe_$.offsetHeight),$height$jscomp$43$$));$width$jscomp$46$$=parseInt($width$jscomp$46$$,10);isNaN($width$jscomp$46$$)||($newWidth$jscomp$9$$=Math.max($width$jscomp$46$$+(this.element.offsetWidth-this.$iframe_$.offsetWidth),$width$jscomp$46$$));void 0!==$newHeight$jscomp$13$$||void 0!==$newWidth$jscomp$9$$?this.attemptChangeSize($newHeight$jscomp$13$$,$newWidth$jscomp$9$$).then(function(){void 0!==$newHeight$jscomp$13$$&&
$$jscomp$this$jscomp$526$$.element.setAttribute("height",$newHeight$jscomp$13$$);void 0!==$newWidth$jscomp$9$$&&$$jscomp$this$jscomp$526$$.element.setAttribute("width",$newWidth$jscomp$9$$)},function(){}):this.user().error("amp-iframe","Ignoring embed-size request because no width or height value is provided",this.element)}else this.user().error("amp-iframe","Ignoring embed-size request because this iframe is not resizable",this.element)};
function $JSCompiler_StaticMethods_registerIframeMessaging_$$($JSCompiler_StaticMethods_registerIframeMessaging_$self$$){if($isExperimentOn$$module$src$experiments$$($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.win,"iframe-messaging")){var $element$jscomp$340$$=$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.element,$src$jscomp$42$$=$element$jscomp$340$$.getAttribute("src");$src$jscomp$42$$&&($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$=$Services$$module$src$services$urlForDoc$$($element$jscomp$340$$).parse($src$jscomp$42$$).origin);
$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.registerAction("postMessage",function($element$jscomp$340$$){$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$?$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$iframe_$.contentWindow.postMessage($element$jscomp$340$$.args,$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$):$user$$module$src$log$$().error("amp-iframe",'"postMessage" action is only allowed with "src"attribute with an origin.')},
100);if($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$){var $maxUnexpectedMessages$$=10,$unexpectedMessages$$=0,$listener$jscomp$72$$=function($element$jscomp$340$$){if($element$jscomp$340$$.source===$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$iframe_$.contentWindow)if($element$jscomp$340$$.origin!==$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$)$user$$module$src$log$$().error("amp-iframe",'"message" received from unexpected origin: '+
$element$jscomp$340$$.origin+". Only allowed from: "+$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$targetOrigin_$);else{var $src$jscomp$42$$;$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.getAmpDoc().getRootNode().activeElement!==$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.$iframe_$?$src$jscomp$42$$=!1:($src$jscomp$42$$=$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.win.document.createElement("audio"),$src$jscomp$42$$.play(),$src$jscomp$42$$=$src$jscomp$42$$.paused?
!1:!0);if($src$jscomp$42$$){var $e$jscomp$238_event$jscomp$105$$=$element$jscomp$340$$.data,$sanitized$$;try{$sanitized$$=$parseJson$$module$src$json$$(JSON.stringify($e$jscomp$238_event$jscomp$105$$))}catch($e$160$$){$user$$module$src$log$$().error("amp-iframe",'Data from "message" event must be JSON.');return}$element$jscomp$340$$=$createCustomEvent$$module$src$event_helper$$($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.win,"amp-iframe:message",{data:$sanitized$$});$Services$$module$src$services$actionServiceForDoc$$($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.getAmpDoc()).trigger($JSCompiler_StaticMethods_registerIframeMessaging_$self$$.element,
"message",$element$jscomp$340$$,100)}else $unexpectedMessages$$++,$user$$module$src$log$$().error("amp-iframe",'"message" event may only be triggered from a user gesture.'),$unexpectedMessages$$>=$maxUnexpectedMessages$$&&($user$$module$src$log$$().error("amp-iframe",'Too many non-gesture-triggered "message" events; detaching event listener.'),$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.win.removeEventListener("message",$listener$jscomp$72$$))}};$JSCompiler_StaticMethods_registerIframeMessaging_$self$$.win.addEventListener("message",
$listener$jscomp$72$$)}}}function $setSandbox$$module$extensions$amp_iframe$0_1$amp_iframe$$($iframe$jscomp$48$$,$sandbox$jscomp$3$$){var $allows$$=$sandbox$jscomp$3$$||"";$iframe$jscomp$48$$.setAttribute("sandbox",$allows$$)}var $adSizes$$module$extensions$amp_iframe$0_1$amp_iframe$$=[[300,250],[320,50],[300,50],[320,100]];(function($AMP$jscomp$52$$){$AMP$jscomp$52$$.registerElement("amp-iframe",$AmpIframe$$module$extensions$amp_iframe$0_1$amp_iframe$$)})(self.AMP);})});
//# sourceMappingURL=extensions-amp-iframe-0.1-amp-iframe.js.map

