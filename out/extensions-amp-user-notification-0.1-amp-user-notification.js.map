{
"version":3,
"file":"/./out/extensions-amp-user-notification-0.1-amp-user-notification.js",
"lineCount":11,
"mappings":"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",
"sources":["/src/service/notification-ui-manager.js","/build/amp-user-notification-0.1.css.js","/extensions/amp-user-notification/0.1/amp-user-notification.js","/src/log.js","/src/url.js","/src/service.js","/src/utils/object.js","/src/style.js","/splittable-build/tmp-M34t8K.js"],
"names":["NOTIFICATION_UI_MANAGER","NotificationUiManager","constructor","queueSize_","queuePromise_","Promise","resolve","queueEmptyHandler_","this.queueEmptyHandler_","queueNotEmptyHandler_","this.queueNotEmptyHandler_","onQueueEmpty","handler","onQueueNotEmpty","registerUI","show","promise","then","CSS","TAG","SERVICE_ID","AmpUserNotification","element","ampUserId_","elementId_","deferred","Deferred","dialogPromise_","dialogResolve_","dismissHref_","persistDismissal_","showIfHref_","storageKey_","storagePromise_","urlReplacements_","$jscomp.inherits","isAlwaysFixed","buildCallback","ampdoc","getAmpDoc","Services$$module$src$services.urlReplacementsForDoc","Services$$module$src$services.storageForDoc","user","assert","id","getAttribute","assertHttpsUrl","roleAttribute","setAttribute","persistDismissal","registerAction","dismiss","optoutOfCid_","userNotificationManagerPromise","getServicePromiseForDoc","manager","registerUserNotification","buildGetHref_","ampUserId","showIfHref","expandUrlAsync","href","addParamsToUrl","data","getShowEndpoint_","getReq","credentials","requireAmpResponseSourceOrigin","Services$$module$src$services.xhrFor","win","fetchJson","res","json","postDismissEnpoint_","enctype","buildPostDismissRequest_","elementId","method","body","dict","headers","onGetShowEndpointSuccess_","getCidService_","cid","optOut","reason","dev","error","getAsyncCid_","get","scope","createCookieIfNotPresent","Services$$module$src$services.cidForDoc","shouldShow","isDismissed","dismissed","shouldShowViaXhr_","bind","setStyle","classList","add","getViewport","addToFixedLayer","storage","persistedValue","activate","forceNoPersist","remove","removeFromFixedLayer","set","UserNotificationManager","registry_","Object","create","deferRegistry_","viewer_","Services$$module$src$services.viewerForDoc","documentReadyPromise_","whenReady","managerReadyPromise_","all","whenFirstVisible","notificationUiManagerPromise_","getElementById","warn","getOrCreateDeferById_","getNotification","userNotification","catch","rethrowAsync","installUserNotificationManagerForTesting$$module$extensions$amp_user_notification$0_1$amp_user_notification","installUserNotificationManagerForTesting","registerServiceBuilderForDoc","AMP","registerServiceForDoc","registerElement","module$extensions$amp_user_notification$0_1$amp_user_notification","self"]
}
