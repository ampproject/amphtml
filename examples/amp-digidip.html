<!doctype html>
<html âš¡>
<head>
    <meta charset="utf-8">
    <title>amp-digidip example</title>
    <link rel="canonical" href="amps.html">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
        amp-digidip {
            color: red;
        }
    </style>
    <script async custom-element='amp-digidip' src='/dist/v0/amp-digidip-0.1.max.js'></script>
    <script async src="/dist/amp.js"></script>
</head>
<body>
<amp-digidip layout="nodisplay">
    <script type="application/json">
        {
            "output": "https://visit.digidip.net?pid=110&url=${href}&cid=${data.customerId}&mid=${data.merchantId}&ref=${referrer}&location=${location}&rel=${rel}",
            "section": [
                "#track-section"
            ],
            "attribute": {
                "href": "^((?!\bgmail\\.com\b|\byoutube\\.com\b).)*$",
                "class": "content"
            },
            "vars": {
                "customerId": "12345",
                "merchantId": "3234"
            }
        }
    </script>

</amp-digidip>

    <!--page 1-->
    <amp-story-page id="page1">
        <div>
            <p>Example of merchants links shifting</p>
            <div>
                <div id="track-section">
                    <a class="content" data-vars-merchant-id="1313" href="https://www.amazon.de/Paulaner-Wei%C3%9Fbier-Oktoberfestbier-Ma%C3%9Fkrug-vol/dp/B005HIMJ7W/ref=sr_1_fkmr1_1?ie=UTF8&qid=1542186734&sr=8-1-fkmr1&keywords=Paulaner+1+liter+Bierdose">
                        link to amazon (test digidip redirection)
                    </a>

                    <p>
                        <a class="sidebar" href="https://www.youtube.com">
                            link to youtube (without digidip)
                        </a>
                    </p>

                    <div>
                        <a class="sidebar" rel="skiped" href="https://www.gearbest.com/pest-control/pp_665269.html?wid=1112942">
                            link to gear best sub section (without digidip)
                        </a>
                    </div>
                </div>
                <div>
                    <a class="untrack-link" href="https://www.gearbest.com/pest-control/pp_665269.html?wid=1112942">
                        link to gear best (without digidip)
                    </a>
                </div>
                <div class="also-untrack">
                    <a href="https://www.gearbest.com/pest-control/pp_665269.html?wid=1112942">
                        link to gear best (without digidip)
                    </a>
                </div>
                <div>
                    <a href="/dummy.html">
                        Internal Link (should not be trasnformed)
                    </a>
                </div>
            </div>
        </div>
    </amp-story-page>
</amp-story>
</body>
</html>
