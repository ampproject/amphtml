<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Requests Frame</title>
    <script>
      window.onNewAmpAnalyticsInstance = (instance) => {
        instance.registerAmpAnalyticsEventListener((arrayOfEventStrings) => {
          for (evt of arrayOfEventStrings) {
            // Respond to AMP Analytics event
            console.log("Received event: " + evt);
          }
        });
        // TODO: Could also do something like:
        // instance.sendMessageToCreative('hello');
      };

      // Load the script specified in the iframeâ€™s name attribute:
      script = document.createElement('script');
      script.src = JSON.parse(window.name).scriptSrc;
      document.head.appendChild(script);
      // The script will be loaded, and will call onNewAmpAnalyticsInstance()
    </script>
  </head>
  <!-- The frame will not be visible, so there is no need for a body tag. -->
</html>
