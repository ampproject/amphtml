<!doctype html>
<html âš¡ allow-viewer-render-template>
<head>
    <meta charset="utf-8">
    <title>Add headers to Forms Examples in AMP</title>
    <link rel="canonical" href="//example.com" >
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
    <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
    <style amp-custom>
      
  </style>
</head>
<body>
    <!-- The accessToken will be returned from another request and will bind to form headers -->
    <amp-state id="appState">
        <script type="application/json">
            {
            "accessToken": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6WyJhZG1pbl9hcGlwcm9kdXRvcyIsImFkbWluX2FwaXByb2R1dG9zIl0sImp0aSI6ImI3N2U3ZTI2YTVkNjRkODY5YTAxYzBkODFiZDljNDRiIiwibmJmIjoxNTQ2ODE3MzY4LCJleHAiOjE1NDY4MTg1NjgsImlhdCI6MTU0NjgxNzM2OCwiaXNzIjoiRXhlbXBsb0lzc3VlciIsImF1ZCI6IkV4ZW1wbG9BdWRpZW5jZSJ9.pYh_-pNvPThUbDmS9Q5cfaGHrrlN-EAb8Jz8n4dhF6ddA40_kj8EuVedy_z4Q2ADMLews7mbqij7WGYsmZtfOhA2x2uxkL5w_ChOsU0_WcKlLmBed7QY4lUukizNutNlzzpIzeQe1LGqAlq5Y2xCVScfv5oghzGZ8cgXNwk7Z8PY9Ykjp0ipUBO1ara1nwGOwFzx0KVKCzj7sCoHe6pX43IQOdlviJ57EGQfu96vwvgozzS8Ppgu0rsOHkQu_fnWCfABpTX_zznUXsMLuRYDft1OWjb1zE-cq2l1APCor7vrWDRliCh-nQ-j09AGqE_7UZCNRBhLS48384sWmmx7Sw"
            }
        </script>
    </amp-state>
force <a on="tap:AMP.setState({ appState: { accessToken: 'test' } })">set accessToken</a>     
    <!-- set x-access-token value with amp-bind/amp-state     -->
    <form method="POST"
            [headers]="{'x-access-token' : appState.accessToken, 'x-my-custom-header' : 'I Love AMP' }"
            headers=""
            action-xhr="/form/echo-json/post">
            <fieldset>
                <label>
                    <span>Your name</span>
                    <input type="text" name="name" id="name2" required>
                </label>
                <input type="submit" value="Ok">
            </fieldset>
            <div submit-success>
                <template type="amp-mustache">
                    Success!
                </template>
            </div>
            <div submit-error>
                <template type="amp-mustache">
                    Oops! {{name}}, We apologies something went wrong. Please try again later.
                </template>
            </div>
    </form>
    
    </body>
    </html>
