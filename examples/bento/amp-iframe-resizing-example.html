<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
  </head>
  <body>
    <p>This iframe is initially sized 100x100px.</p>
    <script>
      function postSize(size) {
        // post new height after re-layout
        window.requestAnimationFrame(() => {
          var message = {
            sentinel: 'amp',
            type: 'embed-size',
            height: size,
            width: size,
          };
          console.log('post new embed-height', message);
          window.parent.postMessage(message, '*');
        })
      }

      postSize(300);
    </script>
  </body>
</html>
