{
"version":3,
"file":"/./dist/amp-position-observer-0.1.js",
"lineCount":92,
"mappings":"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",
"sources":["//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/extensions/amp-position-observer/0.1/amp-position-observer.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/event-helper.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/object.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/action-constants.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/layout.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/viewer-impl.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/position-observer/position-observer-impl.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/log.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/position-observer/position-observer-worker.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/layout-rect.js"],
"names":["constructor","element","action_","isVisible_","positionObserver_","topRatio_","bottomRatio_","topMarginExpr_","bottomMarginExpr_","resolvedTopMargin_","resolvedBottomMargin_","viewportRect_","targetId_","initialViewportHeight_","scrollProgress_","runOnce_","firstIterationComplete_","triggerScroll_","adjustedViewportRect","event","createCustomEvent","win","dict","additionalViewportData","top","bottom","trigger","name","LOW","parseAttributes_","ratios","getAttribute","topBottom","trim","split","num","parseFloat","val","margins","validateAndResolveMargin_","parseLength","length","match","m","getLengthNumeral","unit","height","$jscomp.inherits","BaseElement","AmpVisibilityObserver","AMP","buildCallback","Services$$module$src$services.viewerForDoc","viewer","getAmpDoc","whenFirstVisiblePromise_","then","init_","bind","hasAttribute","Services$$module$src$services.actionServiceForDoc","maybeInstallPositionObserver_","installPositionObserverServiceForDoc","getServiceForDoc","whenReady","scene","discoverScene_","assertElement","user","getElementById","parentNode","getBody","document","documentElement","observe","HIGH","positionChanged_","entry","wasVisible","prevViewportHeight","adjustForSmallViewportResize_","viewportRect","viewportHeightChangeDelta","resizeOffset","RESIZE_THRESHOLD","Math","abs","layoutRectLtwh","left","width","recalculateMargins_","rect","applyMargins_","positionRect","relPos","layoutRectsRelativePos","adjViewportRect","INSIDE","relativePos","updateVisibility_","offset","TOP","ratioToUse","BOTTOM","triggerExit_","triggerEnter_","updateScrollProgress_","topOffset","registerElement","TAG"]
}
