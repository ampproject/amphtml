{
"version":3,
"file":"/./dist/amp-share-tracking-0.1.js",
"lineCount":92,
"mappings":"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",
"sources":["//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/extensions/amp-share-tracking/0.1/amp-share-tracking.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/history-impl.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/promise.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/bytes.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/base64.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/object.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/layout.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/experiments.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/log.js"],
"names":["constructor","element","vendorHref_","originalViewerFragment_","getIncomingFragment_","getOriginalViewerFragment_","then","fragment","match","Services$$module$src$services.historyForDoc","getFragment","getHistory_","getAmpDoc","binding_","getOutgoingFragment_","getOutgoingFragmentFromVendor_","tryResolve","bytes","getCryptoRandomBytesArray","getShareTrackingRandomBytes_","win","SHARE_TRACKING_NUMBER_OF_BYTES","Uint8Array","random","Math","i","floor","base64UrlEncodeFromBytes","vendorUrl","fetchJson","Services$$module$src$services.xhrFor","postReq","method","credentials","body","res","json","user","error","TAG","err","updateFragment","replace","hasCapability","viewer_","sendMessageAwaitResponse","dict","Promise","resolve","hash","location","substr","undefined","data","$jscomp.inherits","BaseElement","AmpShareTracking","AMP","isLayoutSupported","layout","NODISPLAY","CONTAINER","buildCallback","isExperimentOn","isExperimentOn_","registerServiceBuilder","reject","createError","getAttribute","shareTrackingFragments","all","results","incomingFragment","outgoingFragment","fragmentResidual","getNewViewerFragment_","length","result","registerElement"]
}
