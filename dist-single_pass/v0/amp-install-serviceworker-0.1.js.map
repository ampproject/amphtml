{
"version":3,
"file":"/./dist/amp-install-serviceworker-0.1.js",
"lineCount":130,
"mappings":"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",
"sources":["//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/extensions/amp-install-serviceworker/0.1/amp-install-serviceworker.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/viewer-impl.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/style.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/url.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/log.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/dom.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/event-helper.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/mode.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/string.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/config.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/utils/object.js","//private/var/folders/_k/v8m5pk_52_jdv3dk86pw414m008j68/T/40693c48cb90d369aa1f454d855ef21b/src/service/url-impl.js"],
"names":["constructor","element","iframeSrc_","urlRewriter_","isSafari_","isSafari","Services$$module$src$services.platformFor","win","whenLoadedAndVisiblePromise_","Promise","all","loadPromise","Services$$module$src$services.viewerForDoc","whenFirstVisible","getAmpDoc","whenFirstVisiblePromise_","insertIframe_","mutateElement","toggle","iframe","document","createElement","setAttribute","src","appendChild","maybeInstallUrlRewrite_","isSingleDoc","ampdoc","urlService","Services$$module$src$services.urlForDoc","getUrlService_","parse","location","href","urlMatch","getAttribute","shellUrl","removeFragment","urlMatchExpr","RegExp","e","user","createError","UrlRewriter_","isSecure","waitToPreloadShell_","then","preloadShell_","id","loaded","removeElement","urlMatchExpr_","shellUrl_","urlService_","shellLoc_","listen","getRootNode","handle_","bind","install","options","hasAttribute","scope","navigator","serviceWorker","register","registration","getMode","development","info","TAG","installingSw","installing","addEventListener","evt","target","state","performServiceWorkerOptimizations","active","error","sendAmpScriptToSwOnFirstVisit","prefetchOutgoingLinks","ampScriptsUsed","performance","getEntriesByType","filter","item","initiatorType","startsWith","name","urls","cdn","map","script","activeSW","postMessage","JSON","stringify","dict","links","call","querySelectorAll","link","supportsPrefetch","forEach","linkTag","head","doc","fakeLink","relList","supports","$jscomp.inherits","BaseElement","AmpInstallServiceWorker","AMP","buildCallback","isProxyOrigin","origin","iframeSrc","docInfo","Services$$module$src$services.documentInfoForDoc","sourceUrl","canonicalUrl","event","defaultPrevented","closestByTag","tgtLoc","pathname","test","encodeURIComponent","search","hash","registerElement"]
}
