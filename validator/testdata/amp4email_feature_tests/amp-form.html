<!--
  Copyright 2015 The AMP HTML Authors. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS-IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the license.
-->
<!--
  Test Description:
  Tests the additional restrictions AMP4EMAIL sets on AMP-FORM.
-->
<!doctype html>
<html âš¡4email>
<head>
  <meta charset="utf-8">
  <style amp4email-boilerplate>body{visibility:hidden}</style>
  <script async src="https://cdn.ampproject.org/v0.js"></script>
  <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
  <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
</head>
<body>
<!--
The action attribute is disallowed. The target is disallowed.
-->
<form method="GET"
  action="/components/amp-form/submit-form"
  target="_top">
  <div>
    <input name="googlesearch">
  </div>
  <input type="submit" value="OK">
</form>

<!--
 Only https protocol is supported.
-->
<form method="GET"
  action-xhr="http://someserver.com/endpoint">
  <div>
    <input name="googlesearch">
  </div>
  <input type="submit" value="OK">
</form>

<!--
 This example is fine.
-->
<form method="GET"
  action-xhr="https://someserver.com/endpoint">
  <div>
    <input name="googlesearch">
  </div>
  <input type="submit" value="OK">
</form>

<!--
 This example is fine.
-->
<form method="POST"
  action-xhr="https://someserver.com/endpoint">
  <div>
    <input name="googlesearch">
  </div>
  <input type="submit" value="OK">
</form>

<!--
 Mustaches variables are disallowed in action-xhr.
-->
<template type="amp-mustache">
  <form method="GET"
    action-xhr="{{foo}}">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

<template type="amp-mustache">
  <form method="GET"
    action-xhr="{{foo}}{{bar}}">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

<template type="amp-mustache">
  <form method="GET"
    action-xhr="foo{{bar">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

<template type="amp-mustache">
  <form method="GET"
    action-xhr="foo}}bar">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

<template type="amp-mustache">
  <form method="GET"
    action-xhr="{{">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

<template type="amp-mustache">
  <form method="GET"
    action-xhr="}}">
    <div>
      <input name="googlesearch">
    </div>
    <input type="submit" value="OK">
  </form>
</template>

</body>
</html>
