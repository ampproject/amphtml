<!doctype html>
<html>
<head>
  <title>AMP Dev Server</title>
  <meta charset="utf-8">
  <!-- main_style -->
</head>
<body>
  <wrap>
    <header>
      <h1 class="amp-logo">AMP</h1>
      <div class="right-of-logo">
        <!-- right_of_logo -->
      </div>
      <ul>
        <li>
          <a href="https://github.com/ampproject/amphtml/blob/master/contributing/DEVELOPING.md"
              target="_blank">
            Developing
          </a>
        </li>
        <li class="divider">
          <a href="https://github.com/ampproject/amphtml/blob/master/CONTRIBUTING.md"
              target="_blank">
            Contributing
          </a>
        </li>
        <li>
          <a href="https://github.com/ampproject/amphtml/" target="_blank">
            Github
          </a>
        </li>
        <li>
          <a href="https://travis-ci.org/ampproject/amphtml" target="_blank">
            Travis
          </a>
        </li>
        <li>
          <a href="https://percy.io/ampproject/amphtml/" target="_blank">
            Percy
          </a>
        </li>
      </ul>
    </header>
    <!-- bottom_of_header -->
  </wrap>
  <div class="file-list-container">
    <wrap>
      <h3 class="code" id="basepath">
        <!-- basepath -->
        <a href="https://github.com/ampproject/amphtml/find/master"
            target="_blank"
            class="find-icon">
          Find file
        </a>
      </h3>
      <div class="push-right-after-heading">
        <form hidden id="examples-mode-form">
          <label for="examples-mode-select">
            Document mode:
            <select id="examples-mode-select">
              <option value="/" selected>standard</option>
              <option value="/a4a/">a4a</option>
              <option value="/a4a-3p/">a4a-3p</option>
              <option value="/inabox/1/">inabox</option>
            </select>
          </label>
        </form>
        <a href="/~" class="underlined">List root directory</a>
      </div>
      <ul class="file-list"><!-- listing --></ul>
    </wrap>
  </div>
  <script>
    // TODO(alanorozco): Write this in ES2015 to be transpiled.
    (function() {
      'use strict';

      function maybeEnableExampleModeSelect() {
        var basepath = document.getElementById('basepath');
        if (!/^\/examples/.test(basepath.innerText)) {
          return;
        }
        var form = document.querySelector('#examples-mode-form');
        var select = document.querySelector('#examples-mode-select');
        var links = document.querySelectorAll('.file-link');

        form.removeAttribute('hidden');

        select.addEventListener('change', function (e) {
          var prefix = e.target.value;
          for (var i = 0; i < links.length; i++) {
            var sufix = links[i].getAttribute('data-default');
            if (!/\.html$/.test(sufix)) {
              continue;
            }
            links[i].href = prefix + sufix;
          }
        });
      }

      maybeEnableExampleModeSelect();
    })();
  </script>
  <div class="center">
    Built with ðŸ’™  by
    <a href="https://ampproject.org" class="underlined">the AMP Project</a>.
  </div>
</body>
</html>
