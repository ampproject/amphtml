(self.AMP=self.AMP||[]).push({n:"amp-geo",v:"1912180046560",f:(function(AMP,_){
var h="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},l;if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var m;a:{var n={a:!0},p={};try{p.__proto__=n;m=p.a;break a}catch(a){}m=!1}l=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=l;function r(){var a,b;this.promise=new Promise(function(c,d){a=c;b=d});this.resolve=a;this.reject=b};function t(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var u=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function v(a){var b=Object.create(null);if(!a)return b;for(var c;c=u.exec(a);){var d=t(c[1],c[1]),e=c[2]?t(c[2].replace(/\+/g," "),c[2]):"";b[d]=e}return b};var w="";
function x(a){var b=a||self;if(b.__AMP_MODE)var c=b.__AMP_MODE;else{c=b;var d=self.AMP_CONFIG||{},e=!!d.test||!1,f=v(c.location.originalHash||c.location.hash);d=d.spt;var k=v(c.location.search);w||(w=c.AMP_CONFIG&&c.AMP_CONFIG.v?c.AMP_CONFIG.v:"011912180046560");c={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(f.development)||c.AMP_DEV_MODE),examiner:"2"==f.development,geoOverride:f["amp-geo"],minified:!0,lite:void 0!=k.amp_lite,test:e,log:f.log,version:"1912180046560",rtvVersion:w,
singlePassType:d};c=b.__AMP_MODE=c}return c};var y=Object.prototype.toString;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function C(){if(z.dev)return z.dev;throw Error("failed to call initLogConstructor");};var D=Object.prototype.hasOwnProperty;(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});function E(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=
e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0)}Object.assign(c,F(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length)for(d=a.AMP_CONFIG["allow-url-opt-in"],a=v(a.location.originalHash||a.location.hash),e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}var k=c;return!!k[b]}
function F(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){C().warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var G={},H=(G["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},G);function I(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=J(b,"ampdoc").getAmpDoc(a)}return a}function J(a,b){K(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function K(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function L(a){return"SCRIPT"==a.tagName&&a.hasAttribute("type")&&"APPLICATION/JSON"==a.getAttribute("type").toUpperCase()};var N={"preset-eea":"AT BE BG HR CY CZ DK EE FI FR DE GR HU IS IE IT LV LI LT LU MT NL NO PL PT RO SK SI ES SE GB AX IC EA GF PF TF GI GP GG JE MQ YT NC RE BL MF PM SJ VA WF EZ CH".split(" ")};function O(a,b){try{return JSON.parse(a)}catch(c){return b&&b(c),null}};var P=/amp-iso-country-(\w+)/;function Q(a){a=AMP.BaseElement.call(this,a)||this;a.m=0;a.o=!1;a.h="unknown";a.j=[];a.l=[];return a}var R=AMP.BaseElement;Q.prototype=h(R.prototype);Q.prototype.constructor=Q;if(q)q(Q,R);else for(var S in R)if("prototype"!=S)if(Object.defineProperties){var T=Object.getOwnPropertyDescriptor(R,S);T&&Object.defineProperty(Q,S,T)}else Q[S]=R[S];Q.w=R.prototype;Q.prototype.prerenderAllowed=function(){return!0};
Q.prototype.buildCallback=function(){var a=this.element.children;a.length&&U(1===a.length&&L(a[0]),'amp-geo can only have one <script type="application/json"> child');a=a.length?O(a[0].textContent,function(){return U(!1,"amp-geo Unable to parse JSON")}):{};var b=V(this,a||{});W.resolve(b)};function U(a,b){if(!a){W.resolve(null);if(!z.user)throw Error("failed to call initLogConstructor");return z.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}return a}
function X(a,b){var c=b.getBody().className.match(P),d=/^(\w{2})?\s*/.exec("us                          ");if(b=x(a.win).geoOverride)b=a.win,b=!(!b.AMP_CONFIG||!b.AMP_CONFIG.canary);if(b&&/^\w+$/.test(x(a.win).geoOverride))a.m=2,a.h=x(a.win).geoOverride.toLowerCase();else{if(b=c){b=a.element;var e=b.ownerDocument.defaultView,f=e.__AMP_TOP||(e.__AMP_TOP=e),k=e!=f;if(E(f,"ampdoc-fie")){f.__AMP_EXPERIMENT_BRANCHES=f.__AMP_EXPERIMENT_BRANCHES||{};for(g in H)if(D.call(H,g)&&!D.call(f.__AMP_EXPERIMENT_BRANCHES,
g))if(H[g].isTrafficEligible&&H[g].isTrafficEligible(f)){if(!f.__AMP_EXPERIMENT_BRANCHES[g]&&E(f,g)){var M=H[g].branches;f.__AMP_EXPERIMENT_BRANCHES[g]=M[Math.floor(Math.random()*M.length)]||null}}else f.__AMP_EXPERIMENT_BRANCHES[g]=null;var g="21065002"===(f.__AMP_EXPERIMENT_BRANCHES?f.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else g=!1;k&&!g?g=K(e,"url")?J(e,"url"):null:(g=I(b),g=I(g),g=g.isSingleDoc()?g.win:g,g=K(g,"url")?J(g,"url"):null);b=!g.isProxyOrigin(a.win.location)}b?(a.m=1,a.h=c[1]):
d[1]?(a.m=0,a.h=d[1]):""===d[0]&&(a.o=!0,C().error("amp-geo","GEONOTPATCHED: amp-geo served unpatched, ISO country not set"))}}function Y(a,b){var c=b.ISOCountryGroups,d="<amp-geo> ISOCountryGroups";c&&(U("[object Object]"===y.call(c),d+" must be an object"),a.l=Object.keys(c),a.l.forEach(function(b){U(/^[a-z]+[a-z0-9]*$/i.test(b)&&!/^amp/.test(b),d+"["+b+"] name is invalid");U(Array.isArray(c[b]),d+"["+b+"] must be an array");Z(a,c[b])&&a.j.push(b)}))}
function Z(a,b){var c=b.reduce(function(a,b){if(/^preset-/.test(b))return U(Array.isArray(N[b]),"<amp-geo> preset "+b+" not found"),a.concat(N[b]);a.push(b);return a},[]).map(function(a){return a.toLowerCase()});return c.includes(a.h)}function aa(a){var b=a.classList,c=[],d=/^amp-iso-country-|^amp-geo-group-/i;for(a=b.length-1;0<a;a--)d.test(b[a])&&c.push(b[a]);return c}
function V(a,b){var c=a.getAmpDoc(),d={};return c.whenReady().then(function(){return c.waitForBodyOpen()}).then(function(e){X(a,c);Y(a,b);var f=[];switch(a.m){case 2:f=aa(e);case 0:d.ISOCountry=a.h;var k=a.j.map(function(a){d[a]=!0;return"amp-geo-group-"+a});a.j.length||k.push("amp-geo-no-group");a.o&&k.push("amp-geo-error");d.ISOCountryGroups=a.j;k.push("amp-iso-country-"+a.h);a.mutateElement(function(){var a=e.classList;f.push("amp-geo-pending");f.forEach(function(b){a.remove(b)});k.forEach(function(b){return a.add(b)});
if(b.AmpBind){var g=c.getElementById("ampGeo");g&&g.parentNode.removeChild(g);var A=c.win.document.createElement("amp-state"),B=c.win.document.createElement("script");B.setAttribute("type","application/json");B.textContent=JSON.stringify(d);A.appendChild(B);A.id="ampGeo";e.appendChild(A)}},e)}return{ISOCountry:a.h,matchedISOCountryGroups:a.j,allISOCountryGroups:a.l,isInCountryGroup:a.isInCountryGroup.bind(a)}})}
Q.prototype.isInCountryGroup=function(a){var b=this,c=a.trim().split(/,\s*/);return c.filter(function(a){return 0<=b.l.indexOf(a)}).length!==c.length?1:0<c.filter(function(a){return 0<=b.j.indexOf(a)}).length?2:3};var W=null;(function(a){W=new r;a.registerElement("amp-geo",Q);a.registerServiceForDoc("geo",function(){return W.promise})})(self.AMP);
})});

//# sourceMappingURL=amp-geo-0.1.js.map
